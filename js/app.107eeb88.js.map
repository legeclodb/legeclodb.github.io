{"version":3,"file":"js/app.107eeb88.js","mappings":"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","sources":["webpack://legeclodb/./src/App.vue","webpack://legeclodb/src/App.vue","webpack://legeclodb/./src/App.vue?c036","webpack://legeclodb/./src/App.vue?0e40","webpack://legeclodb/./src/components/Info.vue","webpack://legeclodb/./src/components/Navigation.vue","webpack://legeclodb/./src/components/utils.js","webpack://legeclodb/src/components/Navigation.vue","webpack://legeclodb/./src/components/Navigation.vue?25be","webpack://legeclodb/./src/components/Navigation.vue?b4ab","webpack://legeclodb/./src/components/common.js","webpack://legeclodb/src/components/Info.vue","webpack://legeclodb/./src/components/Info.vue?916b","webpack://legeclodb/./src/components/Info.vue?1577","webpack://legeclodb/./src/components/MainCharacters.vue","webpack://legeclodb/src/components/MainCharacters.vue","webpack://legeclodb/./src/components/MainCharacters.vue?e35d","webpack://legeclodb/./src/components/MainCharacters.vue?bdc7","webpack://legeclodb/./src/components/SupportCharacters.vue","webpack://legeclodb/src/components/SupportCharacters.vue","webpack://legeclodb/./src/components/SupportCharacters.vue?79a4","webpack://legeclodb/./src/components/SupportCharacters.vue?2ae8","webpack://legeclodb/./src/components/Items.vue","webpack://legeclodb/src/components/Items.vue","webpack://legeclodb/./src/components/Items.vue?10d9","webpack://legeclodb/./src/components/Items.vue?2880","webpack://legeclodb/./src/components/Lookup.vue","webpack://legeclodb/./src/components/simulator/CombinationBufSimulator.vue","webpack://legeclodb/./src/components/parts/ChrSelector.vue","webpack://legeclodb/src/components/parts/ChrSelector.vue","webpack://legeclodb/./src/components/parts/ChrSelector.vue?5bd2","webpack://legeclodb/./src/components/parts/ChrSelector.vue?adbf","webpack://legeclodb/./src/components/simulator/lookup.js","webpack://legeclodb/./src/components/parts/ItemPopovers.vue","webpack://legeclodb/src/components/parts/ItemPopovers.vue","webpack://legeclodb/./src/components/parts/ItemPopovers.vue?8d04","webpack://legeclodb/./src/components/parts/ItemPopovers.vue?2641","webpack://legeclodb/./src/components/parts/ItemPopovers.js","webpack://legeclodb/src/components/simulator/CombinationBufSimulator.vue","webpack://legeclodb/./src/components/simulator/CombinationBufSimulator.vue?befc","webpack://legeclodb/./src/components/simulator/CombinationBufSimulator.vue?d339","webpack://legeclodb/./src/components/simulator/SelfBufSimulator.vue","webpack://legeclodb/src/components/simulator/SelfBufSimulator.vue","webpack://legeclodb/./src/components/simulator/SelfBufSimulator.vue?1236","webpack://legeclodb/./src/components/simulator/SelfBufSimulator.vue?8643","webpack://legeclodb/src/components/Lookup.vue","webpack://legeclodb/./src/components/Lookup.vue?7b14","webpack://legeclodb/./src/components/Lookup.vue?6bb9","webpack://legeclodb/./src/components/About.vue","webpack://legeclodb/./src/components/simulator/DamageSimulator.vue","webpack://legeclodb/src/components/simulator/DamageSimulator.vue","webpack://legeclodb/./src/components/simulator/DamageSimulator.vue?119d","webpack://legeclodb/./src/components/simulator/DamageSimulator.vue?e9b4","webpack://legeclodb/./src/components/simulator/BattlePointSimulator.vue","webpack://legeclodb/src/components/simulator/BattlePointSimulator.vue","webpack://legeclodb/./src/components/simulator/BattlePointSimulator.vue?3fda","webpack://legeclodb/./src/components/simulator/BattlePointSimulator.vue?f1f5","webpack://legeclodb/./src/components/simulator/StatusSimulator.vue","webpack://legeclodb/./src/components/parts/ItemSelector.vue","webpack://legeclodb/src/components/parts/ItemSelector.vue","webpack://legeclodb/./src/components/parts/ItemSelector.vue?4acb","webpack://legeclodb/./src/components/parts/ItemSelector.vue?bba7","webpack://legeclodb/./src/components/parts/SkillSelector.vue","webpack://legeclodb/src/components/parts/SkillSelector.vue","webpack://legeclodb/./src/components/parts/SkillSelector.vue?0baa","webpack://legeclodb/./src/components/parts/SkillSelector.vue?5cc1","webpack://legeclodb/src/components/simulator/StatusSimulator.vue","webpack://legeclodb/./src/components/simulator/StatusSimulator.vue?5c9a","webpack://legeclodb/./src/components/simulator/StatusSimulator.vue?370f","webpack://legeclodb/./src/components/parts/MessageBoard.vue","webpack://legeclodb/src/components/parts/MessageBoard.vue","webpack://legeclodb/./src/components/parts/MessageBoard.vue?8e09","webpack://legeclodb/./src/components/parts/MessageBoard.vue?d521","webpack://legeclodb/src/components/About.vue","webpack://legeclodb/./src/components/About.vue?1f31","webpack://legeclodb/./src/components/About.vue?5a46","webpack://legeclodb/./src/components/Misc.vue","webpack://legeclodb/src/components/Misc.vue","webpack://legeclodb/./src/components/Misc.vue?490f","webpack://legeclodb/./src/components/Misc.vue?ea14","webpack://legeclodb/./src/components/Battle.vue","webpack://legeclodb/./src/components/simulator/battle_globals.js","webpack://legeclodb/./src/components/simulator/battle_skill.js","webpack://legeclodb/./src/components/simulator/battle_unit.js","webpack://legeclodb/./src/components/simulator/battle.js","webpack://legeclodb/src/components/Battle.vue","webpack://legeclodb/./src/components/Battle.vue?4259","webpack://legeclodb/./src/components/Battle.vue?936c","webpack://legeclodb/./src/router.js","webpack://legeclodb/./src/main.js","webpack://legeclodb/webpack/bootstrap","webpack://legeclodb/webpack/runtime/chunk loaded","webpack://legeclodb/webpack/runtime/compat get default export","webpack://legeclodb/webpack/runtime/define property getters","webpack://legeclodb/webpack/runtime/global","webpack://legeclodb/webpack/runtime/hasOwnProperty shorthand","webpack://legeclodb/webpack/runtime/make namespace object","webpack://legeclodb/webpack/runtime/jsonp chunk loading","webpack://legeclodb/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view />\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'App',\n  components: {\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin: 0;\n}\n</style>\n","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7c3eba16\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=7c3eba16&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\",on:{\"mousemove\":_vm.onMouseMove}},[_c('div',{staticClass:\"header\",class:{ 'hidden': !_vm.showHeader }},[_c('Navigation')],1),_c('div',{staticClass:\"content\",staticStyle:{\"margin-top\":\"70px\"},style:(_vm.style)},[_vm._m(0)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"about\"},[_c('p',[_vm._v(\" 2024/04 管理人引退により更新を停止しました。これまでありがとうございました。\"),_c('br'),_vm._v(\" このサイトと github のソースは資料用にそのまま公開しておきます。 \")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-navbar',{attrs:{\"type\":\"dark\",\"variant\":\"dark\",\"id\":\"navigation\"}},[_c('b-navbar-brand',{attrs:{\"to\":\"/\"}},[_vm._v(\"れじぇくろDB\")]),_c('b-navbar-nav',[_c('b-nav-item',{attrs:{\"to\":\"/main.html\"}},[_vm._v(\"メインキャラ\")]),_c('b-nav-item',{attrs:{\"to\":\"/support.html\"}},[_vm._v(\"サポートキャラ\")]),_c('b-nav-item',{attrs:{\"to\":\"/item.html\"}},[_vm._v(\"アイテム\")]),_c('b-nav-item',{attrs:{\"to\":\"/lookup.html\"}},[_vm._v(\"組み合わせ検索\")]),_c('b-nav-item',{attrs:{\"to\":\"/battle.html\"}},[_vm._v(\"バトルシミュレータ\")]),_c('b-nav-item',{attrs:{\"to\":\"/about.html\"}},[_vm._v(\"解説\")])],1),_c('b-navbar-nav',{staticClass:\"ml-auto\"},[_c('b-nav-item',{staticClass:\"icon\",attrs:{\"href\":\"https://github.com/legeclodb/legeclodb\",\"target\":\"_blank\"}},[_c('svg',{staticClass:\"navbar-nav-svg\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 32 32\",\"width\":\"24\",\"height\":\"24\",\"focusable\":\"false\",\"role\":\"img\"}},[_c('title',[_vm._v(\"GitHub\")]),_c('g',{attrs:{\"fill\":\"currentColor\"}},[_c('path',{attrs:{\"fill-rule\":\"evenodd\",\"clip-rule\":\"evenodd\",\"d\":\"M16,0.4c-8.8,0-16,7.2-16,16c0,7.1,4.6,13.1,10.9,15.2 c0.8,0.1,1.1-0.3,1.1-0.8c0-0.4,0-1.4,0-2.7c-4.5,1-5.4-2.1-5.4-2.1c-0.7-1.8-1.8-2.3-1.8-2.3c-1.5-1,0.1-1,0.1-1 c1.6,0.1,2.5,1.6,2.5,1.6c1.4,2.4,3.7,1.7,4.7,1.3c0.1-1,0.6-1.7,1-2.1c-3.6-0.4-7.3-1.8-7.3-7.9c0-1.7,0.6-3.2,1.6-4.3 c-0.2-0.4-0.7-2,0.2-4.2c0,0,1.3-0.4,4.4,1.6c1.3-0.4,2.6-0.5,4-0.5c1.4,0,2.7,0.2,4,0.5C23.1,6.6,24.4,7,24.4,7 c0.9,2.2,0.3,3.8,0.2,4.2c1,1.1,1.6,2.5,1.6,4.3c0,6.1-3.7,7.5-7.3,7.9c0.6,0.5,1.1,1.5,1.1,3c0,2.1,0,3.9,0,4.4 c0,0.4,0.3,0.9,1.1,0.8C27.4,29.5,32,23.5,32,16.4C32,7.6,24.8,0.4,16,0.4z\"}})])])])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const MessageServer = \"https://i-saint.sakura.ne.jp/legeclodb/replay/index.cgi\";\r\nexport const ReplayServer = \"https://i-saint.sakura.ne.jp/legeclodb/replay/index.cgi\";\r\n\r\nexport class BitFlags {\r\n  constructor(arg) {\r\n    if (typeof arg == \"number\") {\r\n      const size = arg;\r\n      // (size / 32) + (size % 32 ? 1 : 0)\r\n      // 整数のまま処理するためビット演算\r\n      const n = (size >> 5) + (size & 31 ? 1 : 0);\r\n      this.data_ = new Uint32Array(n);\r\n    }\r\n    else if (arg.constructor === this.constructor) {\r\n      const parent = arg;\r\n      this.data_ = new Uint32Array(parent.data_);\r\n    }\r\n    else {\r\n      throw \"BitFlags(??????)\";\r\n    }\r\n  }\r\n  get(i) {\r\n    const byte = i >> 5;\r\n    const bit = i & 31;\r\n    return (this.data_[byte] & (1 << bit)) != 0;\r\n  }\r\n  set(i, v) {\r\n    const byte = i >> 5;\r\n    const bit = i & 31;\r\n    if (v)\r\n      this.data_[byte] |= 1 << bit;\r\n    else\r\n      this.data_[byte] &= ~(1 << bit);\r\n  }\r\n}\r\n\r\nexport class URLSerializer {\r\n  constructor(data) {\r\n    for (const k in data) {\r\n      this[k] = data[k];\r\n    }\r\n  }\r\n\r\n  serialize() {\r\n    let params = [];\r\n    for (const k in this) {\r\n      params.push(k + \"=\" + this[k].toString());\r\n    }\r\n    return \"?\" + (params.length != 0 ? params.join(\"&\") : \"\");\r\n  }\r\n\r\n  deserialize(url) {\r\n    let numHandled = 0;\r\n    let q = url.match(/\\?([^#]+)/);\r\n    if (q) {\r\n      let params = q[1].split('&');\r\n      for (let param of params) {\r\n        let kvp = param.split('=');\r\n        if (kvp.length == 2) {\r\n          if (typeof this[kvp[0]] === \"number\")\r\n            this[kvp[0]] = parseInt(kvp[1]);\r\n          else\r\n            this[kvp[0]] = decodeURIComponent(kvp[1]);\r\n          ++numHandled;\r\n        }\r\n      }\r\n    }\r\n    return numHandled;\r\n  }\r\n}\r\n\r\nexport function getSubscribedThreads() {\r\n  let r = [];\r\n  for (let i = 0; i < localStorage.length; i++) {\r\n    const k = localStorage.key(i);\r\n    if (k.startsWith('subscribe.')) {\r\n      let v = k.replace('subscribe.', '');\r\n      if (v != \"lastcheck\") {\r\n        r.push(v);\r\n      }\r\n    }\r\n  }\r\n  return r;\r\n}\r\nexport function getSubscribeLastCheckTime() {\r\n  let v = localStorage.getItem('subscribe.lastcheck');\r\n  return v ? new Date(parseInt(v)) : null;\r\n}\r\nexport function updateSubscribeLastCheck() {\r\n  localStorage.setItem('subscribe.lastcheck', new Date().getTime());\r\n}\r\n\r\n\r\nexport function unique(array, compare = (a, b) => a === b) {\r\n  return array.filter((a, i) => {\r\n    return array.findIndex(b => compare(a, b)) === i;\r\n  });\r\n}\r\nexport function count(iterable, cond) {\r\n  let r = 0;\r\n  for (const e of iterable) {\r\n    if (cond(e)) {\r\n      ++r;\r\n    }\r\n  }\r\n  return r;\r\n}\r\nexport function call(func, ...args) {\r\n  if (func) {\r\n    func(...args);\r\n  }\r\n}\r\n\r\nexport function maxElement(iterable, comparator = (a, b) => a > b) {\r\n  let r = undefined;\r\n  for (let v of iterable) {\r\n    if (r === undefined || comparator(v, r)) {\r\n      r = v;\r\n    }\r\n  }\r\n  return r;\r\n}\r\nexport function minElement(iterable, comparator = (a, b) => a < b) {\r\n  return maxElement(iterable, comparator);\r\n}\r\n\r\nexport function *enumerate(...arrays) {\r\n  for (let array of arrays) {\r\n    if (array) {\r\n      yield* array;\r\n    }\r\n  }\r\n}\r\n\r\nexport function timedLoop(count, interval, callback, onEnd = null) {\r\n  let i = 0;\r\n  const body = () => {\r\n    let end = false;\r\n    if (i < count) {\r\n      if (callback(i) === false) {\r\n        end = true;\r\n      }\r\n      else {\r\n        ++i;\r\n        setTimeout(body, interval);\r\n      }\r\n    }\r\n    else {\r\n      end = true;\r\n    }\r\n    if (end && onEnd) {\r\n      onEnd();\r\n    }\r\n  }\r\n  body();\r\n}\r\nexport function timedEach(iterable, interval, callback, onEnd = null) {\r\n  let iter = iterable[Symbol.iterator]();\r\n  let result = iter.next();\r\n  let i = 0;\r\n  const body = () => {\r\n    let end = false;\r\n    if (!result.done) {\r\n      if (callback(result.value, i++) === false) {\r\n        end = true;\r\n      }\r\n      else {\r\n        result = iter.next();\r\n        setTimeout(body, interval);\r\n      }\r\n    }\r\n    else {\r\n      end = true;\r\n    }\r\n    if (end && onEnd) {\r\n      onEnd();\r\n    }\r\n  }\r\n  body();\r\n}\r\n\r\nexport function toSQLDateTime(date) {\r\n  let time = typeof (date) === 'number' ? date : date.getTime();\r\n  let a9h = new Date(time + (9 * 60 * 60 * 1000)); // +9H\r\n  return a9h.toISOString().slice(0, -5).replace('T', ' '); // YYYY-MM-DD HH:mm:ss\r\n}\r\n\r\n\r\n// Infinity 対応版 JSON.stringify()\r\nexport function toJson(data) {\r\n  const conv = (k, v) => {\r\n    if (v === Number.POSITIVE_INFINITY) {\r\n      return \"Infinity\";\r\n    }\r\n    return v;\r\n  };\r\n  return JSON.stringify(data, conv);\r\n}\r\n// Infinity 対応版 JSON.parse()\r\nexport function fromJson(str) {\r\n  const conv = (k, v) => {\r\n    if (v === \"Infinity\") {\r\n      return Number.POSITIVE_INFINITY;\r\n    }\r\n    return v;\r\n  };\r\n  return JSON.parse(str, conv);\r\n}\r\n// JSON 由来のオブジェクトに↑と同等の変換をかける\r\nexport function sanitizeJsonObject(obj) {\r\n  const conv = (v) => {\r\n    if (Array.isArray(v) || typeof (v) == \"object\") {\r\n      return sanitizeJsonObject(v);\r\n    }\r\n    else if (v === \"Infinity\") {\r\n      return Number.POSITIVE_INFINITY;\r\n    }\r\n    else {\r\n      return v;\r\n    }\r\n  };\r\n\r\n  if (Array.isArray(obj)) {\r\n    for (let i = 0; i < obj.length; ++i) {\r\n      obj[i] = conv(obj[i]);\r\n    }\r\n  }\r\n  else if (typeof (obj) == \"object\") {\r\n    for (let k in obj) {\r\n      obj[k] = conv(obj[k]);\r\n    }\r\n  }\r\n  return obj;\r\n}\r\n\r\n// fileType: \".json\" など\r\nexport function openFileDialog(fileType, callback) {\r\n  let input = window.document.createElement(\"input\");\r\n  input.type = \"file\";\r\n  input.accept = fileType;\r\n  input.onchange = function () {\r\n    callback(input.files[0]);\r\n    input.remove();\r\n    return false;\r\n  };\r\n  input.click();\r\n}\r\n\r\n// data: String or Uint8Array or Object\r\n// Object の場合 json 化される。\r\nexport function download(filename, data) {\r\n  if (typeof (data) == 'string' || data instanceof Uint8Array) {\r\n    data = new Blob([data]);\r\n  }\r\n  else if (typeof (data) == 'object') {\r\n    data = new Blob([toJson(data)]);\r\n  }\r\n\r\n  let u = window.URL.createObjectURL(data);\r\n  let a = document.createElement('a');\r\n  a.href = u;\r\n  a.download = filename;\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  window.URL.revokeObjectURL(u);\r\n}\r\n\r\nexport function stringToBytes(str) {\r\n  return (new TextEncoder()).encode(str);\r\n}\r\nexport function bytesToString(bin) {\r\n  return (new TextDecoder()).decode(bin);\r\n}\r\n\r\nexport function concatBytes(arrays) {\r\n  const len = arrays.reduce((acc, arr) => acc + arr.length, 0);\r\n  const result = new Uint8Array(len);\r\n  let offset = 0;\r\n  for (const arr of arrays) {\r\n    result.set(arr, offset);\r\n    offset += arr.length;\r\n  }\r\n  return result;\r\n}\r\n\r\n// data: String or ArrayBuffer\r\nexport async function gzCompress(data) {\r\n  if (typeof (data) == 'string') {\r\n    data = stringToBytes(data);\r\n  }\r\n\r\n  const inputStream = new ReadableStream({\r\n    start(controller) {\r\n      controller.enqueue(data);\r\n      controller.close();\r\n    }\r\n  });\r\n  // eslint-disable-next-line\r\n  const outputStream = inputStream.pipeThrough(new CompressionStream('gzip'));\r\n  const reader = outputStream.getReader();\r\n  let chunks = [];\r\n\r\n  try {\r\n    while (true) {\r\n      const { done, value } = await reader.read();\r\n      if (done) break;\r\n      chunks.push(value);\r\n    }\r\n    return concatBytes(chunks);\r\n  }\r\n  finally {\r\n    reader.releaseLock();\r\n  }\r\n}\r\n\r\n// data: ArrayBuffer\r\nexport async function gzDecompress(data) {\r\n  // eslint-disable-next-line\r\n  const stream = new Response(data).body.pipeThrough(new DecompressionStream('gzip'));\r\n  const reader = stream.getReader();\r\n  let chunks = [];\r\n\r\n  try {\r\n    while (true) {\r\n      const { done, value } = await reader.read();\r\n      if (done) break;\r\n      chunks.push(value);\r\n    }\r\n    return concatBytes(chunks);\r\n  }\r\n  finally {\r\n    reader.releaseLock();\r\n  }\r\n}\r\n\r\n// data: ArrayByffer\r\nexport function gzIsCompressedData(data) {\r\n  const check = (bytes) => {\r\n    // gzip 圧縮されたデータは最初の 2 byte が 0x1F 0x8B になっている\r\n    return bytes.length >= 2 && bytes[0] === 0x1F && bytes[1] === 0x8B;\r\n  };\r\n  if (data instanceof Uint8Array) {\r\n    return check(data);\r\n  }\r\n  else {\r\n    return check(new Uint8Array(data));\r\n  }\r\n}\r\n\r\nexport function idbInitialize(dbName, storeNames, version) {\r\n  let req = window.indexedDB.open(dbName, version);\r\n  req.onupgradeneeded = (event) => {\r\n    let db = event.target.result;\r\n    for (const name of storeNames) {\r\n      if (!db.objectStoreNames.contains(name)) {\r\n        db.createObjectStore(name, { keyPath: 'id' })\r\n      }\r\n    }\r\n  }\r\n  req.onsuccess = (event) => {\r\n    let db = event.target.result;\r\n    db.close();\r\n  };\r\n}\r\nexport function idbWrite(dbName, storeName, id, data, onsuccess, onerror) {\r\n  let req = window.indexedDB.open(dbName);\r\n  req.onupgradeneeded = (event) => {\r\n    let db = event.target.result;\r\n    db.createObjectStore(storeName, { keyPath: 'id' })\r\n  }\r\n  req.onsuccess = (event) => {\r\n    let db = event.target.result;\r\n    let tx = db.transaction(storeName, \"readwrite\");\r\n    let store = tx.objectStore(storeName);\r\n    let req = store.put({ id: id, data: data });\r\n    req.onsuccess = (event) => {\r\n      if (onsuccess) {\r\n        onsuccess(event.target.result);\r\n      }\r\n    };\r\n    req.onerror = onerror;\r\n    db.close();\r\n  };\r\n  req.onerror = onerror;\r\n}\r\nexport function idbRead(dbName, storeName, id, onsuccess, onerror) {\r\n  let req = window.indexedDB.open(dbName);\r\n  req.onsuccess = (event) => {\r\n    let db = event.target.result;\r\n    try {\r\n      let tx = db.transaction(storeName, \"readonly\");\r\n      let store = tx.objectStore(storeName);\r\n      let req = store.get(id);\r\n      req.onsuccess = (event) => {\r\n        if (onsuccess) {\r\n          onsuccess(event.target.result?.data);\r\n        }\r\n      };\r\n      req.onerror = onerror;\r\n    }\r\n    catch (e) { }\r\n    db.close();\r\n  };\r\n  req.onerror = onerror;\r\n}\r\n","<template>\n  <b-navbar type=\"dark\" variant=\"dark\" id=\"navigation\">\n    <b-navbar-brand to=\"/\">れじぇくろDB</b-navbar-brand>\n    <b-navbar-nav>\n      <b-nav-item to=\"/main.html\">メインキャラ</b-nav-item>\n      <b-nav-item to=\"/support.html\">サポートキャラ</b-nav-item>\n      <b-nav-item to=\"/item.html\">アイテム</b-nav-item>\n      <b-nav-item to=\"/lookup.html\">組み合わせ検索</b-nav-item>\n      <b-nav-item to=\"/battle.html\">バトルシミュレータ</b-nav-item>\n      <b-nav-item to=\"/about.html\">解説</b-nav-item>\n    </b-navbar-nav>\n    <b-navbar-nav class=\"ml-auto\">\n      <b-nav-item class=\"icon\" href=\"https://github.com/legeclodb/legeclodb\" target=\"_blank\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" width=\"24\" height=\"24\" focusable=\"false\" role=\"img\" class=\"navbar-nav-svg\">\n          <title>GitHub</title>\n          <g fill=\"currentColor\">\n            <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M16,0.4c-8.8,0-16,7.2-16,16c0,7.1,4.6,13.1,10.9,15.2 c0.8,0.1,1.1-0.3,1.1-0.8c0-0.4,0-1.4,0-2.7c-4.5,1-5.4-2.1-5.4-2.1c-0.7-1.8-1.8-2.3-1.8-2.3c-1.5-1,0.1-1,0.1-1 c1.6,0.1,2.5,1.6,2.5,1.6c1.4,2.4,3.7,1.7,4.7,1.3c0.1-1,0.6-1.7,1-2.1c-3.6-0.4-7.3-1.8-7.3-7.9c0-1.7,0.6-3.2,1.6-4.3 c-0.2-0.4-0.7-2,0.2-4.2c0,0,1.3-0.4,4.4,1.6c1.3-0.4,2.6-0.5,4-0.5c1.4,0,2.7,0.2,4,0.5C23.1,6.6,24.4,7,24.4,7 c0.9,2.2,0.3,3.8,0.2,4.2c1,1.1,1.6,2.5,1.6,4.3c0,6.1-3.7,7.5-7.3,7.9c0.6,0.5,1.1,1.5,1.1,3c0,2.1,0,3.9,0,4.4 c0,0.4,0.3,0.9,1.1,0.8C27.4,29.5,32,23.5,32,16.4C32,7.6,24.8,0.4,16,0.4z\"></path>\n          </g>\n        </svg>\n      </b-nav-item>\n    </b-navbar-nav>\n  </b-navbar>\n</template>\n\n<script>\nimport * as lut from \"./utils.js\";\n\nexport default {\n  name: 'Navigation',\n  props: {\n  },\n\n  data() {\n    return {\n      devmode: false,\n    };\n  },\n\n  mounted() {\n    this.devmode = process.env.NODE_ENV === 'development';\n    this.checkNewMessage();\n  },\n\n  methods: {\n    checkNewMessage() {\n      const toast = () => {\n        this.$bvToast.toast(\"購読中のスレッドに新しいメッセージが投稿されています。\", {\n          toaster: 'b-toaster-bottom-left',\n          noAutoHide: true,\n          appendToast: true,\n          variant: 'danger',\n        });\n      };\n\n      let threads = lut.getSubscribedThreads();\n      if (threads.length) {\n        let last = lut.getSubscribeLastCheckTime();\n        if (!last) {\n          lut.updateSubscribeLastCheck();\n        }\n        else {\n          const minimumInterval = 10 * 60 * 1000; // 10 分は間を置く\n          if (new Date().getTime() - last.getTime() > minimumInterval) {\n            let date = lut.toSQLDateTime(last);\n            fetch(`${lut.MessageServer}?mode=chkm&date=${encodeURIComponent(date)}`)\n              .then(a => a.json())\n              .then(list => {\n                for (const r of list) {\n                  if (threads.includes(r.thread)) {\n                    toast();\n                    break;\n                  }\n                }\n              });\n            lut.updateSubscribeLastCheck();\n          }\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.navbar {\n  padding: 0.25rem 1rem;\n}\n\n.navbar-brand {\n  font-size: 1.75em;\n  margin-left: 1.0rem;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n\n.nav-link {\n  font-size: 1.25em;\n  color: rgba(255, 255, 255, 0.8) !important;\n  white-space: nowrap;\n}\n.nav-link:hover, .nav-link:focus {\n  color: rgba(255, 255, 255, 0.5) !important;\n}\n.icond {\n  margin: 0 0;\n}\n\n\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Navigation.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Navigation.vue?vue&type=template&id=af2df6a4&scoped=true\"\nimport script from \"./Navigation.vue?vue&type=script&lang=js\"\nexport * from \"./Navigation.vue?vue&type=script&lang=js\"\nimport style0 from \"./Navigation.vue?vue&type=style&index=0&id=af2df6a4&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"af2df6a4\",\n  null\n  \n)\n\nexport default component.exports","import jsonImageTable from '../assets/image_table.json'\nimport jsonConstants from '../assets/constants.json'\nimport jsonRandomEffectTable from '../assets/random_effect_table.json'\nimport jsonShape from '../assets/shape.json'\nimport { count, enumerate, download } from './utils'\n\nexport default {\n  data() {\n    return {\n      imageTable: jsonImageTable,\n\n      showHeader: true,\n      preventShowHideHeaderOnScroll: 0,\n      lastScrollPosition: 0,\n      displayType: 2,\n      displayCount: 1,\n      sortType: 0,\n      sortOrder: 0,\n      sortBySlot: false,\n      page: 1,\n\n      tagTable: {},\n      mainTagTable: {},\n      subTagTable: {},\n      tagIDSeed: 0,\n      mainTagIDSeed: 0,\n      predefinedMainTags: [],\n\n      tagSearchPattern: \"\",\n      tagSearchPatternPrev: \"\",\n      tagSearchFn: null,\n\n      freeSearchPattern: \"\",\n      freeSearchPatternPrev: \"\",\n      freeSearchFn: null,\n\n      searchTabIndex: 0,\n      settingsTabIndex: 0,\n\n      displayCounts: [\n        \"10\",\n        \"20\",\n        \"50\",\n        \"100\",\n        \"全て\",\n      ],\n\n      skillTable: new Map(),\n    }\n  },\n\n  created() {\n    let route = this.getRouteName();\n    let tmp = null;\n\n    tmp = localStorage.getItem(`${route}.displayCount`);\n    if (tmp)\n      this.displayCount = parseInt(tmp);\n\n    tmp = localStorage.getItem(`${route}.displayType`);\n    if (tmp)\n      this.displayType = parseInt(tmp);\n\n    tmp = localStorage.getItem(`${route}.sortType`);\n    if (tmp)\n      this.sortType = parseInt(tmp);\n\n    tmp = localStorage.getItem(`${route}.sortOrder`);\n    if (tmp)\n      this.sortOrder = parseInt(tmp);\n\n    tmp = localStorage.getItem(`${route}.sortBySlot`);\n    if (tmp)\n      this.sortBySlot = (tmp == \"true\");\n  },\n\n  mounted() {\n    window.addEventListener('scroll', this.onScroll);\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('scroll', this.onScroll);\n  },\n\n  watch: {\n    displayCount: function (v) {\n      localStorage.setItem(`${this.getRouteName()}.displayCount`, v);\n    },\n    displayType: function (v) {\n      localStorage.setItem(`${this.getRouteName()}.displayType`, v);\n    },\n    sortType: function (v) {\n      localStorage.setItem(`${this.getRouteName()}.sortType`, v);\n    },\n    sortOrder: function (v) {\n      localStorage.setItem(`${this.getRouteName()}.sortOrder`, v);\n    },\n    sortBySlot: function (v) {\n      localStorage.setItem(`${this.getRouteName()}.sortBySlot`, v);\n    },\n  },\n\n  computed: {\n    style() {\n      return {\n        \"--character-width\": `${this.displayType >= 2 ? '750px' : ''}`,\n        \"--character-min-width\": `${this.displayType == 1 ? '500px' : ''}`,\n        \"--character-flex-grow\": `${this.displayType < 2 ? 0 : 1}`,\n        \"--skills-display\": `${this.displayType < 2 ? 'flex' : 'display'}`,\n        \"--skill-flex-grow\": `${this.displayType == 2 ? 1 : 0}`,\n      };\n    },\n\n    displayCountNum() {\n      let v = NaN;\n      if (this.displayCount < this.displayCounts.length)\n        v = parseInt(this.displayCounts[this.displayCount]);\n      return isNaN(v) ? 1000 : v;\n    }\n  },\n\n  methods: {\n    onScroll() {\n      const pos = window.scrollY || document.documentElement.scrollTop;\n      if (pos < 0 || Math.abs(pos - this.lastScrollPosition) < 30) {\n        return;\n      }\n\n      if (this.preventShowHideHeaderOnScroll > 0) {\n        --this.preventShowHideHeaderOnScroll;\n      }\n      else {\n        this.showHeader = pos < this.lastScrollPosition;\n      }\n      this.lastScrollPosition = pos;\n    },\n\n    onPage(page) {\n      if (page)\n        this.updateURL({ p: page });\n    },\n\n    getRouteName() {\n      let ret = this.$route.name;\n      if (ret == 'index')\n        ret = 'main';\n      return ret;\n    },\n\n    hideHeader() {\n      this.showHeader = false;\n    },\n\n    scrollToTop() {\n      window.scroll(0, 0);\n    },\n    scrollToBottom() {\n      window.scrollTo(0, document.body.scrollHeight);\n    },\n\n    onMouseMove(event) {\n      if (event.clientY < 50) {\n        this.showHeader = true;\n      }\n    },\n\n    escapeRE(str) {\n      return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    },\n\n    getImageURL(name) {\n      if (name in this.imageTable) {\n        return this.imageTable[name];\n      }\n      else {\n        if (name) {\n          console.log(`getImageURL(): ${name} not found`);\n        }\n        return \"./empty.png\";\n      }\n    },\n\n    compareDate(a, b) {\n      return a.date == b.date ? 0 : (a.date < b.date ? -1 : 1);\n    },\n    appendSet(dst, iteratable) {\n      for (const v of iteratable) {\n        dst.add(v);\n      }\n    },\n    sortSet(dst, compare = undefined) {\n      let sorted = Array.from(dst).sort(compare);\n      dst.clear();\n      this.appendSet(dst, sorted);\n    },\n    partitionSet(dst, condition) {\n      let tmp = [];\n      for (const v of dst) {\n        if (condition(v))\n          tmp.push(v);\n      }\n      for (const v of tmp) {\n        dst.delete(v);\n        dst.add(v);\n      }\n    },\n    reorderSet(dst, patterns) {\n      let tmp = [];\n      for (const v of patterns) {\n        if (dst.has(v)) {\n          dst.delete(v);\n          tmp.push(v);\n        }\n      }\n      if (tmp.length != 0) {\n        for (const v of dst) {\n          tmp.push(v);\n        }\n        dst.clear();\n        this.appendSet(dst, tmp);\n      }\n    },\n\n    applyPage(array) {\n      const n = this.displayCountNum;\n      if (array.length < n)\n        return array;\n      const start = n * (this.page - 1);\n      const end = Math.min(n * this.page, array.length);\n      return array.slice(start, end);\n    },\n    getPageCount(array) {\n      const n = this.displayCountNum;\n      return Math.ceil(array.length / n);\n    },\n    getPageOf(array, finder) {\n      const n = this.displayCountNum;\n      const i = array.findIndex(finder);\n      return Math.floor((i / n)) + 1;\n    },\n\n    partitionSubtags(subtagSet) {\n      this.sortSet(subtagSet);\n      this.partitionSet(subtagSet, tag => tag.match(/\\(物理\\)/));\n      this.partitionSet(subtagSet, tag => tag.match(/\\(魔法\\)/));\n      this.partitionSet(subtagSet, tag => tag.match(/\\(スキル\\)/));\n      this.partitionSet(subtagSet, tag => tag.match(/\\(単体スキル\\)/));\n      this.partitionSet(subtagSet, tag => tag.match(/\\(範囲スキル\\)/));\n    },\n    reorderSubtag() {\n      for (let k in this.subTagTable) {\n        this.partitionSubtags(this.subTagTable[k]);\n      }\n    },\n\n    getMainTagIfSubTag(tag) {\n      for (const m of this.predefinedMainTags) {\n        if (tag.startsWith(m))\n          return m;\n      }\n      let p = tag.indexOf('(');\n      return p != -1 ? tag.slice(0, p) : null;\n    },\n    addMainTag(t) {\n      if (!this.mainTagTable[t]) {\n        this.mainTagTable[t] = {\n          id: ++this.mainTagIDSeed,\n          count: 0,\n          note: this.constants.tagNotes[t]\n        };\n      }\n    },\n    addSubTag(main, sub) {\n      let subtags = this.subTagTable[main];\n      if (!subtags) {\n        subtags = new Set();\n        this.subTagTable[main] = subtags;\n      }\n      if (!subtags.has(main) && this.tagTable[main]) {\n        subtags.add(main);\n      }\n      subtags.add(sub);\n    },\n    registerTag(t) {\n      if (!this.tagTable[t]) {\n        this.tagTable[t] = {\n          id: ++this.tagIDSeed,\n          count: 0,\n        };\n      }\n      else {\n        return;\n      }\n\n      const mainTag = this.getMainTagIfSubTag(t);\n      if (mainTag) {\n        this.addMainTag(mainTag);\n        this.addSubTag(mainTag, t);\n      }\n      else {\n        this.addMainTag(t);\n        if (t in this.subTagTable) {\n          this.subTagTable[t].add(t);\n        }\n      }\n    },\n    registerTags(tags) {\n      if (tags) {\n        for (const t of tags)\n          this.registerTag(t);\n      }\n    },\n    countTags(tags) {\n      if (!tags)\n        return;\n      for (let t of tags) {\n        ++this.tagTable[t].count;\n\n        const mainTag = this.getMainTagIfSubTag(t);\n        if (mainTag) {\n          ++this.mainTagTable[mainTag].count;\n        }\n        else {\n          ++this.mainTagTable[t].count;\n        }\n      }\n    },\n    resetTagCounts() {\n      for (let v of Object.values(this.tagTable)) {\n        v.count = 0;\n      }\n      for (let v of Object.values(this.mainTagTable)) {\n        v.count = 0;\n      }\n    },\n\n    genTagID(t) {\n      return `tag${this.mainTagTable[t].id}`;\n    },\n    getMainTags() {\n      return Object.keys(this.mainTagTable);\n    },\n    getFilteredMainTags(tags) {\n      let r = [];\n      for (const t of tags) {\n        if (this.mainTagTable[t].count > 0) {\n          r.push(t);\n        }\n      }\n      return r;\n    },\n    getFilteredSubTags(mainTag) {\n      let r = null;\n      const subTags = this.subTagTable[mainTag];\n      if (subTags) {\n        for (const t of subTags) {\n          if (this.tagTable[t].count > 0) {\n            if (r == null) {\n              r = [];\n            }\n            r.push(t);\n          }\n        }\n      }\n      return r;\n    },\n\n    isFilterEnabled(filter) {\n      for (const v of filter)\n        if (v.state)\n          return true;\n      return false;\n    },\n    fillFilter(dst, items) {\n      while (dst.length < items.length) {\n        dst.push({ state: false });\n      }\n    },\n    filterMatch(filter, index) {\n      if (this.isFilterEnabled(filter)) {\n        if (Array.isArray(index)) {\n          for (const i of index) {\n            if (i >= 0 && filter[i].state) {\n              return true;\n            }\n          }\n          return false;\n        }\n        else {\n          return index >= 0 && filter[index].state;\n        }\n      }\n      else {\n        return true;\n      }\n    },\n\n    setTagSearchPattern(txt, wholeWord = false, escape = true) {\n      txt = txt.trim();\n      if (escape)\n        txt = this.escapeRE(txt);\n      txt = \"^\" + txt;\n      if (wholeWord)\n        txt += \"$\";\n      else\n        txt += \"($|[(:])\";\n      this.tagSearchPattern = txt;\n      this.freeSearchPattern = \"\";\n      this.searchTabIndex = 0;\n\n      this.preventShowHideHeaderOnScroll = 1;\n      this.hidePopover();\n      this.$nextTick(() => {\n        this.showHeader = true;\n      });\n    },\n    setFreeSearchPattern(txt, wholeWord = false, escape = true) {\n      txt = txt.trim();\n      if (escape)\n        txt = this.escapeRE(txt);\n      if (wholeWord)\n        txt = `^${txt}$`;\n      this.freeSearchPattern = txt;\n      this.tagSearchPattern = \"\";\n      this.searchTabIndex = 1;\n\n      this.preventShowHideHeaderOnScroll = 1;\n      this.hidePopover();\n      this.$nextTick(() => {\n        this.showHeader = true;\n      });\n    },\n\n    matchTags(tags, re) {\n      if (tags) {\n        for (const tag of tags) {\n          if (tag.match(re)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n    matchContent(item, re) {\n      if (typeof item === 'string') {\n        return item.match(re);\n      }\n      else {\n        return (item.name && item.name.match(re)) || (item.desc && item.desc.match(re)) || (item.date && item.date.match(re));\n      }\n    },\n    getSearchMask() {\n      return (this.tagSearchFn ? 1 : 0) | (this.freeSearchFn ? 2 : 0);\n    },\n    isSearchPatternSet() {\n      return this.tagSearchFn || this.freeSearchFn;\n    },\n\n    chrNameToHtml(name) {\n      let m = name.match(/([^(]+)(\\(.+?\\))/);\n      if (m) {\n        return m[1] + `<span class='note'>${m[2]}</span>`;\n      }\n      else {\n        return name;\n      }\n    },\n    descToHtml(item, removeMarkup = false) {\n      let text = item.desc;\n      if (!text)\n        return \"\";\n\n      // 行を跨ぐ置換がありうるため、先に \\n -> <br/> 置換\n      text = text.replaceAll(\"\\n\", \"<br/>\") + \"<br/>\";\n      while (true) {\n        // [caution]hoge[/caution] -> <span class='caution'>hoge</span>\n        // 入れ子のケースに対応するためループする必要がある\n        let replaced = removeMarkup ? \"$2\" : \"<span class='$1'>$2</span>\";\n        let tmp = text.replaceAll(/\\[([^\\]]+?)\\](.+?)\\[\\/\\1\\]/g, replaced);\n        if (tmp == text)\n          break;\n        text = tmp;\n      }\n      return text;\n    },\n    descToTitle(item) {\n      if (!item)\n        return \"\";\n      let text = item.name + \"\\n\";\n      if (item.isMain) {\n        text += `クラス:${item.class} シンボル:${item.symbol} 攻撃タイプ:${item.damageType}\\n`;\n      }\n      if (item.isSupport) {\n        text += `クラス:${item.class} 攻撃タイプ:${item.damageType}\\n`;\n      }\n      if (item.isItem) {\n        text += this.statusToText(item.status) + \"\\n\";\n      }\n      if (item.isActive || item.isPassive) {\n        text += [\n          [\"CT\", this.ctToText(item)],\n          [\"範囲\", this.areaToText(item)],\n          [\"射程\", this.rangeToText(item)],\n          [\"コスト\", item.cost],\n        ].filter(a => a[1])\n          .map((a) => `${a[0]}: ${a[1]}`)\n          .join(\" \") + \"\\n\";\n      }\n      text += this.removeMarkup(item.desc);\n      return text;\n    },\n\n    ctToText(item) {\n      if ('ct' in item) {\n        return item.ct == 0 ? \"-\" : `${item.ct}`;\n      }\n      return null;\n    },\n    areaToText(item) {\n      if ('area' in item) {\n        if (item.areaShape == \"直線\") {\n          return `直線${item.area}マス`\n        }\n        else {\n          return `${item.area}`;\n        }\n      }\n      return null;\n    },\n    rangeToText(item) {\n      if ('range' in item) {\n        return `${item.range}`;\n      }\n      return null;\n    },\n    removeMarkup(text) {\n      if (!text) {\n        return \"\";\n      }\n      while (true) {\n        let tmp = text.replaceAll(/\\[([^\\]]+?)\\](.+?)\\[\\/\\1\\]/g, \"$2\");\n        if (tmp == text)\n          break;\n        text = tmp;\n      }\n      return text;\n    },\n    noteToHtml(item) {\n      let text = item.note;\n\n      const funcTable = {\n        randomTableToString(name) {\n          name = name.replace(/^['\"]/, \"\").replace(/['\"]$/, \"\");\n          if (name in jsonRandomEffectTable) {\n            const table = jsonRandomEffectTable[name];\n            const getVal = (a) => {\n              let v = a.value ?? \"\";\n              if (v) {\n                if (name.startsWith(\"ランダムデバフ\"))\n                  v = `-${v}`;\n                else\n                  v = `+${v}`;\n                if (a.type != \"移動\")\n                  v = `${v}%`;\n              }\n              return v;\n            };\n            return table.map(a => `${a.type}${getVal(a)}(${a.duration}ターン)`).join(\"、\");\n          }\n        },\n      };\n      text = text.replace(/`([^(]+?)\\(([^)]+)\\)`/g, (match, func, args) => {\n        if (func in funcTable) {\n          return funcTable[func](args);\n        }\n        else {\n          throw `関数が見つかりませんでした: ${func}`;\n        }\n      });\n\n      while (true) {\n        let tmp = text.replaceAll(/\\[([^\\]]+?)\\](.+?)\\[\\/\\1\\]/g, \"<span class='$1'>$2</span>\");\n        if (tmp == text)\n          break;\n        text = tmp;\n      }\n      return text.replaceAll(\"\\n\", \"<br/>\") + \"<br/>\";\n    },\n    skillNameToHtml(skill) {\n      return skill.name;\n    },\n    skillParamsToHtml(skill) {\n      return [\n        [\"CT\", this.ctToText(skill)],\n        [\"範囲\", this.areaToText(skill)],\n        [\"射程\", this.rangeToText(skill)],\n        [\"コスト\", skill.cost],\n      ].filter(a => a[1])\n        .map((a) => `<div class=\"param-box\"><span class=\"param-name\">${a[0]}:</span><span class=\"param-value\">${a[1]}</span></div>`)\n        .join(\"\");\n    },\n    statusToHtml(status, prefix = \"\", damageType = null) {\n      const conv = (n, v, i) => {\n        if (!v)\n          return [];\n\n        let s = typeof (v) == \"number\" && !Number.isFinite(v) ? '∞' : Math.round(v);\n        if (i < 6)\n          return `<div class=\"param-box\"><img src=\"${this.getImageURL(n)}\" title=\"${n}\" width=\"18\" height=\"18\" /><span>${prefix}${s}</span></div>`;\n        else\n          return `<div class=\"param-box\"><span class=\"param-name\">${n}:</span><span class=\"param-value\">${s}</span></div>`;\n      };\n      let list = [\"HP\", \"アタック\", \"ディフェンス\", \"マジック\", \"レジスト\", \"テクニック\", \"戦闘力\"].flatMap((n, i) => conv(n, status[i], i));\n\n      if (damageType) {\n        list.splice(5, 1);\n        if (damageType == \"アタック\")\n          list.splice(3, 1);\n        else if (damageType == \"マジック\")\n          list.splice(1, 1, ...list.splice(3, 1));\n      }\n      return list.join(\"\");\n    },\n    statusToText(status) {\n      const conv = (n, v, i) => {\n        if (!v)\n          return [];\n        return `${n}+${v} `;\n      };\n      let list = [\"HP\", \"アタック\", \"ディフェンス\", \"マジック\", \"レジスト\", \"テクニック\", \"戦闘力\"].flatMap((n, i) => conv(n, status[i], i));\n      return list.join(\"\");\n    },\n\n    updateQuery(name, updateURL = true) {\n      let modified = false;\n      try {\n        // なぜかボタン一個押すたびに呼ばれるので変更チェック\n        if (this.tagSearchPattern != this.tagSearchPatternPrev) {\n          this.tagSearchPatternPrev = this.tagSearchPattern;\n          modified = true;\n\n          if (this.tagSearchPattern.length != 0) {\n            const re = new RegExp(this.tagSearchPattern);\n            this.tagSearchFn = (item) => {\n              return this.matchTags(item.tags, re);\n            };\n          }\n          else {\n            this.tagSearchFn = null;\n          }\n        }\n\n        // 同上\n        if (this.freeSearchPattern != this.freeSearchPatternPrev) {\n          this.freeSearchPatternPrev = this.freeSearchPattern;\n          modified = true;\n\n          if (this.freeSearchPattern.length != 0) {\n            const re = new RegExp(this.freeSearchPattern);\n            this.freeSearchFn = (item) => this.matchContent(item, re);\n          }\n          else {\n            this.freeSearchFn = null;\n          }\n        }\n      }\n      catch (e) {\n        return;\n      }\n\n      if (modified || !['tag', 'free'].includes(name)) {\n        if (['class', 'engage', 'rarity', 'symbol', 'supportType', 'damageType', 'skillType', 'itemType', 'any'].includes(name))\n          this.updateTagCounts();\n        if (updateURL && this.updateURL)\n          this.updateURL();\n        this.preventShowHideHeaderOnScroll = 1;\n      }\n    },\n\n    onTagDropdownShow(event, state) {\n      state.keepDropdown = 0;\n      state.readyToHide = false;\n    },\n    onTagDropdownHide(event, state) {\n      if (state.keepDropdown > 0) {\n        event.preventDefault();\n      }\n    },\n    onSubtagPopoverShow(state, popoverTarget) {\n      this.hidePopover(this.prevPopover);\n      this.prevPopover = this.genTagID(popoverTarget);\n      state.keepDropdown++;\n    },\n    onSubtagPopoverHide(state) {\n      state.keepDropdown--;\n      if (state.readyToHide) {\n        this.$refs[state.name][0].hide();\n      }\n    },\n    hideTagDropdown(state, popoverTarget) {\n      if (popoverTarget) {\n        this.hidePopover(this.genTagID(popoverTarget));\n      }\n      state.readyToHide = true;\n    },\n    hidePopover(id = null) {\n      this.$root.$emit('bv::hide::popover', id);\n    },\n\n\n    serializeFilter(filter) {\n      let r = 0;\n      for (let i = 0; i < filter.length; ++i) {\n        if (filter[i].state) {\n          r |= 1 << i;\n        }\n      }\n      return r;\n    },\n    deserializeFilter(filter, v) {\n      for (let i = 0; i < filter.length; ++i) {\n        filter[i].state = (v & (1 << i)) != 0;\n      }\n    },\n\n    copyToClipboard(value) {\n      if (navigator.clipboard) {\n        return navigator.clipboard.writeText(value);\n      }\n    },\n\n    getMainChrStatus(chr, level = 110, star = 6, master = 3, loveBonus = true, boost = [150, 140, 130, 140, 130, 50])\n    {\n      if (!chr || !chr.statusInit || !chr.statusLv || !chr.statusStar)\n        return null;\n\n      let r = [0, 0, 0, 0, 0, 0];\n      for (let i = 0; i < r.length; ++i) {\n        r[i] += chr.statusInit[i];\n        r[i] += Math.round(chr.statusLv[i] * (level - 1));\n        r[i] += Math.round(chr.statusStar[i] * star);\n      }\n      if(master > 0 && master <= 3){\n        const values = [\n          [  0, 0, 0, 0, 0, 0],\n          [200, 0, 0, 0, 0, 0],\n          [400, 0, 0, 0, 0, 0],\n          [800, 0, 0, 0, 0, 0],\n        ];\n        for (let i = 0; i < r.length; ++i)\n          r[i] += values[master][i];\n      }\n      if (loveBonus) {\n        const values = [100, 25, 15, 25, 15, 0];\n        for (let i = 0; i < values.length; ++i)\n          r[i] += values[i];\n      }\n      if (boost) {\n        for (let i = 0; i < boost.length; ++i)\n          r[i] = Math.round(r[i] * (1.0 + boost[i] * 0.01));\n      }\n      return r;\n    },\n\n    getSupportChrStatus(chr, level = 110, star = 6, master = 3, loveBonus = true, boost = [110, 120, 110, 120, 110, 0], amulet = null) {\n      if (!chr || !chr.statusInit || !chr.statusLv || !chr.statusStar)\n        return null;\n\n      let r = [0, 0, 0, 0, 0, 0];\n      for (let i = 0; i < r.length; ++i) {\n        r[i] += chr.statusInit[i];\n        r[i] += Math.round(chr.statusLv[i] * (level - 1));\n        r[i] += Math.round(chr.statusStar[i] * star);\n      }\n      if (master > 0 && master <= 3) {\n        const values = [\n          [   0,  0,  0,  0,  0, 0],\n          [ 300, 15,  8, 15,  8, 0],\n          [ 600, 30, 16, 30, 16, 0],\n          [1200, 55, 28, 55, 28, 0],\n        ];\n        for (let i = 0; i < r.length; ++i)\n          r[i] += values[master][i];\n      }\n      if (loveBonus) {\n        const values = [100, 25, 15, 25, 15, 0];\n        for (let i = 0; i < values.length; ++i)\n          r[i] += values[i];\n      }\n\n      // 端数の丸め方で誤差が出てしまうため、r *= 1.0 + boost + amulet ではダメ\n      let additional = [0, 0, 0, 0, 0, 0];\n      if (boost) {\n        for (let i = 0; i < boost.length; ++i)\n          additional[i] += Math.round(r[i] * (boost[i] * 0.01));\n      }\n      if (amulet) {\n        for (let i = 0; i < amulet.length; ++i)\n          additional[i] += Math.round(r[i] * (amulet[i] * 0.01));\n      }\n      for (let i = 0; i < additional.length; ++i)\n        r[i] += additional[i];\n\n      return r;\n    },\n\n    getItemStatus(item, level = 50) {\n      if (!item || !item.statusInit || !item.statusLv)\n        return null;\n\n      let r = [0, 0, 0, 0, 0, 0];\n      for (let i = 0; i < r.length; ++i) {\n        r[i] += Math.round(item.statusInit[i] + item.statusLv[i] * (level - 1));\n      }\n      return r;\n    },\n\n    // rate: 各能力値のブースト量% (例: [200, 100, 100, 100, 100, 100] で HP だけ 2 倍)\n    getNPCChrStatus(chr, level, rate = null)\n    {\n      let status = null;\n\n      // NPC のステータスは大体 10 レベル毎にキーとなる値が設定されており、それ以外のレベルでは線形補間する必要がある\n      let prevLv = null;\n      for (let lvStr in chr.statusTable) {\n        const lv = parseInt(lvStr);\n        if (lv == level) {\n          // キーレベルに一致する場合、その値を使う\n          status = [...chr.statusTable[lv]];\n          break;\n        }\n        else if (lv < level) {\n          prevLv = lv;\n        }\n        else {\n          // ステータス補間\n          const ps = chr.statusTable[prevLv];\n          const cs = chr.statusTable[lv];\n          status = new Array(cs.length);\n          for (let i = 0; i < cs.length; ++i) {\n            status[i] = ps[i] + Math.floor(((cs[i] - ps[i]) / (lv - prevLv)) * (level - prevLv));\n          }\n          break;\n        }\n      }\n      if (!status) {\n        // 最大キーレベルより高い場合は最大キーレベルの値を使う\n        status = [...chr.statusTable[prevLv]];\n      }\n\n      // ブースト適用\n      if (rate) {\n        for (let i = 0; i < status.length; ++i) {\n          status[i] = Math.round(status[i] * (rate[i] * 0.01));\n        }\n      }\n      return status;\n    },\n\n    getEngateDate(chr) {\n      return chr.engage ? chr.engage.date : \"\";\n    },\n    compareEngageDate(l, r) {\n      const ld = this.getEngateDate(l);\n      const rd = this.getEngateDate(r);\n      if (ld || rd) {\n        return ld == rd ? r.date.localeCompare(l.date) : rd.localeCompare(ld);\n      }\n      else {\n        return r.date.localeCompare(l.date);\n      }\n    },\n\n    // seq must be sorted array\n    lowerBound(seq, n) {\n      let first = 0, last = seq.length - 1;\n      while (first <= last) {\n        const middle = (first + last) / 2;\n        if (seq[middle] < n)\n          first = middle + 1;\n        else\n          last = middle - 1;\n      }\n      return first;\n    },\n    compare(a, b) {\n      return a == b ? 0 : a < b ? 1 : -1;\n    },\n    toNumber(v)\n    {\n      if (typeof v === \"number\")\n        return v;\n      const r = parseFloat(v);\n      return isNaN(r) ? 0 : r;\n    },\n    toInt(v) {\n      if (typeof v === \"number\")\n        return v;\n      const r = parseInt(v);\n      return isNaN(r) ? 0 : r;\n    },\n    parseValue(s) {\n      if (s == 'true')\n        return true;\n      else if (s == 'false')\n        return false;\n      else if (s.match(/^[\\d.]+$/))\n        return this.toNumber(s);\n      else\n        return s;\n    },\n\n    getBattlePower(status)\n    {\n      if (!status)\n        return 0;\n\n      let r = 0;\n      r += status[0] * 0.05;\n      r += Math.max(status[1], status[3]) * 2 * (1.0 + status[5] * 0.0003);\n      r += status[2] * 2;\n      r += status[4] * 2;\n      return r;\n    },\n    getMainBattlePower(status, star = 6, master = 3, skillCost = 6, itemStar = 20, enchantComplete = true, engageSkillCount = 0) {\n      let r = this.getBattlePower(status);\n      return Math.round(r * (1.0 + 0.1 * star + 0.1 * master + 0.03 * skillCost + 0.02 * itemStar + (enchantComplete ? 0.1 : 0) + engageSkillCount * 0.05));\n    },\n    getSupportBattlePower(status, star = 6, master = 3, skillCount = 3) {\n      status = [...status];\n      status[5] = 0; // テクニックを計上しない\n      let r = this.getBattlePower(status);\n      return Math.round(r * (1.0 + 0.1 * star + 0.1 * master + 0.05 * skillCount));\n    },\n    getEstimatedItemBattlePower(status, api = 0, baseAP = 3000, baseTec = 0) {\n      let r = 0;\n      r += status[0] * 0.05;\n      r += status[2] * 2;\n      r += status[4] * 2;\n\n      let ap = 0;\n      if (api == 0)\n        ap = Math.max(status[1], status[3]);\n      else\n        ap = status[api];\n      r += ap * 2 * (1.0 + (baseTec + status[5]) * 0.0003);\n\n      r += baseAP * 2 * (status[5] * 0.0003);\n\n      return Math.round(r);\n    },\n\n\n    getEffectIndex(effectType) {\n      const effectTypes = jsonConstants.effectTypes;\n      return effectTypes.findIndex(a => a == effectType);\n    },\n\n    isPublicTarget(effect) {\n      const checkTarget = (t) => {\n        return typeof (t) == \"string\" && (!t.startsWith(\"自身\") && !t.startsWith(\"召喚\"));\n      };\n      const trigger = effect.trigger;\n      if (trigger) {\n        return checkTarget(trigger.target);\n      }\n      else {\n        return !effect.target || checkTarget(effect.target);\n      }\n    },\n    isSelfTarget(effect) {\n      const checkTarget = (t) => {\n        return typeof (t) == \"string\" && t.startsWith(\"自身\");\n      };\n      const trigger = effect.trigger;\n      if (trigger) {\n        return checkTarget(trigger.target);\n      }\n      else {\n        return !effect.target || checkTarget(effect.target);\n      }\n    },\n    isSingleTarget(effect) {\n      const isSkillTarget = (t) => {\n        return [undefined, \"攻撃対象\", \"スキル対象\"].includes(t);\n      };\n      const tri = effect.trigger;\n      if (tri) {\n        const t = tri.target;\n        if (t == \"自身\" || (tri.target == \"乱択\" && tri.unitCount == 1)) {\n          return true;\n        }\n        if (effect.parent.isSingleTarget && isSkillTarget(t)) {\n          return true;\n        }\n      }\n      if (effect.parent.isActive && effect.parent.isSingleTarget && isSkillTarget(effect.target)) {\n        return true;\n      }\n      return false;\n    },\n\n    effectParamsToTags(skill, params) {\n      let miscTags = [];\n      const addTag = (tag) => {\n        miscTags.push(tag);\n      };\n\n      if (skill.isAttackSkill) {\n        if (skill.isSingleTarget) {\n          if (skill.isMainSkill) {\n            let opt = \"\";\n            if (skill.positionManipulate?.find(a => a.type == \"引き寄せ\")) {\n              opt = \"(非戦闘)\";\n            }\n            addTag(`単体攻撃${opt}`);\n            if (!opt && skill.range >= 3) {\n              addTag(`長射程攻撃`);\n            }\n          }\n          else {\n            addTag(`単体攻撃`);\n          }\n        }\n        else if (skill.isAreaTarget) {\n          const add = (opt) => {\n            if (skill.areaShape != \"直線\" && (skill.area >= 4 || (skill.area >= 3 && skill.areaShape == \"周囲\"))) {\n              addTag(`超広範囲攻撃${opt}`);\n            }\n            addTag(`範囲攻撃${opt}`);\n          };\n          if (skill.isRangedTarget) {\n            add(\"(中心指定)\");\n          }\n          else if (skill.isRadialAreaTarget) {\n            add(\"(自分中心)\");\n          }\n          else if (skill.isDirectionalAreaTarget) {\n            add(\"(直線)\");\n          }\n        }\n        if (skill.damageRateSp) {\n          for (const v of skill.damageRateSp) {\n            for (const targetClass of v.condition?.onTargetClass ?? []) {\n              addTag(`特効(${targetClass})`);\n            }\n          }\n        }\n      }\n      if (skill.isPassive && skill.areaDamage) {\n        addTag(`範囲攻撃(自分中心)`);\n      }\n\n      if (skill.multiAction) {\n        let postfix = \"\";\n        for (const ma of skill.multiAction) {\n          const cond = ma.condition;\n          if (cond) {\n            if (cond.onKill)\n              postfix = \"(敵撃破時)\";\n            else if (cond.probability)\n              postfix = \"(確率)\";\n            else\n              postfix = \"\";\n          }\n          if (ma.target && ma.target != \"自身\") {\n            postfix = \"(味方)\";\n          }\n        }\n        addTag(`再行動${postfix}`);\n        if (!skill.isActive || (skill.isActive && skill.damageRate) || postfix == \"(味方)\") {\n          addTag(`再攻撃${postfix}`);\n        }\n      }\n\n      if (skill.multiMove) {\n        let postfix = \"\";\n        for (const mm of skill.multiMove) {\n          const cond = mm.condition;\n          if (cond) {\n            if (cond.onKill)\n              postfix = \"(敵撃破時)\";\n            else\n              postfix = \"\";\n          }\n        }\n        addTag(`再移動${postfix}`);\n      }\n\n      if (skill.doubleAttack) {\n        let postfix = \"\";\n        for (const da of skill.doubleAttack) {\n          const cond = da.condition;\n          if (cond) {\n            if (cond.onEnemyTurn)\n              postfix = \"(反撃)\";\n            else\n              postfix = \"\";\n          }\n        }\n        addTag(`2回攻撃${postfix}`);\n      }\n      if (skill.supportAttack) {\n        addTag(`サポート同時攻撃`);\n      }\n      if (skill.ignoreGuard) {\n        addTag(`ガード不可攻撃`);\n      }\n\n      if (skill.fixedDamage) {\n        if (skill.fixedDamage.find(a => !(typeof (target) == \"string\" && a.target?.startsWith(\"自身\")))) {\n          addTag(`固定ダメージ`);\n        }\n      }\n\n      if (skill.shield) {\n        addTag(`シールド付与`);\n      }\n      if (skill.reflection) {\n        addTag(`反射`);\n      }\n      if (skill.heal) {\n        for (const heal of skill.heal) {\n          if (heal.target == \"全体\") {\n            addTag(`全体回復`);\n          }\n          else if (heal.target == \"範囲\" || (heal.target == \"スキル対象\" && skill.area != \"単体\")) {\n            addTag(`範囲回復`);\n          }\n          else if (heal.target == \"スキル対象\" && skill.area == \"単体\") {\n            addTag(`単体回復`);\n          }\n          else if (heal.target == \"味方(低HP)\") {\n            addTag(`単体回復(低HP)`);\n          }\n          else if (heal.target == \"自身\" && heal.type == \"ダメージ割合\") {\n            addTag(`与ダメ回復`);\n          }\n        }\n      }\n\n      if (skill.revive) {\n        addTag(`復活`);\n      }\n      if (skill.summon) {\n        addTag(`召喚`);\n      }\n      if (skill.isSymbolSkill) {\n        addTag(`シンボルスキル`);\n      }\n      if (skill.buffSteal) {\n        addTag(`バフ奪取`);\n      }\n      if (skill.buffCancel) {\n        addTag(`バフ解除`);\n      }\n      if (skill.debuffCancel) {\n        for (const a of skill.debuffCancel) {\n          if (a.target != \"自身\") {\n            addTag(`デバフ解除`);\n            break;\n          }\n        }\n      }\n\n      if (skill.ctReduction) {\n        let postfix = \"\";\n        for (const v of skill.ctReduction) {\n          if (v.target != \"自身\") {\n            postfix = `(味方)`;\n          }\n          else if (v.targetSkill == \"全スキル\") {\n            postfix = `(自身)`;\n          }\n        }\n        if (postfix) {\n          addTag(`CT減${postfix}`);\n        }\n      }\n\n      if (skill.positionManipulate) {\n        let postfix = \"\";\n        for (const v of skill.positionManipulate) {\n          postfix = `(${v.type})`;\n        }\n        addTag(`位置移動${postfix}`);\n      }\n\n      const buffToS = (effectCategory, effect) => {\n        if (effect.type == \"トークン\") {\n          let r = \"トークン付与\";\n          let target = effect.trigger?.target ?? effect.target;\n          if (target == \"自身\")\n            r += \"(自身)\";\n          else if (target == \"味方全体\")\n            r += \"(味方)\";\n          else if (target == \"攻撃対象\")\n            r += \"(敵)\";\n          return r;\n        }\n        else if (effect.type == \"ガード\") {\n          let r = \"ガード\";\n          if (effect.variant != \"全攻撃\")\n            r += `(${effect.variant})`;\n          return r;\n        }\n\n        if (params.tagFilter && !params.tagFilter(skill, effectCategory, effect))\n          return [];\n\n        else if (effect.type == \"ランダム\") {\n          // ランダムは扱いが特殊なので個別処理\n          return `${effectCategory}:${effect.type}(${effect.variant})`;\n        }\n        if (effect.isDebuff && effect.ephemeral) {\n          return [];\n        }\n\n        // マイナスバフをデメリットタグとして登録するか\n        if (typeof (effect.value) == 'number') {\n          if (effect.value < 0 && effect.isBuff) {\n            if (params.includeDemeritTags) {\n              effectCategory = \"デメリット\"\n            }\n            else {\n              //console.log(effect);\n              return [];\n            }\n          }\n        }\n\n        let t = effectCategory + \":\" + effect.type;\n\n        if (effect.ephemeralOnBattle) {\n          t += \"(戦闘時)\";\n        }\n        else if (params.includeAreaTags && effect.isBuff && effect.trigger?.target == \"範囲\") {\n          t += `(味方)`;\n        }\n        else if (effect.target) {\n          if (params.includeSelfTags && this.isSelfTarget(effect)) {\n            t += `(${effect.target})`;\n          }\n        }\n        return t;\n      };\n\n      let buff = skill.buff;\n      if (skill.isSymbolSkill) {\n        buff = buff?.slice(6, buff.length); // シンボルスキル共通バフは除外\n      }\n\n      const map = (a, f) => a ? a.flatMap(f) : [];\n      return [\n        ...miscTags,\n        ...map(buff, a => buffToS(\"バフ\", a)),\n        ...map(skill.debuff, a => buffToS(\"デバフ\", a)),\n        ...map(skill.statusEffects, a => buffToS(\"デバフ\", a)),\n        ...map(skill.immune, a => buffToS(\"無効化\", a)),\n        ...map(skill.drawback, a => buffToS(\"デメリット\", a)),\n      ];\n    },\n\n    setupSkill(skill, params) {\n      if (this.skillTable.get(skill.uid)) {\n        return;\n      }\n      this.skillTable.set(skill.uid, skill);\n\n      if (skill.isActive) {\n        if (skill.area == \"単体\") {\n          skill.isSingleTarget = true;\n        }\n        else if (skill.area == \"全体\") {\n          skill.isGlobalTarget = true;\n        }\n        if (skill.range == \"自ユニット\") {\n          if (skill.isSingleTarget) {\n            skill.isSelfTarget = true;\n          }\n          else if (skill.areaShape == \"直線\") {\n            skill.isDirectionalAreaTarget = true;\n          }\n          else if (skill.areaShape == \"特殊\") {\n            skill.isSpecialAreaTarget = true;\n            if (!(skill.areaShapeId in jsonShape)) {\n              throw `${skill.areaShapeId} not found in shape.json`;\n            }\n            skill.shapeData = jsonShape[skill.areaShapeId];\n          }\n          else {\n            skill.isRadialAreaTarget = true;\n          }\n        }\n        else if (typeof (skill.range) == \"number\") {\n          skill.isRangedTarget = true;\n        }\n\n        if (typeof (skill.area) == \"number\" || skill.area == \"全体\") {\n          skill.isAreaTarget = true;\n        }\n        if (skill.damageRate) {\n          skill.isAttackSkill = true;\n          if (skill.isAreaTarget || skill.isSupportSkill) // サポートのスキルは全て範囲(非戦闘)扱い\n            skill.isAreaAttackSkill = true;\n          else\n            skill.isBattleSkill = true;\n        }\n\n        const hasAreaEffect = (effects) => {\n          if (effects) {\n            for (const e of effects) {\n              if ((e.trigger?.target ?? e.target) != \"自身\") {\n                return true;\n              }\n            }\n          }\n          return false;\n        };\n\n        if (skill.damageRate || hasAreaEffect(skill.debuff)) {\n          skill.isTargetEnemy = true;\n        }\n        if (skill?.heal?.find(a => a.target == \"スキル対象\") || hasAreaEffect(skill.buff)) {\n          skill.isTargetAlly = true;\n        }\n        if (skill.summon) {\n          skill.isTargetCell = true;\n          for (let s of skill.summon) {\n            s.chr = params.npc.find(c => c.uid == s.uid);\n          }\n        }\n      }\n\n      Object.defineProperty(skill, 'effects', {\n        get: () => {\n          return [...(skill.buff ?? []), ...(skill.debuff ?? [])]\n        },\n      });\n      Object.defineProperty(skill, 'randomBuff', {\n        get: () => {\n          return (skill.buff ?? []).flatMap(a => a.randomTable ?? []);\n        },\n      });\n      Object.defineProperty(skill, 'randomDebuff', {\n        get: () => {\n          return (skill.debuff ?? []).flatMap(a => a.randomTable ?? []);\n        },\n      });\n      Object.defineProperty(skill, 'randomEffects', {\n        get: () => {\n          return skill.effects.flatMap(a => a.randomTable ?? []);\n        },\n      });\n\n      // todo: まともなレベル選択処理\n      if (!skill.desc && skill.descs) {\n        skill.current = \"Lv 6\";\n        this.$set(skill, 'desc', skill.descs[skill.current]);\n\n        const arrayToScalar = (obj, prop) => {\n          const v = obj[prop];\n          if (Array.isArray(v)) {\n            obj[`${prop}_`] = v;\n            obj[prop] = v[v.length - 1];\n          }\n        };\n\n        let effects = [\n          ...(skill.buff ? skill.buff : []),\n          ...(skill.debuff ? skill.debuff : []),\n          ...(skill.immune ? skill.immune : []),\n        ]\n        for (let effect of effects) {\n          arrayToScalar(effect, \"value\");\n          arrayToScalar(effect, \"duration\");\n          if (effect.add) {\n            arrayToScalar(effect.add, \"rate\");\n          }\n          let cond = effect.condition;\n          if (cond) {\n            arrayToScalar(cond, \"probability\");\n          }\n        }\n      }\n\n      skill.addOwner = (owner) => {\n        if (!('owners' in skill)) {\n          skill.owners = [];\n        }\n        if (!skill.owners.includes(owner)) {\n          skill.owners.push(owner);\n        }\n\n        // シンボルスキルに条件を設定\n        if (skill.isSymbolSkill && owner.symbol) {\n          for (let e of skill.buff) {\n            if (!e.condition)\n              e.condition = {};\n            e.condition.onSymbol = [owner.symbol];\n          }\n        }\n      }\n\n      const setupSlot = (effect) => {\n        effect.typeId = this.getEffectIndex(effect.type);\n        if (skill.isActive) {\n          if (effect.type == \"トークン\") {\n            // トークンには種類毎に独立したスロットを与える\n            effect.slot = effect.tokenName;\n          }\n          else if (effect.type == \"リジェネ\") {\n            // リジェネは同スキル同士以外では競合しない\n            effect.slot = skill.uid;\n          }\n\n          if (effect.slot) {\n            effect.hasSpecialSlot = true;\n          }\n          else {\n            let slot = effect.type;\n            if (effect.isBuff)\n              slot += \"+\";\n            else if (effect.isDebuff)\n              slot += \"-\";\n            if (skill.isMainSkill)\n              slot += \"(メイン)\";\n            else if (skill.isSupportSkill)\n              slot += \"(サポート)\";\n            effect.slot = slot;\n          }\n        }\n      };\n      const setParent = (effect) => {\n        Object.defineProperty(effect, 'parent', {\n          configurable: true,\n          get: () => skill,\n        });\n      };\n      const assignId = (list, prefix) => {\n        if (list) {\n          for (let i = 0; i < list.length; ++i) {\n            const p = `${prefix}${i}`;\n            list[i].index = p;\n            list[i].uid = `${skill.uid}.${p}`;\n          }\n        }\n      };\n      const setupRandomTable = (effect) => {\n        if (effect.type == \"ランダム\") {\n          const tableName = effect.isBuff ? `ランダムバフ:${effect.variant}` : `ランダムデバフ:${effect.variant}`;\n          if (tableName in jsonRandomEffectTable) {\n            effect.randomTable = jsonRandomEffectTable[tableName].map(a => Object.assign({}, a)); // shallow copy\n            for (let re of effect.randomTable) {\n              setParent(re);\n            }\n\n            let prefix = effect.isBuff ? 'rb' : 'rd';\n            assignId(effect.randomTable, prefix);\n          }\n          else {\n            throw `ランダム効果がテーブルから見つかりませんでした: ${skill.name} ${effect.variant}`;\n          }\n        }\n      };\n      assignId(skill?.buff, 'b');\n      assignId(skill?.debuff, 'd');\n\n      for (let v of skill.effects) {\n        setupRandomTable(v);\n      }\n\n      for (let v of enumerate(skill.buff, skill.randomBuff)) {\n        v.isBuff = true;\n        if (skill.isActive) {\n          v.isActiveBuff = true;\n        }\n        if (!v.target && !skill.isActive) {\n          v.target = \"自身\";\n        }\n        if (typeof (v.value) === 'number' && v.value < 0) {\n          if (!skill.negativeEffects)\n            skill.negativeEffects = [];\n          skill.negativeEffects.push(v);\n        }\n      }\n      for (let v of enumerate(skill.debuff, skill.randomDebuff)) {\n        v.isDebuff = true;\n        if (skill.isActive) {\n          v.isActiveDebuff = true;\n        }\n      }\n      for (let v of skill.effects) {\n        if (v.ephemeral) {\n          if ((v.trigger?.timing ?? v.timing) == \"攻撃前\") {\n            v.ephemeralOnAttack = true;\n          }\n          else {\n            v.ephemeralOnBattle = true;\n          }\n          if (skill.isActive && !('duration' in v)) {\n            v.duration = 0;\n          }\n        }\n        if (skill.isActive && ![\"ガード\"].includes(v.type)) {\n          v.isCancelable = true;\n        }\n\n        setParent(v);\n        setupSlot(v);\n      }\n\n      for (let v of skill?.statusEffects ?? []) {\n        v.isStatusEffect = true;\n        setParent(v);\n      }\n      for (let v of skill?.immune ?? []) {\n        v.isImmune = true;\n        setParent(v);\n      }\n\n      if (!skill.tags)\n        skill.tags = [];\n      if (params.includeSkillEffectTags)\n        skill.tags = [...skill.tags, ...this.effectParamsToTags(skill, params)];\n\n      if (!skill.icon)\n        skill.icon = skill.uid;\n\n      // 確認・デバッグ用\n      if (process.env.NODE_ENV === 'development') {\n        for (let e of skill.effects) {\n          if (!e.value && !e.add && !e.variable && ![\"ランダム\", \"トークン\", \"ガード\", \"リジェネ\"].includes(e.type)) {\n            throw Error(`${skill.name}: ${e.type}`);\n          }\n        }\n      }\n    },\n\n    setupItems(items, params = {}) {\n      const consts = jsonConstants;\n      const allClasses = [0, 1, 2, 3, 4, 5, 6, 7];\n\n      for (let item of items) {\n        item.isItem = true;\n        this.setupSkill(item, params);\n\n        if (item.classes) {\n          item.classIds = item.classes.map(cls => consts.classes.findIndex(v => v == cls));\n          item.classFlags = 0;\n          for (const i of item.classIds)\n            item.classFlags |= 1 << i;\n        }\n        else {\n          item.classIds = allClasses;\n          item.classFlags = 0xffff;\n        }\n\n        if (item.rarity)\n          item.rarityId = consts.rarities.findIndex(v => v == item.rarity);\n        if (item.slot)\n          item.slotId = consts.itemTypes.findIndex(v => v == item.slot);\n\n        item.status = this.getItemStatus(item);\n      }\n    },\n\n    // params:\n    // {\n    //   npc: [], // 召喚ユニット検索用\n    //   includeSelfTags: bool,\n    //   includeSkillEffectTags: bool,\n    //   includeAreaTags: bool,\n    //   includeDemeritTags: bool,\n    //   tagFilter: (skill, effectCategory, effect) => bool,\n    // }\n    setupCharacters(characters, activeSkills, passiveSkills, talents = [], params = {}) {\n      const isMain = talents.length != 0;\n      const isSupport = !isMain;\n      const consts = jsonConstants;\n\n      for (let s of activeSkills)\n        s.isActive = true;\n      for (let s of passiveSkills)\n        s.isPassive = true;\n      for (let s of talents)\n        s.isTalent = true;\n\n      for (let chr of characters) {\n        if ('statusTable' in chr) {\n          chr.isNpc = true;\n        }\n      }\n      if (isMain) {\n        for (let chr of characters)\n          chr.isMain = true;\n        for (let s of [...activeSkills, ...passiveSkills, ...talents])\n          s.isMainSkill = true;\n      }\n      if (isSupport) {\n        for (let chr of characters)\n          chr.isSupport = true;\n        for (let s of [...activeSkills, ...passiveSkills])\n          s.isSupportSkill = true;\n      }\n\n      for (let s of [...activeSkills, ...passiveSkills, ...talents]) {\n        this.setupSkill(s, params);\n      }\n\n      const grabSkill = (id, chr) => {\n        if (typeof (id) == \"object\") {\n          return id;\n        }\n        let skill = this.skillTable.get(id);\n        if (!skill) {\n          console.error(`skill not found: ${id}`);\n          return null;\n        }\n        return skill;\n      };\n\n      for (let chr of characters) {\n        if (chr.shape) {\n          chr.isNxN = true;\n        }\n        if (chr.talent) {\n          chr.talent = grabSkill(chr.talent, chr);\n        }\n        if (!chr.icon) {\n          chr.icon = chr.uid;\n        }\n\n        if (chr.class)\n          chr.classId = consts.classes.findIndex(v => v == chr.class);\n        if (chr.symbol)\n          chr.symbolId = consts.symbols.findIndex(v => v == chr.symbol);\n        if (chr.rarity)\n          chr.rarityId = consts.rarities.findIndex(v => v == chr.rarity);\n        if (chr.damageType)\n          chr.damageTypeId = consts.damageTypes.findIndex(v => v == chr.damageType);\n        if (chr.supportType)\n          chr.supportTypeId = consts.supportTypes.findIndex(v => v == chr.supportType);\n\n        if (chr.skills) {\n          chr.skills = chr.skills.flatMap(id => grabSkill(id, chr));\n          chr.skillsAll = chr.skills;\n\n          if (chr.skills.find(a => a.summon)) {\n            const toSummonChrs = (skill) => {\n              return (skill.summon ?? []).map(a => a.chr);\n            };\n\n            Object.defineProperty(chr, 'summon', {\n              configurable: true,\n              get: () => chr.skills.flatMap(toSummonChrs)\n            });\n            Object.defineProperty(chr, 'summonAll', {\n              configurable: true,\n              get: () => chr.skillsAll.flatMap(toSummonChrs)\n            });\n          }\n        }\n        if (chr.engage?.skills) {\n          chr.skillsAll = [...chr.skills];\n          chr.engage.skills = chr.engage.skills.flatMap(id => grabSkill(id, chr));\n\n          for (let i = 0; i < chr.engage.skills.length; ++i) {\n            if (chr.engage.skills[i] !== chr.skills[i]) {\n              chr.engage.skills[i].isEngageSkill = true;\n              chr.skillsAll.push(chr.engage.skills[i]);\n            }\n          }\n          this.$set(chr.engage, 'enabled', false);\n\n          chr._skills = chr.skills;\n          Object.defineProperty(chr, 'skills', {\n            configurable: true,\n            get: () => chr.engage.enabled ? chr.engage.skills : chr._skills,\n          });\n          Object.defineProperty(chr, 'baseSkills', {\n            configurable: true,\n            get: () => chr._skills,\n          });\n        }\n\n        if (!chr.isNpc) {\n          for (let skill of chr?.skillsAll ?? []) {\n            skill.addOwner(chr);\n          }\n          for (let sum of chr?.summonAll ?? []) {\n            for (let skill of sum.skills) {\n              skill.addOwner(chr);\n            }\n          }\n        }\n\n        if (params.includeSkillEffectTags && chr.isMain) {\n          let multiAttack = 0;\n          const skills = [chr.talent, ...(chr.engage?.skills ?? chr.skills ?? [])];\n          for (const skill of skills) {\n            if (this.matchTags(skill?.tags, /^再攻撃(\\(敵撃破時\\))?$/)) {\n              ++multiAttack;\n            }\n          }\n          if (multiAttack >= 2) {\n            chr.talent.tags.push(\"再々攻撃\");\n          }\n        }\n      }\n    },\n\n\n    toast(mes) {\n      this.$bvToast.toast(mes, {\n        toaster: 'b-toaster-bottom-left',\n        autoHideDelay: Math.min(300 + mes.length * 150, 3000),\n        appendToast: true,\n      });\n    },\n\n    dispatchScrollEvent() {\n      // ダミー scroll イベントの発行。\n      // (主に popover 内の要素のサイズが変わった際に再配置を促すため用)\n      window.dispatchEvent(new CustomEvent('scroll'));\n    },\n\n    setArrayElement(ary, idx, item) {\n      this.$set(ary, idx, item);\n    },\n    pushArray(ary, item) {\n      ary.push(item);\n    },\n    popArray(ary) {\n      if (ary.length > 0) {\n        ary.splice(ary.length - 1);\n      }\n    },\n\n    moveProperty(dst, src, name) {\n      if (name in src) {\n        dst[name] = src[name];\n        delete src[name];\n      }\n    },\n    swapProperty(dst, src, field) {\n      const tmp = dst[field];\n      dst[field] = src[field];\n      src[field] = tmp;\n    },\n    objectEqual(obj1, obj2) {\n      if (obj1 === obj2) {\n        return true;\n      }\n      if (typeof obj1 !== 'object' || typeof obj2 !== 'object' || obj1 === null || obj2 === null) {\n        return false;\n      }\n\n      const keys1 = Object.keys(obj1);\n      const keys2 = Object.keys(obj2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      for (let key of keys1) {\n        if (!Object.hasOwn(obj2, key)) {\n          return false;\n        }\n        if (!this.objectEqual(obj1[key], obj2[key])) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n  },\n}\n","<template>\n  <div class=\"root\" @mousemove=\"onMouseMove\">\n    <div class=\"header\" :class=\"{ 'hidden': !showHeader }\">\n      <Navigation />\n    </div>\n\n    <div class=\"content\" style=\"margin-top: 70px;\" :style=\"style\">\n      <div class=\"about\">\n        <p>\n          2024/04 管理人引退により更新を停止しました。これまでありがとうございました。<br />\n          このサイトと github のソースは資料用にそのまま公開しておきます。\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navigation from './Navigation.vue'\nimport common from \"./common\";\n\nexport default {\n  name: 'About',\n  components: {\n    Navigation,\n  },\n  mixins: [common],\n\n  data() {\n    return {\n      stat: {\n      },\n    };\n  },\n\n  created() {\n    document.title = \"れじぇくろDB: お知らせ\";\n  },\n\n  mounted() {\n  },\n\n  methods: {\n  },\n\n  computed: {\n  }\n}\n</script>\n\n<style scoped>\ndiv.about {\n  max-width: 1200px;\n  padding: 20px;\n  margin: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 0.3rem;\n  background: rgb(245, 245, 245);\n  box-shadow: 0 3px 6px rgba(140,149,159,0.5);\n}\n\n.about h2 {\n  font-size: 1.75em;\n}\n\n.about p {\n}\n\n.about ul {\n  list-style-type: disc;\n  margin: 0;\n}\n\n.about li {\n  display: list-item;\n  margin: 0 15px;\n}\n\n.note {\n  font-size: 80%;\n  color: rgb(150, 150, 150);\n}\n\n.panel {\n  padding: 10px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 0.3rem;\n  display: inline-block;\n  background: white;\n}\n\n.panel h6 {\n  margin-bottom: 5px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Info.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Info.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Info.vue?vue&type=template&id=bb954ff8&scoped=true\"\nimport script from \"./Info.vue?vue&type=script&lang=js\"\nexport * from \"./Info.vue?vue&type=script&lang=js\"\nimport style0 from \"./Info.vue?vue&type=style&index=0&id=bb954ff8&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bb954ff8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\",on:{\"mousemove\":_vm.onMouseMove}},[_c('div',{staticClass:\"header\",class:{ 'hidden': !_vm.showHeader }},[_c('Navigation'),_c('div',{staticClass:\"menu-content\"},[_c('div',{staticClass:\"menu-panel\"},[_c('b-tabs',{model:{value:(_vm.searchTabIndex),callback:function ($$v) {_vm.searchTabIndex=$$v},expression:\"searchTabIndex\"}},[_c('b-tab',{attrs:{\"title\":\"タグ検索\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"skill_type_selector\"}},_vm._l((_vm.skillTypeFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('skillType')}}},[_vm._v(\" \"+_vm._s(_vm.skillTypes[i])+\" \")])}),1)],1),_c('div',{staticClass:\"widget\",staticStyle:{\"width\":\"170px\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"debounce\":\"500\",\"size\":\"sm\",\"placeholder\":\"検索ワード (正規表現)\",\"update\":_vm.updateQuery('tag')},model:{value:(_vm.tagSearchPattern),callback:function ($$v) {_vm.tagSearchPattern=$$v},expression:\"tagSearchPattern\"}})],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_vm._l((_vm.tagCategory),function(tc,tci){return _c('div',{key:tci,staticClass:\"widget\",staticStyle:{\"margin-right\":\"0px\"}},[_c('b-dropdown',{ref:tc.name,refInFor:true,attrs:{\"text\":tc.display,\"size\":\"sm\"},on:{\"show\":function($event){return _vm.onTagDropdownShow($event, tc)},\"hide\":function($event){return _vm.onTagDropdownHide($event, tc)}}},_vm._l((_vm.getFilteredMainTags(tc.tags)),function(t){return _c('b-dropdown-item',{key:_vm.mainTagTable[t].id,staticClass:\"d-flex flex-column\",attrs:{\"id\":_vm.genTagID(t)},on:{\"click\":function($event){_vm.setTagSearchPattern(t); _vm.hideTagDropdown(tc, t);}}},[_vm._v(\" \"+_vm._s(t)+\" \"),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(`(${_vm.mainTagTable[t].count})`)}}),_vm._v(\" \"),(_vm.mainTagTable[t].note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.mainTagTable[t].note)}}):_vm._e(),(_vm.subTagTable[t])?_c('b-popover',{attrs:{\"target\":_vm.genTagID(t),\"triggers\":\"hover focus\",\"delay\":{show:0, hide:250},\"no-fade\":\"\"},on:{\"show\":function($event){return _vm.onSubtagPopoverShow(tc, t)},\"hidden\":function($event){return _vm.onSubtagPopoverHide(tc, t)}}},_vm._l((_vm.getFilteredSubTags(t)),function(st){return _c('b-dropdown-item',{key:_vm.tagTable[st].id,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.setTagSearchPattern(st, true); _vm.hideTagDropdown(tc, t);}}},[_vm._v(\" \"+_vm._s(st)+\" \"),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(`(${_vm.tagTable[st].count})`)}})])}),1):_vm._e()],1)}),1)],1)}),_c('div',{staticClass:\"widget\"},[_c('b-button',{attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){_vm.tagSearchPattern=''}}},[_vm._v(\"クリア\")])],1)],2)]),_c('b-tab',{attrs:{\"title\":\"フリーワード検索\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\",staticStyle:{\"width\":\"300px\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"debounce\":\"500\",\"size\":\"sm\",\"placeholder\":\"検索ワード (正規表現)\",\"update\":_vm.updateQuery('free')},model:{value:(_vm.freeSearchPattern),callback:function ($$v) {_vm.freeSearchPattern=$$v},expression:\"freeSearchPattern\"}})],1),_c('div',{staticClass:\"widget\"},[_c('b-button',{attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){_vm.freeSearchPattern=''}}},[_vm._v(\"クリア\")])],1)])])],1)],1),_c('div',{staticClass:\"menu-panel\"},[_vm._m(0),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"class_selector\"}},_vm._l((_vm.classFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('class')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.classes[i]),\"width\":\"25\",\"height\":\"25\"}})],1)}),1)],1),_c('div',{staticClass:\"widget\"},[_c('b-button',{attrs:{\"size\":\"sm\",\"pressed\":_vm.engageFilter,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){_vm.engageFilter=$event},\"click\":function($event){return _vm.updateQuery('engage')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('エンゲージ'),\"width\":\"25\",\"height\":\"25\"}})],1)],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"symbol_selector\"}},_vm._l((_vm.symbolFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('symbol')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.symbols[i]),\"height\":\"25\"}})],1)}),1)],1),_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"rareiry_selector\"}},_vm._l((_vm.rarityFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('rarity')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.rarities[i]),\"width\":\"36\",\"height\":\"20\"}})],1)}),1)],1),_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"attack_type_selector\"}},_vm._l((_vm.damageTypeFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('damageType')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.damageTypes[i]),\"width\":\"25\",\"height\":\"25\"}})],1)}),1)],1)])]),_c('div',{staticClass:\"menu-panel\"},[_c('b-tabs',{model:{value:(_vm.settingsTabIndex),callback:function ($$v) {_vm.settingsTabIndex=$$v},expression:\"settingsTabIndex\"}},[_c('b-tab',{attrs:{\"title\":\"表示\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"件数：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.displayCounts[_vm.displayCount],\"size\":\"sm\",\"id\":\"detail_selector\"}},_vm._l((_vm.displayCounts),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.displayCount=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1),_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"形式：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.displayTypes[_vm.displayType],\"size\":\"sm\",\"id\":\"detail_selector\"}},_vm._l((_vm.displayTypes),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.displayType=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1),_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"エンゲージ：\")]),_c('b-dropdown',{attrs:{\"text\":\"一括切替\",\"size\":\"sm\"}},[_c('b-dropdown-item',{staticClass:\"d-flex flex-column\",on:{\"click\":function($event){return _vm.switchEngageAll(false)}}},[_vm._v(\"エンゲージ前\")]),_c('b-dropdown-item',{staticClass:\"d-flex flex-column\",on:{\"click\":function($event){return _vm.switchEngageAll(true)}}},[_vm._v(\"エンゲージ後\")])],1)],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"ソート：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.sortTypes[_vm.sortType],\"size\":\"sm\",\"id\":\"sort_selector\"}},_vm._l((_vm.sortTypes),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.sortType=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1),_c('span',{staticStyle:{\"width\":\"5px\"}}),_c('b-dropdown',{attrs:{\"text\":_vm.sortOrders[_vm.sortOrder],\"size\":\"sm\",\"id\":\"sort_order_selector\"}},_vm._l((_vm.sortOrders),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.sortOrder=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1)])]),_c('b-tab',{attrs:{\"title\":\"ステータス\"}},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"menu-widgets\"},[_c('b-container',_vm._l(([_vm.stat.base.level, _vm.stat.base.star]),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{attrs:{\"for\":`stat-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}})],1)],1)}),1)],1),_c('div',{staticClass:\"menu-widgets\"},[_c('div',{staticStyle:{\"margin\":\"3px\"}},[_c('b-button',{staticStyle:{\"width\":\"7em\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\",\"id\":\"stat-detail\"},on:{\"click\":function($event){return _vm.updateStatus()}}},[_vm._v(\"詳細設定\")]),_c('b-popover',{attrs:{\"target\":\"stat-detail\",\"triggers\":\"click blur\",\"placement\":\"bottom\",\"custom-class\":\"stat-popover\"}},[_c('div',{staticClass:\"flex\",staticStyle:{\"font-size\":\"small\"}},[_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"基本情報\")])]),_vm._l((_vm.stat.base),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"7em\"},attrs:{\"for\":`stat-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e(),(param.type == 'bool')?_c('b-form-checkbox',{staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"plain\":\"\"},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", $$v)},expression:\"param.value\"}}):_vm._e()],1)],1)})],2),_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"記憶の書＋強化ボード\")])]),_vm._l((_vm.stat.boosts),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"8em\"},attrs:{\"for\":`stat-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1),_c('div',{staticClass:\"flex\",staticStyle:{\"margin\":\"5px 5px 0px 5px\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"}},[_c('b-button',{staticStyle:{\"margin\":\"3px\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.resetStatus()}}},[_vm._v(\"カンスト化\")]),_c('b-button',{staticStyle:{\"margin\":\"3px\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.resetStatus(1)}}},[_vm._v(\"キャラ紹介を再現\")])],1),_c('div',{staticStyle:{\"text-align\":\"right\",\"flex-grow\":\"1\"}},[_c('b-button',{staticStyle:{\"width\":\"7em\",\"margin\":\"3px\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.updateStatus()}}},[_vm._v(\"適用\")])],1)])])],1),_c('div',{staticStyle:{\"margin\":\"3px\"}},[_c('b-button',{staticStyle:{\"width\":\"7em\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.updateStatus()}}},[_vm._v(\"適用\")])],1)])])])],1)],1)])],1),_c('div',{staticClass:\"content\",staticStyle:{\"margin-top\":\"200px\"},style:(_vm.style),attrs:{\"id\":\"content\"}},[(_vm.getPageCount(_vm.items) > 1)?_c('div',{staticClass:\"pages\"},[_c('b-pagination',{attrs:{\"total-rows\":_vm.items.length,\"per-page\":_vm.displayCountNum,\"limit\":\"10\",\"hide-goto-end-buttons\":\"\"},on:{\"change\":_vm.onPage},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}),_c('ul',{staticClass:\"pagination b-pagination\",staticStyle:{\"margin-left\":\"0px\"}},[_c('li',{staticClass:\"page-item\"},[_c('b-button',{staticClass:\"page-link\",attrs:{\"variant\":\"outline-secondary\"},on:{\"click\":function($event){return _vm.scrollToBottom()}}},[_vm._v(\" ↓ \")])],1)])],1):_vm._e(),_vm._l((_vm.pagedItems),function(chr){return [_c('div',{key:chr.id,staticClass:\"character\",attrs:{\"id\":'chr_'+chr.id}},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.icon),\"title\":chr.name,\"width\":\"100\",\"height\":\"100\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\",class:{ 'highlighted': _vm.isInfoHighlighted(chr) }},[_c('h5',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(chr.name))}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.class),\"title\":'クラス:'+chr.class,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.symbol),\"title\":'シンボル:'+chr.symbol,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.rarity),\"title\":'レアリティ:'+chr.rarity,\"height\":\"20\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.damageType),\"title\":'攻撃タイプ:'+chr.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(chr.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('移動'),\"title\":\"移動\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(chr.move))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"実装日:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(chr.date))])]),(chr.engage)?_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"エンゲージ:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(chr.engage.date))])]):_vm._e()],1),(chr.status)?_c('div',{staticClass:\"status2\",attrs:{\"title\":`☆${_vm.stat.base.star.value} Lv${_vm.stat.base.level.value} 時のステータス`},domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(chr.status))}}):_vm._e()]),_c('div',{staticClass:\"skills\"},[_c('div',{staticClass:\"talent\",class:{ 'highlighted': _vm.isTalentHighlighted(chr.talent) }},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\",attrs:{\"id\":'chr_'+chr.id+'_talent'}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.talent.icon),\"with\":\"50\",\"height\":\"50\"}}),(_vm.displayType==1)?_c('b-popover',{attrs:{\"target\":'chr_'+chr.id+'_talent',\"title\":chr.talent.name,\"triggers\":\"hover focus\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[_c('div',{staticClass:\"flex\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(chr.talent))}})])]):_vm._e()],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('h5',[_vm._v(\" \"+_vm._s(_vm.skillNameToHtml(chr.talent))+\" \"),(chr.talent.descs)?_c('b-dropdown',{staticClass:\"level-selector\",attrs:{\"text\":chr.talent.current,\"variant\":\"outline-secondary\"}},_vm._l((chr.talent.descs),function(ds,di){return _c('b-dropdown-item',{key:di,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){chr.talent.current=di; chr.talent.desc=ds;}}},[_vm._v(_vm._s(di))])}),1):_vm._e(),(chr.engage)?_c('b-dropdown',{staticClass:\"level-selector\",attrs:{\"text\":chr.engage.enabled ? 'エンゲージ後': 'エンゲージ前',\"variant\":\"outline-secondary\"}},[_c('b-dropdown-item',{staticClass:\"d-flex flex-column\",on:{\"click\":function($event){return _vm.switchEngage(chr, false)}}},[_vm._v(\"エンゲージ前\")]),_c('b-dropdown-item',{staticClass:\"d-flex flex-column\",on:{\"click\":function($event){return _vm.switchEngage(chr, true)}}},[_vm._v(\"エンゲージ後\")])],1):_vm._e()],1),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(chr.talent))}}),(chr.talent.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(chr.talent))}}):_vm._e()])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"tags\"},_vm._l((chr.talent.tags),function(tag,i){return _c('b-badge',{key:i,staticClass:\"tag\",attrs:{\"variant\":\"info\",\"pill\":\"\"},on:{\"click\":function($event){return _vm.setTagSearchPattern(tag)}}},[_vm._v(_vm._s(tag))])}),1)]),_vm._l((chr.skills),function(skill,si){return _c('div',{key:si,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\",attrs:{\"id\":'chr_'+chr.id+'_skill'+si}},[_c('b-link',{on:{\"click\":function($event){return _vm.setSkillFilter(skill)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}})],1),(_vm.displayType>=1)?_c('b-popover',{attrs:{\"target\":'chr_'+chr.id+'_skill'+si,\"title\":skill.name,\"triggers\":\"hover focus\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[(_vm.displayType==1)?_c('div',{staticClass:\"flex\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}})]):_vm._e(),(skill.owners)?_c('div',{staticClass:\"owners\"},[_vm._v(\" 所持者:\"),_c('br'),_vm._l((skill.owners),function(owner,oi){return _c('b-link',{key:oi,on:{\"click\":function($event){return _vm.moveToChr(owner)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(owner.icon),\"title\":owner.name,\"width\":\"50\",\"height\":\"50\"}})],1)})],2):_vm._e()]):_vm._e()],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(_vm.skillNameToHtml(skill)))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"tags\"},_vm._l((skill.tags),function(tag,i){return _c('b-badge',{key:i,staticClass:\"tag\",attrs:{\"variant\":\"info\",\"pill\":\"\"},on:{\"click\":function($event){return _vm.setTagSearchPattern(tag)}}},[_vm._v(_vm._s(tag))])}),1)])})],2)])]),(chr.summon)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"summon\"},_vm._l((chr.summon),function(summon,smi){return _c('div',{key:smi,staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(summon.icon),\"title\":summon.name,\"width\":\"100\",\"height\":\"100\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\",class:{ 'highlighted': _vm.isInfoHighlighted(summon) }},[_c('h5',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(summon.name))}}),_vm._v(\" \"),_c('span',{staticClass:\"note\"},[_vm._v(\"(召喚ユニット)\")])]),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(summon.class),\"title\":'クラス:'+summon.class,\"height\":\"25\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(summon.damageType),\"title\":'攻撃タイプ:'+summon.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(summon.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('移動'),\"title\":\"移動\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(summon.move))])],1)],1),_c('div',{staticClass:\"status2\",domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(summon.status))}})]),_c('div',{staticClass:\"skills\"},[_c('div',{staticClass:\"talent\",class:{ 'highlighted': _vm.isTalentHighlighted(summon.talent) }},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\",attrs:{\"id\":'summon_'+chr.id+'_'+smi+'_talent'}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(summon.talent.icon),\"with\":\"50\",\"height\":\"50\"}}),(_vm.displayType==1)?_c('b-popover',{attrs:{\"target\":'summon_'+chr.id+'_'+smi+'_talent',\"triggers\":\"hover focus\",\"title\":summon.talent.name,\"placement\":\"top\"}},[_c('div',{staticClass:\"flex\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(summon.talent))}})])]):_vm._e()],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('h5',[_vm._v(\" \"+_vm._s(summon.talent.name)+\" \")]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(summon.talent))}}),(summon.talent.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(summon.talent))}}):_vm._e()])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"tags\"},_vm._l((summon.talent.tags),function(tag,i){return _c('b-badge',{key:i,staticClass:\"tag\",attrs:{\"variant\":\"info\",\"pill\":\"\"},on:{\"click\":function($event){return _vm.setTagSearchPattern(tag)}}},[_vm._v(_vm._s(tag))])}),1)]),_vm._l((summon.skills),function(skill,si){return _c('div',{key:si,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\",attrs:{\"id\":'summon_'+chr.id+'_'+smi+'_skill'+si}},[_c('b-link',{on:{\"click\":function($event){return _vm.setSkillFilter(skill)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}})],1),(_vm.displayType>=1)?_c('b-popover',{attrs:{\"target\":'summon_'+chr.id+'_'+smi+'_skill'+si,\"triggers\":\"hover focus\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"title\":skill.name,\"placement\":\"top\"}},[(_vm.displayType==1)?_c('div',{staticClass:\"flex\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}})]):_vm._e(),(skill.owners)?_c('div',{staticClass:\"owners\"},[_vm._v(\" 所持者:\"),_c('br'),_vm._l((skill.owners),function(owner,oi){return _c('b-link',{key:oi,on:{\"click\":function($event){return _vm.moveToChr(owner)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(owner.icon),\"title\":owner.name,\"width\":\"50\",\"height\":\"50\"}})],1)})],2):_vm._e()]):_vm._e()],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"tags\"},_vm._l((skill.tags),function(tag,i){return _c('b-badge',{key:i,staticClass:\"tag\",attrs:{\"variant\":\"info\",\"pill\":\"\"},on:{\"click\":function($event){return _vm.setTagSearchPattern(tag)}}},[_vm._v(_vm._s(tag))])}),1)])})],2)])])}),0):_vm._e()])]}),(_vm.getPageCount(_vm.items) > 1)?_c('div',{staticClass:\"pages\"},[_c('b-pagination',{attrs:{\"total-rows\":_vm.items.length,\"per-page\":_vm.displayCountNum,\"limit\":\"10\",\"hide-goto-end-buttons\":\"\"},on:{\"change\":_vm.onPage},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}),_c('ul',{staticClass:\"pagination b-pagination\",staticStyle:{\"margin-left\":\"0px\"}},[_c('li',{staticClass:\"page-item\"},[_c('b-button',{staticClass:\"page-link\",attrs:{\"variant\":\"outline-secondary\"},on:{\"click\":function($event){return _vm.scrollToTop()}}},[_vm._v(\" ↑ \")])],1)])],1):_vm._e()],2)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('h6',[_vm._v(\"フィルター\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"root\" @mousemove=\"onMouseMove\">\n    <div class=\"header\" :class=\"{ 'hidden': !showHeader }\">\n      <Navigation />\n      <div class=\"menu-content\">\n        <div class=\"menu-panel\">\n          <b-tabs v-model=\"searchTabIndex\">\n            <b-tab title=\"タグ検索\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\">\n                  <b-button-group size=\"sm\" id=\"skill_type_selector\">\n                    <b-button v-for=\"(c, i) in skillTypeFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('skillType')\" variant=\"outline-secondary\">\n                      {{ skillTypes[i] }}\n                    </b-button>\n                  </b-button-group>\n                </div>\n                <div class=\"widget\" style=\"width: 170px\">\n                  <b-form-input v-model=\"tagSearchPattern\" type=\"text\" debounce=\"500\" size=\"sm\" placeholder=\"検索ワード (正規表現)\" :update=\"updateQuery('tag')\" />\n                </div>\n              </div>\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\" style=\"margin-right:0px\" v-for=\"(tc, tci) in tagCategory\" :key=\"tci\">\n                  <b-dropdown :text=\"tc.display\" :ref=\"tc.name\" size=\"sm\" @show=\"onTagDropdownShow($event, tc)\" @hide=\"onTagDropdownHide($event, tc)\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"t in getFilteredMainTags(tc.tags)\" :key=\"mainTagTable[t].id\" :id=\"genTagID(t)\" @click=\"setTagSearchPattern(t); hideTagDropdown(tc, t);\">\n                      {{t}} <span class=\"note\" v-html=\"`(${mainTagTable[t].count})`\"></span> <span v-if=\"mainTagTable[t].note\" class=\"note\" v-html=\"mainTagTable[t].note\"></span>\n                      <b-popover v-if=\"subTagTable[t]\" :target=\"genTagID(t)\" triggers=\"hover focus\" :delay=\"{show:0, hide:250}\" no-fade @show=\"onSubtagPopoverShow(tc, t)\" @hidden=\"onSubtagPopoverHide(tc, t)\">\n                        <b-dropdown-item class=\"d-flex flex-column\" v-for=\"st in getFilteredSubTags(t)\" :key=\"tagTable[st].id\" @click=\"setTagSearchPattern(st, true); hideTagDropdown(tc, t);\">\n                          {{st}} <span class=\"note\" v-html=\"`(${tagTable[st].count})`\"></span>\n                        </b-dropdown-item>\n                      </b-popover>\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <div class=\"widget\">\n                  <b-button variant=\"secondary\" size=\"sm\" @click=\"tagSearchPattern=''\">クリア</b-button>\n                </div>\n              </div>\n            </b-tab>\n            <b-tab title=\"フリーワード検索\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\" style=\"width: 300px\">\n                  <b-form-input v-model=\"freeSearchPattern\" type=\"text\" debounce=\"500\" size=\"sm\" placeholder=\"検索ワード (正規表現)\" :update=\"updateQuery('free')\" />\n                </div>\n                <div class=\"widget\">\n                  <b-button variant=\"secondary\" size=\"sm\" @click=\"freeSearchPattern=''\">クリア</b-button>\n                </div>\n              </div>\n            </b-tab>\n          </b-tabs>\n        </div>\n        <div class=\"menu-panel\">\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <h6>フィルター</h6>\n            </div>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"class_selector\">\n                <b-button v-for=\"(c, i) in classFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('class')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(classes[i])\" width=\"25\" height=\"25\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget\">\n              <b-button size=\"sm\" :pressed.sync=\"engageFilter\" @click=\"updateQuery('engage')\" variant=\"outline-secondary\">\n                <b-img-lazy :src=\"getImageURL('エンゲージ')\" width=\"25\" height=\"25\" />\n              </b-button>\n            </div>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"symbol_selector\">\n                <b-button v-for=\"(c, i) in symbolFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('symbol')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(symbols[i])\" height=\"25\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"rareiry_selector\">\n                <b-button v-for=\"(c, i) in rarityFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('rarity')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(rarities[i])\" width=\"36\" height=\"20\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"attack_type_selector\">\n                <b-button v-for=\"(c, i) in damageTypeFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('damageType')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(damageTypes[i])\" width=\"25\" height=\"25\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n        </div>\n        <div class=\"menu-panel\">\n          <b-tabs v-model=\"settingsTabIndex\">\n            <b-tab title=\"表示\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\">\n                  <span>件数：</span>\n                  <b-dropdown :text=\"displayCounts[displayCount]\" size=\"sm\" id=\"detail_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in displayCounts\" :key=\"i\" @click=\"displayCount=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <div class=\"widget\">\n                  <span>形式：</span>\n                  <b-dropdown :text=\"displayTypes[displayType]\" size=\"sm\" id=\"detail_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in displayTypes\" :key=\"i\" @click=\"displayType=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <div class=\"widget\">\n                  <span>エンゲージ：</span>\n                  <b-dropdown text=\"一括切替\" size=\"sm\">\n                    <b-dropdown-item class=\"d-flex flex-column\" @click=\"switchEngageAll(false)\">エンゲージ前</b-dropdown-item>\n                    <b-dropdown-item class=\"d-flex flex-column\" @click=\"switchEngageAll(true)\">エンゲージ後</b-dropdown-item>\n                  </b-dropdown>\n                </div>\n              </div>\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\">\n                  <span>ソート：</span>\n                  <b-dropdown :text=\"sortTypes[sortType]\" size=\"sm\" id=\"sort_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in sortTypes\" :key=\"i\" @click=\"sortType=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                  <span style=\"width:5px\"></span>\n                  <b-dropdown :text=\"sortOrders[sortOrder]\" size=\"sm\" id=\"sort_order_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in sortOrders\" :key=\"i\" @click=\"sortOrder=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n              </div>\n            </b-tab>\n            <b-tab title=\"ステータス\">\n              <div class=\"flex\">\n                <div class=\"menu-widgets\">\n                  <b-container>\n                    <b-form-row v-for=\"(param, name, index) in [stat.base.level, stat.base.star]\" :key=\"index\">\n                      <b-col style=\"text-align: right\" align-self=\"end\">\n                        <label :for=\"`stat-${name}`\">{{param.label}}</label>\n                      </b-col>\n                      <b-col>\n                        <b-form-input style=\"width: 4em\" :id=\"`stat-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                      </b-col>\n                    </b-form-row>\n                  </b-container>\n                </div>\n                <div class=\"menu-widgets\">\n                  <div style=\"margin: 3px\">\n                    <b-button variant=\"secondary\" size=\"sm\" style=\"width: 7em\" @click=\"updateStatus()\" id=\"stat-detail\">詳細設定</b-button>\n                    <b-popover target=\"stat-detail\" triggers=\"click blur\" placement=\"bottom\" custom-class=\"stat-popover\">\n                      <div class=\"flex\" style=\"font-size: small\">\n                        <b-container>\n                          <div style=\"text-align:center\">\n                            <h6 style=\"margin: 5px 0px\">基本情報</h6>\n                          </div>\n                          <b-form-row v-for=\"(param, name, index) in stat.base\" :key=\"index\">\n                            <b-col style=\"text-align: right\" align-self=\"end\">\n                              <label style=\"width: 7em\" :for=\"`stat-${name}`\">{{param.label}}</label>\n                            </b-col>\n                            <b-col>\n                              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 4em\" :id=\"`stat-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                              <b-form-checkbox v-if=\"param.type == 'bool'\" style=\"width: 5em\" :id=\"`stat-${name}`\" v-model=\"param.value\" size=\"sm\" plain></b-form-checkbox>\n                            </b-col>\n                          </b-form-row>\n                        </b-container>\n                        <b-container>\n                          <div style=\"text-align:center\">\n                            <h6 style=\"margin: 5px 0px\">記憶の書＋強化ボード</h6>\n                          </div>\n                          <b-form-row v-for=\"(param, name, index) in stat.boosts\" :key=\"index\">\n                            <b-col style=\"text-align: right\" align-self=\"end\">\n                              <label style=\"width: 8em\" :for=\"`stat-${name}`\">{{param.label}}</label>\n                            </b-col>\n                            <b-col>\n                              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 4em\" :id=\"`stat-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                            </b-col>\n                          </b-form-row>\n                        </b-container>\n                      </div>\n                      <div class=\"flex\" style=\"margin: 5px 5px 0px 5px\">\n                        <div style=\"text-align: left\">\n                          <b-button variant=\"secondary\" size=\"sm\" style=\"margin: 3px\" @click=\"resetStatus()\">カンスト化</b-button>\n                          <b-button variant=\"secondary\" size=\"sm\" style=\"margin: 3px\" @click=\"resetStatus(1)\">キャラ紹介を再現</b-button>\n                        </div>\n                        <div style=\"text-align: right; flex-grow: 1\">\n                          <b-button variant=\"secondary\" size=\"sm\" style=\"width: 7em; margin: 3px\" @click=\"updateStatus()\">適用</b-button>\n                        </div>\n                      </div>\n                    </b-popover>\n                  </div>\n                  <div style=\"margin: 3px\">\n                    <b-button variant=\"secondary\" size=\"sm\" style=\"width: 7em\" @click=\"updateStatus()\">適用</b-button>\n                  </div>\n                </div>\n              </div>\n            </b-tab>\n          </b-tabs>\n        </div>\n      </div>\n    </div>\n    <div id=\"content\" class=\"content\" style=\"margin-top: 200px;\" :style=\"style\">\n\n      <div class=\"pages\" v-if=\"getPageCount(items) > 1\">\n        <b-pagination v-model=\"page\"\n                      :total-rows=\"items.length\"\n                      :per-page=\"displayCountNum\"\n                      @change=\"onPage\"\n                      limit=\"10\"\n                      hide-goto-end-buttons></b-pagination>\n        <ul class=\"pagination b-pagination\" style=\"margin-left: 0px;\">\n          <li class=\"page-item\">\n            <b-button @click=\"scrollToBottom()\" variant=\"outline-secondary\" class=\"page-link\">\n              ↓\n            </b-button>\n          </li>\n        </ul>\n      </div>\n\n      <template v-for=\"chr in pagedItems\">\n        <div class=\"character\" :id=\"'chr_'+chr.id\" :key=\"chr.id\">\n          <div class=\"flex\">\n            <div class=\"portrait\">\n              <b-img-lazy :src=\"getImageURL(chr.icon)\" :title=\"chr.name\" width=\"100\" height=\"100\" rounded />\n            </div>\n            <div class=\"detail\" v-show=\"displayType >= 1\">\n              <div class=\"info\" :class=\"{ 'highlighted': isInfoHighlighted(chr) }\">\n                <h5 v-html=\"chrNameToHtml(chr.name)\"></h5>\n                <div class=\"status\">\n                  <b-img-lazy :src=\"getImageURL(chr.class)\" :title=\"'クラス:'+chr.class\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(chr.symbol)\" :title=\"'シンボル:'+chr.symbol\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(chr.rarity)\" :title=\"'レアリティ:'+chr.rarity\" height=\"20\" />\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(chr.damageType)\" :title=\"'攻撃タイプ:'+chr.damageType\" width=\"20\" height=\"20\" /></div>\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{chr.range}}</span></div>\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('移動')\" title=\"移動\" width=\"18\" height=\"18\" /><span>{{chr.move}}</span></div>\n                  <div class=\"param-box\"><span class=\"param-name\">実装日:</span><span class=\"param-value\">{{chr.date}}</span></div>\n                  <div class=\"param-box\" v-if=\"chr.engage\"><span class=\"param-name\">エンゲージ:</span><span class=\"param-value\">{{chr.engage.date}}</span></div>\n                </div>\n                <div v-if=\"chr.status\" class=\"status2\" :title=\"`☆${stat.base.star.value} Lv${stat.base.level.value} 時のステータス`\" v-html=\"statusToHtml(chr.status)\" />\n              </div>\n              <div class=\"skills\">\n                <div class=\"talent\" :class=\"{ 'highlighted': isTalentHighlighted(chr.talent) }\">\n                  <div class=\"flex\">\n                    <div class=\"icon\" :id=\"'chr_'+chr.id+'_talent'\">\n                      <b-img-lazy :src=\"getImageURL(chr.talent.icon)\" with=\"50\" height=\"50\" />\n                      <b-popover v-if=\"displayType==1\" :target=\"'chr_'+chr.id+'_talent'\" :title=\"chr.talent.name\" triggers=\"hover focus\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                        <div class=\"flex\">\n                          <div v-html=\"descToHtml(chr.talent)\"></div>\n                        </div>\n                      </b-popover>\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <h5>\n                        {{ skillNameToHtml(chr.talent) }}\n                        <b-dropdown v-if=\"chr.talent.descs\" class=\"level-selector\" :text=\"chr.talent.current\" variant=\"outline-secondary\">\n                          <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(ds, di) in chr.talent.descs\" :key=\"di\" @click=\"chr.talent.current=di; chr.talent.desc=ds;\">{{di}}</b-dropdown-item>\n                        </b-dropdown>\n                        <b-dropdown v-if=\"chr.engage\" class=\"level-selector\" :text=\"chr.engage.enabled ? 'エンゲージ後': 'エンゲージ前'\" variant=\"outline-secondary\">\n                          <b-dropdown-item class=\"d-flex flex-column\" @click=\"switchEngage(chr, false)\">エンゲージ前</b-dropdown-item>\n                          <b-dropdown-item class=\"d-flex flex-column\" @click=\"switchEngage(chr, true)\">エンゲージ後</b-dropdown-item>\n                        </b-dropdown>\n                      </h5>\n                      <p><span v-html=\"descToHtml(chr.talent)\"></span><span v-if=\"chr.talent.note\" class=\"note\" v-html=\"noteToHtml(chr.talent)\"></span></p>\n                    </div>\n                  </div>\n                  <div class=\"tags\" v-show=\"displayType >= 2\">\n                    <b-badge class=\"tag\" :key=\"i\" v-for=\"(tag, i) in chr.talent.tags\" variant=\"info\" pill @click=\"setTagSearchPattern(tag)\">{{ tag }}</b-badge>\n                  </div>\n                </div>\n                <div class=\"skill\" v-for=\"(skill, si) in chr.skills\" :class=\"getSkillClass(skill)\" :key=\"si\">\n                  <div class=\"flex\">\n                    <div class=\"icon\" :id=\"'chr_'+chr.id+'_skill'+si\">\n                      <b-link @click=\"setSkillFilter(skill)\"><b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" /></b-link>\n                      <b-popover v-if=\"displayType>=1\" :target=\"'chr_'+chr.id+'_skill'+si\" :title=\"skill.name\" triggers=\"hover focus\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                        <div class=\"flex\" v-if=\"displayType==1\">\n                          <div v-html=\"descToHtml(skill)\"></div>\n                        </div>\n                        <div v-if=\"skill.owners\" class=\"owners\">\n                          所持者:<br />\n                          <b-link v-for=\"(owner, oi) in skill.owners\" :key=\"oi\" @click=\"moveToChr(owner)\">\n                            <b-img-lazy :src=\"getImageURL(owner.icon)\" :title=\"owner.name\" width=\"50\" height=\"50\" />\n                          </b-link>\n                        </div>\n                      </b-popover>\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <div class=\"flex\">\n                        <h6>{{ skillNameToHtml(skill) }}</h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                      </div>\n                      <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                    </div>\n                  </div>\n                  <div class=\"tags\" v-show=\"displayType >= 2\">\n                    <b-badge class=\"tag\" :key=\"i\" v-for=\"(tag, i) in skill.tags\" variant=\"info\" pill @click=\"setTagSearchPattern(tag)\">{{ tag }}</b-badge>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"summon\" v-if=\"chr.summon\" v-show=\"displayType >= 1\">\n            <div class=\"flex\" v-for=\"(summon, smi) in chr.summon\" :key=\"smi\">\n              <div class=\"portrait\">\n                <b-img-lazy :src=\"getImageURL(summon.icon)\" :title=\"summon.name\" width=\"100\" height=\"100\" rounded />\n              </div>\n              <div class=\"detail\" v-show=\"displayType >= 1\">\n                <div class=\"info\" :class=\"{ 'highlighted': isInfoHighlighted(summon) }\">\n                  <h5><span v-html=\"chrNameToHtml(summon.name)\"></span> <span class=\"note\">(召喚ユニット)</span></h5>\n                  <div class=\"status\">\n                    <b-img-lazy :src=\"getImageURL(summon.class)\" :title=\"'クラス:'+summon.class\" height=\"25\" />\n                    <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(summon.damageType)\" :title=\"'攻撃タイプ:'+summon.damageType\" width=\"20\" height=\"20\" /></div>\n                    <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{summon.range}}</span></div>\n                    <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('移動')\" title=\"移動\" width=\"18\" height=\"18\" /><span>{{summon.move}}</span></div>\n                  </div>\n                  <div class=\"status2\" v-html=\"statusToHtml(summon.status)\" />\n                </div>\n                <div class=\"skills\">\n                  <div class=\"talent\" :class=\"{ 'highlighted': isTalentHighlighted(summon.talent) }\">\n                    <div class=\"flex\">\n                      <div class=\"icon\" :id=\"'summon_'+chr.id+'_'+smi+'_talent'\">\n                        <b-img-lazy :src=\"getImageURL(summon.talent.icon)\" with=\"50\" height=\"50\" />\n                        <b-popover v-if=\"displayType==1\" :target=\"'summon_'+chr.id+'_'+smi+'_talent'\" triggers=\"hover focus\" :title=\"summon.talent.name\" placement=\"top\">\n                          <div class=\"flex\">\n                            <div v-html=\"descToHtml(summon.talent)\"></div>\n                          </div>\n                        </b-popover>\n                      </div>\n                      <div class=\"desc\" v-show=\"displayType >= 2\">\n                        <h5>\n                          {{ summon.talent.name }}\n                        </h5>\n                        <p><span v-html=\"descToHtml(summon.talent)\"></span><span v-if=\"summon.talent.note\" class=\"note\" v-html=\"noteToHtml(summon.talent)\"></span></p>\n                      </div>\n                    </div>\n                    <div class=\"tags\" v-show=\"displayType >= 2\">\n                      <b-badge class=\"tag\" :key=\"i\" v-for=\"(tag, i) in summon.talent.tags\" variant=\"info\" pill @click=\"setTagSearchPattern(tag)\">{{ tag }}</b-badge>\n                    </div>\n                  </div>\n                  <div class=\"skill\" v-for=\"(skill, si) in summon.skills\" :class=\"getSkillClass(skill)\" :key=\"si\">\n                    <div class=\"flex\">\n                      <div class=\"icon\" :id=\"'summon_'+chr.id+'_'+smi+'_skill'+si\">\n                        <b-link @click=\"setSkillFilter(skill)\"><b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" /></b-link>\n                        <b-popover v-if=\"displayType>=1\" :target=\"'summon_'+chr.id+'_'+smi+'_skill'+si\" triggers=\"hover focus\" :delay=\"{show:0, hide:250}\" no-fade :title=\"skill.name\" placement=\"top\">\n                          <div class=\"flex\" v-if=\"displayType==1\">\n                            <div v-html=\"descToHtml(skill)\"></div>\n                          </div>\n                          <div v-if=\"skill.owners\" class=\"owners\">\n                            所持者:<br />\n                            <b-link v-for=\"(owner, oi) in skill.owners\" :key=\"oi\" @click=\"moveToChr(owner)\">\n                              <b-img-lazy :src=\"getImageURL(owner.icon)\" :title=\"owner.name\" width=\"50\" height=\"50\" />\n                            </b-link>\n                          </div>\n                        </b-popover>\n                      </div>\n                      <div class=\"desc\" v-show=\"displayType >= 2\">\n                        <div class=\"flex\">\n                          <h6>{{ skill.name }}</h6>\n                          <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                        </div>\n                        <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                      </div>\n                    </div>\n                    <div class=\"tags\" v-show=\"displayType >= 2\">\n                      <b-badge class=\"tag\" :key=\"i\" v-for=\"(tag, i) in skill.tags\" variant=\"info\" pill @click=\"setTagSearchPattern(tag)\">{{ tag }}</b-badge>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n      </template>\n\n      <div class=\"pages\" v-if=\"getPageCount(items) > 1\">\n        <b-pagination v-model=\"page\"\n                      :total-rows=\"items.length\"\n                      :per-page=\"displayCountNum\"\n                      @change=\"onPage\"\n                      limit=\"10\"\n                      hide-goto-end-buttons></b-pagination>\n        <ul class=\"pagination b-pagination\" style=\"margin-left: 0px;\">\n          <li class=\"page-item\">\n            <b-button @click=\"scrollToTop()\" variant=\"outline-secondary\" class=\"page-link\">\n              ↑\n            </b-button>\n          </li>\n        </ul>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navigation from './Navigation.vue'\nimport jsonActive from '../assets/main_active.json'\nimport jsonPassive from '../assets/main_passive.json'\nimport jsonTalents from '../assets/main_talents.json'\nimport jsonCharacters from '../assets/main_characters.json'\nimport jsonNpcMainChrs from '../assets/npc_main_characters.json'\nimport jsonConstants from '../assets/constants.json'\nimport common from \"./common\"\nimport * as lut from './utils.js'\n\nexport default {\n  name: 'MainCharacters',\n  components: {\n    Navigation,\n  },\n  mixins: [common],\n\n  data() {\n    return {\n      active: jsonActive,\n      passive: jsonPassive,\n      talents: jsonTalents,\n      npc: jsonNpcMainChrs,\n      characters: jsonCharacters,\n      constants: jsonConstants,\n\n      classes: jsonConstants.classes,\n      symbols: jsonConstants.symbols,\n      damageTypes: jsonConstants.damageTypes,\n      rarities: jsonConstants.rarities,\n      skillTypes: [\n        \"タレント\",\n        \"パッシブ\",\n        \"アクティブ\",\n      ],\n\n      displayTypes: [\n        \"アイコン\",\n        \"シンプル\",\n        \"詳細\",\n      ],\n      sortTypes: [\n        \"実装日\",\n        \"エンゲージ実装日\",\n        \"戦闘力\",\n        \"攻撃力\",\n        \"HP\",\n        \"アタック\",\n        \"ディフェンス\",\n        \"マジック\",\n        \"レジスト\",\n        \"テクニック\",\n      ],\n      sortOrders: [\n        \"降順\",\n        \"昇順\"\n      ],\n\n      tagCategory: {\n        buff: {\n          display: \"バフ系\",\n          name: \"tags_buff\",\n          tags: new Set(),\n        },\n        debuff: {\n          display: \"デバフ系\",\n          name: \"tags_debuff\",\n          tags: new Set(),\n        },\n        resist: {\n          display: \"無効化系\",\n          name: \"tags_resist\",\n          tags: new Set(),\n        },\n        action: {\n          display: \"攻撃/回復\",\n          name: \"tags_action\",\n          tags: new Set(),\n        },\n        other: {\n          display: \"その他\",\n          name: \"tags_other\",\n          tags: new Set(),\n        },\n      },\n\n      classFilter: [],\n      symbolFilter: [],\n      rarityFilter: [],\n      damageTypeFilter: [],\n      skillTypeFilter: [],\n      engageFilter: false,\n\n      stat: {\n        base: {\n          level: {\n            label: \"レベル\",\n            type: \"number\",\n            min: 1,\n            value: 110,\n          },\n          star: {\n            label: \"⭐\",\n            type: \"number\",\n            min: 1,\n            max: 6,\n            value: 6,\n          },\n          master: {\n            label: \"マスターレベル\",\n            type: \"number\",\n            min: 0,\n            max: 3,\n            value: 3,\n          },\n          loveBonus: {\n            label: \"好感度ボーナス\",\n            type: \"bool\",\n            value: true,\n          },\n        },\n        boosts: {\n          hp: {\n            label: \"HP (%)\",\n            type: \"number\",\n            min: 0,\n            value: 150,\n          },\n          atk: {\n            label: \"アタック (%)\",\n            type: \"number\",\n            min: 0,\n            value: 140,\n          },\n          def: {\n            label: \"ディフェンス (%)\",\n            type: \"number\",\n            min: 0,\n            value: 130,\n          },\n          mag: {\n            label: \"マジック (%)\",\n            type: \"number\",\n            min: 0,\n            value: 140,\n          },\n          res: {\n            label: \"レジスト (%)\",\n            type: \"number\",\n            min: 0,\n            value: 130,\n          },\n          tec: {\n            label: \"テクニック (%)\",\n            type: \"number\",\n            min: 0,\n            value: 50,\n          },\n        },\n      },\n\n      enableUpdateURL: false,\n      prevURL: \"\",\n    };\n  },\n\n  computed: {\n    rawItems() {\n      return this.characters;\n    },\n    items() {\n      let ret = this.characters.filter(a => this.filterItem(a)); // filter & shallow copy\n\n      const c = this.compare;\n\n      const comparer = [\n        (a, b) => b.date.localeCompare(a.date), // 実装日\n        (a, b) => this.compareEngageDate(a, b), // エンゲージ実装日\n        (a, b) => c(a.status[6], b.status[6]), // 戦闘力\n        (a, b) => c(a.attackPower, b.attackPower), // 攻撃力\n        (a, b) => c(a.status[0], b.status[0]), // HP\n        (a, b) => c(a.status[1], b.status[1]), // アタック\n        (a, b) => c(a.status[2], b.status[2]), // ディフェンス\n        (a, b) => c(a.status[3], b.status[3]), // マジック\n        (a, b) => c(a.status[4], b.status[4]), // レジスト\n        (a, b) => c(a.status[5], b.status[5]), // テクニック\n      ];\n      if (this.sortType >= 0 && this.sortType < comparer.length) {\n        const fn = comparer[this.sortType]\n        if (this.sortOrder == 0)\n          ret.sort((a, b) => fn(a, b));\n        else\n          ret.sort((a, b) => fn(b, a));\n      }\n\n      return ret;\n    },\n    pagedItems() {\n      return this.applyPage(this.items);\n    },\n  },\n\n  created() {\n    document.title = \"れじぇくろDB: メインキャラ\";\n    this.setupDB();\n\n    this.fillFilter(this.classFilter, this.classes);\n    this.fillFilter(this.symbolFilter, this.symbols);\n    this.fillFilter(this.rarityFilter, this.rarities);\n    this.fillFilter(this.damageTypeFilter, this.damageTypes);\n    this.fillFilter(this.skillTypeFilter, this.skillTypes);\n\n    this.decodeURL();\n    this.updateTagCounts();\n  },\n\n  mounted() {\n    this.enableUpdateURL = true;\n    window.onpopstate = () => {\n      this.enableUpdateURL = false;\n      this.decodeURL(true);\n      this.$nextTick(() => {\n        this.enableUpdateURL = true;\n      });\n    };\n  },\n\n  methods: {\n    setupDB() {\n      // 外部 json 由来のデータへの変更はセッションをまたいでしまうので、deep copy しておく\n      this.active = structuredClone(this.active);\n      this.passive = structuredClone(this.passive);\n      this.talents = structuredClone(this.talents);\n      this.npc = structuredClone(this.npc);\n      this.characters = structuredClone(this.characters);\n\n      const tagFilter = (skill, effectCategory, effect) => {\n        if (effectCategory == \"バフ\") {\n          if (!this.isPublicTarget(effect))\n            return false;\n          const cond = effect.condition;\n          if (cond && (cond.onClass || cond.onSymbol))\n            return false;\n        }\n        else if (effectCategory == \"デバフ\") {\n          if (effect.ephemeral)\n            return false;\n        }\n        return true;\n      };\n      const options = {\n        npc: this.npc,\n        includeSkillEffectTags: true,\n        tagFilter: tagFilter\n      };\n      this.setupCharacters(this.npc, this.active, this.passive, this.talents, options);\n      this.setupCharacters(this.characters, this.active, this.passive, this.talents, options);\n\n      let chrId = 0;\n      for (let chr of this.characters) {\n        chr.id = ++chrId;\n        chr.classId = this.classes.findIndex(v => v == chr.class);\n        chr.symbolId = this.symbols.findIndex(v => v == chr.symbol);\n        chr.rarityId = this.rarities.findIndex(v => v == chr.rarity);\n        chr.damageTypeId = this.damageTypes.findIndex(v => v == chr.damageType);\n        this.$set(chr, 'status', [0, 0, 0, 0, 0, 0, 0]);\n        Object.defineProperty(chr, 'attackPower', {\n          get: chr.damageTypeId == 0 ? () => { return chr.status[1]; } : () => { return chr.status[3]; },\n        });\n      }\n      this.stat.defaults = [\n        ...Object.values(this.stat.base).map(a => a.value),\n        ...Object.values(this.stat.boosts).map(a => a.value),\n      ];\n      this.updateStatus();\n\n      for (let skill of [...this.active, ...this.passive, ...this.talents]) {\n        this.registerTags(skill.tags);\n      }\n\n      // リストの上の方に出すため特別処理\n      let handledTags = new Set();\n      this.appendSet(handledTags, this.constants.tagsHidden);\n      let handlePredefinedTags = (dstTags, predefinedTags) => {\n        for (let t of predefinedTags) {\n          dstTags.add(t);\n          handledTags.add(t);\n        }\n      };\n      handlePredefinedTags(this.tagCategory.buff.tags, [\"シンボルスキル\"]);\n\n      const isAction = (t) => {\n        for (const n of this.constants.tagsAction) {\n          if (t.startsWith(n))\n            return true;\n        }\n        return false;\n      };\n\n      for (let t of this.getMainTags()) {\n        if (handledTags.has(t))\n          continue;\n\n        if (t.match(/^バフ:/))\n          this.tagCategory.buff.tags.add(t);\n        else if (t.match(/^デバフ:/))\n          this.tagCategory.debuff.tags.add(t);\n        else if (t.match(/^無効化:/))\n          this.tagCategory.resist.tags.add(t);\n        else if (isAction(t))\n          this.tagCategory.action.tags.add(t);\n        else\n          this.tagCategory.other.tags.add(t);\n      }\n      this.reorderSet(this.tagCategory.buff.tags, this.constants.tagsBuff);\n      this.reorderSet(this.tagCategory.debuff.tags, this.constants.tagsDebuff);\n      this.reorderSet(this.tagCategory.resist.tags, this.constants.tagsResist);\n      this.reorderSet(this.tagCategory.action.tags, this.constants.tagsAction);\n      this.reorderSet(this.tagCategory.other.tags, this.constants.tagsOther);\n      this.reorderSubtag();\n    },\n\n    switchEngage(chr, v) {\n      if (chr.engage) {\n        chr.engage.enabled = v;\n      }\n      this.updateTagCounts();\n    },\n    switchEngageAll(v) {\n      for (let chr of this.characters) {\n        if (chr.engage) {\n          chr.engage.enabled = v;\n        }\n      }\n      this.updateTagCounts();\n    },\n    updateStatus() {\n      const clampAndGet = (a) => {\n        if (typeof a.min == 'number') {\n          a.value = Math.max(a.value, a.min);\n        }\n        if (typeof a.max == 'number') {\n          a.value = Math.min(a.value, a.max);\n        }\n        return a.value;\n      }\n      let [level, star, master, loveBonus] = Object.values(this.stat.base).map(a => clampAndGet(a));\n      let boosts = Object.values(this.stat.boosts).map(a => a.value);\n\n      for (let chr of this.characters) {\n        const status = this.getMainChrStatus(chr, level, star, master, loveBonus, boosts);\n        if (status) {\n          chr.status = [...status, this.getMainBattlePower(status, star, master, 5, 0, false)];\n        }\n\n        // 召喚ユニット\n        for (let sum of chr?.summonAll ?? []) {\n          sum.status = this.getNPCChrStatus(sum, level);\n        }\n      }\n      this.$forceUpdate();\n    },\n    resetStatus(type = 0) {\n      const s = this.stat;\n      const presets = [\n        s.defaults,\n        [100, 6, 0, true, 70, 50, 50, 50, 50, 50]\n      ];\n      let vals = [...presets[type]];\n      for (let v of [...Object.values(s.base), ...Object.values(s.boosts)]) {\n        v.value = vals.shift();\n      }\n      this.updateStatus();\n    },\n\n    moveToChr(chr, revealHidden = true) {\n      const cid = typeof chr === 'number' ? chr : chr.id;\n      let p = this.getPageOf(this.items, a => a.id == cid);\n      if (p == 0 && revealHidden) {\n        this.resetAllFilters();\n        p = this.getPageOf(this.items, a => a.id == cid);\n      }\n      this.updateURL({ id: cid });\n\n      if (p > 0) {\n        this.page = p;\n        this.$nextTick(() => {\n          let e = document.getElementById(`chr_${cid}`);\n          if (e != null) {\n            this.preventShowHideHeaderOnScroll = 1;\n            this.hideHeader();\n            this.hidePopover();\n            e.scrollIntoView();\n          }\n        });\n      }\n    },\n\n    resetAllFilters() {\n      this.tagSearchPattern = '';\n      this.freeSearchPattern = '';\n\n      const resetFilter = (filter) => {\n        for (let e of filter)\n          e.state = false;\n      };\n      resetFilter(this.classFilter);\n      resetFilter(this.symbolFilter);\n      resetFilter(this.rarityFilter);\n      resetFilter(this.damageTypeFilter);\n      resetFilter(this.skillTypeFilter);\n\n      this.updateQuery('any', false);\n    },\n    setSkillFilter(skill) {\n      this.setFreeSearchPattern(skill.name, true);\n    },\n\n    isInfoHighlighted(chr) {\n      return this.freeSearchFn && this.freeSearchFn(chr)\n        ? 2 : 0;\n    },\n    isTalentHighlighted(talent) {\n      let r = 0;\n      if (this.tagSearchFn) {\n        r |= this.applyTalentFilter(talent) && this.tagSearchFn(talent)\n          ? 1 : 0;\n      }\n      if (this.freeSearchFn) {\n        r |= this.freeSearchFn(talent)\n          ? 2 : 0;\n      }\n      return r;\n    },\n    isSkillHighlighted(skill) {\n      let r = 0;\n      if (this.tagSearchFn) {\n        r |= this.applySkillTypeFilter(skill) && this.tagSearchFn(skill)\n          ? 1 : 0;\n      }\n      if (this.freeSearchFn) {\n        r |= this.freeSearchFn(skill)\n          ? 2 : 0;\n      }\n      return r;\n    },\n    applyTalentFilter(talent) {\n      return !this.isFilterEnabled(this.skillTypeFilter) || this.skillTypeFilter[0].state;\n    },\n    applySkillTypeFilter(skill) {\n      return !this.isFilterEnabled(this.skillTypeFilter) ||\n        (skill.isPassive && this.skillTypeFilter[1].state) ||\n        (skill.isActive && this.skillTypeFilter[2].state);\n    },\n    applyClassFilter(chr) {\n      return (!this.engageFilter || chr.engage) && (\n        this.filterMatch(this.classFilter, chr.classId) &&\n        this.filterMatch(this.symbolFilter, chr.symbolId) &&\n        this.filterMatch(this.rarityFilter, chr.rarityId) &&\n        this.filterMatch(this.damageTypeFilter, chr.damageTypeId));\n    },\n    applySearchPatterns(chr) {\n      const doApply = (obj) => {\n        let r = this.isInfoHighlighted(obj) | this.isTalentHighlighted(obj.talent);\n        for (let skill of obj.skills)\n          r |= this.isSkillHighlighted(skill);\n        return r;\n      };\n\n      let r = doApply(chr);\n      if (chr.summon) {\n        for (let summon of chr.summon)\n          r |= doApply(summon);\n      }\n      return r == this.getSearchMask();\n    },\n    filterItem(chr) {\n      let ok = this.applyClassFilter(chr);\n      if (ok && this.isSearchPatternSet()) {\n        ok = this.applySearchPatterns(chr);\n      }\n      return ok;\n    },\n    updateTagCounts() {\n      this.resetTagCounts();\n\n      const doCount = (obj) => {\n        if (this.applyTalentFilter(obj.talent)) {\n          this.countTags(obj.talent.tags);\n        }\n        for (let skill of obj.skills) {\n          if (this.applySkillTypeFilter(skill)) {\n            this.countTags(skill.tags);\n          }\n        }\n      };\n\n      for (let chr of this.characters) {\n        if (this.applyClassFilter(chr)) {\n          doCount(chr);\n          if (chr.summon) {\n            for (let summon of chr.summon)\n              doCount(summon);\n          }\n        }\n      }\n    },\n\n    getSkillClass(skill) {\n      return {\n        active: skill.isActive,\n        passive: skill.isPassive,\n        highlighted: this.isSkillHighlighted(skill),\n      }\n    },\n\n    updateURL(kvp) {\n      if (!this.enableUpdateURL)\n        return false;\n\n      let seri = new lut.URLSerializer();\n      if (this.isFilterEnabled(this.classFilter))\n        seri.class = this.serializeFilter(this.classFilter);\n      if (this.isFilterEnabled(this.symbolFilter))\n        seri.symbol = this.serializeFilter(this.symbolFilter);\n      if (this.isFilterEnabled(this.rarityFilter))\n        seri.rarity = this.serializeFilter(this.rarityFilter);\n      if (this.isFilterEnabled(this.damageTypeFilter))\n        seri.damageType = this.serializeFilter(this.damageTypeFilter);\n      if (this.isFilterEnabled(this.skillTypeFilter))\n        seri.skillType = this.serializeFilter(this.skillTypeFilter);\n      if (this.tagSearchPattern.length > 0)\n        seri.tag = this.tagSearchPattern;\n      if (this.freeSearchPattern.length > 0)\n        seri.free = this.freeSearchPattern;\n      if (this.engageFilter)\n        seri.engage = 1;\n\n      if (kvp) {\n        for (const k in kvp)\n          seri[k] = kvp[k];\n      }\n\n      let url = seri.serialize();\n      if (url != this.prevURL) {\n        window.history.pushState(null, null, url);\n        this.prevURL = url;\n        return true;\n      }\n      return false;\n    },\n    decodeURL(initState = false) {\n      let data = new lut.URLSerializer({\n        class: 0,\n        symbol: 0,\n        damageType: 0,\n        rarity: 0,\n        skillType: 0,\n        tag: \"\",\n        free: \"\",\n        p: 1,\n        id: -1,\n      });\n\n      if (data.deserialize(window.location.href) || initState) {\n        this.deserializeFilter(this.classFilter, data.class);\n        this.deserializeFilter(this.symbolFilter, data.symbol);\n        this.deserializeFilter(this.damageTypeFilter, data.damageType);\n        this.deserializeFilter(this.rarityFilter, data.rarity);\n        this.deserializeFilter(this.skillTypeFilter, data.skillType);\n        this.tagSearchPattern = data.tag;\n        this.freeSearchPattern = data.free;\n        if (this.freeSearchPattern.length != 0)\n          this.searchTabIndex = 1;\n\n        if (data.p > 0)\n          this.page = data.p;\n        if (data.id > -1)\n          this.moveToChr(data.id);\n        if (data.engage)\n          this.engageFilter = true;\n      }\n    },\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MainCharacters.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MainCharacters.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MainCharacters.vue?vue&type=template&id=fd2b4de0&scoped=true\"\nimport script from \"./MainCharacters.vue?vue&type=script&lang=js\"\nexport * from \"./MainCharacters.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd2b4de0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\",on:{\"mousemove\":_vm.onMouseMove}},[_c('div',{staticClass:\"header\",class:{ 'hidden': !_vm.showHeader }},[_c('Navigation'),_c('div',{staticClass:\"menu-content\"},[_c('div',{staticClass:\"menu-panel\"},[_c('b-tabs',{model:{value:(_vm.searchTabIndex),callback:function ($$v) {_vm.searchTabIndex=$$v},expression:\"searchTabIndex\"}},[_c('b-tab',{attrs:{\"title\":\"タグ検索\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"skill_type_selector\"}},_vm._l((_vm.skillTypeFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('skillType')}}},[_vm._v(\" \"+_vm._s(_vm.skillTypes[i])+\" \")])}),1)],1),_c('div',{staticClass:\"widget\",staticStyle:{\"width\":\"170px\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"debounce\":\"500\",\"size\":\"sm\",\"placeholder\":\"検索ワード (正規表現)\",\"update\":_vm.updateQuery('tag')},model:{value:(_vm.tagSearchPattern),callback:function ($$v) {_vm.tagSearchPattern=$$v},expression:\"tagSearchPattern\"}})],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_vm._l((_vm.tagCategory),function(tc,tci){return _c('div',{key:tci,staticClass:\"widget\",staticStyle:{\"margin-right\":\"0px\"}},[_c('b-dropdown',{ref:tc.name,refInFor:true,attrs:{\"text\":tc.display,\"size\":\"sm\"},on:{\"show\":function($event){return _vm.onTagDropdownShow($event, tc)},\"hide\":function($event){return _vm.onTagDropdownHide($event, tc)}}},_vm._l((_vm.getFilteredMainTags(tc.tags)),function(t){return _c('b-dropdown-item',{key:_vm.mainTagTable[t].id,staticClass:\"d-flex flex-column\",attrs:{\"id\":_vm.genTagID(t)},on:{\"click\":function($event){_vm.setTagSearchPattern(t); _vm.hideTagDropdown(tc, t);}}},[_vm._v(\" \"+_vm._s(t)+\" \"),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(`(${_vm.mainTagTable[t].count})`)}}),_vm._v(\" \"),(_vm.mainTagTable[t].note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.mainTagTable[t].note)}}):_vm._e(),(_vm.subTagTable[t])?_c('b-popover',{attrs:{\"target\":_vm.genTagID(t),\"triggers\":\"hover focus\",\"delay\":{show:0, hide:250},\"no-fade\":\"\"},on:{\"show\":function($event){return _vm.onSubtagPopoverShow(tc, t)},\"hidden\":function($event){return _vm.onSubtagPopoverHide(tc, t)}}},_vm._l((_vm.getFilteredSubTags(t)),function(st){return _c('b-dropdown-item',{key:_vm.tagTable[st].id,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.setTagSearchPattern(st, true); _vm.hideTagDropdown(tc, t);}}},[_vm._v(\" \"+_vm._s(st)+\" \"),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(`(${_vm.tagTable[st].count})`)}})])}),1):_vm._e()],1)}),1)],1)}),_c('div',{staticClass:\"widget\"},[_c('b-button',{attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){_vm.tagSearchPattern=''}}},[_vm._v(\"クリア\")])],1)],2)]),_c('b-tab',{attrs:{\"title\":\"フリーワード検索\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\",staticStyle:{\"width\":\"300px\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"debounce\":\"500\",\"size\":\"sm\",\"placeholder\":\"検索ワード (正規表現)\",\"update\":_vm.updateQuery('free')},model:{value:(_vm.freeSearchPattern),callback:function ($$v) {_vm.freeSearchPattern=$$v},expression:\"freeSearchPattern\"}})],1),_c('div',{staticClass:\"widget\"},[_c('b-button',{attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){_vm.freeSearchPattern=''}}},[_vm._v(\"クリア\")])],1)])])],1)],1),_c('div',{staticClass:\"menu-panel\"},[_vm._m(0),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"class_selector\"}},_vm._l((_vm.classFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('class')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.classes[i]),\"width\":\"25\",\"height\":\"25\"}})],1)}),1)],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"support_type_selector\"}},_vm._l((_vm.supportTypeFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('supportType')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.supportTypes[i]),\"height\":\"25\"}})],1)}),1)],1),_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"rareiry_selector\"}},_vm._l((_vm.rarityFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('rarity')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.rarities[i]),\"width\":\"36\",\"height\":\"20\"}})],1)}),1)],1),_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"attack_type_selector\"}},_vm._l((_vm.damageTypeFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('damageType')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.damageTypes[i]),\"width\":\"25\",\"height\":\"25\"}})],1)}),1)],1)])]),_c('div',{staticClass:\"menu-panel\"},[_c('b-tabs',{model:{value:(_vm.settingsTabIndex),callback:function ($$v) {_vm.settingsTabIndex=$$v},expression:\"settingsTabIndex\"}},[_c('b-tab',{attrs:{\"title\":\"表示\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"件数：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.displayCounts[_vm.displayCount],\"size\":\"sm\",\"id\":\"detail_selector\"}},_vm._l((_vm.displayCounts),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.displayCount=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1),_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"形式：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.displayTypes[_vm.displayType],\"size\":\"sm\",\"id\":\"detail_selector\"}},_vm._l((_vm.displayTypes),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.displayType=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"ソート：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.sortTypes[_vm.sortType],\"size\":\"sm\",\"id\":\"sort_selector\"}},_vm._l((_vm.sortTypes),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.sortType=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1),_c('span',{staticStyle:{\"width\":\"5px\"}}),_c('b-dropdown',{attrs:{\"text\":_vm.sortOrders[_vm.sortOrder],\"size\":\"sm\",\"id\":\"sort_order_selector\"}},_vm._l((_vm.sortOrders),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.sortOrder=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1)])]),_c('b-tab',{attrs:{\"title\":\"ステータス\"}},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"menu-widgets\"},[_c('b-container',_vm._l(([_vm.stat.base.level, _vm.stat.base.star]),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{attrs:{\"for\":`stat-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}})],1)],1)}),1)],1),_c('div',{staticClass:\"menu-widgets\"},[_c('div',{staticStyle:{\"margin\":\"3px\"}},[_c('b-button',{staticStyle:{\"width\":\"7em\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\",\"id\":\"stat-detail\"},on:{\"click\":function($event){return _vm.updateStatus()}}},[_vm._v(\"詳細設定\")]),_c('b-popover',{attrs:{\"target\":\"stat-detail\",\"triggers\":\"click blur\",\"placement\":\"bottom\",\"custom-class\":\"stat-popover\"}},[_c('div',{staticClass:\"flex\",staticStyle:{\"font-size\":\"small\"}},[_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"基本情報\")])]),_vm._l((_vm.stat.base),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"7em\"},attrs:{\"for\":`stat-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e(),(param.type == 'bool')?_c('b-form-checkbox',{staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"plain\":\"\"},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", $$v)},expression:\"param.value\"}}):_vm._e()],1)],1)})],2),_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"記憶の書＋強化ボード\")])]),_vm._l((_vm.stat.boosts),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"8em\"},attrs:{\"for\":`stat-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1),_c('div',{staticClass:\"flex\",staticStyle:{\"margin\":\"5px 5px 0px 5px\"}},[_c('div',{staticStyle:{\"text-align\":\"left\"}},[_c('b-button',{staticStyle:{\"margin\":\"3px\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.resetStatus()}}},[_vm._v(\"カンスト化\")]),_c('b-button',{staticStyle:{\"margin\":\"3px\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.resetStatus(1)}}},[_vm._v(\"キャラ紹介を再現\")])],1),_c('div',{staticStyle:{\"text-align\":\"right\",\"flex-grow\":\"1\"}},[_c('b-button',{staticStyle:{\"width\":\"7em\",\"margin\":\"3px\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.updateStatus()}}},[_vm._v(\"適用\")])],1)])])],1),_c('div',{staticStyle:{\"margin\":\"3px\"}},[_c('b-button',{staticStyle:{\"width\":\"7em\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.updateStatus()}}},[_vm._v(\"適用\")])],1)])])])],1)],1)])],1),_c('div',{staticClass:\"content\",staticStyle:{\"margin-top\":\"200px\"},style:(_vm.style),attrs:{\"id\":\"content\"}},[(_vm.getPageCount(_vm.items) > 1)?_c('div',{staticClass:\"pages\"},[_c('b-pagination',{attrs:{\"total-rows\":_vm.items.length,\"per-page\":_vm.displayCountNum,\"limit\":\"10\",\"hide-goto-end-buttons\":\"\"},on:{\"change\":_vm.onPage},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}),_c('ul',{staticClass:\"pagination b-pagination\",staticStyle:{\"margin-left\":\"0px\"}},[_c('li',{staticClass:\"page-item\"},[_c('b-button',{staticClass:\"page-link\",attrs:{\"variant\":\"outline-secondary\"},on:{\"click\":function($event){return _vm.scrollToBottom()}}},[_vm._v(\" ↓ \")])],1)])],1):_vm._e(),_vm._l((_vm.pagedItems),function(chr){return [_c('div',{key:chr.id,staticClass:\"character\",attrs:{\"id\":'chr_'+chr.id}},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.icon),\"title\":chr.name,\"width\":\"100\",\"height\":\"100\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\",class:{ 'highlighted': _vm.isInfoHighlighted(chr) }},[_c('h5',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(chr.name))}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.class),\"title\":'クラス:'+chr.class,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.supportType),\"title\":'サポートタイプ:'+chr.supportType,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.rarity),\"title\":'レアリティ:'+chr.rarity,\"height\":\"20\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(chr.damageType),\"title\":'攻撃タイプ:'+chr.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(chr.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"実装日:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(chr.date))])])],1),(chr.status)?_c('div',{staticClass:\"status2\",attrs:{\"title\":`☆${_vm.stat.base.star.value} Lv${_vm.stat.base.level.value} 時のステータス`},domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(chr.status, '', chr.damageType))}}):_vm._e()]),_c('div',{staticClass:\"skills\"},_vm._l((chr.skills),function(skill,si){return _c('div',{key:si,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\",attrs:{\"id\":'chr_'+chr.id+'_skill'+si}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}}),(_vm.displayType==1)?_c('b-popover',{attrs:{\"target\":'chr_'+chr.id+'_skill'+si,\"title\":skill.name,\"triggers\":\"hover focus\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[_c('div',{staticClass:\"flex\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}})])]):_vm._e()],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(\" \"+_vm._s(skill.name)+\" \"),(skill.descs)?_c('b-dropdown',{staticClass:\"level-selector\",attrs:{\"text\":skill.current,\"variant\":\"outline-secondary\"}},_vm._l((skill.descs),function(ds,di){return _c('b-dropdown-item',{key:di,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){skill.current=di; skill.desc=ds;}}},[_vm._v(_vm._s(di))])}),1):_vm._e()],1),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"tags\"},_vm._l((skill.tags),function(tag,i){return _c('b-badge',{key:i,staticClass:\"tag\",attrs:{\"variant\":\"info\",\"pill\":\"\"},on:{\"click\":function($event){return _vm.setTagSearchPattern(tag)}}},[_vm._v(_vm._s(tag))])}),1)])}),0)])])])]}),(_vm.getPageCount(_vm.items) > 1)?_c('div',{staticClass:\"pages\"},[_c('b-pagination',{attrs:{\"total-rows\":_vm.items.length,\"per-page\":_vm.displayCountNum,\"limit\":\"10\",\"hide-goto-end-buttons\":\"\"},on:{\"change\":_vm.onPage},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}),_c('ul',{staticClass:\"pagination b-pagination\",staticStyle:{\"margin-left\":\"0px\"}},[_c('li',{staticClass:\"page-item\"},[_c('b-button',{staticClass:\"page-link\",attrs:{\"variant\":\"outline-secondary\"},on:{\"click\":function($event){return _vm.scrollToTop()}}},[_vm._v(\" ↑ \")])],1)])],1):_vm._e()],2)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('h6',[_vm._v(\"フィルター\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"root\" @mousemove=\"onMouseMove\">\n    <div class=\"header\" :class=\"{ 'hidden': !showHeader }\">\n      <Navigation />\n      <div class=\"menu-content\">\n        <div class=\"menu-panel\">\n          <b-tabs v-model=\"searchTabIndex\">\n            <b-tab title=\"タグ検索\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\">\n                  <b-button-group size=\"sm\" id=\"skill_type_selector\">\n                    <b-button v-for=\"(c, i) in skillTypeFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('skillType')\" variant=\"outline-secondary\">\n                      {{ skillTypes[i] }}\n                    </b-button>\n                  </b-button-group>\n                </div>\n                <div class=\"widget\" style=\"width: 170px\">\n                  <b-form-input v-model=\"tagSearchPattern\" type=\"text\" debounce=\"500\" size=\"sm\" placeholder=\"検索ワード (正規表現)\" :update=\"updateQuery('tag')\" />\n                </div>\n              </div>\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\" style=\"margin-right:0px\" v-for=\"(tc, tci) in tagCategory\" :key=\"tci\">\n                  <b-dropdown :text=\"tc.display\" :ref=\"tc.name\" size=\"sm\" @show=\"onTagDropdownShow($event, tc)\" @hide=\"onTagDropdownHide($event, tc)\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"t in getFilteredMainTags(tc.tags)\" :key=\"mainTagTable[t].id\" :id=\"genTagID(t)\" @click=\"setTagSearchPattern(t); hideTagDropdown(tc, t);\">\n                      {{t}} <span class=\"note\" v-html=\"`(${mainTagTable[t].count})`\"></span> <span v-if=\"mainTagTable[t].note\" class=\"note\" v-html=\"mainTagTable[t].note\"></span>\n                      <b-popover v-if=\"subTagTable[t]\" :target=\"genTagID(t)\" triggers=\"hover focus\" :delay=\"{show:0, hide:250}\" no-fade @show=\"onSubtagPopoverShow(tc, t)\" @hidden=\"onSubtagPopoverHide(tc, t)\">\n                        <b-dropdown-item class=\"d-flex flex-column\" v-for=\"st in getFilteredSubTags(t)\" :key=\"tagTable[st].id\" @click=\"setTagSearchPattern(st, true); hideTagDropdown(tc, t);\">\n                          {{st}} <span class=\"note\" v-html=\"`(${tagTable[st].count})`\"></span>\n                        </b-dropdown-item>\n                      </b-popover>\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <div class=\"widget\">\n                  <b-button variant=\"secondary\" size=\"sm\" @click=\"tagSearchPattern=''\">クリア</b-button>\n                </div>\n              </div>\n            </b-tab>\n            <b-tab title=\"フリーワード検索\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\" style=\"width: 300px\">\n                  <b-form-input v-model=\"freeSearchPattern\" type=\"text\" debounce=\"500\" size=\"sm\" placeholder=\"検索ワード (正規表現)\" :update=\"updateQuery('free')\" />\n                </div>\n                <div class=\"widget\">\n                  <b-button variant=\"secondary\" size=\"sm\" @click=\"freeSearchPattern=''\">クリア</b-button>\n                </div>\n              </div>\n            </b-tab>\n          </b-tabs>\n        </div>\n        <div class=\"menu-panel\">\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <h6>フィルター</h6>\n            </div>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"class_selector\">\n                <b-button v-for=\"(c, i) in classFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('class')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(classes[i])\" width=\"25\" height=\"25\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"support_type_selector\">\n                <b-button v-for=\"(c, i) in supportTypeFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('supportType')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(supportTypes[i])\" height=\"25\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"rareiry_selector\">\n                <b-button v-for=\"(c, i) in rarityFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('rarity')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(rarities[i])\" width=\"36\" height=\"20\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"attack_type_selector\">\n                <b-button v-for=\"(c, i) in damageTypeFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('damageType')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(damageTypes[i])\" width=\"25\" height=\"25\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n        </div>\n        <div class=\"menu-panel\">\n          <b-tabs v-model=\"settingsTabIndex\">\n            <b-tab title=\"表示\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\">\n                  <span>件数：</span>\n                  <b-dropdown :text=\"displayCounts[displayCount]\" size=\"sm\" id=\"detail_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in displayCounts\" :key=\"i\" @click=\"displayCount=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <div class=\"widget\">\n                  <span>形式：</span>\n                  <b-dropdown :text=\"displayTypes[displayType]\" size=\"sm\" id=\"detail_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in displayTypes\" :key=\"i\" @click=\"displayType=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n              </div>\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\">\n                  <span>ソート：</span>\n                  <b-dropdown :text=\"sortTypes[sortType]\" size=\"sm\" id=\"sort_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in sortTypes\" :key=\"i\" @click=\"sortType=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                  <span style=\"width:5px\"></span>\n                  <b-dropdown :text=\"sortOrders[sortOrder]\" size=\"sm\" id=\"sort_order_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in sortOrders\" :key=\"i\" @click=\"sortOrder=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n              </div>\n            </b-tab>\n            <b-tab title=\"ステータス\">\n              <div class=\"flex\">\n                <div class=\"menu-widgets\">\n                  <b-container>\n                    <b-form-row v-for=\"(param, name, index) in [stat.base.level, stat.base.star]\" :key=\"index\">\n                      <b-col style=\"text-align: right\" align-self=\"end\">\n                        <label :for=\"`stat-${name}`\">{{param.label}}</label>\n                      </b-col>\n                      <b-col>\n                        <b-form-input style=\"width: 4em\" :id=\"`stat-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                      </b-col>\n                    </b-form-row>\n                  </b-container>\n                </div>\n                <div class=\"menu-widgets\">\n                  <div style=\"margin: 3px\">\n                    <b-button variant=\"secondary\" size=\"sm\" style=\"width: 7em\" @click=\"updateStatus()\" id=\"stat-detail\">詳細設定</b-button>\n                    <b-popover target=\"stat-detail\" triggers=\"click blur\" placement=\"bottom\" custom-class=\"stat-popover\">\n                      <div class=\"flex\" style=\"font-size: small\">\n                        <b-container>\n                          <div style=\"text-align:center\">\n                            <h6 style=\"margin: 5px 0px\">基本情報</h6>\n                          </div>\n                          <b-form-row v-for=\"(param, name, index) in stat.base\" :key=\"index\">\n                            <b-col style=\"text-align: right\" align-self=\"end\">\n                              <label style=\"width: 7em\" :for=\"`stat-${name}`\">{{param.label}}</label>\n                            </b-col>\n                            <b-col>\n                              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 4em\" :id=\"`stat-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                              <b-form-checkbox v-if=\"param.type == 'bool'\" style=\"width: 5em\" :id=\"`stat-${name}`\" v-model=\"param.value\" size=\"sm\" plain></b-form-checkbox>\n                            </b-col>\n                          </b-form-row>\n                        </b-container>\n                        <b-container>\n                          <div style=\"text-align:center\">\n                            <h6 style=\"margin: 5px 0px\">記憶の書＋強化ボード</h6>\n                          </div>\n                          <b-form-row v-for=\"(param, name, index) in stat.boosts\" :key=\"index\">\n                            <b-col style=\"text-align: right\" align-self=\"end\">\n                              <label style=\"width: 8em\" :for=\"`stat-${name}`\">{{param.label}}</label>\n                            </b-col>\n                            <b-col>\n                              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 4em\" :id=\"`stat-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                            </b-col>\n                          </b-form-row>\n                        </b-container>\n                      </div>\n                      <div class=\"flex\" style=\"margin: 5px 5px 0px 5px\">\n                        <div style=\"text-align: left\">\n                          <b-button variant=\"secondary\" size=\"sm\" style=\"margin: 3px\" @click=\"resetStatus()\">カンスト化</b-button>\n                          <b-button variant=\"secondary\" size=\"sm\" style=\"margin: 3px\" @click=\"resetStatus(1)\">キャラ紹介を再現</b-button>\n                        </div>\n                        <div style=\"text-align: right; flex-grow: 1\">\n                          <b-button variant=\"secondary\" size=\"sm\" style=\"width: 7em; margin: 3px\" @click=\"updateStatus()\">適用</b-button>\n                        </div>\n                      </div>\n                    </b-popover>\n                  </div>\n                  <div style=\"margin: 3px\">\n                    <b-button variant=\"secondary\" size=\"sm\" style=\"width: 7em\" @click=\"updateStatus()\">適用</b-button>\n                  </div>\n                </div>\n              </div>\n            </b-tab>\n          </b-tabs>\n        </div>\n      </div>\n    </div>\n\n    <div id=\"content\" class=\"content\" style=\"margin-top: 200px;\" :style=\"style\">\n\n      <div class=\"pages\" v-if=\"getPageCount(items) > 1\">\n        <b-pagination v-model=\"page\"\n                      :total-rows=\"items.length\"\n                      :per-page=\"displayCountNum\"\n                      @change=\"onPage\"\n                      limit=\"10\"\n                      hide-goto-end-buttons></b-pagination>\n        <ul class=\"pagination b-pagination\" style=\"margin-left: 0px;\">\n          <li class=\"page-item\">\n            <b-button @click=\"scrollToBottom()\" variant=\"outline-secondary\" class=\"page-link\">\n              ↓\n            </b-button>\n          </li>\n        </ul>\n      </div>\n\n      <template v-for=\"chr in pagedItems\">\n        <div class=\"character\" :id=\"'chr_'+chr.id\" :key=\"chr.id\">\n          <div class=\"flex\">\n            <div class=\"portrait\">\n              <b-img-lazy :src=\"getImageURL(chr.icon)\" :title=\"chr.name\" width=\"100\" height=\"100\" rounded />\n            </div>\n            <div class=\"detail\" v-show=\"displayType >= 1\">\n              <div class=\"info\" :class=\"{ 'highlighted': isInfoHighlighted(chr) }\">\n                <h5 v-html=\"chrNameToHtml(chr.name)\"></h5>\n                <div class=\"status\">\n                  <b-img-lazy :src=\"getImageURL(chr.class)\" :title=\"'クラス:'+chr.class\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(chr.supportType)\" :title=\"'サポートタイプ:'+chr.supportType\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(chr.rarity)\" :title=\"'レアリティ:'+chr.rarity\" height=\"20\" />\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(chr.damageType)\" :title=\"'攻撃タイプ:'+chr.damageType\" width=\"20\" height=\"20\" /></div>\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{chr.range}}</span></div>\n                  <div class=\"param-box\"><span class=\"param-name\">実装日:</span><span class=\"param-value\">{{chr.date}}</span></div>\n                </div>\n                <div v-if=\"chr.status\" v-html=\"statusToHtml(chr.status, '', chr.damageType)\" class=\"status2\" :title=\"`☆${stat.base.star.value} Lv${stat.base.level.value} 時のステータス`\">\n                </div>\n              </div>\n              <div class=\"skills\">\n                <div class=\"skill\" v-for=\"(skill, si) in chr.skills\" :class=\"getSkillClass(skill)\" :key=\"si\">\n                  <div class=\"flex\">\n                    <div class=\"icon\" :id=\"'chr_'+chr.id+'_skill'+si\">\n                      <b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" />\n                      <b-popover v-if=\"displayType==1\" :target=\"'chr_'+chr.id+'_skill'+si\" :title=\"skill.name\" triggers=\"hover focus\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                        <div class=\"flex\">\n                          <div v-html=\"descToHtml(skill)\"></div>\n                        </div>\n                      </b-popover>\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <div class=\"flex\">\n                        <h6>\n                          {{ skill.name }}\n                          <b-dropdown class=\"level-selector\" :text=\"skill.current\" v-if=\"skill.descs\" variant=\"outline-secondary\">\n                            <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(ds, di) in skill.descs\" :key=\"di\" @click=\"skill.current=di; skill.desc=ds;\">{{di}}</b-dropdown-item>\n                          </b-dropdown>\n                        </h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                      </div>\n                      <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                    </div>\n                  </div>\n                  <div class=\"tags\" v-show=\"displayType >= 2\">\n                    <b-badge class=\"tag\" :key=\"i\" v-for=\"(tag, i) in skill.tags\" variant=\"info\" pill @click=\"setTagSearchPattern(tag)\">{{ tag }}</b-badge>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n\n      <div class=\"pages\" v-if=\"getPageCount(items) > 1\">\n        <b-pagination v-model=\"page\"\n                      :total-rows=\"items.length\"\n                      :per-page=\"displayCountNum\"\n                      @change=\"onPage\"\n                      limit=\"10\"\n                      hide-goto-end-buttons></b-pagination>\n        <ul class=\"pagination b-pagination\" style=\"margin-left: 0px;\">\n          <li class=\"page-item\">\n            <b-button @click=\"scrollToTop()\" variant=\"outline-secondary\" class=\"page-link\">\n              ↑\n            </b-button>\n          </li>\n        </ul>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navigation from './Navigation.vue'\nimport jsonActive from '../assets/support_active.json'\nimport jsonPassive from '../assets/support_passive.json'\nimport jsonCharacters from '../assets/support_characters.json'\nimport jsonConstants from '../assets/constants.json'\nimport common from \"./common\"\nimport * as lut from './utils.js'\n\nexport default {\n  name: 'SupportCharacters',\n  components: {\n    Navigation,\n  },\n  mixins: [common],\n\n  data() {\n    return {\n      active: jsonActive,\n      passive: jsonPassive,\n      characters: jsonCharacters,\n      constants: jsonConstants,\n\n      classes: jsonConstants.classes,\n      supportTypes: jsonConstants.supportTypes,\n      rarities: jsonConstants.rarities,\n      damageTypes: jsonConstants.damageTypes,\n      skillTypes: [\n        \"アクティブ\",\n        \"パッシブ1\",\n        \"パッシブ2\",\n      ],\n\n      displayTypes: [\n        \"アイコン\",\n        \"シンプル\",\n        \"詳細\",\n      ],\n      sortTypes: [\n        \"実装日\",\n        \"戦闘力\",\n        \"攻撃力\",\n        \"HP\",\n        \"アタック\",\n        \"ディフェンス\",\n        \"マジック\",\n        \"レジスト\",\n      ],\n      sortOrders: [\n        \"降順\",\n        \"昇順\"\n      ],\n\n      tagCategory: {\n        buff: {\n          display: \"バフ系\",\n          name: \"tags_buff\",\n          tags: new Set(),\n        },\n        debuff: {\n          display: \"デバフ系\",\n          name: \"tags_debuff\",\n          tags: new Set(),\n        },\n        resist: {\n          display: \"無効化系\",\n          name: \"tags_resist\",\n          tags: new Set(),\n        },\n        action: {\n          display: \"攻撃/回復\",\n          name: \"tags_action\",\n          tags: new Set(),\n        },\n        other: {\n          display: \"その他\",\n          name: \"tags_other\",\n          tags: new Set(),\n        },\n      },\n      subTagTable: {},\n\n      classFilter: [],\n      supportTypeFilter: [],\n      rarityFilter: [],\n      damageTypeFilter: [],\n      skillTypeFilter: [],\n\n      stat: {\n        base: {\n          level: {\n            label: \"レベル\",\n            type: \"number\",\n            min: 1,\n            value: 110,\n          },\n          star: {\n            label: \"⭐\",\n            type: \"number\",\n            min: 1,\n            max: 6,\n            value: 6,\n          },\n          master: {\n            label: \"マスターレベル\",\n            type: \"number\",\n            min: 0,\n            max: 3,\n            value: 3,\n          },\n          loveBonus: {\n            label: \"好感度ボーナス\",\n            type: \"bool\",\n            value: true,\n          },\n        },\n        boosts: {\n          hp: {\n            label: \"HP (%)\",\n            type: \"number\",\n            min: 0,\n            value: 110,\n          },\n          atk: {\n            label: \"アタック (%)\",\n            type: \"number\",\n            min: 0,\n            value: 120,\n          },\n          def: {\n            label: \"ディフェンス (%)\",\n            type: \"number\",\n            min: 0,\n            value: 110,\n          },\n          mag: {\n            label: \"マジック (%)\",\n            type: \"number\",\n            min: 0,\n            value: 120,\n          },\n          res: {\n            label: \"レジスト (%)\",\n            type: \"number\",\n            min: 0,\n            value: 110,\n          },\n        },\n      },\n\n      enableUpdateURL: false,\n      prevURL: \"\",\n\n    };\n  },\n\n  computed: {\n    rawItems() {\n      return this.characters;\n    },\n    items() {\n      let ret = this.characters.filter(a => this.filterItem(a)); // filter & shallow copy\n\n      const c = this.compare;\n      const comparer = [\n        (a, b) => b.date.localeCompare(a.date), // 実装日\n        (a, b) => c(a.status[6], b.status[6]), // 戦闘力\n        (a, b) => c(a.attackPower, b.attackPower), // 攻撃力\n        (a, b) => c(a.status[0], b.status[0]), // HP\n        (a, b) => c(a.status[1], b.status[1]), // アタック\n        (a, b) => c(a.status[2], b.status[2]), // ディフェンス\n        (a, b) => c(a.status[3], b.status[3]), // マジック\n        (a, b) => c(a.status[4], b.status[4]), // レジスト\n      ];\n      if (this.sortType >= 0 && this.sortType < comparer.length) {\n        const fn = comparer[this.sortType]\n        if (this.sortOrder == 0)\n          ret.sort((a, b) => fn(a, b));\n        else\n          ret.sort((a, b) => fn(b, a));\n      }\n\n      return ret;\n    },\n    pagedItems() {\n      return this.applyPage(this.items);\n    },\n  },\n\n  created() {\n    document.title = \"れじぇくろDB: サポートキャラ\";\n    this.setupDB();\n\n    this.fillFilter(this.classFilter, this.classes);\n    this.fillFilter(this.supportTypeFilter, this.supportTypes);\n    this.fillFilter(this.rarityFilter, this.rarities);\n    this.fillFilter(this.damageTypeFilter, this.damageTypes);\n    this.fillFilter(this.skillTypeFilter, this.skillTypes);\n\n    this.decodeURL();\n    this.updateTagCounts();\n  },\n\n  mounted() {\n    this.enableUpdateURL = true;\n    window.onpopstate = () => {\n      this.enableUpdateURL = false;\n      this.decodeURL(true);\n      this.$nextTick(() => {\n        this.enableUpdateURL = true;\n      });\n    };\n  },\n\n  methods: {\n    setupDB() {\n      // 外部 json 由来のデータへの変更はセッションをまたいでしまうので、deep copy しておく\n      this.active = structuredClone(this.active);\n      this.passive = structuredClone(this.passive);\n      this.characters = structuredClone(this.characters).filter(a => !a.hidden);\n      this.setupCharacters(this.characters, this.active, this.passive, [],\n        {\n          includeSkillEffectTags: true,\n          includeSelfTags: true,\n        });\n\n      let chrId = 0;\n      for (let chr of this.characters) {\n        chr.id = ++chrId;\n        chr.classId = this.classes.findIndex(v => v == chr.class);\n        chr.supportTypeId = this.supportTypes.findIndex(v => v == chr.supportType);\n        chr.rarityId = this.rarities.findIndex(v => v == chr.rarity);\n        chr.damageTypeId = this.damageTypes.findIndex(v => v == chr.damageType);\n        this.$set(chr, 'status', [0, 0, 0, 0, 0, 0, 0]);\n        Object.defineProperty(chr, 'attackPower', {\n          get: chr.damageTypeId == 0 ? () => { return chr.status[1]; } : () => { return chr.status[3]; },\n        });\n\n        for (let si = 0; si < chr.skills.length; ++si) {\n          // パッシブ1 のみが複数キャラで共有され、現状全て si==1 なので問題ない\n          chr.skills[si].skillIndex = si;\n        }\n      }\n      this.stat.defaults = [\n        ...Object.values(this.stat.base).map(a => a.value),\n        ...Object.values(this.stat.boosts).map(a => a.value),\n      ];\n      this.updateStatus();\n\n      for (let skill of [...this.active, ...this.passive]) {\n        this.registerTags(skill.tags);\n      }\n\n      let handledTags = new Set();\n      this.appendSet(handledTags, this.constants.tagsHidden);\n\n      const isAction = (t) => {\n        for (const n of this.constants.tagsAction) {\n          if (t.startsWith(n))\n            return true;\n        }\n        return false;\n      };\n\n      for (let t of this.getMainTags()) {\n        if (handledTags.has(t))\n          continue;\n\n        if (t.match(/^バフ:/))\n          this.tagCategory.buff.tags.add(t);\n        else if (t.match(/^デバフ:/))\n          this.tagCategory.debuff.tags.add(t);\n        else if (t.match(/^無効化:/))\n          this.tagCategory.resist.tags.add(t);\n        else if (isAction(t))\n          this.tagCategory.action.tags.add(t);\n        else\n          this.tagCategory.other.tags.add(t);\n      }\n      this.reorderSet(this.tagCategory.buff.tags, this.constants.tagsBuff);\n      this.reorderSet(this.tagCategory.debuff.tags, this.constants.tagsDebuff);\n      this.reorderSet(this.tagCategory.resist.tags, this.constants.tagsResist);\n      this.reorderSet(this.tagCategory.action.tags, this.constants.tagsAction);\n      this.reorderSet(this.tagCategory.other.tags, this.constants.tagsOther);\n      this.reorderSubtag();\n    },\n\n    updateStatus() {\n      const clampAndGet = (a) => {\n        if (typeof a.min == 'number') {\n          a.value = Math.max(a.value, a.min);\n        }\n        if (typeof a.max == 'number') {\n          a.value = Math.min(a.value, a.max);\n        }\n        return a.value;\n      }\n      let [level, star, master, loveBonus] = Object.values(this.stat.base).map(a => clampAndGet(a));\n      let boosts = Object.values(this.stat.boosts).map(a => a.value);\n\n      for (let chr of this.characters) {\n        const status = this.getSupportChrStatus(chr, level, star, master, loveBonus, boosts);\n        if (status) {\n          chr.status = [...status, this.getSupportBattlePower(status, star, master)];\n        }\n      }\n      this.$forceUpdate();\n    },\n    resetStatus(type = 0) {\n      const s = this.stat;\n      const presets = [\n        s.defaults,\n        [100, 6, 0, true, 30, 30, 30, 30, 30]\n      ];\n      let vals = [...presets[type]];\n      for (let v of [...Object.values(s.base), ...Object.values(s.boosts)]) {\n        v.value = vals.shift();\n      }\n      this.updateStatus();\n    },\n\n    isInfoHighlighted(chr) {\n      return this.freeSearchFn && this.freeSearchFn(chr)\n        ? 2 : 0;\n    },\n    isSkillHighlighted(skill) {\n      let r = 0;\n      if (this.tagSearchFn) {\n        r |= this.applySkillTypeFilter(skill) && this.tagSearchFn(skill)\n          ? 1: 0;\n      }\n      if (this.freeSearchFn) {\n        r |= this.freeSearchFn(skill)\n          ? 2 : 0;\n      }\n      return r;\n    },\n    applySkillTypeFilter(skill) {\n      return !this.isFilterEnabled(this.skillTypeFilter) ||\n        (skill.skillIndex == 0 && this.skillTypeFilter[0].state) ||\n        (skill.skillIndex == 1 && this.skillTypeFilter[1].state) ||\n        (skill.skillIndex == 2 && this.skillTypeFilter[2].state);\n    },\n    applyClassFilter(chr) {\n      return this.filterMatch(this.classFilter, chr.classId) &&\n        this.filterMatch(this.supportTypeFilter, chr.supportTypeId) &&\n        this.filterMatch(this.rarityFilter, chr.rarityId) &&\n        this.filterMatch(this.damageTypeFilter, chr.damageTypeId);\n    },\n    applySearchPatterns(chr) {\n      let r = this.isInfoHighlighted(chr);\n      for (let skill of chr.skills) {\n        r |= this.isSkillHighlighted(skill);\n      }\n      return r == this.getSearchMask();\n    },\n    filterItem(chr) {\n      let ok = this.applyClassFilter(chr);\n      if (ok && this.isSearchPatternSet()) {\n        ok = this.applySearchPatterns(chr);\n      }\n      return ok;\n    },\n    updateTagCounts() {\n      this.resetTagCounts();\n      for (let chr of this.characters) {\n        if (this.applyClassFilter(chr)) {\n          for (let skill of chr.skills) {\n            if (this.applySkillTypeFilter(skill)) {\n              this.countTags(skill.tags);\n            }\n          }\n        }\n      }\n    },\n\n    getSkillClass(skill) {\n      return {\n        active: skill.isActive,\n        passive: skill.isPassive,\n        highlighted: this.isSkillHighlighted(skill),\n      }\n    },\n\n    updateURL(kvp) {\n      if (!this.enableUpdateURL)\n        return false;\n\n      let seri = new lut.URLSerializer();\n      if (this.isFilterEnabled(this.classFilter))\n        seri.class = this.serializeFilter(this.classFilter);\n      if (this.isFilterEnabled(this.supportTypeFilter))\n        seri.supportType = this.serializeFilter(this.supportTypeFilter);\n      if (this.isFilterEnabled(this.rarityFilter))\n        seri.rarity = this.serializeFilter(this.rarityFilter);\n      if (this.isFilterEnabled(this.damageTypeFilter))\n        seri.damageType = this.serializeFilter(this.damageTypeFilter);\n      if (this.isFilterEnabled(this.skillTypeFilter))\n        seri.skillType = this.serializeFilter(this.skillTypeFilter);\n      if (this.tagSearchPattern.length > 0)\n        seri.tag = this.tagSearchPattern;\n      if (this.freeSearchPattern.length > 0)\n        seri.free = this.freeSearchPattern;\n  \n      if (kvp) {\n        for (const k in kvp)\n          seri[k] = kvp[k];\n      }\n\n      let url = seri.serialize();\n      if (url != this.prevURL) {\n        window.history.pushState(null, null, url);\n        this.prevURL = url;\n        return true;\n      }\n      return false;\n    },\n    decodeURL(initState = false) {\n      let data = new lut.URLSerializer({\n        class: 0,\n        supportType: 0,\n        damageType: 0,\n        rarity: 0,\n        skillType: 0,\n        tag: \"\",\n        free: \"\",\n        p: 1,\n      });\n\n      if (data.deserialize(window.location.href) || initState) {\n        this.deserializeFilter(this.classFilter, data.class);\n        this.deserializeFilter(this.supportTypeFilter, data.supportType);\n        this.deserializeFilter(this.damageTypeFilter, data.damageType);\n        this.deserializeFilter(this.rarityFilter, data.rarity);\n        this.deserializeFilter(this.skillTypeFilter, data.skillType);\n        this.tagSearchPattern = data.tag;\n        this.freeSearchPattern = data.free;\n        if (this.freeSearchPattern.length != 0)\n          this.searchTabIndex = 1;\n\n        if (data.p > 0)\n          this.page = data.p;\n      }\n    },\n  },\n}\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SupportCharacters.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SupportCharacters.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SupportCharacters.vue?vue&type=template&id=721a064a&scoped=true\"\nimport script from \"./SupportCharacters.vue?vue&type=script&lang=js\"\nexport * from \"./SupportCharacters.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"721a064a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\",on:{\"mousemove\":_vm.onMouseMove}},[_c('div',{staticClass:\"header\",class:{ 'hidden': !_vm.showHeader }},[_c('Navigation'),_c('div',{staticClass:\"menu-content\"},[_c('div',{staticClass:\"menu-panel\"},[_c('b-tabs',{model:{value:(_vm.searchTabIndex),callback:function ($$v) {_vm.searchTabIndex=$$v},expression:\"searchTabIndex\"}},[_c('b-tab',{attrs:{\"title\":\"タグ検索\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\",staticStyle:{\"width\":\"300px\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"debounce\":\"500\",\"size\":\"sm\",\"placeholder\":\"検索ワード (正規表現)\",\"update\":_vm.updateQuery('tag')},model:{value:(_vm.tagSearchPattern),callback:function ($$v) {_vm.tagSearchPattern=$$v},expression:\"tagSearchPattern\"}})],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_vm._l((_vm.tagCategory),function(tc,tci){return _c('div',{key:tci,staticClass:\"widget\",staticStyle:{\"margin-right\":\"0px\"}},[_c('b-dropdown',{ref:tc.name,refInFor:true,attrs:{\"text\":tc.display,\"size\":\"sm\"},on:{\"show\":function($event){return _vm.onTagDropdownShow($event, tc)},\"hide\":function($event){return _vm.onTagDropdownHide($event, tc)}}},_vm._l((_vm.getFilteredMainTags(tc.tags)),function(t){return _c('b-dropdown-item',{key:_vm.mainTagTable[t].id,staticClass:\"d-flex flex-column\",attrs:{\"id\":_vm.genTagID(t)},on:{\"click\":function($event){_vm.setTagSearchPattern(t); _vm.hideTagDropdown(tc, t);}}},[_vm._v(\" \"+_vm._s(t)+\" \"),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(`(${_vm.mainTagTable[t].count})`)}}),_vm._v(\" \"),(_vm.mainTagTable[t].note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.mainTagTable[t].note)}}):_vm._e(),(_vm.subTagTable[t])?_c('b-popover',{attrs:{\"target\":_vm.genTagID(t),\"triggers\":\"hover focus\",\"delay\":{show:0, hide:250},\"no-fade\":\"\"},on:{\"show\":function($event){return _vm.onSubtagPopoverShow(tc, t)},\"hidden\":function($event){return _vm.onSubtagPopoverHide(tc, t)}}},_vm._l((_vm.getFilteredSubTags(t)),function(st){return _c('b-dropdown-item',{key:_vm.tagTable[st].id,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.setTagSearchPattern(st, true); _vm.hideTagDropdown(tc, t);}}},[_vm._v(\" \"+_vm._s(st)+\" \"),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(`(${_vm.tagTable[st].count})`)}})])}),1):_vm._e()],1)}),1)],1)}),_c('div',{staticClass:\"widget\"},[_c('b-button',{attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){_vm.tagSearchPattern=''}}},[_vm._v(\"クリア\")])],1)],2)]),_c('b-tab',{attrs:{\"title\":\"フリーワード検索\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\",staticStyle:{\"width\":\"300px\"}},[_c('b-form-input',{attrs:{\"type\":\"text\",\"debounce\":\"500\",\"size\":\"sm\",\"placeholder\":\"検索ワード (正規表現)\",\"update\":_vm.updateQuery('free')},model:{value:(_vm.freeSearchPattern),callback:function ($$v) {_vm.freeSearchPattern=$$v},expression:\"freeSearchPattern\"}})],1),_c('div',{staticClass:\"widget\"},[_c('b-button',{attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){_vm.freeSearchPattern=''}}},[_vm._v(\"クリア\")])],1)])])],1)],1),_c('div',{staticClass:\"menu-panel\"},[_vm._m(0),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"class_selector\"}},_vm._l((_vm.classFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('class')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.classes[i]),\"width\":\"25\",\"height\":\"25\"}})],1)}),1)],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"item_type_selector\"}},_vm._l((_vm.itemTypeFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('itemType')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.itemTypes[i]),\"width\":\"25\",\"height\":\"25\"}})],1)}),1)],1),_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"rareiry_selector\"}},_vm._l((_vm.rarityFilter),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)},\"click\":function($event){return _vm.updateQuery('rarity')}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.rarities[i]),\"width\":\"36\",\"height\":\"20\"}})],1)}),1)],1)])]),_c('div',{staticClass:\"menu-panel\"},[_c('b-tabs',{model:{value:(_vm.settingsTabIndex),callback:function ($$v) {_vm.settingsTabIndex=$$v},expression:\"settingsTabIndex\"}},[_c('b-tab',{attrs:{\"title\":\"表示\"}},[_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"件数：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.displayCounts[_vm.displayCount],\"size\":\"sm\",\"id\":\"detail_selector\"}},_vm._l((_vm.displayCounts),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.displayCount=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1),_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"形式：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.displayTypes[_vm.displayType],\"size\":\"sm\",\"id\":\"detail_selector\"}},_vm._l((_vm.displayTypes),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.displayType=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"ソート：\")]),_c('b-dropdown',{attrs:{\"text\":_vm.sortTypes[_vm.sortType],\"size\":\"sm\",\"id\":\"sort_selector\"}},_vm._l((_vm.sortTypes),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.sortType=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1),_c('span',{staticStyle:{\"width\":\"5px\"}}),_c('b-dropdown',{attrs:{\"text\":_vm.sortOrders[_vm.sortOrder],\"size\":\"sm\",\"id\":\"sort_order_selector\"}},_vm._l((_vm.sortOrders),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.sortOrder=i}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1),_c('span',{staticStyle:{\"width\":\"5px\"}}),_c('b-button',{attrs:{\"pressed\":_vm.sortBySlot,\"variant\":\"outline-secondary\",\"size\":\"sm\"},on:{\"update:pressed\":function($event){_vm.sortBySlot=$event}}},[_vm._v(\" 種類別 \")])],1)])]),_c('b-tab',{attrs:{\"title\":\"ステータス\"}},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"menu-widgets\"},[_c('b-container',_vm._l(([_vm.stat.base.level]),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{attrs:{\"for\":`stat-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`stat-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}})],1)],1)}),1)],1),_c('div',{staticClass:\"menu-widgets\"},[_c('div',{staticStyle:{\"margin\":\"3px\"}}),_c('div',{staticStyle:{\"margin\":\"3px\"}},[_c('b-button',{staticStyle:{\"width\":\"7em\"},attrs:{\"variant\":\"secondary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.updateStatus()}}},[_vm._v(\"適用\")])],1)])])])],1)],1)])],1),_c('div',{staticClass:\"content\",staticStyle:{\"margin-top\":\"200px\"},style:(_vm.style),attrs:{\"id\":\"content\"}},[(_vm.getPageCount(_vm.items) > 1)?_c('div',{staticClass:\"pages\"},[_c('b-pagination',{attrs:{\"total-rows\":_vm.items.length,\"per-page\":_vm.displayCountNum,\"limit\":\"10\",\"hide-goto-end-buttons\":\"\"},on:{\"change\":_vm.onPage},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}),_c('ul',{staticClass:\"pagination b-pagination\",staticStyle:{\"margin-left\":\"0px\"}},[_c('li',{staticClass:\"page-item\"},[_c('b-button',{staticClass:\"page-link\",attrs:{\"variant\":\"outline-secondary\"},on:{\"click\":function($event){return _vm.scrollToBottom()}}},[_vm._v(\" ↓ \")])],1)])],1):_vm._e(),_vm._l((_vm.pagedItems),function(item){return [_c('div',{key:item.id,staticClass:\"item\",attrs:{\"id\":'item_'+item.id}},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\",attrs:{\"id\":'item_'+item.id+'_icon'}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(item.icon),\"title\":item.name,\"width\":\"60\",\"height\":\"60\",\"rounded\":\"\"}}),(_vm.displayType==1)?_c('b-popover',{attrs:{\"target\":'item_'+item.id+'_icon',\"triggers\":\"hover focus\",\"title\":item.name,\"placement\":\"top\"}},[_c('div',{staticClass:\"flex\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(item))}})])]):_vm._e()],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\",class:{ 'highlighted': _vm.isInfoHighlighted(item) }},[_c('h5',{domProps:{\"innerHTML\":_vm._s(item.name)}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(item.slot),\"title\":'部位:'+item.slot,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(item.rarity),\"title\":'レアリティ:'+item.rarity,\"height\":\"20\"}}),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"実装日:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(item.date))])])],1)]),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"status\",domProps:{\"innerHTML\":_vm._s(_vm.itemClassesToHtml(item))}}),_c('div',{staticClass:\"status2\",domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(item.status, '+'))}})]),_c('div',{staticClass:\"skills\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"skill\",class:{ 'highlighted': _vm.isDescHighlighted(item) },staticStyle:{\"flex-grow\":\"1\"}},[_c('div',{staticClass:\"desc\"},[_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(item))}}),(item.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(item))}}):_vm._e()])]),_c('div',{staticClass:\"tags\"},_vm._l((item.tags),function(tag,i){return _c('b-badge',{key:i,staticClass:\"tag\",attrs:{\"variant\":\"info\",\"pill\":\"\"},on:{\"click\":function($event){return _vm.setTagSearchPattern(tag)}}},[_vm._v(_vm._s(tag))])}),1)])])])])])]}),(_vm.getPageCount(_vm.items) > 1)?_c('div',{staticClass:\"pages\"},[_c('b-pagination',{attrs:{\"total-rows\":_vm.items.length,\"per-page\":_vm.displayCountNum,\"limit\":\"10\",\"hide-goto-end-buttons\":\"\"},on:{\"change\":_vm.onPage},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}),_c('ul',{staticClass:\"pagination b-pagination\",staticStyle:{\"margin-left\":\"0px\"}},[_c('li',{staticClass:\"page-item\"},[_c('b-button',{staticClass:\"page-link\",attrs:{\"variant\":\"outline-secondary\"},on:{\"click\":function($event){return _vm.scrollToTop()}}},[_vm._v(\" ↑ \")])],1)])],1):_vm._e()],2)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('h6',[_vm._v(\"フィルター\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"root\" @mousemove=\"onMouseMove\">\n    <div class=\"header\" :class=\"{ 'hidden': !showHeader }\">\n      <Navigation />\n      <div class=\"menu-content\">\n        <div class=\"menu-panel\">\n          <b-tabs v-model=\"searchTabIndex\">\n            <b-tab title=\"タグ検索\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\" style=\"width: 300px \">\n                  <b-form-input v-model=\"tagSearchPattern\" type=\"text\" debounce=\"500\" size=\"sm\" placeholder=\"検索ワード (正規表現)\" :update=\"updateQuery('tag')\" />\n                </div>\n              </div>\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\" style=\"margin-right:0px\" v-for=\"(tc, tci) in tagCategory\" :key=\"tci\">\n                  <b-dropdown :text=\"tc.display\" :ref=\"tc.name\" size=\"sm\" @show=\"onTagDropdownShow($event, tc)\" @hide=\"onTagDropdownHide($event, tc)\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"t in getFilteredMainTags(tc.tags)\" :key=\"mainTagTable[t].id\" :id=\"genTagID(t)\" @click=\"setTagSearchPattern(t); hideTagDropdown(tc, t);\">\n                      {{t}} <span class=\"note\" v-html=\"`(${mainTagTable[t].count})`\"></span> <span v-if=\"mainTagTable[t].note\" class=\"note\" v-html=\"mainTagTable[t].note\"></span>\n                      <b-popover v-if=\"subTagTable[t]\" :target=\"genTagID(t)\" triggers=\"hover focus\" :delay=\"{show:0, hide:250}\" no-fade @show=\"onSubtagPopoverShow(tc, t)\" @hidden=\"onSubtagPopoverHide(tc, t)\">\n                        <b-dropdown-item class=\"d-flex flex-column\" v-for=\"st in getFilteredSubTags(t)\" :key=\"tagTable[st].id\" @click=\"setTagSearchPattern(st, true); hideTagDropdown(tc, t);\">\n                          {{st}} <span class=\"note\" v-html=\"`(${tagTable[st].count})`\"></span>\n                        </b-dropdown-item>\n                      </b-popover>\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <div class=\"widget\">\n                  <b-button variant=\"secondary\" size=\"sm\" @click=\"tagSearchPattern=''\">クリア</b-button>\n                </div>\n              </div>\n            </b-tab>\n            <b-tab title=\"フリーワード検索\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\" style=\"width: 300px\">\n                  <b-form-input v-model=\"freeSearchPattern\" type=\"text\" debounce=\"500\" size=\"sm\" placeholder=\"検索ワード (正規表現)\" :update=\"updateQuery('free')\" />\n                </div>\n                <div class=\"widget\">\n                  <b-button variant=\"secondary\" size=\"sm\" @click=\"freeSearchPattern=''\">クリア</b-button>\n                </div>\n              </div>\n            </b-tab>\n          </b-tabs>\n        </div>\n        <div class=\"menu-panel\">\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <h6>フィルター</h6>\n            </div>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"class_selector\">\n                <b-button v-for=\"(c, i) in classFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('class')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(classes[i])\" width=\"25\" height=\"25\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"item_type_selector\">\n                <b-button v-for=\"(c, i) in itemTypeFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('itemType')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(itemTypes[i])\" width=\"25\" height=\"25\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"rareiry_selector\">\n                <b-button v-for=\"(c, i) in rarityFilter\" :key=\"i\" :pressed.sync=\"c.state\" @click=\"updateQuery('rarity')\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(rarities[i])\" width=\"36\" height=\"20\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n        </div>\n        <div class=\"menu-panel\">\n          <b-tabs v-model=\"settingsTabIndex\">\n            <b-tab title=\"表示\">\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\">\n                  <span>件数：</span>\n                  <b-dropdown :text=\"displayCounts[displayCount]\" size=\"sm\" id=\"detail_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in displayCounts\" :key=\"i\" @click=\"displayCount=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n                <div class=\"widget\">\n                  <span>形式：</span>\n                  <b-dropdown :text=\"displayTypes[displayType]\" size=\"sm\" id=\"detail_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in displayTypes\" :key=\"i\" @click=\"displayType=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                </div>\n              </div>\n              <div class=\"menu-widgets flex\">\n                <div class=\"widget\">\n                  <span>ソート：</span>\n                  <b-dropdown :text=\"sortTypes[sortType]\" size=\"sm\" id=\"sort_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in sortTypes\" :key=\"i\" @click=\"sortType=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                  <span style=\"width:5px\"></span>\n                  <b-dropdown :text=\"sortOrders[sortOrder]\" size=\"sm\" id=\"sort_order_selector\">\n                    <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in sortOrders\" :key=\"i\" @click=\"sortOrder=i\">\n                      {{ c }}\n                    </b-dropdown-item>\n                  </b-dropdown>\n                  <span style=\"width:5px\"></span>\n                  <b-button :pressed.sync=\"sortBySlot\" variant=\"outline-secondary\" size=\"sm\">\n                    種類別\n                  </b-button>\n                </div>\n              </div>\n            </b-tab>\n            <b-tab title=\"ステータス\">\n              <div class=\"flex\">\n                <div class=\"menu-widgets\">\n                  <b-container>\n                    <b-form-row v-for=\"(param, name, index) in [stat.base.level]\" :key=\"index\">\n                      <b-col style=\"text-align: right\" align-self=\"end\">\n                        <label :for=\"`stat-${name}`\">{{param.label}}</label>\n                      </b-col>\n                      <b-col>\n                        <b-form-input style=\"width: 4em\" :id=\"`stat-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                      </b-col>\n                    </b-form-row>\n                  </b-container>\n                </div>\n                <div class=\"menu-widgets\">\n                  <div style=\"margin: 3px\">\n                  </div>\n                  <div style=\"margin: 3px\">\n                    <b-button variant=\"secondary\" size=\"sm\" style=\"width: 7em\" @click=\"updateStatus()\">適用</b-button>\n                  </div>\n                </div>\n              </div>\n            </b-tab>\n          </b-tabs>\n        </div>\n      </div>\n    </div>\n\n    <div id=\"content\" class=\"content\" style=\"margin-top: 200px;\" :style=\"style\">\n\n      <div class=\"pages\" v-if=\"getPageCount(items) > 1\">\n        <b-pagination v-model=\"page\"\n                      :total-rows=\"items.length\"\n                      :per-page=\"displayCountNum\"\n                      @change=\"onPage\"\n                      limit=\"10\"\n                      hide-goto-end-buttons></b-pagination>\n        <ul class=\"pagination b-pagination\" style=\"margin-left: 0px;\">\n          <li class=\"page-item\">\n            <b-button @click=\"scrollToBottom()\" variant=\"outline-secondary\" class=\"page-link\">\n              ↓\n            </b-button>\n          </li>\n        </ul>\n      </div>\n\n      <template v-for=\"item in pagedItems\">\n        <div class=\"item\" :id=\"'item_'+item.id\" :key=\"item.id\">\n          <div class=\"flex\">\n            <div class=\"portrait\" :id=\"'item_'+item.id+'_icon'\">\n              <b-img-lazy :src=\"getImageURL(item.icon)\" :title=\"item.name\" width=\"60\" height=\"60\" rounded />\n              <b-popover v-if=\"displayType==1\" :target=\"'item_'+item.id+'_icon'\" triggers=\"hover focus\" :title=\"item.name\" placement=\"top\">\n                <div class=\"flex\">\n                  <div v-html=\"descToHtml(item)\"></div>\n                </div>\n              </b-popover>\n            </div>\n            <div class=\"detail\" v-show=\"displayType >= 1\">\n              <div class=\"info\" :class=\"{ 'highlighted': isInfoHighlighted(item) }\">\n                <h5 v-html=\"item.name\"></h5>\n                <div class=\"status\">\n                  <b-img-lazy :src=\"getImageURL(item.slot)\" :title=\"'部位:'+item.slot\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(item.rarity)\" :title=\"'レアリティ:'+item.rarity\" height=\"20\" />\n                  <div class=\"param-box\"><span class=\"param-name\">実装日:</span><span class=\"param-value\">{{item.date}}</span></div>\n                </div>\n              </div>\n              <div class=\"info\">\n                <div class=\"status\" v-html=\"itemClassesToHtml(item)\"></div>\n                <div class=\"status2\" v-html=\"statusToHtml(item.status, '+')\"></div>\n              </div>\n              <div class=\"skills\">\n                <div class=\"skill\" :class=\"{ 'highlighted': isDescHighlighted(item) }\" v-show=\"displayType >= 2\" style=\"flex-grow: 1\">\n                  <div class=\"desc\">\n                    <p><span v-html=\"descToHtml(item)\"></span><span v-if=\"item.note\" class=\"note\" v-html=\"noteToHtml(item)\"></span></p>\n                  </div>\n                  <div class=\"tags\">\n                    <b-badge class=\"tag\" :key=\"i\" v-for=\"(tag, i) in item.tags\" variant=\"info\" pill @click=\"setTagSearchPattern(tag)\">{{ tag }}</b-badge>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n\n      <div class=\"pages\" v-if=\"getPageCount(items) > 1\">\n        <b-pagination v-model=\"page\"\n                      :total-rows=\"items.length\"\n                      :per-page=\"displayCountNum\"\n                      @change=\"onPage\"\n                      limit=\"10\"\n                      hide-goto-end-buttons></b-pagination>\n        <ul class=\"pagination b-pagination\" style=\"margin-left: 0px;\">\n          <li class=\"page-item\">\n            <b-button @click=\"scrollToTop()\" variant=\"outline-secondary\" class=\"page-link\">\n              ↑\n            </b-button>\n          </li>\n        </ul>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navigation from './Navigation.vue'\nimport jsonItems from '../assets/items.json'\nimport jsonConstants from '../assets/constants.json'\nimport common from \"./common\";\nimport * as lut from './utils.js'\n\nexport default {\n  name: 'Equipments',\n  components: {\n    Navigation,\n  },\n  mixins: [common],\n\n  data() {\n    return {\n      equipments: jsonItems,\n      constants: jsonConstants,\n\n      classes: jsonConstants.classes,\n      itemTypes: jsonConstants.itemTypes,\n      rarities: jsonConstants.rarities,\n\n      displayTypes: [\n        \"アイコン\",\n        \"シンプル\",\n        \"詳細\",\n      ],\n      sortTypes: [\n        \"実装日\",\n        \"HP\",\n        \"アタック\",\n        \"ディフェンス\",\n        \"マジック\",\n        \"レジスト\",\n        \"テクニック\",\n      ],\n      sortOrders: [\n        \"降順\",\n        \"昇順\"\n      ],\n\n      tagCategory: {\n        buff: {\n          display: \"バフ系\",\n          name: \"tags_buff\",\n          tags: new Set(),\n        },\n        debuff: {\n          display: \"デバフ系\",\n          name: \"tags_debuff\",\n          tags: new Set(),\n        },\n        resist: {\n          display: \"無効化系\",\n          name: \"tags_resist\",\n          tags: new Set(),\n        },\n        action: {\n          display: \"攻撃/回復\",\n          name: \"tags_action\",\n          tags: new Set(),\n        },\n        other: {\n          display: \"その他\",\n          name: \"tags_other\",\n          tags: new Set(),\n        },\n      },\n      subTagTable: {},\n\n      classFilter: [],\n      itemTypeFilter: [],\n      rarityFilter: [],\n\n      stat: {\n        base: {\n          level: {\n            label: \"レベル\",\n            type: \"number\",\n            min: 1,\n            value: 50,\n          },\n        },\n      },\n\n      enableUpdateURL: false,\n      prevURL: \"\",\n    };\n  },\n\n  computed: {\n    rawItems() {\n      return this.characters;\n    },\n    items() {\n      let ret = this.equipments.filter(a => this.filterItem(a)); // filter & shallow copy\n\n      const c = this.compare;\n      const comparer = [\n        (a, b) => b.date.localeCompare(a.date), // 実装日\n        (a, b) => c(a.status[0], b.status[0]), // HP\n        (a, b) => c(a.status[1], b.status[1]), // アタック\n        (a, b) => c(a.status[2], b.status[2]), // ディフェンス\n        (a, b) => c(a.status[3], b.status[3]), // マジック\n        (a, b) => c(a.status[4], b.status[4]), // レジスト\n        (a, b) => c(a.status[5], b.status[5]), // テクニック\n      ];\n      if (this.sortType >= 0 && this.sortType < comparer.length) {\n        const fn = comparer[this.sortType]\n        if (this.sortOrder == 0)\n          ret.sort((a, b) => fn(a, b));\n        else\n          ret.sort((a, b) => fn(b, a));\n      }\n\n      if (this.sortBySlot) // 種類別\n        ret.sort((a, b) => a.slotId < b.slotId ? -1 : 1);\n\n      return ret;\n    },\n    pagedItems() {\n      return this.applyPage(this.items);\n    },\n  },\n\n  created() {\n    document.title = \"れじぇくろDB: アイテム\";\n    this.setupDB();\n\n    this.fillFilter(this.classFilter, this.classes);\n    this.fillFilter(this.itemTypeFilter, this.itemTypes.slice(0, 4));\n    this.fillFilter(this.rarityFilter, this.rarities);\n\n    this.decodeURL();\n    this.updateTagCounts();\n  },\n\n  mounted() {\n    this.enableUpdateURL = true;\n    window.onpopstate = () => {\n      this.enableUpdateURL = false;\n      this.decodeURL(true);\n      this.$nextTick(() => {\n        this.enableUpdateURL = true;\n      });\n    };\n  },\n\n  methods: {\n    setupDB() {\n      // 外部 json 由来のデータへの変更はセッションをまたいでしまうので、deep copy しておく\n      this.equipments = structuredClone(this.equipments);\n      this.setupItems(this.equipments, {\n        includeSkillEffectTags: true,\n        includeAreaTags: true,\n        includeDemeritTags: true,\n      });\n      this.equipments = this.equipments.filter(a => !a.hidden && a.slotId < 4); // アミュレットは除外\n\n      this.predefinedMainTags.push(\"分類\");\n      this.predefinedMainTags.push(\"デメリット\");\n\n      let itemId = 0;\n      for (let item of this.equipments) {\n        item.recordType = 'item';\n        item.id = ++itemId;\n        if (item.classes) {\n          item.classIds = item.classes.map(c1 => this.classes.findIndex(c2 => c1 == c2));\n        }\n        item.slotId = this.itemTypes.findIndex(v => v == item.slot);\n        item.rarityId = this.rarities.findIndex(v => v == item.rarity);\n        this.$set(item, 'status', [])\n\n        this.registerTags(item.tags);\n      }\n\n      let handledTags = new Set();\n      this.appendSet(handledTags, this.constants.tagsHidden);\n\n      const isAction = (t) => {\n        for (const n of this.constants.tagsAction) {\n          if (t.startsWith(n))\n            return true;\n        }\n        return false;\n      };\n      this.stat.defaults = [\n        ...Object.values(this.stat.base).map(a => a.value),\n      ];\n      this.updateStatus();\n\n      for (let t of this.getMainTags()) {\n        if (handledTags.has(t))\n          continue;\n\n        if (t.match(/^バフ:/))\n          this.tagCategory.buff.tags.add(t);\n        else if (t.match(/^デバフ:/))\n          this.tagCategory.debuff.tags.add(t);\n        else if (t.match(/^無効化:/))\n          this.tagCategory.resist.tags.add(t);\n        else if (isAction(t))\n          this.tagCategory.action.tags.add(t);\n        else\n          this.tagCategory.other.tags.add(t);\n      }\n      this.reorderSet(this.tagCategory.buff.tags, this.constants.tagsBuff);\n      this.reorderSet(this.tagCategory.debuff.tags, this.constants.tagsDebuff);\n      this.reorderSet(this.tagCategory.resist.tags, this.constants.tagsResist);\n      this.reorderSet(this.tagCategory.action.tags, this.constants.tagsAction);\n      this.reorderSet(this.tagCategory.other.tags, this.constants.tagsOther);\n      this.reorderSubtag();\n\n      this.reorderSet(this.subTagTable[\"デメリット\"], this.constants.tagsDemerit);\n    },\n\n    updateStatus() {\n      const base = Object.values(this.stat.base).map(a => a.value);\n      for (let item of this.equipments) {\n        item.status = this.getItemStatus(item, ...base);\n      }\n      this.$forceUpdate();\n    },\n    resetStatus() {\n      let vals = [...this.stat.defaults];\n      for (let v of [...Object.values(this.stat.base)])\n        v.value = vals.shift();\n      this.updateStatus();\n    },\n\n    itemClassesToHtml(item) {\n      let r = \"\";\n      if (item.classes)\n        r += item.classes.map(c => `<img src=\"${this.getImageURL(c)}\" title=\"${c}\" width=\"24\" height=\"24\" />`).join(\"\")\n      else\n        r += `<img src=\"${this.getImageURL('全クラス')}\" title=\"全クラス\" height=\"24\" />`;\n      return r;\n    },\n\n    isInfoHighlighted(chr) {\n      return this.freeSearchFn && this.freeSearchFn(chr.name)\n        ? 2 : 0;\n    },\n    isDescHighlighted(chr) {\n      let r = 0;\n      if (this.tagSearchFn) {\n        r |= this.tagSearchFn(chr)\n          ? 1 : 0;\n      }\n      if (this.freeSearchFn) {\n        r |= this.freeSearchFn(chr.desc)\n          ? 2 : 0;\n      }\n      return r;\n    },\n    applySearchPatterns(chr) {\n      let r = this.isInfoHighlighted(chr) | this.isDescHighlighted(chr);\n      return r == this.getSearchMask();\n    },\n    applyClassFilter(chr) {\n      return (!chr.classIds || this.filterMatch(this.classFilter, chr.classIds)) &&\n        this.filterMatch(this.itemTypeFilter, chr.slotId) &&\n        this.filterMatch(this.rarityFilter, chr.rarityId);\n    },\n    filterItem(chr) {\n      let ok = this.applyClassFilter(chr);\n      if (ok && this.isSearchPatternSet()) {\n        ok = this.applySearchPatterns(chr);\n      }\n      return ok;\n    },\n    updateTagCounts() {\n      this.resetTagCounts();\n      for (let item of this.equipments) {\n        if (this.applyClassFilter(item)) {\n          this.countTags(item.tags);\n        }\n      }\n    },\n\n    updateURL(kvp) {\n      if (!this.enableUpdateURL)\n        return false;\n\n      let seri = new lut.URLSerializer();\n      if (this.isFilterEnabled(this.classFilter))\n        seri.class = this.serializeFilter(this.classFilter);\n      if (this.isFilterEnabled(this.itemTypeFilter))\n        seri.itemType = this.serializeFilter(this.itemTypeFilter);\n      if (this.isFilterEnabled(this.rarityFilter))\n        seri.rarity = this.serializeFilter(this.rarityFilter);\n      if (this.tagSearchPattern.length > 0)\n        seri.tag = this.tagSearchPattern;\n      if (this.freeSearchPattern.length > 0)\n        seri.free = this.freeSearchPattern;\n\n      if (kvp) {\n        for (const k in kvp)\n          seri[k] = kvp[k];\n      }\n\n      let url = seri.serialize();\n      if (url != this.prevURL) {\n        window.history.pushState(null, null, url);\n        this.prevURL = url;\n        return true;\n      }\n      return false;\n    },\n    decodeURL(initState = false) {\n      let data = new lut.URLSerializer({\n        class: 0,\n        itemType: 0,\n        rarity: 0,\n        tag: \"\",\n        free: \"\",\n        p: 1,\n      });\n\n      if (data.deserialize(window.location.href) || initState) {\n        this.deserializeFilter(this.classFilter, data.class);\n        this.deserializeFilter(this.itemTypeFilter, data.itemType);\n        this.deserializeFilter(this.rarityFilter, data.rarity);\n        this.tagSearchPattern = data.tag;\n        this.freeSearchPattern = data.free;\n        if (this.freeSearchPattern.length != 0)\n          this.searchTabIndex = 1;\n\n        if (data.p > 0)\n          this.page = data.p;\n      }\n    },\n  }\n}\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Items.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Items.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Items.vue?vue&type=template&id=7ba23420&scoped=true\"\nimport script from \"./Items.vue?vue&type=script&lang=js\"\nexport * from \"./Items.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ba23420\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\",on:{\"mousemove\":_vm.onMouseMove}},[_c('div',{staticClass:\"header\",class:{ 'hidden': !_vm.showHeader }},[_c('Navigation')],1),_c('div',{staticStyle:{\"padding-top\":\"60px\",\"background\":\"#d0d0d4\"}}),_c('div',{staticClass:\"root\"},[_c('b-tabs',{attrs:{\"nav-class\":\"tab-index\",\"active-nav-item-class\":\"tab-title-active\"},model:{value:(_vm.tabIndex),callback:function ($$v) {_vm.tabIndex=$$v},expression:\"tabIndex\"}},[_c('b-tab',{attrs:{\"title-link-class\":\"tab-title\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('h2',{staticStyle:{\"margin\":\"0em 1em\",\"font-size\":\"1.25em\"}},[_vm._v(\"組み合わせ検索\")])]},proxy:true}])},[_c('CombinationBufSimulator',{ref:\"cbSim\"})],1),_c('b-tab',{attrs:{\"title-link-class\":\"tab-title\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('h2',{staticStyle:{\"margin\":\"0em 1em\",\"font-size\":\"1.25em\"}},[_vm._v(\"自己バフ検索\")])]},proxy:true}])},[_c('SelfBufSimulator',{ref:\"sbSim\"})],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\"},[_c('div',{staticClass:\"menu-content\",staticStyle:{\"flex-wrap\":\"nowrap\"}},[_c('div',{staticClass:\"menu-panel\",attrs:{\"id\":\"cb-settings\"}},[_c('b-container',[_c('div',[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"設定\")])]),_c('b-table',{attrs:{\"small\":\"\",\"borderless\":\"\",\"hover\":\"\",\"items\":Object.values(_vm.options),\"fields\":_vm.optionFields},scopedSlots:_vm._u([{key:\"cell(value)\",fn:function(r){return [_c('div',{staticClass:\"flex\"},[_c('div',{staticStyle:{\"margin-left\":\"auto\"}},[(r.item.type == 'boolean')?_c('b-form-checkbox',{model:{value:(r.item.value),callback:function ($$v) {_vm.$set(r.item, \"value\", $$v)},expression:\"r.item.value\"}}):_vm._e(),(r.item.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"3em\"},attrs:{\"min\":r.item.min,\"max\":r.item.max,\"size\":\"sm\",\"type\":\"number\",\"lazy\":\"\"},model:{value:(r.item.value),callback:function ($$v) {_vm.$set(r.item, \"value\", _vm._n($$v))},expression:\"r.item.value\"}}):_vm._e()],1)])]}},{key:\"cell(label)\",fn:function(r){return [_c('div',{attrs:{\"id\":`cb-p-${r.item.name}`}},[_vm._v(_vm._s(r.item.label))])]}}])})],1),_c('b-container',[_c('div',[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"フィルタ\")])]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"cb-class-selector\"}},_vm._l((_vm.filter.class),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.classes[i]),\"width\":\"20px\"}})],1)}),1)],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget filter\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"cb-symbol-selector\"}},_vm._l((_vm.filter.symbol),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.symbols[i]),\"width\":\"20px\"}})],1)}),1)],1),_c('div',{staticClass:\"widget filter\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"cb-damage-type-selector\"}},_vm._l((_vm.filter.damageType),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.damageTypes[i]),\"width\":\"20px\"}})],1)}),1)],1),_c('div',{staticClass:\"widget rareiry-filter\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"cb-rareiry-selector\"}},_vm._l((_vm.filter.rarity),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.rarities[i]),\"width\":\"30px\"}})],1)}),1)],1)])]),_c('b-container',[_c('div',{staticClass:\"button-box\"},[_c('div',{staticClass:\"left-align\"},[_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetPAtk()}}},[_vm._v(\"物攻系\")]),_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetMAtk()}}},[_vm._v(\"魔攻系\")]),_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetPDef()}}},[_vm._v(\"物防系\")]),_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetMDef()}}},[_vm._v(\"魔防系\")])],1)]),_c('div',{staticClass:\"button-box\"},[_c('div',{staticClass:\"left-align\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.onCopyUrl()}}},[_vm._v(\"パラメータを URL としてコピー\")])],1)])])],1),_c('div',{staticClass:\"menu-panel\",attrs:{\"id\":\"cb-buff-list\"}},[_c('b-container',[_c('div',{staticClass:\"flex\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"バフ\")]),_c('div',{staticClass:\"right-align\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.buffs.forEach(a => a.reset())}}},[_vm._v(\"リセット\")])],1)]),_c('b-table',{attrs:{\"small\":\"\",\"borderless\":\"\",\"hover\":\"\",\"items\":_vm.buffs,\"fields\":_vm.buffFields},scopedSlots:_vm._u([{key:\"cell(enabled)\",fn:function(r){return [_c('b-form-checkbox',{model:{value:(r.item.enabled),callback:function ($$v) {_vm.$set(r.item, \"enabled\", $$v)},expression:\"r.item.enabled\"}})]}},{key:\"cell(label)\",fn:function(r){return [_vm._v(\" \"+_vm._s(r.item.label)+\" \")]}},{key:\"cell(limit)\",fn:function(r){return [(!r.item.parent)?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4.5em\"},attrs:{\"size\":\"sm\",\"type\":\"number\",\"step\":\"10\",\"lazy\":\"\",\"placeholder\":\"無制限\"},model:{value:(r.item.limit),callback:function ($$v) {_vm.$set(r.item, \"limit\", _vm._n($$v))},expression:\"r.item.limit\"}}):_vm._e(),(r.item.parent)?_c('div',{staticStyle:{\"text-align\":\"center\",\"color\":\"lightgray\"}},[_vm._v(\"〃\")]):_vm._e()]}},{key:\"cell(weight)\",fn:function(r){return [_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"3.5em\"},attrs:{\"size\":\"sm\",\"type\":\"number\",\"lazy\":\"\"},model:{value:(r.item.weight),callback:function ($$v) {_vm.$set(r.item, \"weight\", _vm._n($$v))},expression:\"r.item.weight\"}})]}}])})],1)],1),_c('div',{staticClass:\"menu-panel\",attrs:{\"id\":\"cb-debuff-list\"}},[_c('b-container',[_c('div',{staticClass:\"flex\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"デバフ\")]),_c('div',{staticClass:\"right-align\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.debuffs.forEach(a => a.reset())}}},[_vm._v(\"リセット\")])],1)]),_c('b-table',{attrs:{\"small\":\"\",\"borderless\":\"\",\"hover\":\"\",\"items\":_vm.debuffs,\"fields\":_vm.buffFields},scopedSlots:_vm._u([{key:\"cell(enabled)\",fn:function(r){return [_c('b-form-checkbox',{model:{value:(r.item.enabled),callback:function ($$v) {_vm.$set(r.item, \"enabled\", $$v)},expression:\"r.item.enabled\"}})]}},{key:\"cell(label)\",fn:function(r){return [_vm._v(\" \"+_vm._s(r.item.label)+\" \")]}},{key:\"cell(limit)\",fn:function(r){return [(!r.item.parent)?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4.5em\"},attrs:{\"size\":\"sm\",\"type\":\"number\",\"step\":\"10\",\"lazy\":\"\",\"placeholder\":\"無制限\"},model:{value:(r.item.limit),callback:function ($$v) {_vm.$set(r.item, \"limit\", _vm._n($$v))},expression:\"r.item.limit\"}}):_vm._e(),(r.item.parent)?_c('div',{staticStyle:{\"text-align\":\"center\",\"color\":\"lightgray\"}},[_vm._v(\"〃\")]):_vm._e()]}},{key:\"cell(weight)\",fn:function(r){return [_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"3.5em\"},attrs:{\"size\":\"sm\",\"type\":\"number\",\"lazy\":\"\"},model:{value:(r.item.weight),callback:function ($$v) {_vm.$set(r.item, \"weight\", _vm._n($$v))},expression:\"r.item.weight\"}})]}}])})],1)],1),_c('div',{staticClass:\"menu-panel\",attrs:{\"id\":\"cb-exclude-list\"}},[_c('b-container',[_c('div',[_c('div',{staticClass:\"flex\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"優先リスト\")]),_c('div',{staticClass:\"right-align\"},[_c('b-button',{attrs:{\"size\":\"sm\",\"id\":\"cb-add-prioritized\"}},[_vm._v(\"追加\")]),_c('b-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.prioritized=[]}}},[_vm._v(\"クリア\")]),_c('ChrSelector',{attrs:{\"target\":\"cb-add-prioritized\",\"chrs\":_vm.mainChrs,\"classfilter\":\"\",\"symbolfilter\":\"\"},on:{\"click\":_vm.addPrioritized}})],1)]),_c('div',{staticClass:\"flex exclude-box\"},_vm._l((_vm.prioritized),function(v,i){return _c('b-link',{key:i,on:{\"click\":function($event){_vm.prioritized.splice(_vm.prioritized.indexOf(v), 1)}}},[(!v.owner)?_c('div',{attrs:{\"title\":v.name}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(v.icon),\"width\":\"50\"}})],1):_vm._e(),(v.owner)?_c('div',{staticStyle:{\"width\":\"50px\",\"height\":\"50px\"},attrs:{\"title\":v.owner.name + ' & ' + v.item.name}},[_c('b-img-lazy',{staticStyle:{\"position\":\"relative\",\"left\":\"0px\",\"top\":\"0px\"},attrs:{\"src\":_vm.getImageURL(v.owner.icon),\"width\":\"35\"}}),_c('b-img-lazy',{staticStyle:{\"position\":\"relative\",\"left\":\"-20px\",\"top\":\"15px\"},attrs:{\"src\":_vm.getImageURL(v.item.icon),\"width\":\"35\"}})],1):_vm._e()])}),1)]),_c('div',[_c('div',{staticClass:\"flex\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"除外リスト\")]),_c('div',{staticClass:\"right-align\"},[_c('b-button',{attrs:{\"size\":\"sm\",\"id\":\"cb-add-excluded\"}},[_vm._v(\"追加\")]),_c('b-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.excluded=[]}}},[_vm._v(\"クリア\")]),_c('ChrSelector',{attrs:{\"target\":\"cb-add-excluded\",\"chrs\":_vm.mainChrs,\"classfilter\":\"\",\"symbolfilter\":\"\"},on:{\"click\":_vm.addExcluded}})],1)]),_c('div',{staticClass:\"flex exclude-box\"},_vm._l((_vm.excluded),function(v,i){return _c('b-link',{key:i,on:{\"click\":function($event){_vm.excluded.splice(_vm.excluded.indexOf(v), 1)}}},[(!v.owner)?_c('div',{attrs:{\"title\":v.name}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(v.icon),\"width\":\"50\"}})],1):_vm._e(),(v.owner)?_c('div',{staticStyle:{\"width\":\"50px\",\"height\":\"50px\"},attrs:{\"title\":v.owner.name + ' & ' + v.item.name}},[_c('b-img-lazy',{staticStyle:{\"position\":\"relative\",\"left\":\"0px\",\"top\":\"0px\"},attrs:{\"src\":_vm.getImageURL(v.owner.icon),\"width\":\"35\"}}),_c('b-img-lazy',{staticStyle:{\"position\":\"relative\",\"left\":\"-20px\",\"top\":\"15px\"},attrs:{\"src\":_vm.getImageURL(v.item.icon),\"width\":\"35\"}})],1):_vm._e()])}),1)])])],1)]),_c('div',{staticClass:\"content\"},[(!_vm.progress.completed)?_c('div',{staticClass:\"menu-panel\",staticStyle:{\"padding\":\"10px\",\"position\":\"absolute\"}},[_c('b-spinner',{attrs:{\"small\":\"\",\"label\":\"Spinning\"}})],1):_vm._e(),(_vm.progress.result.length != 0)?_c('div',{staticClass:\"total-params\"},[_c('div',{staticClass:\"flex info\"},[_vm._m(0),_vm._l((_vm.allEffectsToHtml(_vm.progress.result)),function(e,ei){return [_c('div',{key:ei,domProps:{\"innerHTML\":_vm._s(e)}})]})],2)]):_vm._e()]),_c('div',{staticClass:\"content\",style:(_vm.style)},[(_vm.progress.result.length == 0)?_c('div',{staticClass:\"menu-panel\",staticStyle:{\"padding\":\"10px\"}},[_c('div',{staticClass:\"about\"},[_c('h5',{staticStyle:{\"margin-bottom\":\"5px\"}},[_vm._v(\"組み合わせ検索\")]),_vm._v(\" 指定のバフ・デバフの最適な組み合わせを探すツールです。\"),_c('br'),_vm._v(\" メインキャラ(スキル×装備)×サポート の組み合わせから、競合を考慮しつつ、総効果量の高いものを探索します。\"),_c('br'),_vm._v(\" 例えば「与ダメージバフ＋クリティカルダメージ倍率バフ＋ダメージ耐性デバフ」のいい感じの組み合わせを探したい、というようなケースで役立ちます。\"),_c('br'),_c('br'),_vm._v(\" 味方全体の強化の最適化が目的であるため、自己バフは考慮しません。単体のバフも「\"),_c('b-link',{on:{\"mouseenter\":function($event){return _vm.highlight('cb-p-allowSingleUnitBuff', true)},\"mouseleave\":function($event){return _vm.highlight('cb-p-allowSingleUnitBuff', false)}}},[_vm._v(\"単体バフを含める\")]),_vm._v(\"」にチェックしていない限り考慮しません。\"),_c('br'),_vm._v(\" マスターキャラのクラス対象バフや、特定のクラスへの追加効果 (\"),_c('b-link',{ref:_vm.po},[_vm._v(\"みんな！丸太は持った！？\")]),_vm._v(\" のスキル与ダメージなど) は除外しています。\"),_c('br'),_vm._v(\" シンボルスキル、および ゼニス/オリジン/ナディア のシンボル対象バフは「\"),_c('b-link',{on:{\"mouseenter\":function($event){return _vm.highlight('cb-p-allowSymbolSkill', true)},\"mouseleave\":function($event){return _vm.highlight('cb-p-allowSymbolSkill', false)}}},[_vm._v(\"シンボルスキルを含める\")]),_vm._v(\"」をチェックすると含めるようになります。\"),_c('br'),_vm._v(\" 特定のキャラやスキルを除外or優先採用したい場合、アイコンをマウスオーバーすると出てくるポップアップから可能です。\"),_c('br'),_vm._v(\" 特定の効果を優先したい場合は優先度を高めると優先的に選択されます。\"),_c('br'),_c('br'),_vm._v(\" なお、必ずしも本当に最適な結果になるとは限らないことに注意が必要です。\"),_c('br'),_vm._v(\" 完璧に解くには時間がかかりすぎるため、若干正確性を犠牲にしつつ高速に解く方法を用いています。\"),_c('br'),_vm._v(\" (アルゴリズムは随時改良中: 2024/03/14)\"),_c('br')],1)]):_vm._e(),_vm._l((_vm.progress.result),function(r,ri){return [_c('div',{key:ri,staticClass:\"character\"},[_c('div',{staticClass:\"flex info\"},[_vm._m(1,true),_vm._l((_vm.chrEffectsToHtml(r)),function(e,ei){return [_c('div',{key:ei,domProps:{\"innerHTML\":_vm._s(e)}})]})],2),_c('div',{staticClass:\"flex\"},[(r.main)?_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.icon),\"title\":r.main.character.name,\"id\":'portrait_m_'+ri,\"width\":\"100\",\"rounded\":\"\"}}),(_vm.displayType>=1)?_c('b-popover',{attrs:{\"target\":'portrait_m_'+ri,\"title\":r.main.character.name,\"triggers\":\"hover click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[_c('div',{staticClass:\"status flex\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.class),\"title\":'クラス:'+r.main.character.class,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.symbol),\"title\":'シンボル:'+r.main.character.symbol,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.rarity),\"title\":'レアリティ:'+r.main.character.rarity,\"height\":\"20\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.damageType),\"title\":'攻撃タイプ:'+r.main.character.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(r.main.character.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('移動'),\"title\":\"移動\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(r.main.character.move))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"実装日:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(r.main.character.date))])])],1),_c('div',{staticClass:\"status flex\"},_vm._l((r.main.character.skills),function(skill,si){return _c('b-link',{key:si,on:{\"click\":function($event){return _vm.addPrioritized(skill)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"title\":_vm.descToTitle(skill),\"width\":\"50\"}})],1)}),1),_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{on:{\"click\":function($event){return _vm.addPrioritized(r.main.character)}}},[_vm._v(\"このキャラを優先\")])],1),_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{on:{\"click\":function($event){return _vm.addExcluded(r.main.character)}}},[_vm._v(\"このキャラを除外\")])],1)]):_vm._e()],1):_vm._e(),(r.main)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"skills\"},_vm._l((r.main.skills),function(skill,si){return _c('div',{key:si,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"title\":skill.name,\"width\":\"50\",\"id\":'skill_m_'+ri+'_'+si}}),_c('b-popover',{attrs:{\"target\":'skill_m_'+ri+'_'+si,\"title\":skill.name,\"triggers\":\"hover click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[(skill.owners)?_c('div',{staticClass:\"owners\"},[_vm._v(\" 所持者:\"),_c('br'),_vm._l((skill.owners),function(owner,oi){return _c('b-link',{key:oi,on:{\"click\":function($event){return _vm.addPrioritized(owner)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(owner.icon),\"title\":owner.name,\"width\":\"50\"}})],1)})],2):_vm._e(),(!skill.isTalent)?_c('div',[_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addPrioritized(skill)}}},[_vm._v(\"このスキルを優先\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addPrioritized(skill, r.main.character)}}},[_vm._v(\"このキャラとスキルの組み合わせを優先\")])],1),_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addExcluded(skill)}}},[_vm._v(\"このスキルを除外\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addExcluded(skill, r.main.character)}}},[_vm._v(\"このキャラとスキルの組み合わせを除外\")])],1)]):_vm._e()])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill, true))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e(),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.effectsToHtml(skill, r.main))}})])])])])}),0),_c('div',{staticClass:\"skills\"},_vm._l((r.main.equipments),function(item,si){return _c('div',{key:si,staticClass:\"skill\"},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(item.icon),\"title\":item.name,\"width\":\"50\",\"id\":'item_'+ri+'_'+si}}),(_vm.displayType>=1)?_c('b-popover',{attrs:{\"target\":'item_'+ri+'_'+si,\"title\":item.name,\"triggers\":\"hover click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addPrioritized(item)}}},[_vm._v(\"このアイテムを優先\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addPrioritized(item, r.main.character)}}},[_vm._v(\"このキャラとアイテムの組み合わせを優先\")])],1),_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addExcluded(item)}}},[_vm._v(\"このアイテムを除外\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addExcluded(item, r.main.character)}}},[_vm._v(\"このキャラとアイテムの組み合わせを除外\")])],1)]):_vm._e()],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(item.slot),\"title\":item.name,\"width\":\"18\"}}),_vm._v(_vm._s(item.name))],1),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(item))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(item, true))}}),(item.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(item))}}):_vm._e(),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.effectsToHtml(item, r.main))}})])])])])}),0)]):_vm._e()]),_c('div',{staticClass:\"flex\"},[(r.summon)?_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.summon.character.icon),\"title\":`${r.summon.character.name} (召喚ユニット)`,\"id\":'portrait_x_'+ri,\"width\":\"100\",\"rounded\":\"\"}})],1):_vm._e(),(r.summon)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"skills\"},_vm._l((r.summon.skills),function(skill,si){return _c('div',{key:si,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"title\":skill.name,\"width\":\"50\",\"id\":'skill_x_'+ri+'_'+si}}),_c('b-popover',{attrs:{\"target\":'skill_x_'+ri+'_'+si,\"title\":skill.name,\"triggers\":\"hover click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[(skill.owners)?_c('div',{staticClass:\"owners\"},[_vm._v(\" 所持者:\"),_c('br'),_vm._l((skill.owners),function(owner,oi){return _c('b-link',{key:oi,on:{\"click\":function($event){return _vm.addPrioritized(owner)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(owner.icon),\"title\":owner.name,\"width\":\"50\",\"height\":\"50\"}})],1)})],2):_vm._e(),(!skill.isTalent)?_c('div',[_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addPrioritized(skill)}}},[_vm._v(\"このスキルを優先\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addPrioritized(skill, r.main.character)}}},[_vm._v(\"このキャラとスキルの組み合わせを優先\")])],1),_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addExcluded(skill)}}},[_vm._v(\"このスキルを除外\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addExcluded(skill, r.main.character)}}},[_vm._v(\"このキャラとスキルの組み合わせを除外\")])],1)]):_vm._e()])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill, true))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e(),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.effectsToHtml(skill, r.main))}})])])])])}),0)]):_vm._e()]),_c('div',{staticClass:\"flex\"},[(r.support)?_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.support.character.icon),\"title\":r.support.character.name,\"id\":'portrait_s_'+ri,\"width\":\"100\",\"height\":\"100\",\"rounded\":\"\"}}),(_vm.displayType>=1)?_c('b-popover',{attrs:{\"target\":'portrait_s_'+ri,\"title\":r.support.character.name,\"triggers\":\"hover click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[_c('div',{staticClass:\"status flex\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.support.character.class),\"title\":'クラス:'+r.support.character.class,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.support.character.supportType),\"title\":'サポートタイプ:'+r.support.character.supportType,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.support.character.rarity),\"title\":'レアリティ:'+r.support.character.rarity,\"height\":\"20\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.support.character.damageType),\"title\":'攻撃タイプ:'+r.support.character.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(r.support.character.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"実装日:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(r.support.character.date))])])],1),_c('div',{staticClass:\"status flex\"},_vm._l((r.support.character.skills),function(skill,si){return _c('b-link',{key:si},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"title\":_vm.descToTitle(skill),\"width\":\"50\"}})],1)}),1),_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{on:{\"click\":function($event){return _vm.addPrioritized(r.support.character)}}},[_vm._v(\"このキャラを優先\")])],1),_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{on:{\"click\":function($event){return _vm.addExcluded(r.support.character)}}},[_vm._v(\"このキャラを除外\")])],1)]):_vm._e()],1):_vm._e(),(r.support)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"skills\"},_vm._l((r.support.skills),function(skill,si){return _c('div',{key:si,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"title\":skill.name,\"with\":\"50\",\"height\":\"50\",\"id\":'skill_s_'+ri+'_'+si}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill, true))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e(),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.effectsToHtml(skill, r.support))}})])])])])}),0)]):_vm._e()])])]})],2),_c('ItemPopovers')],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h6',[_vm._v(\"全ユニット合計:\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h6',[_vm._v(\"ユニット内合計:\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-popover',{attrs:{\"target\":_vm.target,\"triggers\":\"click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"bottom\"}},[_c('div',{staticStyle:{\"margin\":\"4px 0px\"}},[(_vm.classfilter)?_c('b-button-group',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"size\":\"sm\"}},_vm._l((_vm.filter.class),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.classes[i]),\"width\":\"20px\"}})],1)}),1):_vm._e(),(_vm.symbolfilter)?_c('b-button-group',{attrs:{\"size\":\"sm\"}},_vm._l((_vm.filter.symbol),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.symbols[i]),\"width\":\"20px\"}})],1)}),1):_vm._e()],1),_c('div',{staticClass:\"chr-area\"},[(_vm.nullable)?_c('b-link',{on:{\"mouseover\":function($event){return _vm.$emit('mouseover', null)},\"mouseleave\":function($event){return _vm.$emit('mouseleave', null)},\"click\":function($event){return _vm.onClick(null)}}},[_c('b-img-lazy',{staticClass:\"rounded-bordered\",attrs:{\"src\":_vm.getImageURL('null'),\"title\":\"(なし)\",\"width\":\"50\",\"height\":\"50\"}})],1):_vm._e(),_vm._l((_vm.filteredChrs),function(v,i){return _c('b-link',{key:i,on:{\"mouseover\":function($event){return _vm.$emit('mouseover', v)},\"mouseleave\":function($event){return _vm.$emit('mouseleave', v)},\"click\":function($event){return _vm.onClick(v)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(v.icon),\"title\":_vm.descToTitle(v),\"width\":\"50\"}})],1)})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-popover :target=\"target\" triggers=\"click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"bottom\">\n    <div style=\"margin: 4px 0px\">\n      <b-button-group v-if=\"classfilter\" size=\"sm\" style=\"margin-right: 10px\">\n        <b-button v-for=\"(c, i) in filter.class\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n          <b-img-lazy :src=\"getImageURL(classes[i])\" width=\"20px\" />\n        </b-button>\n      </b-button-group>\n      <b-button-group v-if=\"symbolfilter\" size=\"sm\">\n        <b-button v-for=\"(c, i) in filter.symbol\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n          <b-img-lazy :src=\"getImageURL(symbols[i])\" width=\"20px\" />\n        </b-button>\n      </b-button-group>\n    </div>\n    <div class=\"chr-area\">\n      <b-link v-if=\"nullable\" @mouseover=\"$emit('mouseover', null)\" @mouseleave=\"$emit('mouseleave', null)\" @click=\"onClick(null)\">\n        <b-img-lazy :src=\"getImageURL('null')\" title=\"(なし)\" width=\"50\" height=\"50\" class=\"rounded-bordered\" />\n      </b-link>\n      <b-link v-for=\"(v, i) in filteredChrs\" :key=\"i\" @mouseover=\"$emit('mouseover', v)\" @mouseleave=\"$emit('mouseleave', v)\" @click=\"onClick(v)\">\n        <b-img-lazy :src=\"getImageURL(v.icon)\" :title=\"descToTitle(v)\" width=\"50\" />\n      </b-link>\n    </div>\n  </b-popover>\n</template>\n\n<script>\nimport jsonConstants from '../../assets/constants.json'\nimport common from \"../common\";\n\nexport default {\n  name: 'ChrSelector',\n  mixins: [common],\n  props: {\n    target: {\n      type: String,\n      required: true,\n    },\n    chrs: {\n      type: Array,\n      required: true,\n    },\n\n    nullable: {\n      type: Boolean,\n      default: false,\n    },\n    classfilter: {\n      type: Boolean,\n      default: false,\n    },\n    symbolfilter: {\n      type: Boolean,\n      default: false,\n    },\n    rarityfilter: {\n      type: Boolean,\n      default: false,\n    },\n\n    closeonclick: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      classes: jsonConstants.classes,\n      symbols: jsonConstants.symbols,\n      damageTypes: jsonConstants.damageTypes,\n      rarities: jsonConstants.rarities,\n\n      filter: {\n        class: [],\n        symbol: [],\n        rarity: [],\n      },\n    }\n  },\n\n  computed: {\n    filteredChrs() {\n      return this.chrs.filter(a => this.filterChr(a));\n    },\n  },\n\n  created() {\n    this.fillFilter(this.filter.class, this.classes);\n    this.fillFilter(this.filter.symbol, this.symbols);\n    this.fillFilter(this.filter.rarity, this.rarities);\n  },\n\n  methods: {\n    filterChr(chr) {\n      return (!this.classfilter || this.filterMatch(this.filter.class, chr.classId)) &&\n        (!this.symbolfilter || this.filterMatch(this.filter.symbol, chr.symbolId)) &&\n        (!this.rarityfilter || this.filterMatch(this.filter.rarity, chr.rarityId));\n    },\n\n    onClick(item) {\n      this.$emit('click', item);\n      if (this.closeonclick) {\n        this.$root.$emit('bv::hide::popover', this.target)\n      }\n    },\n  }\n}\n</script>\n\n<style>\n.chr-area {\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  width: 425px;\n  min-height: 150px;\n  max-height: 250px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n/*\n.btn-outline-secondary {\n  padding: 3px !important;\n}\n*/\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChrSelector.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ChrSelector.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChrSelector.vue?vue&type=template&id=7e985746\"\nimport script from \"./ChrSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ChrSelector.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChrSelector.vue?vue&type=style&index=0&id=7e985746&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import jsonConstants from '../../assets/constants.json'\nimport jsonMainActive from '../../assets/main_active.json'\nimport jsonMainPassive from '../../assets/main_passive.json'\nimport jsonMainTalents from '../../assets/main_talents.json'\nimport jsonMainChrs from '../../assets/main_characters.json'\nimport jsonSupportActive from '../../assets/support_active.json'\nimport jsonSupportPassive from '../../assets/support_passive.json'\nimport jsonSupportChrs from '../../assets/support_characters.json'\nimport jsonNpcMainChrs from '../../assets/npc_main_characters.json'\nimport jsonNpcSupportChrs from '../../assets/npc_support_characters.json'\nimport jsonItems from '../../assets/items.json'\nimport { enumerate, download } from '../utils.js'\n\nexport default {\n  data() {\n    return {\n      classes: jsonConstants.classes,\n      symbols: jsonConstants.symbols,\n      damageTypes: jsonConstants.damageTypes,\n      rarities: jsonConstants.rarities,\n      effectTypes: jsonConstants.effectTypes,\n\n      filter: {\n        class: [],\n        symbol: [],\n        damageType: [],\n        rarity: [],\n      },\n\n      options: [],\n      buffs: [],\n      debuffs: [],\n      excluded: [],\n      prioritized: [],\n\n      progress: {\n        completed: true,\n        pending: false,\n        result: [],\n      },\n    };\n  },\n\n  methods: {\n    isGetSet(obj, name) {\n      const desc = Object.getOwnPropertyDescriptor(obj, name);\n      if (desc) {\n        if (desc.get)\n          return true;\n        if (desc.set)\n          return true;\n      }\n      return false;\n    },\n\n\n    setupDB() {\n      let g = this;\n\n      // json の自動加工処理をやりたい場合はここに書く\n      //if (process.env.NODE_ENV === 'development') {\n      //  for (let skills of [jsonMainActive, jsonMainPassive, jsonMainTalents, jsonSupportActive, jsonSupportPassive, jsonItems]) {\n      //    for (let skill of skills) {\n      //    }\n      //  }\n      //  download(\"main_active.json\", jsonMainActive);\n      //  download(\"main_passive.json\", jsonMainPassive);\n      //  download(\"main_talents.json\", jsonMainTalents);\n      //  download(\"support_active.json\", jsonSupportActive);\n      //  download(\"support_passive.json\", jsonSupportPassive);\n      //  download(\"items.json\", jsonItems);\n      //}\n\n\n      g.mainActive = structuredClone(jsonMainActive);\n      g.mainPassive = structuredClone(jsonMainPassive);\n      g.mainTalents = structuredClone(jsonMainTalents);\n      g.supActive = structuredClone(jsonSupportActive);\n      g.supPassive = structuredClone(jsonSupportPassive);\n      g.mainChrs = structuredClone(jsonMainChrs).filter(a => !a.hidden);\n      g.npcMainChrs = structuredClone(jsonNpcMainChrs).filter(a => !a.hidden);\n      g.supChrs = structuredClone(jsonSupportChrs).filter(a => !a.hidden);\n      g.npcSupChrs = structuredClone(jsonNpcSupportChrs).filter(a => !a.hidden);\n      g.items = structuredClone(jsonItems).filter(a => !a.hidden);\n\n      g.setupCharacters(g.npcMainChrs, g.mainActive, g.mainPassive, g.mainTalents, { npc: g.npcMainChrs });\n      g.setupCharacters(g.mainChrs, g.mainActive, g.mainPassive, g.mainTalents, { npc: g.npcMainChrs });\n      g.setupCharacters(g.npcSupChrs, g.supActive, g.supPassive);\n      g.setupCharacters(g.supChrs, g.supActive, g.supPassive);\n      g.setupItems(g.items);\n\n      g.mainChrs.sort((a, b) => b.date.localeCompare(a.date));\n      g.supChrs.sort((a, b) => b.date.localeCompare(a.date));\n      g.items.sort((a, b) => b.date.localeCompare(a.date));\n\n      g.weapons = g.items.filter(a => a.slot == \"武器\");\n      g.armors = g.items.filter(a => a.slot == \"鎧\");\n      g.helmets = g.items.filter(a => a.slot == \"兜\");\n      g.accessories = g.items.filter(a => a.slot == \"アクセサリ\");\n      g.amulets1 = g.items.filter(a => a.slot == \"月のアミュレット\");\n      g.amulets2 = g.items.filter(a => a.slot == \"太陽のアミュレット\");\n\n      g.searchTableWithUid = new Map();\n      g.searchTableWithName = new Map();\n      let idx = 0;\n      for (let list of [\n        g.mainChrs, g.mainActive, g.mainPassive, g.mainTalents,\n        g.supChrs, g.supActive, g.supPassive,\n        g.items\n      ]) {\n        for (let item of list) {\n          item.index = ++idx;\n          g.searchTableWithUid.set(item.uid, item);\n          g.searchTableWithName.set(item.name, item);\n\n          for (let e of [...(item.buff ?? []), ...(item.debuff ?? [])]) {\n            g.searchTableWithUid.set(e.uid, e);\n            for (let re of e.randomTable ?? []) {\n              g.searchTableWithUid.set(re.uid, re);\n            }\n          }\n        }\n      }\n      g.itemCount = idx;\n\n      let effectTypeIndex = 1;\n      let effectTypeNames = [\"???\"];\n      let effectTypeTable = new Map();\n      let slotIndex = 1;\n      let slotTable = new Map();\n      for (const et of this.effectTypes) {\n        const key = `${et}+`;\n        effectTypeTable.set(key, effectTypeIndex);\n        effectTypeNames.push(key);\n        effectTypeIndex++;\n      }\n      for (const et of this.effectTypes) {\n        const key = `${et}-`;\n        effectTypeTable.set(key, effectTypeIndex);\n        effectTypeNames.push(key);\n        effectTypeIndex++;\n      }\n      for (let skill of enumerate(g.mainActive, g.mainPassive, g.mainTalents, g.supActive, g.supPassive, g.items)) {\n        for (let effect of skill.effects) {\n          let effectType = effect.type;\n          if (effect.isBuff)\n            effectType += \"+\";\n          else if (effect.isDebuff)\n            effectType += \"-\";\n          effect.effectType = effectType;\n\n          if (effect.target == \"単体\" || effect.target == \"乱択\") {\n            effect.isSingleTarget = true;\n          }\n\n          effect.effectTypeIndex = effectTypeTable.get(effectType);\n          if (!effect.effectTypeIndex) {\n            effectTypeTable.set(effectType, effectTypeIndex);\n            effect.effectTypeIndex = effectTypeIndex++;\n            effectTypeNames.push(effectType);\n          }\n\n          if (skill.isActive) {\n            const slot = effect.slot;\n            effect.slotIndex = slotTable.get(slot);\n            if (!effect.slotIndex) {\n              slotTable.set(slot, slotIndex);\n              effect.slotIndex = slotIndex++;\n            }\n          }\n        }\n      }\n      g.effectTypeIndex = effectTypeIndex;\n      g.effectTypeNames = effectTypeNames;\n      g.effectTypeTable = effectTypeTable;\n      g.slotIndex = slotIndex;\n      g.slotTable = slotTable;\n    },\n    setupFilter() {\n      this.fillFilter(this.filter.class, this.classes);\n      this.fillFilter(this.filter.symbol, this.symbols);\n      this.fillFilter(this.filter.damageType, this.damageTypes);\n      this.fillFilter(this.filter.rarity, this.rarities);\n    },\n\n    getClassPassiveMain(className) {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const table = {\n        \"ソルジャー\": [find(\"x001\"), find(\"x201\")],\n        \"ランサー\":   [find(\"x002\"), find(\"x202\")],\n        \"ライダー\":   [find(\"x003\"), find(\"x203\")],\n        \"エアリアル\": [find(\"x004\"), find(\"x204\")],\n        \"ソーサラー\": [find(\"x005\"), find(\"x205\")],\n        \"セイント\":   [find(\"x006\"), find(\"x206\")],\n        \"シューター\": [find(\"x007\"), find(\"x207\")],\n        \"アサシン\":   [find(\"x008\"), find(\"x208\")],\n      };\n      return className in table ? table[className] : [];\n    },\n    getClassPassiveSummonMain(className) {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const table = {\n        \"ソルジャー\": [find(\"x001\")],\n        \"ランサー\":   [find(\"x002\")],\n        \"ライダー\":   [find(\"x003\")],\n        \"エアリアル\": [find(\"x004\")],\n        \"ソーサラー\": [find(\"x005\")],\n        \"セイント\":   [find(\"x006\")],\n        \"シューター\": [find(\"x007\")],\n        \"アサシン\":   [find(\"x008\")],\n      };\n      return className in table ? table[className] : [];\n    },\n    getClassPassiveNpcMain(className) {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const table = {\n        \"ソルジャー\": [find(\"x101\")],\n        \"ランサー\":   [find(\"x102\")],\n        \"ライダー\":   [find(\"x103\")],\n        \"エアリアル\": [find(\"x104\")],\n        \"ソーサラー\": [find(\"x105\")],\n        \"セイント\":   [find(\"x106\")],\n        \"シューター\": [find(\"x107\")],\n        \"アサシン\":   [find(\"x108\")],\n        \"ヴォイド\":   [find(\"x109\")],\n      };\n      return className in table ? table[className] : [];\n    },\n    getClassPassiveSupport(className) {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const table = {\n        \"ソルジャー\": [find(\"x301\"), find(\"4100001\"), find(\"4100002\"), find(\"4100003\")],\n        \"ランサー\":   [find(\"x302\"), find(\"4100004\"), find(\"4100005\"), find(\"4100006\")],\n        \"ライダー\":   [find(\"x303\"), find(\"4100007\"), find(\"4100008\"), find(\"4100009\")],\n        \"エアリアル\": [find(\"x304\"), find(\"4100010\"), find(\"4100011\"), find(\"4100012\")],\n        \"ソーサラー\": [find(\"x305\"), find(\"4100016\"), find(\"4100018\"), find(\"4100017\")],\n        \"セイント\":   [find(\"x306\"), find(\"4100016\"), find(\"4100008\"), find(\"4100017\")],\n        \"シューター\": [find(\"x307\"), find(\"4100015\"), find(\"4100014\"), find(\"4100012\")],\n        \"アサシン\":   [find(\"x308\"), find(\"4100013\"), find(\"4100014\"), find(\"4100012\")],\n      };\n      return className in table ? table[className] : [];\n    },\n    getClassPassiveSummonSupport(className) {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const table = {\n        \"ソルジャー\": [find(\"x301\")],\n        \"ランサー\":   [find(\"x302\")],\n        \"ライダー\":   [find(\"x303\")],\n        \"エアリアル\": [find(\"x304\")],\n        \"ソーサラー\": [find(\"x305\")],\n        \"セイント\":   [find(\"x306\")],\n        \"シューター\": [find(\"x307\")],\n        \"アサシン\":   [find(\"x308\")],\n      };\n      return className in table ? table[className] : [];\n    },\n    getClassPassiveNpcSupport(className) {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const table = {\n        \"ソルジャー\": [find(\"x401\")],\n        \"ランサー\":   [find(\"x402\")],\n        \"ライダー\":   [find(\"x403\")],\n        \"エアリアル\": [find(\"x404\")],\n        \"ソーサラー\": [find(\"x405\")],\n        \"セイント\":   [find(\"x406\")],\n        \"シューター\": [find(\"x407\")],\n        \"アサシン\":   [find(\"x408\")],\n      };\n      return className in table ? table[className] : [];\n    },\n\n    getEnchantPassiveList() {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const list = [\n        find(\"100\"), find(\"101\"), find(\"102\"), find(\"103\"), find(\"104\"), find(\"105\"),\n        find(\"106\"), find(\"107\"), find(\"108\"), find(\"109\"), find(\"110\"), find(\"111\"), find(\"112\")\n      ];\n      return list;\n    },\n    getEnchantPassive(enchantName) {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const table = {\n        \"バスター\": find(\"100\"),\n        \"チャージ\": find(\"101\"),\n        \"フェザー\": find(\"102\"),\n        \"クイック\": find(\"103\"),\n        \"ノヴァ\": find(\"104\"),\n        \"アイアン\": find(\"105\"),\n        \"リフレクト\": find(\"106\"),\n        \"バックアップ\": find(\"107\"),\n        \"アイス\": find(\"108\"),\n        \"ブライト\": find(\"109\"),\n        \"クリスタル\": find(\"110\"),\n        \"ストライク\": find(\"111\"),\n        \"ブレイク\": find(\"112\"),\n      };\n      return enchantName in table ? table[enchantName] : [];\n    },\n\n    getAmuletSkillList(slot) {\n      const find = (uid) => this.searchTableWithUid.get(uid);\n      const list = [\n        [find(\"x501\"), find(\"x502\"), find(\"x503\"), find(\"x504\"), find(\"x505\"), find(\"x506\"), find(\"x507\"), find(\"x508\")],\n        [find(\"x601\"), find(\"x602\"), find(\"x603\"), find(\"x604\"), find(\"x605\"), find(\"x606\")],\n      ];\n      return list[slot];\n    },\n\n    filterMatchMainChr(chr, filter = this.filter) {\n      return (!filter.class || this.filterMatch(filter.class, chr.classId)) &&\n        (!filter.symbol || this.filterMatch(filter.symbol, chr.symbolId)) &&\n        (!filter.damageType || this.filterMatch(filter.damageType, chr.damageTypeId)) &&\n        (!filter.rarity || this.filterMatch(filter.rarity, chr.rarityId));\n    },\n    filterMatchSupChr(chr, filter = this.filter) {\n      // チャレンジクエストはサポートのクラスは無制限なので、クラスフィルタは考慮しない\n      return (!filter.rarity || this.filterMatch(filter.rarity, chr.rarityId));\n    },\n\n    removeEffectsOfSameType(skill) {\n      const doRemove = (effects) => {\n        if (!effects)\n          return;\n\n        const countEffect = (effect) => {\n          let count = 0;\n          for (const e of effects) {\n            if (e.type == effect.type && e.target == effect.target && e.slot == effect.slot &&\n              e.timing == effect.timing && Math.sign(e.value) == Math.sign(effect.value)) {\n              ++count;\n            }\n          }\n          return count;\n        }\n\n        // 同系統の先にある効果を消していく。\n        // 効果が低い方が先にあるので、最も効果が高いのが残る。\n        for (let i = 0; i < effects.length;) {\n          if (countEffect(effects[i]) > 1) {\n            //console.log(effects[i]);\n            effects.splice(i, 1);\n          }\n          else {\n            ++i;\n          }\n        }\n      };\n      doRemove(skill.buff);\n      doRemove(skill.debuff);\n    },\n\n\n    getParamClass(param) {\n      return param.disabled() ? \"disabled\" : \"\";\n    },\n    getSkillClass(skill) {\n      return {\n        active: skill.isActive,\n        passive: skill.isPassive,\n      }\n    },\n    effectsToHtml(skill, ctx) {\n      let lines = [];\n\n      if (skill.multiAction) {\n        lines.push(`<div class=\"effect-box\"><span class=\"effect\">再行動</span></div>`);\n      }\n      for (const effect of enumerate(skill.buff, skill.debuff)) {\n        if ([\"ランダム\", \"トークン\", \"ガード\", \"リジェネ\"].includes(effect.type)) {\n          continue;\n        }\n\n        let value = this.getEffectValue(effect);\n        if (effect.add) {\n          value = `${effect.add.from}${effect.add.rate}`;\n        }\n\n        let additionalClass = \"\";\n        let prefix = effect.isDebuff ? \"-\" : \"+\";\n        let onBattle = effect.ephemeralOnBattle ? \"(戦闘時)\" : \"\";\n        let unit = \"\";\n        let title = \"\";\n        if (ctx.usedEffects.includes(effect)) {\n          additionalClass += \" caution\";\n        }\n        if (ctx.conflictedEffects.includes(effect)) {\n          additionalClass += \" blue\";\n          title = \"アクティブ同士で競合、または既に上限に達している\";\n        }\n        if (![\"移動\", \"射程(通常攻撃)\", \"射程(スキル)\", \"範囲\"].includes(effect.type)) {\n          unit = \"%\";\n        }\n\n        lines.push(`<div class=\"effect-box\"><span class=\"effect ${additionalClass}\" title=\"${title}\">${effect.type}${onBattle}${prefix}${value}${unit}</span></div>`);\n      }\n      return lines.length ? `<div class=\"effect-group\">${lines.join(\"\")}</div>` : \"\";\n    },\n    highlight(id, enabled) {\n      var element = document.getElementById(id);\n      if (enabled)\n        element.classList.add(\"highlighted\");\n      else\n        element.classList.remove(\"highlighted\");\n    },\n\n    getEffectValues(effectList, dst = null) {\n      if (!dst) {\n        dst = new Int32Array(this.effectTypeIndex);\n        dst.fill(0);\n      }\n      for (const e of effectList)\n        dst[e.effectTypeIndex] += this.getEffectValue(e);\n      return dst;\n    },\n    effectParamsToHtml(data) {\n      let lines = [];\n      for (let i = 0; i < this.effectTypeIndex; ++i) {\n        const name = this.effectTypeNames[i];\n        let v = data[i];\n        let unit = [\"移動+\"].includes(name) ? \"\" : \"%\";\n        if (v) {\n          lines.push(`<div class=\"effect-box\"><span class=\"effect caution\">${name}${v}${unit}</span></div>`);\n        }\n      }\n      return lines;\n    },\n    chrEffectsToHtml(r) {\n      const data = this.getEffectValues([...r.main.usedEffects, ...(r.support?.usedEffects ?? [])]);\n      return this.effectParamsToHtml(data);\n    },\n    allEffectsToHtml(recs) {\n      let data = null;\n      for (let r of recs)\n        data = this.getEffectValues(r.usedEffects, data);\n      return this.effectParamsToHtml(data);\n    },\n\n\n    // 優先/除外処理\n    _addPriorityItem(list, item, owner) {\n      const cb = owner ?\n        a => a.owner == owner && a.item == item :\n        a => a == item;\n      let i = list.findIndex(cb);\n      if (i >= 0)\n        list.splice(i, 1);\n\n      list.splice(0, 0, owner ? { item: item, owner: owner } : item);\n    },\n    _isInPrioritizeList(list, item, owner = null) {\n      if (list.includes(item))\n        return true;\n      else if (owner)\n        return list.find(a => a.owner == owner && a.item == item) != null;\n      return false;\n    },\n    addPrioritized(item, owner = null) {\n      this._addPriorityItem(this.prioritized, item, owner);\n    },\n    removePrioritized(item) {\n      this.prioritized.splice(this.prioritized.indexOf(item), 1);\n    },\n    isPrioritized(item, owner = null) {\n      return this._isInPrioritizeList(this.prioritized, item, owner);\n    },\n    addExcluded(item, owner = null) {\n      this._addPriorityItem(this.excluded, item, owner);\n    },\n    removeExcluded(item) {\n      this.excluded.splice(this.excluded.indexOf(item), 1);\n    },\n    isExcluded(item, owner = null) {\n      return this._isInPrioritizeList(this.excluded, item, owner);\n    },\n\n\n    // バフやデバフの効果量取得処理\n    getEffectValue(effect) {\n      let r = 0;\n      if (effect.value) {\n        r = effect.value;\n\n        // 効果が重複するタイプはフルスペック時の効果を返す\n        if (effect.multiply?.max) {\n          r *= effect.multiply.max;\n        }\n        else if (effect.stack) {\n          r *= effect.stack;\n        }\n      }\n      else if (effect.variable) {\n        // HP 割合などに応じて効果が上下するタイプ\n        // フルスペック時の効果を返す\n        if (Array.isArray(effect.variable.max)) {\n          r = effect.variable.max[effect.variable.max.length - 1];\n        }\n        else {\n          r = effect.variable.max;\n        }\n      }\n      else if (effect.add) {\n        // \"アタックの n% をマジックに加算\" など\n        // 正確な評価は困難だが 0 にはしたくないので、とりあえず 1/4 したのをスコアにしておく\n        r = effect.add.rate * 0.25;\n      }\n      return r;\n    },\n\n    findItemByUid(uid) {\n      const r = this.searchTableWithUid.get(uid);\n      //if (!r) {\n      //  console.log(`uid:${uid} not found`);\n      //}\n      return r;\n    },\n    findItemByName(name) {\n      const r = this.searchTableWithName.get(name);\n      //if (!r) {\n      //  console.log(`${name} not found`);\n      //}\n      return r;\n    },\n    findItem(name) {\n      return this.findItemByName(name);\n    },\n\n\n    matchClass(item, chr) {\n      if (item) {\n        if (!item.classes || item.classes.includes(chr.class))\n          return true;\n      }\n      return false;\n    },\n    mainCanEquip(item, slot = null) {\n      if (this.matchClass(item, this.main.character.value)) {\n        if (!slot || item.slot == slot)\n          return true;\n      }\n      return false;\n    },\n    supportCanEquip(item, slot, aux) {\n      if (item) {\n        if (!slot || item.slot == slot) {\n          if (slot == \"アミュレット\")\n            return !aux || item.amuletType == aux;\n          else\n            return true;\n        }\n      }\n      return false;\n    },\n\n    validateItems() {\n      var mainItems = this.mainItems;\n      var supItems = this.supportItems;\n      if (!this.mainCanEquip(mainItems.weapon.value, '武器'))\n        mainItems.weapon.value = null;\n      if (!this.mainCanEquip(mainItems.armor.value, '鎧'))\n        mainItems.armor.value = null;\n      if (!this.mainCanEquip(mainItems.helmet.value, '兜'))\n        mainItems.helmet.value = null;\n      if (!this.mainCanEquip(mainItems.accessory.value, 'アクセサリ'))\n        mainItems.accessory.value = null;\n\n      if (!this.supportCanEquip(supItems.amulet1.value, 'アミュレット', '月'))\n        supItems.amulet1.value = null;\n      if (!this.supportCanEquip(supItems.amulet2.value, 'アミュレット', '太陽'))\n        supItems.amulet2.value = null;\n    },\n\n\n    serializeParams() {\n      const isGetSet = this.isGetSet;\n\n      const handleOptions = (obj) => {\n        return Object.values(obj).map(a => a.value);\n      };\n      const handleFilter = (obj) => {\n        return Object.values(obj).map(a => this.serializeFilter(a));\n      };\n      const handleBuffs = (list) => {\n        let r = [];\n        const props = [\"enabled\", \"limit_\", \"weight\"];\n        for (const obj of list) {\n          let tmp = [];\n          for (const prop of props) {\n            if (Object.hasOwn(obj, prop)) {\n              tmp.push(obj[prop]);\n            }\n          }\n          r.push(tmp);\n        }\n        return r;\n      };\n      const handleExcludes = (list) => {\n        let r = [];\n        for (let v of list) {\n          if (v.owner != undefined)\n            r.push([v.item.uid, v.owner.uid]);\n          else\n            r.push(v.uid);\n        }\n        return r;\n      };\n\n      let r = {};\n      r.options = handleOptions(this.options);\n      r.filter = handleFilter(this.filter);\n      r.buffs = handleBuffs(this.buffs);\n      r.debuffs = handleBuffs(this.debuffs);\n      r.excluded = handleExcludes(this.excluded);\n      r.prioritized = handleExcludes(this.prioritized);\n      return r;\n    },\n    deserializeParams(obj) {\n      const isGetSet = this.isGetSet;\n      const findItemByUid = this.findItemByUid;\n\n      const handleOptions = (dst, src) => {\n        dst = Object.values(dst);\n        if (src && dst.length == src.length) {\n          for (let i = 0; i < dst.length; ++i) {\n            if (typeof dst[i].value == typeof src[i])\n              dst[i].value = src[i];\n          }\n        }\n      };\n      const handleFilter = (dst, src) => {\n        dst = Object.values(dst);\n        if (src && dst.length == src.length) {\n          for (let i = 0; i < dst.length; ++i) {\n            this.deserializeFilter(dst[i], src[i]);\n          }\n        }\n      };\n      const handleBuffs = (dst, src) => {\n        if (src && dst.length == src.length) {\n          for (let i = 0; i < dst.length; ++i) {\n            let d = dst[i];\n            let s = src[i];\n            const props = [\"enabled\", \"limit_\", \"weight\"];\n            for (const prop of props) {\n              if (Object.hasOwn(d, prop)) {\n                d[prop] = s.shift();\n              }\n            }\n          }\n        }\n      };\n      const handleExcludes = (dst, src) => {\n        if (src) {\n          dst.splice(0, dst.length);\n          for (let v of src) {\n            if (Array.isArray(v)) {\n              let t = {\n                item: findItemByUid(v[0]),\n                owner: findItemByUid(v[1]),\n              }\n              if (t.item && t.owner)\n                dst.push(t);\n            }\n            else {\n              let t = findItemByUid(v);\n              if (t)\n                dst.push(t);\n            }\n          }\n        }\n        return dst;\n      };\n\n      handleOptions(this.options, obj.options);\n      handleFilter(this.filter, obj.filter);\n      handleBuffs(this.buffs, obj.buffs);\n      handleBuffs(this.debuffs, obj.debuffs);\n      handleExcludes(this.excluded, obj.excluded);\n      handleExcludes(this.prioritized, obj.prioritized);\n    },\n\n    getParamsUrl() {\n      let params = this.serializeParams();\n      let t = \"\";\n\n      let url = window.location.href.replace(/\\?.+/, '').replace(/#.+/, '');\n      url += \"?\";\n\n      let m = window.location.href.match(/(t=\\d)/, '');\n      if (m) {\n        url += m[1];\n        url += \"&\";\n      }\n      url += \"p=\" + encodeURIComponent(JSON.stringify(params));\n      return url;\n    },\n    parseParamsUrl(url) {\n      let params = {};\n\n      let q = url.match(/\\bt=(\\d)/);\n      if (q) {\n        params.t = parseInt(q[1]);\n      }\n\n      q = url.match(/\\bp=(.+)$/);\n      if (q) {\n        params.p = JSON.parse(decodeURIComponent(q[1]));\n      }\n      //console.log(params);\n      return params;\n    },\n  },\n\n  computed: {\n    optionValues() {\n      const opt = this.options;\n      let r = {};\n      for (const k in opt)\n        r[k] = opt[k].value;\n      return r;\n    },\n  },\n\n  watch: {\n    filter: { handler: function () { this.updateQuery(); }, deep: true },\n    options: { handler: function () { this.updateQuery(); }, deep: true },\n    buffs: { handler: function () { this.updateQuery(); }, deep: true },\n    debuffs: { handler: function () { this.updateQuery(); }, deep: true },\n    prioritized: function () { this.updateQuery(); },\n    excluded: function () { this.updateQuery(); },\n  },\n\n  updated() {\n    // ペンディングリクエストが残っていたら再検索\n    if (this.progress.pending && this.progress.completed) {\n      if (this.beginSearch()) {\n        this.progress.pending = false;\n      }\n    }\n  },\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_vm._l((_vm.popoverElements),function(e,i){return [_c('b-popover',{key:i,attrs:{\"target\":e,\"triggers\":\"hover focus\",\"custom-class\":\"item_po\",\"title\":e.item.name,\"placement\":\"top\",\"boundary\":\"window\"}},[_c('div',{staticClass:\"flex\"},[_c('div',[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(e.item.icon),\"width\":\"50\",\"height\":\"50\"}})],1),_c('div',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(e.item))}}),(e.item.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(e.item))}}):_vm._e()])]),(e.item.owners)?_c('div',{staticClass:\"owners\"},[_vm._v(\" 所持者:\"),_c('br'),_vm._l((e.item.owners),function(owner,oi){return _c('b-img-lazy',{key:oi,attrs:{\"src\":_vm.getImageURL(owner.icon),\"title\":_vm.descToTitle(owner),\"width\":\"50\",\"height\":\"50\"}})})],2):_vm._e()])]})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\n  <div>\n    <template v-for=\"(e, i) in popoverElements\">\n      <b-popover :target=\"e\" :key=\"i\" triggers=\"hover focus\" custom-class=\"item_po\" :title=\"e.item.name\" placement=\"top\" boundary=\"window\">\n        <div class=\"flex\">\n          <div><b-img-lazy :src=\"getImageURL(e.item.icon)\" width=\"50\" height=\"50\" /></div>\n          <div><span v-html=\"descToHtml(e.item)\"></span><span v-if=\"e.item.note\" class=\"note\" v-html=\"noteToHtml(e.item)\"></span></div>\n        </div>\n        <div v-if=\"e.item.owners\" class=\"owners\">\n          所持者:<br />\n          <b-img-lazy v-for=\"(owner, oi) in e.item.owners\" :key=\"oi\" :src=\"getImageURL(owner.icon)\" :title=\"descToTitle(owner)\" width=\"50\" height=\"50\" />\n        </div>\n      </b-popover>\n    </template>\n  </div>\n</template >\n\n<script>\nexport default {\n  name: 'ItemPopovers',\n\n  created() {\n    // 更新に追従するため popoverElements はプロパティ化\n    Object.defineProperty(this, 'popoverElements', {\n      get: () => this.$parent.popoverElements\n    });\n    this.getImageURL = this.$parent.getImageURL;\n    this.descToHtml = this.$parent.descToHtml;\n    this.noteToHtml = this.$parent.noteToHtml;\n    this.descToTitle = this.$parent.descToTitle;\n  },\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ItemPopovers.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ItemPopovers.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ItemPopovers.vue?vue&type=template&id=5bcbd81a\"\nimport script from \"./ItemPopovers.vue?vue&type=script&lang=js\"\nexport * from \"./ItemPopovers.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\n  data() {\n    return {\n      popoverElements: [],\n    }\n  },\n\n  methods: {\n    po(e) {\n      let a = e?.$el;\n      if (a && !this.popoverElements.includes(a)) {\n        let item = this.findItem(a.innerText);\n        if (item) {\n          a.item = item;\n          this.pushArray(this.popoverElements, a);\n        }\n      }\n    },\n\n    addPo(elements) {\n      for (let a of elements) {\n        if (a && !this.popoverElements.includes(a)) {\n          let item = this.findItem(a.innerText);\n          if (item) {\n            a.item = item;\n            this.pushArray(this.popoverElements, a);\n          }\n        }\n      }\n    },\n\n    removePo(elements) {\n      if (elements.length) {\n        this.popoverElements = this.popoverElements.filter(a => !elements.includes(a));\n      }\n    },\n  },\n}\n","<template>\n  <div class=\"root\">\n    <div class=\"menu-content\" style=\"flex-wrap: nowrap\">\n      <div class=\"menu-panel\" id=\"cb-settings\">\n        <b-container>\n          <div>\n            <h3 style=\"margin: 5px 0px\">設定</h3>\n          </div>\n          <b-table small borderless hover :items=\"Object.values(options)\" :fields=\"optionFields\">\n            <template #cell(value)=\"r\">\n              <div class=\"flex\">\n                <div style=\"margin-left: auto\">\n                  <b-form-checkbox v-if=\"r.item.type == 'boolean'\" v-model=\"r.item.value\"></b-form-checkbox>\n                  <b-form-input v-if=\"r.item.type == 'number'\" style=\"width: 3em\" v-model.number=\"r.item.value\" :min=\"r.item.min\" :max=\"r.item.max\" size=\"sm\" type=\"number\" class=\"input-param\" lazy></b-form-input>\n                </div>\n              </div>\n            </template>\n            <template #cell(label)=\"r\">\n              <div :id=\"`cb-p-${r.item.name}`\">{{r.item.label}}</div>\n            </template>\n          </b-table>\n\n        </b-container>\n\n        <b-container>\n          <div>\n            <h3 style=\"margin: 5px 0px\">フィルタ</h3>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"cb-class-selector\">\n                <b-button v-for=\"(c, i) in filter.class\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(classes[i])\" width=\"20px\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget filter\">\n              <b-button-group size=\"sm\" id=\"cb-symbol-selector\">\n                <b-button v-for=\"(c, i) in filter.symbol\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(symbols[i])\" width=\"20px\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget filter\">\n              <b-button-group size=\"sm\" id=\"cb-damage-type-selector\">\n                <b-button v-for=\"(c, i) in filter.damageType\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(damageTypes[i])\" width=\"20px\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget rareiry-filter\">\n              <b-button-group size=\"sm\" id=\"cb-rareiry-selector\">\n                <b-button v-for=\"(c, i) in filter.rarity\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(rarities[i])\" width=\"30px\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n        </b-container>\n\n        <b-container>\n          <div class=\"button-box\">\n            <div class=\"left-align\">\n              <b-button size=\"sm\" @click=\"presetPAtk()\" style=\"margin-right: 3px\">物攻系</b-button>\n              <b-button size=\"sm\" @click=\"presetMAtk()\" style=\"margin-right: 3px\">魔攻系</b-button>\n              <b-button size=\"sm\" @click=\"presetPDef()\" style=\"margin-right: 3px\">物防系</b-button>\n              <b-button size=\"sm\" @click=\"presetMDef()\" style=\"margin-right: 3px\">魔防系</b-button>\n            </div>\n          </div>\n          <div class=\"button-box\">\n            <div class=\"left-align\">\n              <b-button size=\"sm\" @click=\"onCopyUrl()\">パラメータを URL としてコピー</b-button>\n            </div>\n          </div>\n        </b-container>\n\n      </div>\n\n      <div class=\"menu-panel\" id=\"cb-buff-list\">\n        <b-container>\n          <div class=\"flex\">\n            <h3 style=\"margin: 5px 0px\">バフ</h3>\n            <div class=\"right-align\">\n              <b-button size=\"sm\" @click=\"buffs.forEach(a => a.reset())\">リセット</b-button>\n            </div>\n          </div>\n          <b-table small borderless hover :items=\"buffs\" :fields=\"buffFields\">\n            <template #cell(enabled)=\"r\">\n              <b-form-checkbox v-model=\"r.item.enabled\"></b-form-checkbox>\n            </template>\n            <template #cell(label)=\"r\">\n              {{r.item.label}}\n            </template>\n            <template #cell(limit)=\"r\">\n              <b-form-input v-if=\"!r.item.parent\" style=\"width: 4.5em\" v-model.number=\"r.item.limit\" size=\"sm\" type=\"number\" class=\"input-param\" step=\"10\" lazy placeholder=\"無制限\"></b-form-input>\n              <div v-if=\"r.item.parent\" style=\"text-align:center; color: lightgray\">〃</div>\n            </template>\n            <template #cell(weight)=\"r\">\n              <b-form-input style=\"width: 3.5em\" v-model.number=\"r.item.weight\" size=\"sm\" type=\"number\" class=\"input-param\" lazy></b-form-input>\n            </template>\n          </b-table>\n        </b-container>\n      </div>\n\n      <div class=\"menu-panel\" id=\"cb-debuff-list\">\n        <b-container>\n          <div class=\"flex\">\n            <h3 style=\"margin: 5px 0px\">デバフ</h3>\n            <div class=\"right-align\">\n              <b-button size=\"sm\" @click=\"debuffs.forEach(a => a.reset())\">リセット</b-button>\n            </div>\n          </div>\n\n          <b-table small borderless hover :items=\"debuffs\" :fields=\"buffFields\">\n            <template #cell(enabled)=\"r\">\n              <b-form-checkbox v-model=\"r.item.enabled\"></b-form-checkbox>\n            </template>\n            <template #cell(label)=\"r\">\n              {{r.item.label}}\n            </template>\n            <template #cell(limit)=\"r\">\n              <b-form-input v-if=\"!r.item.parent\" style=\"width: 4.5em\" v-model.number=\"r.item.limit\" size=\"sm\" type=\"number\" class=\"input-param\" step=\"10\" lazy placeholder=\"無制限\"></b-form-input>\n              <div v-if=\"r.item.parent\" style=\"text-align:center; color: lightgray\">〃</div>\n            </template>\n            <template #cell(weight)=\"r\">\n              <b-form-input style=\"width: 3.5em\" v-model.number=\"r.item.weight\" size=\"sm\" type=\"number\" class=\"input-param\" lazy></b-form-input>\n            </template>\n          </b-table>\n        </b-container>\n      </div>\n\n      <div class=\"menu-panel\" id=\"cb-exclude-list\">\n        <b-container>\n          <div>\n            <div class=\"flex\">\n              <h3 style=\"margin: 5px 0px\">優先リスト</h3>\n              <div class=\"right-align\">\n                <b-button size=\"sm\" id=\"cb-add-prioritized\">追加</b-button>\n                <b-button size=\"sm\" @click=\"prioritized=[]\" style=\"margin-left: 5px\">クリア</b-button>\n                <ChrSelector target=\"cb-add-prioritized\" :chrs=\"mainChrs\" @click=\"addPrioritized\" classfilter symbolfilter />\n              </div>\n            </div>\n            <div class=\"flex exclude-box\">\n              <b-link v-for=\"(v, i) in prioritized\" :key=\"i\" @click=\"prioritized.splice(prioritized.indexOf(v), 1)\">\n                <div v-if=\"!v.owner\" :title=\"v.name\">\n                  <b-img-lazy :src=\"getImageURL(v.icon)\" width=\"50\" />\n                </div>\n                <div v-if=\"v.owner\" style=\"width: 50px; height: 50px;\" :title=\"v.owner.name + ' & ' + v.item.name\">\n                  <b-img-lazy :src=\"getImageURL(v.owner.icon)\" width=\"35\" style=\"position: relative; left: 0px; top: 0px; \" />\n                  <b-img-lazy :src=\"getImageURL(v.item.icon)\" width=\"35\" style=\"position: relative; left: -20px; top: 15px; \" />\n                </div>\n              </b-link>\n            </div>\n          </div>\n          <div>\n            <div class=\"flex\">\n              <h3 style=\"margin: 5px 0px\">除外リスト</h3>\n              <div class=\"right-align\">\n                <b-button size=\"sm\" id=\"cb-add-excluded\">追加</b-button>\n                <b-button size=\"sm\" @click=\"excluded=[]\" style=\"margin-left: 5px\">クリア</b-button>\n                <ChrSelector target=\"cb-add-excluded\" :chrs=\"mainChrs\" @click=\"addExcluded\" classfilter symbolfilter />\n              </div>\n            </div>\n            <div class=\"flex exclude-box\">\n              <b-link v-for=\"(v, i) in excluded\" :key=\"i\" @click=\"excluded.splice(excluded.indexOf(v), 1)\">\n                <div v-if=\"!v.owner\" :title=\"v.name\">\n                  <b-img-lazy :src=\"getImageURL(v.icon)\" width=\"50\" />\n                </div>\n                <div v-if=\"v.owner\" style=\"width: 50px; height: 50px; \" :title=\"v.owner.name + ' & ' + v.item.name\">\n                  <b-img-lazy :src=\"getImageURL(v.owner.icon)\" width=\"35\" style=\"position: relative; left: 0px; top: 0px; \" />\n                  <b-img-lazy :src=\"getImageURL(v.item.icon)\" width=\"35\" style=\"position: relative; left: -20px; top: 15px; \" />\n                </div>\n              </b-link>\n            </div>\n          </div>\n        </b-container>\n      </div>\n    </div>\n\n    <div class=\"content\">\n      <div v-if=\"!progress.completed\" class=\"menu-panel\" style=\"padding: 10px; position: absolute;\">\n        <b-spinner small label=\"Spinning\"></b-spinner>\n      </div>\n      <div v-if=\"progress.result.length != 0\" class=\"total-params\">\n        <div class=\"flex info\">\n          <div><h6>全ユニット合計:</h6></div>\n          <template v-for=\"(e, ei) in allEffectsToHtml(progress.result)\">\n            <div :key=\"ei\" v-html=\"e\" />\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"content\" :style=\"style\">\n\n      <div v-if=\"progress.result.length == 0\" class=\"menu-panel\" style=\"padding: 10px\">\n        <div class=\"about\">\n          <h5 style=\"margin-bottom: 5px\">組み合わせ検索</h5>\n          指定のバフ・デバフの最適な組み合わせを探すツールです。<br />\n          メインキャラ(スキル×装備)×サポート の組み合わせから、競合を考慮しつつ、総効果量の高いものを探索します。<br />\n          例えば「与ダメージバフ＋クリティカルダメージ倍率バフ＋ダメージ耐性デバフ」のいい感じの組み合わせを探したい、というようなケースで役立ちます。<br />\n          <br />\n          味方全体の強化の最適化が目的であるため、自己バフは考慮しません。単体のバフも「<b-link @mouseenter=\"highlight('cb-p-allowSingleUnitBuff', true)\" @mouseleave=\"highlight('cb-p-allowSingleUnitBuff', false)\">単体バフを含める</b-link>」にチェックしていない限り考慮しません。<br />\n          マスターキャラのクラス対象バフや、特定のクラスへの追加効果 (<b-link :ref=\"po\">みんな！丸太は持った！？</b-link> のスキル与ダメージなど) は除外しています。<br />\n          シンボルスキル、および ゼニス/オリジン/ナディア のシンボル対象バフは「<b-link @mouseenter=\"highlight('cb-p-allowSymbolSkill', true)\" @mouseleave=\"highlight('cb-p-allowSymbolSkill', false)\">シンボルスキルを含める</b-link>」をチェックすると含めるようになります。<br />\n\n          特定のキャラやスキルを除外or優先採用したい場合、アイコンをマウスオーバーすると出てくるポップアップから可能です。<br />\n          特定の効果を優先したい場合は優先度を高めると優先的に選択されます。<br />\n          <br />\n          なお、必ずしも本当に最適な結果になるとは限らないことに注意が必要です。<br />\n          完璧に解くには時間がかかりすぎるため、若干正確性を犠牲にしつつ高速に解く方法を用いています。<br />\n          (アルゴリズムは随時改良中: 2024/03/14)<br />\n        </div>\n      </div>\n\n      <template v-for=\"(r, ri) in progress.result\">\n        <div class=\"character\" :key=\"ri\">\n          <div class=\"flex info\">\n            <div><h6>ユニット内合計:</h6></div>\n            <template v-for=\"(e, ei) in chrEffectsToHtml(r)\">\n              <div :key=\"ei\" v-html=\"e\" />\n            </template>\n          </div>\n          <div class=\"flex\">\n            <div v-if=\"r.main\" class=\"portrait\">\n              <b-img-lazy :src=\"getImageURL(r.main.character.icon)\" :title=\"r.main.character.name\" :id=\"'portrait_m_'+ri\" width=\"100\" rounded />\n              <b-popover v-if=\"displayType>=1\" :target=\"'portrait_m_'+ri\" :title=\"r.main.character.name\" triggers=\"hover click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                <div class=\"status flex\">\n                  <b-img-lazy :src=\"getImageURL(r.main.character.class)\" :title=\"'クラス:'+r.main.character.class\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(r.main.character.symbol)\" :title=\"'シンボル:'+r.main.character.symbol\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(r.main.character.rarity)\" :title=\"'レアリティ:'+r.main.character.rarity\" height=\"20\" />\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(r.main.character.damageType)\" :title=\"'攻撃タイプ:'+r.main.character.damageType\" width=\"20\" height=\"20\" /></div>\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{r.main.character.range}}</span></div>\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('移動')\" title=\"移動\" width=\"18\" height=\"18\" /><span>{{r.main.character.move}}</span></div>\n                  <div class=\"param-box\"><span class=\"param-name\">実装日:</span><span class=\"param-value\">{{r.main.character.date}}</span></div>\n                </div>\n                <div class=\"status flex\">\n                  <b-link v-for=\"(skill, si) in r.main.character.skills\" :key=\"si\" @click=\"addPrioritized(skill)\">\n                    <b-img-lazy :src=\"getImageURL(skill.icon)\" :title=\"descToTitle(skill)\" width=\"50\" />\n                  </b-link>\n                </div>\n                <div class=\"flex exclude-menu\">\n                  <b-button @click=\"addPrioritized(r.main.character)\">このキャラを優先</b-button>\n                </div>\n                <div class=\"flex exclude-menu\">\n                  <b-button @click=\"addExcluded(r.main.character)\">このキャラを除外</b-button>\n                </div>\n              </b-popover>\n            </div>\n            <div v-if=\"r.main\" class=\"detail\" v-show=\"displayType >= 1\">\n              <div class=\"skills\">\n                <div class=\"skill\" v-for=\"(skill, si) in r.main.skills\" :class=\"getSkillClass(skill)\" :key=\"si\">\n                  <div class=\"flex\">\n                    <div class=\"icon\">\n                      <b-img-lazy :src=\"getImageURL(skill.icon)\" :title=\"skill.name\" width=\"50\" :id=\"'skill_m_'+ri+'_'+si\" />\n                      <b-popover :target=\"'skill_m_'+ri+'_'+si\" :title=\"skill.name\" triggers=\"hover click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                        <div v-if=\"skill.owners\" class=\"owners\">\n                          所持者:<br />\n                          <b-link v-for=\"(owner, oi) in skill.owners\" :key=\"oi\" @click=\"addPrioritized(owner)\">\n                            <b-img-lazy :src=\"getImageURL(owner.icon)\" :title=\"owner.name\" width=\"50\" />\n                          </b-link>\n                        </div>\n                        <div v-if=\"!skill.isTalent\">\n                          <div class=\"flex exclude-menu\">\n                            <b-button size=\"sm\" @click=\"addPrioritized(skill)\">このスキルを優先</b-button>\n                            <b-button size=\"sm\" @click=\"addPrioritized(skill, r.main.character)\">このキャラとスキルの組み合わせを優先</b-button>\n                          </div>\n                          <div class=\"flex exclude-menu\">\n                            <b-button size=\"sm\" @click=\"addExcluded(skill)\">このスキルを除外</b-button>\n                            <b-button size=\"sm\" @click=\"addExcluded(skill, r.main.character)\">このキャラとスキルの組み合わせを除外</b-button>\n                          </div>\n                        </div>\n                      </b-popover>\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <div class=\"flex\">\n                        <h6>{{ skill.name }}</h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                      </div>\n                      <p>\n                        <span v-html=\"descToHtml(skill, true)\" />\n                        <span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\" />\n                        <span class=\"note\" v-html=\"effectsToHtml(skill, r.main)\" />\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"skills\">\n                <div class=\"skill\" v-for=\"(item, si) in r.main.equipments\" :key=\"si\">\n                  <div class=\"flex\">\n                    <div class=\"icon\">\n                      <b-img-lazy :src=\"getImageURL(item.icon)\" :title=\"item.name\" width=\"50\" :id=\"'item_'+ri+'_'+si\" />\n                      <b-popover v-if=\"displayType>=1\" :target=\"'item_'+ri+'_'+si\" :title=\"item.name\" triggers=\"hover click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                        <div class=\"flex exclude-menu\">\n                          <b-button size=\"sm\" @click=\"addPrioritized(item)\">このアイテムを優先</b-button>\n                          <b-button size=\"sm\" @click=\"addPrioritized(item, r.main.character)\">このキャラとアイテムの組み合わせを優先</b-button>\n                        </div>\n                        <div class=\"flex exclude-menu\">\n                          <b-button size=\"sm\" @click=\"addExcluded(item)\">このアイテムを除外</b-button>\n                          <b-button size=\"sm\" @click=\"addExcluded(item, r.main.character)\">このキャラとアイテムの組み合わせを除外</b-button>\n                        </div>\n                      </b-popover>\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <div class=\"flex\">\n                        <h6><b-img-lazy :src=\"getImageURL(item.slot)\" :title=\"item.name\" width=\"18\" />{{ item.name }}</h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(item)\"></div>\n                      </div>\n                      <p>\n                        <span v-html=\"descToHtml(item, true)\" />\n                        <span v-if=\"item.note\" class=\"note\" v-html=\"noteToHtml(item)\" />\n                        <span class=\"note\" v-html=\"effectsToHtml(item, r.main)\" />\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"flex\">\n            <div v-if=\"r.summon\" class=\"portrait\">\n              <b-img-lazy :src=\"getImageURL(r.summon.character.icon)\" :title=\"`${r.summon.character.name} (召喚ユニット)`\" :id=\"'portrait_x_'+ri\" width=\"100\" rounded />\n            </div>\n            <div v-if=\"r.summon\" class=\"detail\" v-show=\"displayType >= 1\">\n              <div class=\"skills\">\n                <div class=\"skill\" v-for=\"(skill, si) in r.summon.skills\" :class=\"getSkillClass(skill)\" :key=\"si\">\n                  <div class=\"flex\">\n                    <div class=\"icon\">\n                      <b-img-lazy :src=\"getImageURL(skill.icon)\" :title=\"skill.name\" width=\"50\" :id=\"'skill_x_'+ri+'_'+si\" />\n                      <b-popover :target=\"'skill_x_'+ri+'_'+si\" :title=\"skill.name\" triggers=\"hover click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                        <div v-if=\"skill.owners\" class=\"owners\">\n                          所持者:<br />\n                          <b-link v-for=\"(owner, oi) in skill.owners\" :key=\"oi\" @click=\"addPrioritized(owner)\">\n                            <b-img-lazy :src=\"getImageURL(owner.icon)\" :title=\"owner.name\" width=\"50\" height=\"50\" />\n                          </b-link>\n                        </div>\n                        <div v-if=\"!skill.isTalent\">\n                          <div class=\"flex exclude-menu\">\n                            <b-button size=\"sm\" @click=\"addPrioritized(skill)\">このスキルを優先</b-button>\n                            <b-button size=\"sm\" @click=\"addPrioritized(skill, r.main.character)\">このキャラとスキルの組み合わせを優先</b-button>\n                          </div>\n                          <div class=\"flex exclude-menu\">\n                            <b-button size=\"sm\" @click=\"addExcluded(skill)\">このスキルを除外</b-button>\n                            <b-button size=\"sm\" @click=\"addExcluded(skill, r.main.character)\">このキャラとスキルの組み合わせを除外</b-button>\n                          </div>\n                        </div>\n                      </b-popover>\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <div class=\"flex\">\n                        <h6>{{ skill.name }}</h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                      </div>\n                      <p>\n                        <span v-html=\"descToHtml(skill, true)\" />\n                        <span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\" />\n                        <span class=\"note\" v-html=\"effectsToHtml(skill, r.main)\" />\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"flex\">\n            <div v-if=\"r.support\" class=\"portrait\">\n              <b-img-lazy :src=\"getImageURL(r.support.character.icon)\" :title=\"r.support.character.name\" :id=\"'portrait_s_'+ri\" width=\"100\" height=\"100\" rounded />\n              <b-popover v-if=\"displayType>=1\" :target=\"'portrait_s_'+ri\" :title=\"r.support.character.name\" triggers=\"hover click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                <div class=\"status flex\">\n                  <b-img-lazy :src=\"getImageURL(r.support.character.class)\" :title=\"'クラス:'+r.support.character.class\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(r.support.character.supportType)\" :title=\"'サポートタイプ:'+r.support.character.supportType\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(r.support.character.rarity)\" :title=\"'レアリティ:'+r.support.character.rarity\" height=\"20\" />\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(r.support.character.damageType)\" :title=\"'攻撃タイプ:'+r.support.character.damageType\" width=\"20\" height=\"20\" /></div>\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{r.support.character.range}}</span></div>\n                  <div class=\"param-box\"><span class=\"param-name\">実装日:</span><span class=\"param-value\">{{r.support.character.date}}</span></div>\n                </div>\n                <div class=\"status flex\">\n                  <b-link v-for=\"(skill, si) in r.support.character.skills\" :key=\"si\">\n                    <b-img-lazy :src=\"getImageURL(skill.icon)\" :title=\"descToTitle(skill)\" width=\"50\" />\n                  </b-link>\n                </div>\n                <div class=\"flex exclude-menu\">\n                  <b-button @click=\"addPrioritized(r.support.character)\">このキャラを優先</b-button>\n                </div>\n                <div class=\"flex exclude-menu\">\n                  <b-button @click=\"addExcluded(r.support.character)\">このキャラを除外</b-button>\n                </div>\n              </b-popover>\n            </div>\n            <div v-if=\"r.support\" class=\"detail\" v-show=\"displayType >= 1\">\n              <div class=\"skills\">\n                <div class=\"skill\" v-for=\"(skill, si) in r.support.skills\" :class=\"getSkillClass(skill)\" :key=\"si\">\n                  <div class=\"flex\">\n                    <div class=\"icon\">\n                      <b-img-lazy :src=\"getImageURL(skill.icon)\" :title=\"skill.name\" with=\"50\" height=\"50\" :id=\"'skill_s_'+ri+'_'+si\" />\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <div class=\"flex\">\n                        <h6>{{ skill.name }}</h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                      </div>\n                      <p>\n                        <span v-html=\"descToHtml(skill, true)\" />\n                        <span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\" />\n                        <span class=\"note\" v-html=\"effectsToHtml(skill, r.support)\" />\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n\n      </template>\n    </div>\n\n    <ItemPopovers />\n  </div>\n</template>\n\n<script>\nimport ChrSelector from '../parts/ChrSelector.vue'\nimport commonjs from \"../common.js\";\nimport lookupjs from \"./lookup.js\";\nimport { BitFlags, enumerate } from '../utils.js'\n\nimport ItemPopovers from '../parts/ItemPopovers.vue'\nimport ItemPopoversJs from \"../parts/ItemPopovers.js\";\n\nexport default {\n  name: 'Lookup',\n  components: {\n    ChrSelector,\n    ItemPopovers,\n  },\n  mixins: [commonjs, lookupjs, ItemPopoversJs],\n\n  data() {\n    return {\n      initialState: {},\n      history: [],\n      historyIndex: 0,\n\n      buffFields: [\n        {\n          key: \"enabled\",\n          label: \"\",\n        },\n        {\n          key: \"label\",\n          label: \"種類\",\n        },\n        {\n          key: \"limit\",\n          label: \"上限\",\n        },\n        {\n          key: \"weight\",\n          label: \"優先度\",\n        },\n      ],\n      optionFields: [\n        {\n          key: \"value\",\n          label: \"\",\n        },\n        {\n          key: \"label\",\n          label: \"項目\",\n        },\n      ],\n    };\n  },\n\n  created() {\n    this.setupDB();\n    this.setupFilter();\n    for (let s of [...this.mainActive, ...this.mainPassive, ...this.mainTalents]) {\n      this.removeEffectsOfSameType(s);\n    }\n\n    const excludeEffect = (effect) => {\n      const cond = effect.condition;\n      if (!this.isPublicTarget(effect) ||\n        (cond && (cond.onClass)) ||\n        (effect.isDebuff && effect.ephemeral && !effect.duration)\n      ) {\n        return true;\n      }\n      return false;\n    };\n    for (let skill of enumerate(this.mainActive, this.mainPassive, this.mainTalents, this.supActive, this.supPassive, this.items)) {\n      if (skill.buff)\n        skill.buff = skill.buff.filter(s => !excludeEffect(s));\n      if (skill.debuff)\n        skill.debuff = skill.debuff.filter(s => !excludeEffect(s));\n    }\n\n    const makeOptions = (params) => {\n      let r = {};\n      for(const p of params) {\n        const v = p.value;\n        p.type = typeof v;\n        p.reset = () => { this.value = v; };\n        r[p.name] = p;\n      }\n      return r;\n    };\n    this.options = makeOptions([\n      { name: \"maxPickup\", label: \"人を選出\", value: 5, min: 1, max: 10 },\n      { name: \"maxActiveCount\", label: \"アクティブ数制限 (再行動ありを除く)\", value: 2, min: 0, max: 3 },\n      { name: \"allowTalent\", label: \"タレントを含める\", value: true },\n      { name: \"allowPassive\", label: \"パッシブスキルを含める\", value: true },\n      { name: \"allowActive\", label: \"アクティブスキルを含める\", value: true },\n      { name: \"allowItem\", label: \"装備の効果を含める\", value: true },\n      { name: \"allowEngageSkills\", label: \"エンゲージスキルを含める\", value: true },\n      { name: \"allowSupportActive\", label: \"サポートのアクティブを含める\", value: true },\n      { name: \"allowSupportPassive\", label: \"サポートのパッシブを含める\", value: true },\n      { name: \"allowOnBattle\", label: \"戦闘時発動効果を含める\", value: true },\n      { name: \"allowProbability\", label: \"確率発動効果を含める\", value: true },\n      { name: \"allowSingleUnitBuff\", label: \"単体バフを含める\", value: false },\n      { name: \"allowSymbolSkill\", label: \"シンボルスキルを含める\", value: false },\n    ]);\n\n    const effectTypeTable = this.effectTypeTable;\n    const makeParams = (prefix, types) => {\n      const make = (t) => {\n        const l = t.limit ? t.limit : null;\n        const w = t.weight ? t.weight : 10;\n        const effectType = `${t.label}${prefix}`;\n        return {\n          label: t.label,\n          enabled: false,\n          limit_: l,\n          weight: w,\n          effectType: effectType,\n          effectTypeIndex: effectTypeTable.get(effectType),\n\n          get limit() {\n            return this.parent ? this.parent.limit_ : this.limit_;\n          },\n          set limit(v) {\n            if (!this.parent)\n              this.limit_ = v;\n          },\n          reset() {\n            this.enabled = false;\n            this.limit = l;\n            this.weight = w;\n          }\n        };\n      }\n      return types.map(a => make(a));\n    };\n\n    this.buffs = makeParams(\"+\", [\n      {label: \"アタック\"},\n      {label: \"ディフェンス\"},\n      {label: \"マジック\"},\n      {label: \"レジスト\"},\n      {label: \"クリティカル率\"},\n      {label: \"クリティカルダメージ倍率\"},\n      {label: \"与ダメージ\"},\n      {label: \"与ダメージ(物理)\"},\n      {label: \"与ダメージ(魔法)\"},\n      {label: \"与ダメージ(スキル)\"},\n      {label: \"与ダメージ(範囲スキル)\"},\n      {label: \"与ダメージ(通常攻撃)\"},\n      {label: \"ダメージ耐性\", limit:70},\n      {label: \"ダメージ耐性(物理)\"},\n      {label: \"ダメージ耐性(魔法)\"},\n    ]);\n    this.debuffs = makeParams(\"-\", [\n      {label: \"アタック\", limit:70},\n      {label: \"ディフェンス\", limit:70},\n      {label: \"マジック\", limit:70},\n      {label: \"レジスト\", limit:70},\n      {label: \"与ダメージ\", limit:70},\n      {label: \"ダメージ耐性\"},\n      {label: \"ダメージ耐性(物理)\"},\n      {label: \"ダメージ耐性(魔法)\"},\n    ]);\n\n    const setParent = (list, childLabel, parentLabel) => {\n      let c = list.find(a => a.label == childLabel);\n      let p = list.find(a => a.label == parentLabel);\n      c.parent = p;\n      delete c.limit_;\n    };\n    setParent(this.buffs, \"与ダメージ(物理)\", \"与ダメージ\");\n    setParent(this.buffs, \"与ダメージ(魔法)\", \"与ダメージ\");\n    setParent(this.buffs, \"与ダメージ(スキル)\", \"与ダメージ\");\n    setParent(this.buffs, \"与ダメージ(範囲スキル)\", \"与ダメージ\");\n    setParent(this.buffs, \"ダメージ耐性(物理)\", \"ダメージ耐性\");\n    setParent(this.buffs, \"ダメージ耐性(魔法)\", \"ダメージ耐性\");\n    setParent(this.debuffs, \"ダメージ耐性(物理)\", \"ダメージ耐性\");\n    setParent(this.debuffs, \"ダメージ耐性(魔法)\", \"ダメージ耐性\");\n  },\n\n  mounted() {\n  },\n\n  methods: {\n    createUsedFlags(parent = null) {\n      if (parent) {\n        return new BitFlags(parent);\n      }\n      else {\n        return new BitFlags(this.itemCount);\n      }\n    },\n\n    compare(a, b) {\n      return a == b ? 0 : a < b ? 1 : -1;\n    },\n\n    pickMax(iter, evaluator) {\n      let r = null;\n      let highest = 0;\n      for (let v of iter) {\n        let score = evaluator(v);\n        if (score > highest) {\n          r = v;\n          highest = score;\n        }\n      }\n      return [r, highest];\n    },\n\n    doSearch(num) {\n      // reactive getter 回避のためコピーを用意\n      const opt = this.optionValues;\n      let targets = new Array(this.effectTypeIndex);\n      for (let v of this.enabledEffects) {\n        targets[v.effectTypeIndex] = {\n          limit: v.limit,\n          weight: v.weight,\n          effectTypeIndex: v.effectTypeIndex,\n        };\n      }\n      const excluded = [...this.excluded];\n      const prioritized = [...this.prioritized];\n      const isExcluded = this.isExcluded;\n      const isPrioritized = this.isPrioritized;\n\n      const compareScore = (a, b) => {\n        if (a.score == b.score && a.scoreMain)\n          return this.compare(a.scoreMain, b.scoreMain);\n        else\n          return this.compare(a.score, b.score);\n      };\n\n      const effectCondition = (effect) => {\n        if (effect.ephemeral && !effect.duration)\n          return false;\n\n        const cond = effect.condition;\n        const probability = cond?.probability;\n        if (effect.isDebuff) {\n          return (opt.allowOnBattle || !effect.ephemeral) &&\n            (opt.allowProbability || !probability);\n        }\n        else if (effect.isBuff){\n          return (opt.allowSingleUnitBuff || !this.isSingleTarget(effect)) &&\n            (opt.allowOnBattle || !effect.ephemeralOnBattle) &&\n            (opt.allowProbability || !probability) &&\n            (opt.allowSymbolSkill || !cond?.onSymbol);\n        }\n      };\n      const skillCondition = (skill) => {\n        if ((!opt.allowTalent && skill.isTalent) ||\n          (!opt.allowPassive && skill.isPassive && skill.isMainSkill) ||\n          (!opt.allowActive && skill.isActive && skill.isMainSkill) ||\n          (!opt.allowItem && skill.isItem) ||\n          (!opt.allowSymbolSkill && skill.isSymbolSkill) ||\n          (!opt.allowSupportActive && skill.isActive && skill.isSupportSkill) ||\n          (!opt.allowSupportPassive && skill.isPassive && skill.isSupportSkill)\n        ) {\n          return false;\n        }\n        return true;\n      };\n\n      const findPrioritizedChr = (scoreList) => {\n        for (const p of this.prioritized) {\n          const r = scoreList.find(a => (a.scoreMain != undefined ? a.scoreMain > 0 : a.score > 0) && a.character == p);\n          if (r)\n            return r;\n        }\n        return null;\n      };\n\n      // 高速化のため事前フィルタ\n      const isRelevant = (item) => {\n        if (isExcluded(item))\n          return false;\n        if (item.isSupport) {\n          for (const skill of item.skills) {\n            for (const v of skill.effects) {\n              let p = targets[v.effectTypeIndex];\n              if (p && effectCondition(v))\n                return true;\n            }\n          }\n        }\n        else {\n          for (const v of item.effects) {\n            let p = targets[v.effectTypeIndex];\n            if (p && effectCondition(v))\n              return true;\n          }\n        }\n        return false;\n      };\n\n      let mainChrs = this.mainChrs.filter(a => this.filterMatchMainChr(a));\n      let supChrs = this.supChrs.filter(a => isRelevant(a) && this.filterMatchSupChr(a));\n      let weapons = this.weapons.filter(a => isRelevant(a));\n      let armors = this.armors.filter(a => isRelevant(a));\n      let helmets = this.helmets.filter(a => isRelevant(a));\n      let accessories = this.accessories.filter(a => isRelevant(a));\n\n      for (let chr of mainChrs) {\n        if (chr.engage) {\n          chr.engage.enabled = opt.allowEngageSkills;\n        }\n      }\n\n      let vue = this;\n      const createContext = (parent = null) => {\n        let ctx = {\n          totalAmount: new Int32Array(parent ? parent.totalAmount : vue.effectTypeIndex),\n          usedSlots: parent ? [...parent.usedSlots] : new Array(vue.slotIndex),\n          usedSkills: this.createUsedFlags(parent ? parent.usedSkills : null),\n\n          isPrioritized: isPrioritized,\n          isAvailable(item, owner = null) {\n            return !this.usedSkills.get(item.index) && !isExcluded(item, owner);\n          },\n          markAsUsed(item) {\n            if (item.index) {\n              this.usedSkills.set(item.index, true);\n            }\n          },\n\n          getEffectValue(effect) {\n            let p = targets[effect.effectTypeIndex];\n            if (p && effectCondition(effect)) {\n              if (effect.slotIndex && this.usedSlots[effect.slotIndex]) {\n                return [0, p, true];\n              }\n\n              const current = this.totalAmount[p.effectTypeIndex];\n              let v = vue.getEffectValue(effect);\n              let hitLimit = false;\n              if (p.limit > 0 && current + v >= p.limit) {\n                hitLimit = true;\n                v = p.limit - current;\n              }\n              return [v, p, hitLimit];\n            }\n            return null;\n          },\n          acceptEffectValue(effect) {\n            this.totalAmount[effect.effectTypeIndex] += vue.getEffectValue(effect);\n          },\n          acceptEffects(effectList) {\n            for (const effect of effectList) {\n              this.totalAmount[effect.effectTypeIndex] += vue.getEffectValue(effect);\n              if (effect.slotIndex) {\n                this.usedSlots[effect.slotIndex] = effect;\n              }\n            }\n          },\n\n          prepassSkill(skill, owner = null) {\n            if (!skill || !this.isAvailable(skill, owner) || !skillCondition(skill)) {\n              return 0;\n            }\n            let score = 0;\n            for (const v of skill.effects) {\n              let p = this.getEffectValue(v);\n              if (p) {\n                score += p[0] * (p[1].weight * 0.1);\n              }\n            }\n            if (skill.summon) {\n              let sch = skill.summon[0].chr;\n              for (const s of [sch.talent, ...sch.skills]) {\n                score += this.prepassSkill(s);\n              }\n            }\n            // 無価値なら以降 isAvailable() で速やかに弾く\n            if (score == 0) {\n              this.markAsUsed(skill);\n            }\n            return score;\n          },\n          prepassChr(chr) {\n            let score = 0;\n            score += this.prepassSkill(chr.talent, chr);\n            for (const skill of chr.skills)\n              score += this.prepassSkill(skill, chr);\n\n            if (chr.isMain) {\n              const enumerateItems = function* (items, chr) {\n                for (let item of items) {\n                  if (!this.usedSkills.get(item.index) && item.classFlags & (1 << chr.classId)) {\n                    yield item;\n                  }\n                }\n              }.bind(this);\n\n              const pickBest = (equipments) => {\n                return vue.pickMax(enumerateItems(equipments, chr), a => this.prepassSkill(a))[1];\n              };\n\n              // 補正なしだと装備の影響が強すぎるので、適当に減衰係数を用意…\n              const itemRate = 0.5;\n              score += pickBest(weapons) * itemRate;\n              score += pickBest(armors) * itemRate;\n              score += pickBest(helmets) * itemRate;\n              score += pickBest(accessories) * itemRate;\n            }\n\n            // 無価値なら以降 isAvailable() で速やかに弾く\n            if (score == 0)\n              this.markAsUsed(chr);\n            return score;\n          },\n\n          pickCandidates(chrs, num) {\n            chrs = chrs.filter(a => this.isAvailable(a));\n            let tmp = chrs.map(a => [this.prepassChr(a), a]).filter(a => a[0] > 0).sort((a, b) => vue.compare(a[0], b[0])).slice(0, num);\n            let r = tmp.map(a => a[1]);\n            for (let p of vue.prioritized) {\n              if (this.isAvailable(p) && chrs.includes(p) && !r.includes(p)) {\n                r.splice(0, 0, p);\n                break;\n              }\n            }\n            return r;\n          },\n\n        };\n        return ctx;\n      };\n\n      const getChrScore = (parentCtx, chr) => {\n        if (!parentCtx.isAvailable(chr))\n          return null;\n\n        let cctx = createContext(parentCtx);\n        let usedEffects = [];\n        let conflictedEffects = [];\n\n        const getSkillScore = (ctx, skill) => {\n          let r = {\n            skill: skill,\n            score: 0,\n            usedEffects: [],\n            conflictedEffects: [],\n          };\n          if (!ctx.isAvailable(skill, chr) || !skillCondition(skill)) {\n            return r;\n          }\n\n          let sctx = createContext(ctx);\n          for (const effect of skill.effects) {\n            const ev = sctx.getEffectValue(effect);\n            if (!ev)\n              continue;\n            const [val, p, hitLimit] = ev;\n\n            let score = val * (p.weight * 0.1);\n            if (score > 0) {\n              if (!hitLimit && skill.isActive && !effect.hasSpecialSlot) {\n                score *= Math.pow(Math.min(val / 20, 1), 2); // 中途半端な効果量のアクティブは選ばれにくいようにスコア補正\n              }\n              r.score += score;\n              r.usedEffects.push(effect);\n              sctx.acceptEffectValue(effect);\n            }\n            else {\n              r.conflictedEffects.push(effect);\n            }\n          }\n\n          if (skill.summon) {\n            let sch = skill.summon[0].chr;\n            r.summon = {\n              character: sch,\n              skills: [],\n            };\n            for (const s of [sch.talent, ...sch.skills]) {\n              const sr = getSkillScore(sctx, s);\n              if (sr.score > 0) {\n                r.score += sr.score;\n                r.usedEffects = r.usedEffects.concat(sr.usedEffects);\n                r.conflictedEffects = r.conflictedEffects.concat(sr.conflictedEffects);\n                r.summon.skills.push(s);\n                sctx.acceptEffects(sr.usedEffects);\n              }\n            }\n          }\n          return r;\n        };\n\n        const pickEquip = (ctx, equipments) => {\n          const scoreList = equipments.filter(a => this.matchClass(a, chr)).map(a => getSkillScore(ctx, a));\n          for (const s of scoreList)\n            if (s.score > 0 && ctx.isPrioritized(s.skill, chr)) {\n              return s;\n            }\n\n          scoreList.sort(compareScore);\n          if (scoreList.length > 0 && scoreList[0].score > 0)\n            return scoreList[0];\n          return null;\n        };\n\n        const pickSkill = (ctx, skills, allowActive) => {\n          let scoreList = [];\n          for (const skill of skills) {\n            if (!allowActive && skill.isActive && !skill.multiAction) {\n              continue;\n            }\n\n            const r = getSkillScore(ctx, skill);\n            if (r.score > 0) {\n              if (ctx.isPrioritized(skill, chr)) {\n                return r;\n              }\n              scoreList.push(r);\n            }\n          }\n          if (scoreList.length == 0)\n            return null;\n\n          let r = scoreList.sort(compareScore)[0];\n          return r;\n        };\n\n\n        let result = { character: chr };\n        let score = 0;\n        let skillsScore = [];\n        let equipmentsScore = null;\n        let summonScore = null;\n        let supportScore = null;\n\n        const updateState = (s) => {\n          score += s.score;\n          usedEffects = usedEffects.concat(s.usedEffects);\n          conflictedEffects = conflictedEffects.concat(s.conflictedEffects);\n          cctx.acceptEffects(s.usedEffects);\n        };\n\n        if (chr.isMain) {\n          equipmentsScore = [];\n          for (let equips of [weapons, armors, helmets, accessories]) {\n            let r = pickEquip(cctx, equips);\n            if (r) {\n              equipmentsScore.push(r);\n              updateState(r);\n            }\n          }\n          result.scoreMainItem = score;\n        }\n\n        if (chr.talent) {\n          let r = getSkillScore(cctx, chr.talent);\n          if (r.score > 0) {\n            skillsScore.push(r);\n            updateState(r);\n          }\n        }\n        if (chr.skills) {\n          let tmpSkills = [...chr.skills];\n          let activeCount = 0;\n          for (let i = 0; i < 3; ++i) {\n            let allowActive = !chr.isMain || activeCount < opt.maxActiveCount;\n            let r = pickSkill(cctx, tmpSkills, allowActive);\n            if (!r) {\n              break;\n            }\n\n            tmpSkills.splice(tmpSkills.indexOf(r.skill), 1);\n            skillsScore.push(r);\n            updateState(r);\n            if (r.summon) {\n              summonScore = r.summon;\n            }\n            if (chr.isMain && r.skill.isActive && !r.skill.multiAction) {\n              ++activeCount;\n            }\n          }\n        }\n\n        if (chr.isMain) {\n          result.scoreMainSkill = score - result.scoreMainItem;\n          result.scoreMain = score;\n        }\n\n        result.score = score;\n        result.skills = skillsScore.map(a => a.skill);\n        if (equipmentsScore)\n          result.equipments = equipmentsScore.map(a => a.skill);\n        if (summonScore)\n          result.summon = summonScore;\n        if (supportScore)\n          result.support = supportScore;\n        result.usedEffects = usedEffects;\n        result.conflictedEffects = conflictedEffects;\n        return result;\n      };\n\n\n      let bestScore = 0;\n      let bestSkillCount = 0;\n      let bestResult = [];\n      let searchCount = 0;\n      const updateBest = (r, depth, resultGetter) => {\n        ++searchCount;\n\n        let update = r.score > bestScore;\n        if (r.score == bestScore) {\n          if (depth < bestResult.length) {\n            update = true;\n          }\n          else if (depth == bestResult.length) {\n            if (r.skillCount < bestSkillCount) {\n              update = true;\n            }\n          }\n        }\n\n        if (update) {\n          bestScore = r.score;\n          bestSkillCount = r.skillCount;\n          bestResult = resultGetter();\n          //console.log(r.score, r.skillCount, bestResult);\n        }\n      };\n\n      const searchRecursive = (pctx, results, stack = [], depth = 0) => {\n        const mainPickCounts = [5, 4, 3, 3, 2, 2, 2, 2, 2, 2];\n        const supPickCounts = [2, 2, 1, 1, 1, 1, 1, 1, 1, 1];\n        if (depth > mainPickCounts.length)\n          return;\n        let mainPickCount = mainPickCounts[depth];\n        let supPickCount = supPickCounts[depth];\n\n        // サポートを先に処理\n        let sups = pctx.pickCandidates(supChrs, supPickCount);\n        let supScores = sups.map(a => getChrScore(pctx, a)).filter(a => a && a.score > 0).sort(compareScore);\n        let prioSup = findPrioritizedChr(supScores);\n        if (prioSup) {\n          supScores = [prioSup];\n        }\n        else if (supScores.length == 0) {\n          supScores = [null];\n        }\n\n        for (let ss of supScores) {\n          let sctx = createContext(pctx);\n          let supportScore = 0;\n          if (ss) {\n            sctx.acceptEffects(ss.usedEffects);\n            supportScore = ss.score;\n          }\n\n          let mains = sctx.pickCandidates(mainChrs, mainPickCount);\n          let mainScores = mains.map(a => getChrScore(sctx, a)).filter(a => a).sort(compareScore);\n          if (mainScores.length == 0 || supportScore + mainScores[0].score == 0)\n            return;\n          let prioMain = findPrioritizedChr(mainScores);\n          if (prioMain) {\n            mainScores = [prioMain];\n          }\n\n          for (let ms of mainScores) {\n            let mctx = createContext(sctx);\n            let pr = stack.length ? stack[stack.length - 1] : null;\n            let r = {\n              score: pr ? pr.score : 0,\n              skillCount: pr ? pr.skillCount : 0,\n              usedEffects: [],\n              conflictedEffects: [],\n              children: [],\n            };\n            results.push(r);\n\n            const updateState = (s) => {\n              r.score += s.score;\n              r.skillCount += s.skills.length;\n              if (s.equipments)\n                r.skillCount += s.equipments.length;\n              if (s.usedEffects.length)\n                r.usedEffects.splice(r.usedEffects.length, 0, ...s.usedEffects);\n              if (s.conflictedEffects.length)\n                r.conflictedEffects.splice(r.conflictedEffects.length, 0, ...s.conflictedEffects);\n            };\n            if (ss) {\n              updateState(ss);\n              r.support = ss;\n            }\n            {\n              updateState(ms);\n              mctx.acceptEffects(ms.usedEffects);\n              r.main = ms;\n              if (ms.summon)\n                r.summon = ms.summon;\n            }\n            for (let v of [r.main, r.summon, r.support]) {\n              if (v) {\n                mctx.markAsUsed(v.character);\n                for (const s of enumerate(v.skills, v.equipments)) {\n                  mctx.markAsUsed(s);\n                }\n              }\n            }\n\n            if (depth + 1 < num) {\n              let cstack = [...stack, r];\n              searchRecursive(mctx, r.children, cstack, depth + 1);\n\n              if (r.children.length == 0)\n                updateBest(r, depth + 1, () => cstack);\n            }\n            else {\n              updateBest(r, depth + 1, () => [...stack, r]);\n            }\n          }\n        }\n      };\n\n      let ctx = createContext();\n      let results = [];\n      searchRecursive(ctx, results);\n\n      return bestResult;\n    },\n\n    beginSearch() {\n      this.progress.completed = false;\n\n      const body = () => {\n        this.progress.result = this.doSearch(this.options.maxPickup.value);\n        this.progress.completed = true;\n      };\n      //requestIdleCallback(body);\n      setTimeout(body, 500);\n    },\n\n    updateQuery() {\n      this.beginSearch();\n    },\n\n    onCopyUrl() {\n      const url = this.getParamsUrl();\n      this.copyToClipboard(url);\n      this.toast(`コピーしました`);\n    },\n\n    enableBuf(label) {\n      for (let e of this.buffs) {\n        if (e.label == label) {\n          e.enabled = true;\n          break;\n        }\n      }\n    },\n    enableDebuf(label) {\n      for (let e of this.debuffs) {\n        if (e.label == label) {\n          e.enabled = true;\n          break;\n        }\n      }\n    },\n\n    presetAll() {\n      for (let e of this.buffs) {\n        e.enabled = true;\n      }\n      for (let e of this.debuffs) {\n        e.enabled = true;\n      }\n    },\n    presetPAtk() {\n      for (const l of [\"アタック\", \"クリティカルダメージ倍率\", \"与ダメージ\", \"与ダメージ(物理)\", \"与ダメージ(スキル)\", \"与ダメージ(範囲スキル)\", \"与ダメージ(通常攻撃)\"]) {\n        this.enableBuf(l);\n      }\n      for (const l of [\"ダメージ耐性\", \"ダメージ耐性(物理)\"]) {\n        this.enableDebuf(l);\n      }\n    },\n    presetMAtk() {\n      for (const l of [\"マジック\", \"クリティカルダメージ倍率\", \"与ダメージ\", \"与ダメージ(魔法)\", \"与ダメージ(スキル)\", \"与ダメージ(範囲スキル)\"]) {\n        this.enableBuf(l);\n      }\n      for (const l of [\"ダメージ耐性\", \"ダメージ耐性(魔法)\"]) {\n        this.enableDebuf(l);\n      }\n    },\n    presetPDef() {\n      for (const l of [\"ディフェンス\", \"ダメージ耐性\", \"ダメージ耐性(物理)\"]) {\n        this.enableBuf(l);\n      }\n      for (const l of [\"アタック\", \"与ダメージ\"]) {\n        this.enableDebuf(l);\n      }\n    },\n    presetMDef() {\n      for (const l of [\"レジスト\", \"ダメージ耐性\", \"ダメージ耐性(魔法)\"]) {\n        this.enableBuf(l);\n      }\n      for (const l of [\"マジック\", \"与ダメージ\"]) {\n        this.enableDebuf(l);\n      }\n    },\n  },\n\n  computed: {\n    optionValues() {\n      const opt = this.options;\n      let r = {};\n      for (const k in opt)\n        r[k] = opt[k].value;\n      return r;\n    },\n    enabledEffects() {\n      return [...this.buffs.filter(a => a.enabled), ...this.debuffs.filter(a => a.enabled)];\n    },\n  },\n}\n</script>\n\n<style scoped src=\"./lookup.css\">\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CombinationBufSimulator.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CombinationBufSimulator.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CombinationBufSimulator.vue?vue&type=template&id=255376c0&scoped=true\"\nimport script from \"./CombinationBufSimulator.vue?vue&type=script&lang=js\"\nexport * from \"./CombinationBufSimulator.vue?vue&type=script&lang=js\"\nimport style0 from \"./lookup.css?vue&type=style&index=0&id=255376c0&prod&scoped=true&lang=css&external\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"255376c0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\"},[_c('div',{staticClass:\"menu-content\",staticStyle:{\"flex-wrap\":\"nowrap\"}},[_c('div',{staticClass:\"menu-panel\"},[_c('b-container',[_c('div',[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"設定\")])]),_c('b-table',{attrs:{\"small\":\"\",\"borderless\":\"\",\"hover\":\"\",\"items\":Object.values(_vm.options),\"fields\":_vm.optionFields},scopedSlots:_vm._u([{key:\"cell(value)\",fn:function(r){return [_c('div',{staticClass:\"flex\"},[_c('div',{staticStyle:{\"margin-left\":\"auto\"}},[(r.item.type == 'boolean')?[_c('b-form-checkbox',{model:{value:(r.item.value),callback:function ($$v) {_vm.$set(r.item, \"value\", $$v)},expression:\"r.item.value\"}})]:(r.item.type == 'number')?[_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"3em\"},attrs:{\"min\":r.item.min,\"max\":r.item.max,\"size\":\"sm\",\"type\":\"number\",\"lazy\":\"\"},model:{value:(r.item.value),callback:function ($$v) {_vm.$set(r.item, \"value\", _vm._n($$v))},expression:\"r.item.value\"}})]:(r.item.type == 'sortMode')?[_c('b-dropdown',{attrs:{\"text\":`${_vm.sortModes[r.item.value].label}`,\"size\":\"sm\"}},_vm._l((_vm.sortModes),function(v,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",attrs:{\"size\":\"sm\"},on:{\"click\":function($event){r.item.value=i}}},[_vm._v(\" \"+_vm._s(_vm.sortModes[i].label)+\" \")])}),1)]:_vm._e()],2)])]}},{key:\"cell(label)\",fn:function(r){return [[_c('div',{attrs:{\"id\":`sb-p-${r.item.name}`}},[_vm._v(_vm._s(r.item.label))])]]}}])})],1),_c('b-container',[_c('div',[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"フィルタ\")])]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"sb-class-selector\"}},_vm._l((_vm.filter.class),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.classes[i]),\"width\":\"20px\"}})],1)}),1)],1)]),_c('div',{staticClass:\"menu-widgets flex\"},[_c('div',{staticClass:\"widget filter\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"sb-symbol-selector\"}},_vm._l((_vm.filter.symbol),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.symbols[i]),\"width\":\"20px\"}})],1)}),1)],1),_c('div',{staticClass:\"widget filter\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"sb-damage-type-selector\"}},_vm._l((_vm.filter.damageType),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.damageTypes[i]),\"width\":\"20px\"}})],1)}),1)],1),_c('div',{staticClass:\"widget rareiry-filter\"},[_c('b-button-group',{attrs:{\"size\":\"sm\",\"id\":\"sb-rareiry-selector\"}},_vm._l((_vm.filter.rarity),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.rarities[i]),\"width\":\"30px\"}})],1)}),1)],1)])]),_c('b-container',[_c('div',{staticClass:\"button-box\"},[_c('div',{staticClass:\"left-align\"},[_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetPAtk()}}},[_vm._v(\"物攻系\")]),_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetMAtk()}}},[_vm._v(\"魔攻系\")]),_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetPDef()}}},[_vm._v(\"物防系\")]),_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetMDef()}}},[_vm._v(\"魔防系\")]),_c('b-button',{staticStyle:{\"margin-right\":\"3px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.presetAll()}}},[_vm._v(\"全て\")])],1)]),_c('div',{staticClass:\"button-box\"},[_c('div',{staticClass:\"left-align\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.onCopyUrl()}}},[_vm._v(\"パラメータを URL としてコピー\")])],1)])])],1),_c('div',{staticClass:\"menu-panel\"},[_c('b-container',[_c('div',{staticClass:\"flex\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"バフ\")]),_c('div',{staticClass:\"right-align\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.buffs.forEach(a => a.reset())}}},[_vm._v(\"リセット\")])],1)]),_c('b-table',{attrs:{\"small\":\"\",\"borderless\":\"\",\"hover\":\"\",\"items\":_vm.buffs,\"fields\":_vm.buffFields},scopedSlots:_vm._u([{key:\"cell(enabled)\",fn:function(r){return [_c('b-form-checkbox',{model:{value:(r.item.enabled),callback:function ($$v) {_vm.$set(r.item, \"enabled\", $$v)},expression:\"r.item.enabled\"}})]}},{key:\"cell(label)\",fn:function(r){return [_vm._v(\" \"+_vm._s(r.item.label)+\" \")]}}])})],1)],1),_c('div',{staticClass:\"menu-panel\"},[_c('b-container',[_c('div',{staticClass:\"flex\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"デバフ\")]),_c('div',{staticClass:\"right-align\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.debuffs.forEach(a => a.reset())}}},[_vm._v(\"リセット\")])],1)]),_c('b-table',{attrs:{\"small\":\"\",\"borderless\":\"\",\"hover\":\"\",\"items\":_vm.debuffs,\"fields\":_vm.buffFields},scopedSlots:_vm._u([{key:\"cell(enabled)\",fn:function(r){return [_c('b-form-checkbox',{model:{value:(r.item.enabled),callback:function ($$v) {_vm.$set(r.item, \"enabled\", $$v)},expression:\"r.item.enabled\"}})]}},{key:\"cell(label)\",fn:function(r){return [_vm._v(\" \"+_vm._s(r.item.label)+\" \")]}}])})],1)],1),_c('div',{staticClass:\"menu-panel\",attrs:{\"id\":\"sb-exclude-list\"}},[_c('b-container',[_c('div',[_c('div',{staticClass:\"flex\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"優先リスト\")]),_c('div',{staticClass:\"right-align\"},[_c('b-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.prioritized=[]}}},[_vm._v(\"クリア\")])],1)]),_c('div',{staticClass:\"flex exclude-box\"},_vm._l((_vm.prioritized),function(v,i){return _c('b-link',{key:i,on:{\"click\":function($event){_vm.prioritized.splice(_vm.prioritized.indexOf(v), 1)}}},[(!v.owner)?_c('div',{attrs:{\"title\":v.name}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(v.icon),\"width\":\"50\"}})],1):_vm._e(),(v.owner)?_c('div',{staticStyle:{\"width\":\"50px\",\"height\":\"50px\"},attrs:{\"title\":v.owner.name + ' & ' + v.item.name}},[_c('b-img-lazy',{staticStyle:{\"position\":\"relative\",\"left\":\"0px\",\"top\":\"0px\"},attrs:{\"src\":_vm.getImageURL(v.owner.icon),\"width\":\"35\"}}),_c('b-img-lazy',{staticStyle:{\"position\":\"relative\",\"left\":\"-20px\",\"top\":\"15px\"},attrs:{\"src\":_vm.getImageURL(v.item.icon),\"width\":\"35\"}})],1):_vm._e()])}),1)]),_c('div',[_c('div',{staticClass:\"flex\"},[_c('h3',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"除外リスト\")]),_c('div',{staticClass:\"right-align\"},[_c('b-button',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.excluded=[]}}},[_vm._v(\"クリア\")])],1)]),_c('div',{staticClass:\"flex exclude-box\"},_vm._l((_vm.excluded),function(v,i){return _c('b-link',{key:i,on:{\"click\":function($event){_vm.excluded.splice(_vm.excluded.indexOf(v), 1)}}},[(!v.owner)?_c('div',{attrs:{\"title\":v.name}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(v.icon),\"width\":\"50\"}})],1):_vm._e(),(v.owner)?_c('div',{staticStyle:{\"width\":\"50px\",\"height\":\"50px\"},attrs:{\"title\":v.owner.name + ' & ' + v.item.name}},[_c('b-img-lazy',{staticStyle:{\"position\":\"relative\",\"left\":\"0px\",\"top\":\"0px\"},attrs:{\"src\":_vm.getImageURL(v.owner.icon),\"width\":\"35\"}}),_c('b-img-lazy',{staticStyle:{\"position\":\"relative\",\"left\":\"-20px\",\"top\":\"15px\"},attrs:{\"src\":_vm.getImageURL(v.item.icon),\"width\":\"35\"}})],1):_vm._e()])}),1)])])],1)]),_c('div',{staticClass:\"content\",style:(_vm.style)},[(!_vm.progress.completed)?_c('div',{staticClass:\"menu-panel\",staticStyle:{\"padding\":\"10px\",\"position\":\"absolute\"}},[_c('b-spinner',{attrs:{\"small\":\"\",\"label\":\"Spinning\"}})],1):_vm._e(),(_vm.progress.result.length == 0)?_c('div',{staticClass:\"menu-panel\",staticStyle:{\"padding\":\"10px\"}},[_vm._m(0)]):_vm._e(),_vm._l((_vm.progress.result),function(r,ri){return [_c('div',{key:ri,staticClass:\"character\"},[_c('div',{staticClass:\"flex info\"},[_c('div',[_c('h6',[_vm._v(\"合計 \"+_vm._s(r.score)+\":\")])]),_vm._l((_vm.chrEffectsToHtml(r)),function(e,ei){return [_c('div',{key:ei,domProps:{\"innerHTML\":_vm._s(e)}})]})],2),_c('div',{staticClass:\"flex\"},[(r.main)?_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.icon),\"title\":r.main.character.name,\"id\":'portrait_sbm_'+ri,\"width\":\"100\",\"rounded\":\"\"}}),(_vm.displayType>=1)?_c('b-popover',{attrs:{\"target\":'portrait_sbm_'+ri,\"title\":r.main.character.name,\"triggers\":\"hover click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[_c('div',{staticClass:\"status flex\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.class),\"title\":'クラス:'+r.main.character.class,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.symbol),\"title\":'シンボル:'+r.main.character.symbol,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.rarity),\"title\":'レアリティ:'+r.main.character.rarity,\"height\":\"20\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.main.character.damageType),\"title\":'攻撃タイプ:'+r.main.character.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(r.main.character.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('移動'),\"title\":\"移動\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(r.main.character.move))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"実装日:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(r.main.character.date))])])],1),_c('div',{staticClass:\"status flex\"},_vm._l((r.main.character.skills),function(skill,si){return _c('b-link',{key:si,on:{\"click\":function($event){return _vm.addPrioritized(skill)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"title\":_vm.descToTitle(skill),\"width\":\"50\"}})],1)}),1)]):_vm._e()],1):_vm._e(),(r.main)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"skills\"},_vm._l((r.main.skills),function(skill,si){return _c('div',{key:si,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"title\":skill.name,\"width\":\"50\",\"id\":'skill_sbm_'+ri+'_'+si}}),_c('b-popover',{attrs:{\"target\":'skill_sbm_'+ri+'_'+si,\"title\":skill.name,\"triggers\":\"hover click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[(skill.owners)?_c('div',{staticClass:\"owners\"},[_vm._v(\" 所持者:\"),_c('br'),_vm._l((skill.owners),function(owner,oi){return _c('b-link',{key:oi,on:{\"click\":function($event){return _vm.addPrioritized(owner)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(owner.icon),\"title\":owner.name,\"width\":\"50\"}})],1)})],2):_vm._e(),(!skill.isTalent)?_c('div',[_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addPrioritized(skill)}}},[_vm._v(\"このスキルを優先\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addPrioritized(skill, r.main.character)}}},[_vm._v(\"このキャラとスキルの組み合わせを優先\")])],1),_c('div',{staticClass:\"flex exclude-menu\"},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addExcluded(skill)}}},[_vm._v(\"このスキルを除外\")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.addExcluded(skill, r.main.character)}}},[_vm._v(\"このキャラとスキルの組み合わせを除外\")])],1)]):_vm._e()])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill, true))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e(),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.effectsToHtml(skill, r.main))}})])])])])}),0)]):_vm._e()]),_c('div',{staticClass:\"flex\"},[(r.summon)?_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(r.summon.character.icon),\"title\":`${r.summon.character.name} (召喚ユニット)`,\"id\":'portrait_sbx_'+ri,\"width\":\"100\",\"rounded\":\"\"}})],1):_vm._e(),(r.summon)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"skills\"},_vm._l((r.summon.skills),function(skill,si){return _c('div',{key:si,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"title\":skill.name,\"width\":\"50\",\"id\":'skill_sbx_'+ri+'_'+si}}),_c('b-popover',{attrs:{\"target\":'skill_sbx_'+ri+'_'+si,\"title\":skill.name,\"triggers\":\"hover click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"top\"}},[(skill.owners)?_c('div',{staticClass:\"owners\"},[_vm._v(\" 所持者:\"),_c('br'),_vm._l((skill.owners),function(owner,oi){return _c('b-link',{key:oi,on:{\"click\":function($event){return _vm.addPrioritized(owner)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(owner.icon),\"title\":owner.name,\"width\":\"50\",\"height\":\"50\"}})],1)})],2):_vm._e()])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill, true))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e(),_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.effectsToHtml(skill, r.main))}})])])])])}),0)]):_vm._e()])])]})],2)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"about\"},[_c('h5',{staticStyle:{\"margin-bottom\":\"5px\"}},[_vm._v(\"自己バフ検索\")]),_vm._v(\" こちらは自己バフを含むメインキャラ単身のタレント＋スキルのバフ・デバフの総合値を算出します。\"),_c('br'),_vm._v(\" キャラ性能を測る一つの指標になるでしょう。\"),_c('br'),_c('br'),_vm._v(\" こちらもアクティブ同士の競合は考慮されています。\"),_c('br'),_vm._v(\" 特定のスキルを除外or優先採用したい場合、アイコンをマウスオーバーすると出てくるポップアップから可能です。 \")])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"root\">\n\n    <div class=\"menu-content\" style=\"flex-wrap: nowrap\">\n      <div class=\"menu-panel\">\n        <b-container>\n          <div>\n            <h3 style=\"margin: 5px 0px\">設定</h3>\n          </div>\n          <b-table small borderless hover :items=\"Object.values(options)\" :fields=\"optionFields\">\n            <template #cell(value)=\"r\">\n              <div class=\"flex\">\n                <div style=\"margin-left: auto\">\n                  <template v-if=\"r.item.type == 'boolean'\">\n                    <b-form-checkbox v-model=\"r.item.value\"></b-form-checkbox>\n                  </template>\n                  <template v-else-if=\"r.item.type == 'number'\">\n                    <b-form-input style=\"width: 3em\" v-model.number=\"r.item.value\" :min=\"r.item.min\" :max=\"r.item.max\" size=\"sm\" type=\"number\" class=\"input-param\" lazy></b-form-input>\n                  </template>\n                  <template v-else-if=\"r.item.type == 'sortMode'\">\n                    <b-dropdown :text=\"`${sortModes[r.item.value].label}`\" size=\"sm\">\n                      <b-dropdown-item v-for=\"(v, i) in sortModes\" :key=\"i\" class=\"d-flex flex-column\" size=\"sm\" @click=\"r.item.value=i\">\n                        {{sortModes[i].label}}\n                      </b-dropdown-item>\n                    </b-dropdown>\n                  </template>\n                </div>\n              </div>\n            </template>\n            <template #cell(label)=\"r\">\n              <template>\n                <div :id=\"`sb-p-${r.item.name}`\">{{r.item.label}}</div>\n              </template>\n            </template>\n          </b-table>\n        </b-container>\n\n        <b-container>\n          <div>\n            <h3 style=\"margin: 5px 0px\">フィルタ</h3>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget\">\n              <b-button-group size=\"sm\" id=\"sb-class-selector\">\n                <b-button v-for=\"(c, i) in filter.class\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(classes[i])\" width=\"20px\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n          <div class=\"menu-widgets flex\">\n            <div class=\"widget filter\">\n              <b-button-group size=\"sm\" id=\"sb-symbol-selector\">\n                <b-button v-for=\"(c, i) in filter.symbol\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(symbols[i])\" width=\"20px\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget filter\">\n              <b-button-group size=\"sm\" id=\"sb-damage-type-selector\">\n                <b-button v-for=\"(c, i) in filter.damageType\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(damageTypes[i])\" width=\"20px\" />\n                </b-button>\n              </b-button-group>\n            </div>\n            <div class=\"widget rareiry-filter\">\n              <b-button-group size=\"sm\" id=\"sb-rareiry-selector\">\n                <b-button v-for=\"(c, i) in filter.rarity\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n                  <b-img-lazy :src=\"getImageURL(rarities[i])\" width=\"30px\" />\n                </b-button>\n              </b-button-group>\n            </div>\n          </div>\n        </b-container>\n\n        <b-container>\n          <div class=\"button-box\">\n            <div class=\"left-align\">\n              <b-button size=\"sm\" @click=\"presetPAtk()\" style=\"margin-right: 3px\">物攻系</b-button>\n              <b-button size=\"sm\" @click=\"presetMAtk()\" style=\"margin-right: 3px\">魔攻系</b-button>\n              <b-button size=\"sm\" @click=\"presetPDef()\" style=\"margin-right: 3px\">物防系</b-button>\n              <b-button size=\"sm\" @click=\"presetMDef()\" style=\"margin-right: 3px\">魔防系</b-button>\n              <b-button size=\"sm\" @click=\"presetAll()\" style=\"margin-right: 3px\">全て</b-button>\n            </div>\n          </div>\n          <div class=\"button-box\">\n            <div class=\"left-align\">\n              <b-button size=\"sm\" @click=\"onCopyUrl()\">パラメータを URL としてコピー</b-button>\n            </div>\n          </div>\n        </b-container>\n      </div>\n\n      <div class=\"menu-panel\">\n        <b-container>\n          <div class=\"flex\">\n            <h3 style=\"margin: 5px 0px\">バフ</h3>\n            <div class=\"right-align\">\n              <b-button size=\"sm\" @click=\"buffs.forEach(a => a.reset())\">リセット</b-button>\n            </div>\n          </div>\n          <b-table small borderless hover :items=\"buffs\" :fields=\"buffFields\">\n            <template #cell(enabled)=\"r\">\n              <b-form-checkbox v-model=\"r.item.enabled\"></b-form-checkbox>\n            </template>\n            <template #cell(label)=\"r\">\n              {{r.item.label}}\n            </template>\n          </b-table>\n        </b-container>\n      </div>\n      <div class=\"menu-panel\">\n        <b-container>\n          <div class=\"flex\">\n            <h3 style=\"margin: 5px 0px\">デバフ</h3>\n            <div class=\"right-align\">\n              <b-button size=\"sm\" @click=\"debuffs.forEach(a => a.reset())\">リセット</b-button>\n            </div>\n          </div>\n          <b-table small borderless hover :items=\"debuffs\" :fields=\"buffFields\">\n            <template #cell(enabled)=\"r\">\n              <b-form-checkbox v-model=\"r.item.enabled\"></b-form-checkbox>\n            </template>\n            <template #cell(label)=\"r\">\n              {{r.item.label}}\n            </template>\n          </b-table>\n        </b-container>\n      </div>\n\n      <div class=\"menu-panel\" id=\"sb-exclude-list\">\n        <b-container>\n          <div>\n            <div class=\"flex\">\n              <h3 style=\"margin: 5px 0px\">優先リスト</h3>\n              <div class=\"right-align\">\n                <b-button size=\"sm\" @click=\"prioritized=[]\" style=\"margin-left: 5px\">クリア</b-button>\n              </div>\n            </div>\n            <div class=\"flex exclude-box\">\n              <b-link v-for=\"(v, i) in prioritized\" :key=\"i\" @click=\"prioritized.splice(prioritized.indexOf(v), 1)\">\n                <div v-if=\"!v.owner\" :title=\"v.name\">\n                  <b-img-lazy :src=\"getImageURL(v.icon)\" width=\"50\" />\n                </div>\n                <div v-if=\"v.owner\" style=\"width: 50px; height: 50px;\" :title=\"v.owner.name + ' & ' + v.item.name\">\n                  <b-img-lazy :src=\"getImageURL(v.owner.icon)\" width=\"35\" style=\"position: relative; left: 0px; top: 0px; \" />\n                  <b-img-lazy :src=\"getImageURL(v.item.icon)\" width=\"35\" style=\"position: relative; left: -20px; top: 15px; \" />\n                </div>\n              </b-link>\n            </div>\n          </div>\n          <div>\n            <div class=\"flex\">\n              <h3 style=\"margin: 5px 0px\">除外リスト</h3>\n              <div class=\"right-align\">\n                <b-button size=\"sm\" @click=\"excluded=[]\" style=\"margin-left: 5px\">クリア</b-button>\n              </div>\n            </div>\n            <div class=\"flex exclude-box\">\n              <b-link v-for=\"(v, i) in excluded\" :key=\"i\" @click=\"excluded.splice(excluded.indexOf(v), 1)\">\n                <div v-if=\"!v.owner\" :title=\"v.name\">\n                  <b-img-lazy :src=\"getImageURL(v.icon)\" width=\"50\" />\n                </div>\n                <div v-if=\"v.owner\" style=\"width: 50px; height: 50px; \" :title=\"v.owner.name + ' & ' + v.item.name\">\n                  <b-img-lazy :src=\"getImageURL(v.owner.icon)\" width=\"35\" style=\"position: relative; left: 0px; top: 0px; \" />\n                  <b-img-lazy :src=\"getImageURL(v.item.icon)\" width=\"35\" style=\"position: relative; left: -20px; top: 15px; \" />\n                </div>\n              </b-link>\n            </div>\n          </div>\n        </b-container>\n      </div>\n    </div>\n\n    <div class=\"content\" :style=\"style\">\n      <div v-if=\"!progress.completed\" class=\"menu-panel\" style=\"padding: 10px; position: absolute;\">\n        <b-spinner small label=\"Spinning\"></b-spinner>\n      </div>\n      <div v-if=\"progress.result.length == 0\" class=\"menu-panel\" style=\"padding: 10px\">\n        <div class=\"about\">\n          <h5 style=\"margin-bottom: 5px\">自己バフ検索</h5>\n          こちらは自己バフを含むメインキャラ単身のタレント＋スキルのバフ・デバフの総合値を算出します。<br />\n          キャラ性能を測る一つの指標になるでしょう。<br />\n          <br />\n          こちらもアクティブ同士の競合は考慮されています。<br />\n          特定のスキルを除外or優先採用したい場合、アイコンをマウスオーバーすると出てくるポップアップから可能です。\n        </div>\n      </div>\n\n      <template v-for=\"(r, ri) in progress.result\">\n        <div class=\"character\" :key=\"ri\">\n          <div class=\"flex info\">\n            <div><h6>合計 {{r.score}}:</h6></div>\n            <template v-for=\"(e, ei) in chrEffectsToHtml(r)\">\n              <div :key=\"ei\" v-html=\"e\" />\n            </template>\n          </div>\n          <div class=\"flex\">\n            <div v-if=\"r.main\" class=\"portrait\">\n              <b-img-lazy :src=\"getImageURL(r.main.character.icon)\" :title=\"r.main.character.name\" :id=\"'portrait_sbm_'+ri\" width=\"100\" rounded />\n              <b-popover v-if=\"displayType>=1\" :target=\"'portrait_sbm_'+ri\" :title=\"r.main.character.name\" triggers=\"hover click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                <div class=\"status flex\">\n                  <b-img-lazy :src=\"getImageURL(r.main.character.class)\" :title=\"'クラス:'+r.main.character.class\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(r.main.character.symbol)\" :title=\"'シンボル:'+r.main.character.symbol\" height=\"25\" />\n                  <b-img-lazy :src=\"getImageURL(r.main.character.rarity)\" :title=\"'レアリティ:'+r.main.character.rarity\" height=\"20\" />\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(r.main.character.damageType)\" :title=\"'攻撃タイプ:'+r.main.character.damageType\" width=\"20\" height=\"20\" /></div>\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{r.main.character.range}}</span></div>\n                  <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('移動')\" title=\"移動\" width=\"18\" height=\"18\" /><span>{{r.main.character.move}}</span></div>\n                  <div class=\"param-box\"><span class=\"param-name\">実装日:</span><span class=\"param-value\">{{r.main.character.date}}</span></div>\n                </div>\n                <div class=\"status flex\">\n                  <b-link v-for=\"(skill, si) in r.main.character.skills\" :key=\"si\" @click=\"addPrioritized(skill)\">\n                    <b-img-lazy :src=\"getImageURL(skill.icon)\" :title=\"descToTitle(skill)\" width=\"50\" />\n                  </b-link>\n                </div>\n              </b-popover>\n            </div>\n            <div v-if=\"r.main\" class=\"detail\" v-show=\"displayType >= 1\">\n              <div class=\"skills\">\n                <div class=\"skill\" v-for=\"(skill, si) in r.main.skills\" :class=\"getSkillClass(skill)\" :key=\"si\">\n                  <div class=\"flex\">\n                    <div class=\"icon\">\n                      <b-img-lazy :src=\"getImageURL(skill.icon)\" :title=\"skill.name\" width=\"50\" :id=\"'skill_sbm_'+ri+'_'+si\" />\n                      <b-popover :target=\"'skill_sbm_'+ri+'_'+si\" :title=\"skill.name\" triggers=\"hover click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                        <div v-if=\"skill.owners\" class=\"owners\">\n                          所持者:<br />\n                          <b-link v-for=\"(owner, oi) in skill.owners\" :key=\"oi\" @click=\"addPrioritized(owner)\">\n                            <b-img-lazy :src=\"getImageURL(owner.icon)\" :title=\"owner.name\" width=\"50\" />\n                          </b-link>\n                        </div>\n                        <div v-if=\"!skill.isTalent\">\n                          <div class=\"flex exclude-menu\">\n                            <b-button size=\"sm\" @click=\"addPrioritized(skill)\">このスキルを優先</b-button>\n                            <b-button size=\"sm\" @click=\"addPrioritized(skill, r.main.character)\">このキャラとスキルの組み合わせを優先</b-button>\n                          </div>\n                          <div class=\"flex exclude-menu\">\n                            <b-button size=\"sm\" @click=\"addExcluded(skill)\">このスキルを除外</b-button>\n                            <b-button size=\"sm\" @click=\"addExcluded(skill, r.main.character)\">このキャラとスキルの組み合わせを除外</b-button>\n                          </div>\n                        </div>\n                      </b-popover>\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <div class=\"flex\">\n                        <h6>{{ skill.name }}</h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                      </div>\n                      <p>\n                        <span v-html=\"descToHtml(skill, true)\" />\n                        <span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\" />\n                        <span class=\"note\" v-html=\"effectsToHtml(skill, r.main)\" />\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"flex\">\n            <div v-if=\"r.summon\" class=\"portrait\">\n              <b-img-lazy :src=\"getImageURL(r.summon.character.icon)\" :title=\"`${r.summon.character.name} (召喚ユニット)`\" :id=\"'portrait_sbx_'+ri\" width=\"100\" rounded />\n            </div>\n            <div v-if=\"r.summon\" class=\"detail\" v-show=\"displayType >= 1\">\n              <div class=\"skills\">\n                <div class=\"skill\" v-for=\"(skill, si) in r.summon.skills\" :class=\"getSkillClass(skill)\" :key=\"si\">\n                  <div class=\"flex\">\n                    <div class=\"icon\">\n                      <b-img-lazy :src=\"getImageURL(skill.icon)\" :title=\"skill.name\" width=\"50\" :id=\"'skill_sbx_'+ri+'_'+si\" />\n                      <b-popover :target=\"'skill_sbx_'+ri+'_'+si\" :title=\"skill.name\" triggers=\"hover click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"top\">\n                        <div v-if=\"skill.owners\" class=\"owners\">\n                          所持者:<br />\n                          <b-link v-for=\"(owner, oi) in skill.owners\" :key=\"oi\" @click=\"addPrioritized(owner)\">\n                            <b-img-lazy :src=\"getImageURL(owner.icon)\" :title=\"owner.name\" width=\"50\" height=\"50\" />\n                          </b-link>\n                        </div>\n                      </b-popover>\n                    </div>\n                    <div class=\"desc\" v-show=\"displayType >= 2\">\n                      <div class=\"flex\">\n                        <h6>{{ skill.name }}</h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                      </div>\n                      <p>\n                        <span v-html=\"descToHtml(skill, true)\" />\n                        <span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\" />\n                        <span class=\"note\" v-html=\"effectsToHtml(skill, r.main)\" />\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </div>\n\n      </template>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport commonjs from \"../common.js\";\nimport lookupjs from \"./lookup.js\";\nimport { BitFlags } from \"../utils.js\";\n\nexport default {\n  name: 'SelfBufSimulator',\n  components: {\n  },\n  props: {\n  },\n  mixins: [commonjs, lookupjs],\n\n  data() {\n    return {\n      buffFields: [\n        {\n          key: \"enabled\",\n          label: \"\",\n        },\n        {\n          key: \"label\",\n          label: \"種類\",\n        },\n      ],\n      optionFields: [\n        {\n          key: \"value\",\n          label: \"\",\n        },\n        {\n          key: \"label\",\n          label: \"項目\",\n        },\n      ],\n\n      sortModes: [\n        {\n          label: \"スコア\"\n        },\n        {\n          label: \"実装日\"\n        },\n        {\n          label: \"エンゲージ実装日\"\n        },\n      ],\n      sortMode: 0,\n    };\n  },\n\n  created() {\n    this.setupDB();\n    this.setupFilter();\n    for (let s of [...this.mainActive, ...this.mainPassive, ...this.mainTalents]) {\n      this.removeEffectsOfSameType(s);\n    }\n\n    this.sortModes[0].compare = (a, b) => this.compare(a.score, b.score); // スコア\n    this.sortModes[1].compare = (a, b) => b.main.character.date.localeCompare(a.main.character.date); // 実装日\n    this.sortModes[2].compare = (a, b) => this.compareEngageDate(a.main.character, b.main.character); // エンゲージ実装日\n\n    const makeOptions = (params) => {\n      let r = {};\n      for (const p of params) {\n        const v = p.value;\n        if (!p.type)\n          p.type = typeof v;\n        p.reset = () => { this.value = v; };\n        r[p.name] = p;\n      }\n      return r;\n    };\n    this.options = makeOptions([\n      { name: \"sortMode\", label: \"ソート\", value: 0, type: \"sortMode\" },\n      { name: \"maxPickup\", label: \"人まで表示\", value: 20, min: 1, max: 200 },\n      { name: \"maxActiveCount\", label: \"アクティブ数制限 (再行動ありを除く)\", value: 2, min: 0, max: 3 },\n      { name: \"allowTalent\", label: \"タレントを含める\", value: true },\n      { name: \"allowPassive\", label: \"パッシブスキルを含める\", value: true },\n      { name: \"allowActive\", label: \"アクティブスキルを含める\", value: true },\n      { name: \"allowEngageSkills\", label: \"エンゲージスキルを含める\", value: true },\n      { name: \"allowOnBattle\", label: \"戦闘時発動効果を含める\", value: true },\n      { name: \"allowProbability\", label: \"確率発動効果を含める\", value: true },\n    ]);\n\n    const makeParams = (effectType, types) => {\n      const make = (t) => {\n        return {\n          label: t.label,\n          enabled: false,\n\n          reset() {\n            this.enabled = false;\n          }\n        };\n      }\n      return types.map(a => make(a));\n    };\n    this.buffs = makeParams(\"+\", [\n      { label: \"アタック\" },\n      { label: \"ディフェンス\" },\n      { label: \"マジック\" },\n      { label: \"レジスト\" },\n      { label: \"クリティカル率\" },\n      { label: \"クリティカルダメージ倍率\" },\n      { label: \"与ダメージ\" },\n      { label: \"与ダメージ(物理)\" },\n      { label: \"与ダメージ(魔法)\" },\n      { label: \"与ダメージ(スキル)\" },\n      { label: \"与ダメージ(範囲スキル)\" },\n      { label: \"与ダメージ(通常攻撃)\" },\n      { label: \"ダメージ耐性\" },\n      { label: \"ダメージ耐性(物理)\" },\n      { label: \"ダメージ耐性(魔法)\" },\n      { label: \"最大HP\" },\n      { label: \"移動\" },\n    ]);\n    this.debuffs = makeParams(\"-\", [\n      { label: \"アタック\", limit: 70 },\n      { label: \"ディフェンス\", limit: 70 },\n      { label: \"マジック\", limit: 70 },\n      { label: \"レジスト\", limit: 70 },\n      { label: \"与ダメージ\", limit: 70 },\n      { label: \"ダメージ耐性\" },\n      { label: \"ダメージ耐性(物理)\" },\n      { label: \"ダメージ耐性(魔法)\" },\n    ]);\n  },\n  \n  mounted() {\n  },\n\n  methods: {\n    doSearch() {\n      let vue = this;\n      const opt = this.optionValues;\n      const enabledBuffEffects = this.buffs.filter(a => a.enabled).map(a => a.label);\n      const enabledDebuffEffects = this.debuffs.filter(a => a.enabled).map(a => a.label);\n      for (let chr of this.mainChrs) {\n        if (chr.engage) {\n          chr.engage.enabled = opt.allowEngageSkills;\n        }\n      }\n\n      let ctx = {\n        reset() {\n          this.activeCount = 0;\n          this.usedEffects = [];\n          this.conflictedEffects = [];\n          this.usedSlots = new BitFlags(vue.effectTypeIndex);\n        }\n      };\n\n      const getSkillScore = (chr, skill) => {\n        let r = {\n          score: 0,\n          prioritized: this.isPrioritized(skill, chr) ? 1 : 0,\n          excluded: this.isExcluded(skill, chr) ? 1 : 0,\n          skill: skill,\n          usedEffects: [],\n          conflictedEffects: [],\n        };\n        if (r.excluded ||\n          (!opt.allowTalent && skill.isTalent) ||\n          (!opt.allowPassive && skill.isPassive) ||\n          (!opt.allowActive && skill.isActive) ||\n          (skill.isActive && !skill.multiAction && ctx.activeCount >= opt.maxActiveCount)) {\n          return r;\n        }\n\n        const evalCondition = (effect) => {\n          if ((!effect.value && !effect.variable && !effect.add) ||\n            (skill.isActive && !effect.duration))\n            return;\n\n          const cond = effect.condition;\n          const probability = cond?.probability;\n          if ((!opt.allowOnBattle && effect.ephemeral) ||\n            (!opt.allowProbability && probability))\n            return false;\n          return true;\n        };\n\n        if (skill.buff) {\n          for (const effect of skill.buff) {\n            if (!(enabledBuffEffects.includes(effect.type)))\n              continue;\n            if (!evalCondition(effect))\n              continue;\n\n            if (effect.slotIndex && ctx.usedSlots.get(effect.slotIndex)) {\n              r.conflictedEffects.push(effect);\n            }\n            else {\n              r.score += this.getEffectValue(effect);\n              r.usedEffects.push(effect);\n            }\n          }\n        }\n        if (skill.debuff) {\n          for (const effect of skill.debuff) {\n            if (!enabledDebuffEffects.includes(effect.type))\n              continue;\n            if (!evalCondition(effect))\n              continue;\n\n            if (effect.slotIndex && ctx.usedSlots.get(effect.slotIndex)) {\n              r.conflictedEffects.push(effect);\n            }\n            else {\n              r.score += this.getEffectValue(effect);\n              r.usedEffects.push(effect);\n            }\n          }\n        }\n        return r;\n      };\n\n      let scoreTableChr = [];\n      for (const chr of this.mainChrs) {\n        if (!this.filterMatchMainChr(chr))\n          continue;\n\n        ctx.reset();\n        let skillScore = [];\n\n        const addSkill = (score) => {\n          skillScore.push(score);\n          for (const effect of score.usedEffects) {\n            if (effect.slotIndex) {\n              ctx.usedSlots.set(effect.slotIndex, true);\n            }\n          }\n          ctx.usedEffects = ctx.usedEffects.concat(score.usedEffects);\n          ctx.conflictedEffects = ctx.conflictedEffects.concat(score.conflictedEffects);\n          if (score.skill.isActive && !score.skill.multiAction)\n            ++ctx.activeCount;\n        };\n\n        addSkill(getSkillScore(chr, chr.talent));\n        let skills = [...chr.skills];\n        for (let si = 0; si < 3; ++si) {\n          // スキルを選ぶ度に他のスキルのスコアが変動しうるので、再評価が必要\n          let tmp = skills.map(skill => getSkillScore(chr, skill));\n          tmp = tmp.sort((a, b) => b.score - a.score).sort((a, b) => b.prioritized - a.prioritized);\n          addSkill(tmp[0]);\n          skills.splice(skills.indexOf(tmp[0].skill), 1);\n        }\n        skillScore = skillScore.filter(a => a.score > 0 || a.prioritized);\n\n        let score = {\n          name: chr.name,\n          score: 0,\n          main: {\n            character: chr,\n            usedEffects: ctx.usedEffects,\n            conflictedEffects: ctx.conflictedEffects,\n            skills: skillScore.map(ss => ss.skill),\n          }\n        };\n        score.score = skillScore.reduce((total, current) => total + current.score, 0);\n        scoreTableChr.push(score);\n      }\n\n      const compare = this.sortModes[opt.sortMode].compare;\n      return scoreTableChr.filter(a => a.score > 0).sort(compare).slice(0, opt.maxPickup);\n    },\n\n    beginSearch() {\n      if (!this.progress.completed) {\n        this.pending = true;\n        return false;\n      }\n\n      this.progress.completed = false;\n      const body = () => {\n        this.progress.result = this.doSearch(this.options.maxPickup.value);\n        this.progress.completed = true;\n      };\n      setTimeout(body, 300);\n      return true;\n    },\n\n    updateQuery() {\n      this.beginSearch();\n    },\n\n    onCopyUrl() {\n      const url = this.getParamsUrl();\n      this.copyToClipboard(url);\n      this.toast(`コピーしました`);\n    },\n\n\n    enableBuf(label) {\n      for (let e of this.buffs) {\n        if (e.label == label) {\n          e.enabled = true;\n          break;\n        }\n      }\n    },\n    enableDebuf(label) {\n      for (let e of this.debuffs) {\n        if (e.label == label) {\n          e.enabled = true;\n          break;\n        }\n      }\n    },\n\n    presetAll() {\n      for (let e of this.buffs) {\n        e.enabled = true;\n      }\n      for (let e of this.debuffs) {\n        e.enabled = true;\n      }\n    },\n    presetPAtk() {\n      for (const l of [\"アタック\", \"クリティカルダメージ倍率\", \"与ダメージ\", \"与ダメージ(物理)\", \"与ダメージ(スキル)\", \"与ダメージ(範囲スキル)\", \"与ダメージ(通常攻撃)\"]) {\n        this.enableBuf(l);\n      }\n      for (const l of [\"ダメージ耐性\", \"ダメージ耐性(物理)\"]) {\n        this.enableDebuf(l);\n      }\n    },\n    presetMAtk() {\n      for (const l of [\"マジック\", \"クリティカルダメージ倍率\", \"与ダメージ\", \"与ダメージ(魔法)\", \"与ダメージ(スキル)\", \"与ダメージ(範囲スキル)\"]) {\n        this.enableBuf(l);\n      }\n      for (const l of [\"ダメージ耐性\", \"ダメージ耐性(魔法)\"]) {\n        this.enableDebuf(l);\n      }\n    },\n    presetPDef() {\n      for (const l of [\"ディフェンス\", \"ダメージ耐性\", \"ダメージ耐性(物理)\", \"最大HP\"]) {\n        this.enableBuf(l);\n      }\n      for (const l of [\"アタック\", \"与ダメージ\"]) {\n        this.enableDebuf(l);\n      }\n    },\n    presetMDef() {\n      for (const l of [\"レジスト\", \"ダメージ耐性\", \"ダメージ耐性(魔法)\", \"最大HP\"]) {\n        this.enableBuf(l);\n      }\n      for (const l of [\"マジック\", \"与ダメージ\"]) {\n        this.enableDebuf(l);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped src=\"./lookup.css\">\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SelfBufSimulator.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SelfBufSimulator.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SelfBufSimulator.vue?vue&type=template&id=5a84710a&scoped=true\"\nimport script from \"./SelfBufSimulator.vue?vue&type=script&lang=js\"\nexport * from \"./SelfBufSimulator.vue?vue&type=script&lang=js\"\nimport style0 from \"./lookup.css?vue&type=style&index=0&id=5a84710a&prod&scoped=true&lang=css&external\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a84710a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"root\" @mousemove=\"onMouseMove\">\n    <div class=\"header\" :class=\"{ 'hidden': !showHeader }\">\n      <Navigation />\n    </div>\n    <div style=\"padding-top: 60px; background: #d0d0d4; \">\n    </div>\n    <div class=\"root\" style=\"\">\n      <b-tabs nav-class=\"tab-index\" active-nav-item-class=\"tab-title-active\" v-model=\"tabIndex\">\n        <b-tab title-link-class=\"tab-title\">\n          <template #title>\n            <h2 style=\"margin: 0em 1em; font-size: 1.25em;\">組み合わせ検索</h2>\n          </template>\n          <CombinationBufSimulator ref=\"cbSim\" />\n        </b-tab>\n        <b-tab title-link-class=\"tab-title\">\n          <template #title>\n            <h2 style=\"margin: 0em 1em; font-size: 1.25em;\">自己バフ検索</h2>\n          </template>\n          <SelfBufSimulator ref=\"sbSim\" />\n        </b-tab>\n      </b-tabs>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport Navigation from './Navigation.vue'\nimport CombinationBufSimulator from './simulator/CombinationBufSimulator.vue'\nimport SelfBufSimulator from './simulator/SelfBufSimulator.vue'\nimport commonjs from \"./common.js\";\nimport lookupjs from \"./simulator/lookup.js\";\n\nexport default {\n  name: 'Lookup',\n  components: {\n    Navigation,\n    CombinationBufSimulator,\n    SelfBufSimulator,\n  },\n  mixins: [commonjs, lookupjs],\n\n  data() {\n    return {\n      tabIndex: 0,\n    };\n  },\n\n  created() {\n    document.title = \"れじぇくろDB: 組み合わせ検索\";\n  },\n\n  mounted() {\n    const handleURLUpdate = () => {\n      this.$nextTick(() => {\n        this.enableUpdateURL = false;\n        this.decodeURL();\n        this.$nextTick(() => {\n          this.enableUpdateURL = true;\n        });\n      });\n    };\n\n    handleURLUpdate();\n    window.onpopstate = handleURLUpdate;\n  },\n\n  methods: {\n    decodeURL() {\n      const params = this.parseParamsUrl(window.location.href);\n      //console.log(params);\n      if (Object.hasOwn(params, \"t\")) {\n        this.tabIndex = params.t;\n      }\n      else {\n        this.tabIndex = 0;\n      }\n\n      if (Object.hasOwn(params, \"p\")) {\n        let target = [this.$refs.cbSim, this.$refs.sbSim][this.tabIndex];\n        target.deserializeParams(params.p);\n      }\n    },\n    updateURL() {\n      if (!this.enableUpdateURL)\n        return false;\n\n      let url = `?t=${this.tabIndex}`;\n      if (url != this.prevURL) {\n        window.history.pushState(null, null, url);\n        this.prevURL = url;\n        return true;\n      }\n      return false;\n    },\n  },\n\n  watch: {\n    tabIndex: function () {\n      this.updateURL();\n    },\n  },\n}\n</script>\n\n<style scoped>\n</style>\n\n<style>\n  .tab-index {\n    border-color: #c0c0c0 !important;\n    background: #d0d0d4;\n  }\n\n  .tab-title {\n  }\n\n  .tab-title:focus, .tab-title:hover {\n    border-color: #c0c0c0 #c0c0c0 rgb(234, 234, 237) !important;\n  }\n\n  .tab-title-active {\n    background: rgb(234, 234, 237) !important;\n    border-color: #c0c0c0 #c0c0c0 rgb(234, 234, 237) !important;\n  }\n\n  .table {\n    margin-bottom: 1px;\n  }\n\n  .desc .table {\n    width: auto;\n    margin: 3px;\n  }\n\n  .input-dropdown button {\n    padding: 0.1em;\n  }\n\n  input::placeholder {\n    color: rgb(190, 190, 190) !important;\n    font-size: small !important;\n  }\n\n  .effect-group {\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: 5px;\n  }\n\n  .effect-box {\n    margin: 1px 2px;\n    padding: 0px 2px;\n    min-height: 21px;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 0.3rem;\n    background: white;\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    font-size: 75%;\n  }\n\n  .exclude-menu {\n    margin-top: 5px;\n  }\n  .exclude-menu .btn {\n    margin-right: 4px;\n  }\n  .exclude-box {\n    flex-wrap: wrap;\n    align-items: flex-start;\n    align-content: flex-start;\n    width: 275px;\n    min-height: 150px;\n    max-height: 200px;\n    overflow-y: auto;\n    overflow-x: hidden;\n  }\n\n  .button-box {\n    display: flex;\n  }\n  .left-align {\n    margin: 2px auto 2px 0px;\n  }\n  .right-align {\n    margin: 2px 0px 2px auto;\n  }\n\n\n  .filter .btn-outline-secondary {\n  }\n\n  .rareiry-filter .btn-outline-secondary {\n    padding: 4px 0px !important;\n  }\n\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Lookup.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Lookup.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Lookup.vue?vue&type=template&id=451dfc10&scoped=true\"\nimport script from \"./Lookup.vue?vue&type=script&lang=js\"\nexport * from \"./Lookup.vue?vue&type=script&lang=js\"\nimport style1 from \"./Lookup.vue?vue&type=style&index=1&id=451dfc10&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"451dfc10\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\",on:{\"mousemove\":_vm.onMouseMove}},[_c('div',{staticClass:\"header\",class:{ 'hidden': !_vm.showHeader }},[_c('Navigation')],1),_c('div',{staticClass:\"content\",staticStyle:{\"margin-top\":\"70px\"},style:(_vm.style)},[_c('div',{staticClass:\"about\"},[_vm._m(0),_vm._m(1),_vm._m(2),_c('p',[_c('b-link',{attrs:{\"href\":\"https://www.legend-clover.net/\",\"target\":\"_blank\"}},[_vm._v(\"れじぇくろ！\")]),_vm._v(\"の攻略データベースです。主にバフ・デバフを検索するのを目的としています。\"),_c('br')],1),_vm._m(3),_c('p',[_vm._v(\" れじぇくろのバフ・デバフの関係は以下のようになっています。\"),_c('br'),_vm._m(4),_c('br'),_vm._v(\" つまり、大雑把には\"),_c('br'),_c('b',[_vm._v(\"一番効果の高いメインのアクティブ＋一番効果の高いサポートのアクティブ＋全タレント・パッシブ・装備効果\")]),_c('br'),_vm._v(\" と覚えておいてよいでしょう。\"),_c('br'),_c('br'),_vm._v(\" しかし、アクティブ同士の関係は厳密にはもっと複雑です。\"),_c('br'),_vm._v(\" 一部特殊なアクティブスキルがあり、これらのバフは無条件で他のアクティブと加算になります。\"),_c('br'),_vm._v(\" これらは「一時的にパッシブスキルを付与する」という扱いになっているようです。\"),_c('br'),_vm._v(\" シンボルスキルに付随する加護 (アタック～レジスト以外のバフ) はこちらに分類されます。\"),_c('br'),_vm._v(\" それ以外の該当スキルを全て以下に列挙します。大抵は条件付きバフのみが特殊枠で、他は通常のアクティブ枠です。(スキルの注釈を参照)\"),_c('br'),_vm._v(\" 単体or自己バフスキル： \"),_vm._l((_vm.specialBuffSkillsSingle),function(skill,si){return _c('span',{key:`sbss${si}`,staticStyle:{\"margin\":\"4px\"}},[_c('b-link',{ref:_vm.po,refInFor:true},[_vm._v(_vm._s(skill.name))])],1)}),_c('br'),_vm._v(\" 範囲or全体バフスキル： \"),_vm._l((_vm.specialBuffSkillsMulti),function(skill,si){return _c('span',{key:`sbsm${si}`,staticStyle:{\"margin\":\"4px\"}},[_c('b-link',{ref:_vm.po,refInFor:true},[_vm._v(_vm._s(skill.name))])],1)}),_c('br'),_c('br'),_vm._v(\" 加えて、与ダメージとダメージ耐性にはまた別のルールがあります。\"),_c('br'),_vm._v(\" これらには物理与ダメージ、魔法与ダメージ、スキル与ダメージといったバリエーションがありますが、\"),_c('br'),_vm._v(\" 異なるバリエーションであればアクティブ同士でも効果が加算になります。\"),_c('br'),_vm._v(\" 与ダメージのバリエーションは 無印、物理、魔法、スキル、範囲スキル、通常攻撃 の 6 種、\"),_c('br'),_vm._v(\" ダメージ耐性のバリエーションは 無印、物理、魔法、範囲スキル (敵専用) の 4 種になります。\"),_c('br'),_c('ul',[_c('li',[_vm._v(\"例1: \"),_c('b-link',{ref:_vm.po},[_vm._v(\"お届け物です！\")]),_vm._v(\"＋\"),_c('b-link',{ref:_vm.po},[_vm._v(\"総員、突撃用意\")]),_vm._v(\"＋\"),_c('b-link',{ref:_vm.po},[_vm._v(\"テスト勉強のお手伝い\")]),_vm._v(\"＋\"),_c('b-link',{ref:_vm.po},[_vm._v(\"道教式チアリーディング\")]),_vm._v(\"＝物理通常攻撃与ダメージ +95%\")],1),_c('li',[_vm._v(\"例2: \"),_c('b-link',{ref:_vm.po},[_vm._v(\"お届け物です！\")]),_vm._v(\"＋\"),_c('b-link',{ref:_vm.po},[_vm._v(\"総員、突撃用意\")]),_vm._v(\"＋\"),_c('b-link',{ref:_vm.po},[_vm._v(\"リトルマロース\")]),_vm._v(\"＋\"),_c('b-link',{ref:_vm.po},[_vm._v(\"発明官女\")]),_vm._v(\"＝物理範囲スキル与ダメージ +100% & 魔法範囲スキル与ダメージ +110%\")],1)]),_c('s',[_vm._v(\"なお、通常攻撃与ダメージバフは反撃には乗らないことが確認されています。(2023/04 現在。バグか仕様かは不明)\")]),_c('br'),_vm._v(\" 2023//05 のアップデートにて通常攻撃与ダメージバフは反撃にも乗るように変更されました。\"),_c('br'),_c('br'),_vm._v(\" 一部のバフ・デバフには上限があることが確認されています。\"),_c('br'),_vm._v(\" 該当するのは基本ステータス値へのデバフ (アタック・ディフェンス・マジック・レジスト)、およびダメージ耐性バフと与ダメージデバフで、\"),_c('br'),_vm._v(\" これらは 70% 以上盛っても実際に効果を発揮するのは 70% までとなります。\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"この 70% はバフ・デバフを相殺した上での上限。なので、例えば 50% のバフを得ている敵は 120% デバフでようやく上限到達となる。\")]),_c('br'),_vm._v(\" なお、基本ステータス値へのバフ、与ダメージバフ、ダメージ耐性デバフに関しては上限はないものとみられます。\"),_c('br')],2),_vm._m(5),_c('p',[_vm._v(\" クラス間の有利不利は戦闘時のアタック / マジックへのバフ・デバフという形で表現されています。\"),_c('br'),_c('b',[_vm._v(\"通常のアタックバフやマジックバフとは加算の関係\")]),_vm._v(\"になり、メイン・サポート両方に個別に適用されます。\"),_c('br'),_vm._v(\" また、これらは通常の戦闘前バフとは異なり、範囲攻撃にも適用されます。\"),_c('br'),_c('b-table',{attrs:{\"outlined\":\"\",\"bordered\":\"\",\"items\":_vm.stat.classBonusBase},scopedSlots:_vm._u([{key:\"head(攻撃側)\",fn:function(r){return [_vm._v(\" 攻撃側＼防御側\"+_vm._s(r.null)+\" \")]}},{key:\"cell()\",fn:function(r){return [_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.n2percent(r.value))}})]}}])}),_c('br'),_vm._v(\" クラス相性の書により効果が強化され、全開放時は以下になります。\"),_c('br'),_vm._v(\" また、クラス相性の書の「耐性」の効果により、不利相性で攻撃される際に敵にかかるバフが減ります。\"),_c('br'),_vm._v(\" 例: プレイヤー側のソルジャーがライダーから攻撃される際、敵にかかるバフが本来の 45% から 35% に減じる (全開放時)\"),_c('br'),_vm._v(\" なお、\"),_c('b',[_vm._v(\"同じクラス相性の書でも「与ダメージ」の効果は与ダメージバフと同列の扱い (加算の関係)\")]),_vm._v(\" になります。 \"),_c('b-table',{attrs:{\"outlined\":\"\",\"bordered\":\"\",\"items\":_vm.stat.classBonusMax},scopedSlots:_vm._u([{key:\"head(攻撃側)\",fn:function(r){return [_vm._v(\" 攻撃側＼防御側\"+_vm._s(r.null)+\" \")]}},{key:\"cell()\",fn:function(r){return [_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.n2percent(r.value))}})]}}])})],1),_vm._m(6),_c('p',[_vm._v(\" タレント、スキル、アイテム以外の方法で得られるバフに関して記載します。\"),_c('br'),_vm._v(\" これらも同系統の効果とは加算になり、競合するケースはないとみられます。\"),_c('br'),_c('br'),_vm._v(\" エンチャントのセット効果の多くはバフを持ちます。\"),_c('br'),_vm._v(\" これらのバフはメインのみが対象となります。 \"),_vm._m(7),_c('br'),_vm._v(\" マスタークラス特性にはバフを得るものがあります。\"),_c('br'),_vm._v(\" 以下いずれもマスタークラス 3 での効果で、「自ユニットの」の記載がないものはメインのみが対象です。\"),_c('br'),_vm._m(8),_c('br'),_vm._v(\" スターフォースクエストでは、所持している全キャラの☆の合計×0.2% 分 アタックとマジックへのバフを得ます。\"),_c('span',{staticClass:\"note\"},[_vm._v(\"= ☆500 で +100%。\")]),_c('br'),_c('br'),_c('b',[_vm._v(\"装備の効果は特に記載がない場合メインのみが対象\")]),_vm._v(\"である点に注意が必要です。\"),_c('br'),_vm._v(\" サポートも対象の効果は「自ユニットの」という記述があり、区別されています。\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"例: \"),_c('b-link',{ref:_vm.po},[_vm._v(\"天蝎の天鎧\")]),_vm._v(\" のダメージ耐性はメインのみが対象、\"),_c('b-link',{ref:_vm.po},[_vm._v(\"乙女の天衣\")]),_vm._v(\" のダメージ耐性はサポートも対象。\")],1),_c('br'),_vm._v(\" 同様に、アミュレットの効果はサポートのみが対象となります。シールドはサポートが倒れている場合発動しません。\"),_c('br'),_c('br'),_vm._v(\" アンドロメダの\"),_c('b-link',{ref:_vm.po},[_vm._v(\"神に勝る美\")]),_vm._v(\"やオリオンの\"),_c('b-link',{ref:_vm.po},[_vm._v(\"オレの女に手は出させない\")]),_vm._v(\"は、HP が 75% ちょうどの場合、以上以下両方の効果が発動します。\"),_c('br'),_c('span',{staticClass:\"note\"},[_c('b-link',{ref:_vm.po},[_vm._v(\"天秤の天帽\")]),_vm._v(\"などの自傷効果で 25% 減らすことができるが、最大 HP が 4 で割り切れる数でないと 76% になってしまう模様。\")],1),_c('br')],1),_vm._m(9),_c('DamageSimulator'),_c('p',[_vm._v(\" れじぇくろのダメージ計算式は以下のようになっています。\"),_c('br'),_c('code',[_vm._v(\"ダメージ＝(攻撃側の攻撃力－受ける側の防御力)×(スキルのダメージ倍率)×(与ダメージバフ・デバフ)×(ダメージ耐性バフ・デバフ)×(クリティカルダメージ倍率)×乱数×10\")]),_c('br'),_c('br'),_c('ul',[_c('li',[_vm._v(\"メイン・サポート個別にこの計算が行われる。\")]),_c('li',[_vm._v(\"最後の ×10 は 1 戦闘に 10 回攻撃が行われるということで、戦闘アニメーションONだと 1 攻撃あたりのダメージが表示される。\")]),_vm._m(10),_vm._m(11),_vm._m(12),_c('li',[_vm._v(\" ダメージ耐性デバフも同様で、無印、物理攻撃などいくつかの種類があるが、全て加算の関係。 \")]),_vm._m(13),_vm._m(14),_c('li',[_vm._v(\"乱数による振れ幅はわずかで、±2% 程度。\")]),_c('li',[_vm._v(\" 遠距離攻撃キャラが近接攻撃した場合、最終ダメージに 0.6 倍される。 \"),_c('ul',[_c('li',[_vm._v(\"メイン・サポート両方に個別に適用。\")]),_c('li',[_vm._v(\" 「遠距離攻撃キャラ」の定義は、装備やバフを含まない基礎射程が 2 であること、である模様。\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"基礎射程 1 のキャラを\"),_c('b-link',{ref:_vm.po},[_vm._v(\"蒼水晶の槍\")]),_vm._v(\"や\"),_c('b-link',{ref:_vm.po},[_vm._v(\"天導の聖火\")]),_vm._v(\"で射程を伸ばして近接攻撃しても 0.6 倍はされない。\")],1)])])]),_vm._m(15),_c('li',[_vm._v(\" 反射を持つ場合、戦闘後、生き残っていたら受けたダメージの効果量 % 分を固定ダメージとして相手に返す。 \"),_c('ul',[_c('li',[_vm._v(\"戦闘後に発動するデバフなどについても同様で、戦闘後生き残っていないと発動しない。\")]),_c('li',[_c('b-link',{ref:_vm.po},[_vm._v(\"ラストスタンド\")]),_vm._v(\"などで復活しても撃破された扱いであるらしく、発動しない。\")],1)])]),_c('li',[_vm._v(\"戦闘の前後に発生する固定ダメージは、防御力やシールドの影響を受けず、バフ・デバフも乗らない、文字通り固定値のダメージを与える。\")]),_vm._m(16),_vm._m(17),_vm._m(18)])]),_vm._m(19),_c('StatusSimulator'),_c('p',{staticClass:\"desc\"},[_vm._v(\" 基本ステータスとは、戦闘前に決定するステータス値で、キャラ画面の情報で表示されるものがそれになります。\"),_c('br'),_vm._v(\" 割合バフや「能力値の n %を加算」系の効果は基本ステータスに対する割合として機能します。戦闘力も基本ステータスから算出されます。\"),_c('br'),_vm._v(\" 基本ステータスは以下のように算出されます。\"),_c('br'),_c('br'),_vm._v(\" メインの場合：\"),_c('br'),_c('code',[_vm._v(\"基本ステータス＝(初期値＋レベル上昇値＋☆上昇値＋好感度ボーナス＋マスターボーナス)×(記憶の書＋強化ボード)×(割合エンチャント)＋装備＋固定値エンチャント\")]),_c('br'),_c('br'),_vm._v(\" サポートの場合：\"),_c('br'),_c('code',[_vm._v(\"基本ステータス＝(初期値＋レベル上昇値＋☆上昇値＋好感度ボーナス＋マスターボーナス)×(記憶の書＋強化ボード＋基本ステータス系アミュレットスキル)＋装備\")]),_c('br'),_c('br'),_c('ul',[_vm._m(20),_vm._m(21),_vm._m(22),_c('li',[_vm._v(\" マスターボーナスはクラスレベルに応じて得られる上昇値で、メインとサポートで内容が異なる \"),_c('b-table',{attrs:{\"small\":\"\",\"outlined\":\"\",\"items\":_vm.stat.masterBonus}})],1),_c('li',[_vm._v(\" 記憶の書と強化ボードの合計はカンスト時以下になる \"),_c('b-table',{attrs:{\"small\":\"\",\"outlined\":\"\",\"items\":_vm.stat.bookBonus}})],1),_c('li',[_vm._v(\" エンチャントの上限は割合と固定値でそれぞれ以下になる (SSR の場合。テクニックには影響しないので除外) \"),_c('b-table',{attrs:{\"small\":\"\",\"outlined\":\"\",\"items\":_vm.stat.enchantBonus}}),_vm._m(23)],1),_c('li',[_vm._v(\" アミュレットスキルは割合上昇のみで、上限は以下になる (こちらも SSR の場合。テクニックには影響しないので除外) \"),_c('b-table',{attrs:{\"small\":\"\",\"outlined\":\"\",\"items\":_vm.stat.amuletBonus}}),_vm._m(24)],1)])]),_vm._m(25),_c('BattlePointSimulator'),_vm._m(26)],1)]),_c('ItemPopovers')],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_c('a',{attrs:{\"name\":\"toc\",\"href\":\"#toc\"}}),_vm._v(\"目次\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"#about\"}},[_vm._v(\"このサイトについて\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#buff\"}},[_vm._v(\"バフ・デバフの競合・重複\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#class-advantage\"}},[_vm._v(\"クラス相性\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#notes\"}},[_vm._v(\"その他のバフと補足事項\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#damage\"}},[_vm._v(\"ダメージ計算\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#status\"}},[_vm._v(\"基本ステータスについて\")])]),_c('li',[_c('a',{attrs:{\"href\":\"#battle_power\"}},[_vm._v(\"戦闘力について\")])])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_c('a',{attrs:{\"name\":\"about\",\"href\":\"#about\"}}),_vm._v(\"このサイトについて\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_vm._v(\"バフ・デバフの競合・重複\"),_c('a',{attrs:{\"name\":\"buff\",\"href\":\"#buff\"}},[_vm._v(\".\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"同系統のバフが同時にかかった場合、アクティブスキル同士は競合し、一番効果が高いもののみ適用。\")]),_c('li',[_vm._v(\"ただし、メインキャラのアクティブとサポートキャラのアクティブは別枠で効果が加算になる。\")]),_c('li',[_vm._v(\"タレント、パッシブスキル、装備の効果は全て加算。ただし、同スキル・同アイテム同士に限っては競合。\")]),_c('li',[_vm._v(\"デバフも同じルール。バフとデバフが同時にかかった場合、% を足し合わせて相殺となる。\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_c('a',{attrs:{\"name\":\"class-advantage\",\"href\":\"#class-advantage\"}}),_vm._v(\"クラス相性\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_c('a',{attrs:{\"name\":\"notes\",\"href\":\"#notes\"}}),_vm._v(\"その他のバフと補足事項\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"バスター：アタック/マジック+5%、味方ターンでの戦闘時、アタック/ダメージ耐性+15%\")]),_c('li',[_vm._v(\"チャージ：アタック/マジック+5%、自ユニットのHPが75%以上の時、アタック/マジック/ディフェンス/レジスト+10%\")]),_c('li',[_vm._v(\"フェザー：アタック/マジック+5%、与ダメージ+10%、行動終了時、確率(40%)で移動+1(1ターン)\")]),_c('li',[_vm._v(\" クイック：アタック/マジック+5%、アクティブスキルでダメージを与えた時、そのスキルのクールダウン-1(発動してから2ターン毎に発動可能)\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"この「2ターン毎」は再行動では短縮できず、純粋にターン経過を要する\")])]),_c('li',[_vm._v(\"ノヴァ：アタック/マジック+5%、スキル与ダメージ+10%、範囲スキル使用時、更にスキル与ダメージ+10%\")]),_c('li',[_vm._v(\"アイアン：最大HP+10%、ダメージ耐性+15%\")]),_c('li',[_vm._v(\"リフレクト：最大HP+10%、敵ターンでの戦闘時、その戦闘後、確率(40%)で自ユニットの受けたダメージの40%を反射する\")]),_c('li',[_vm._v(\" バックアップ：最大HP+10%、自身を中心とした範囲3マス以内の全ての味方メインのディフェンス/レジスト+5%\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"バックアップバフ同士は競合となる。(= バックアップ持ち2人の範囲内にいても+5%止まり)\")])]),_c('li',[_vm._v(\"アイス：ディフェンス/レジスト+5%、戦闘後、確率(10%)で敵ユニットにフリーズ(1ターン)を付与する\")]),_c('li',[_vm._v(\"ブライト：ディフェンス/レジスト+5%、治療効果+25%\")]),_c('li',[_vm._v(\"クリスタル：ディフェンス/レジスト+5%、自ユニットのHPが50%以下の時、戦闘後、確率(40%)でメイン、サポートそれぞれのHPが最大の20%回復\")]),_c('li',[_vm._v(\"ストライク：クリティカル率+7%、クリティカルダメージ倍率+30%\")]),_c('li',[_vm._v(\"ブレイク：クリティカル率+7%、味方ターンでの戦闘時、かつ敵ユニットのHPが50%以上の時、与ダメージ+20%\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"ランサー：アタックに基礎ディフェンス値の 30% を加算、敵ターンでの戦闘時、自ユニットのディフェンス+10%\")]),_c('li',[_vm._v(\" ライダー：味方ターンでの戦闘時、自ユニットのアタックに 移動したマス×10% 加算 (最大50%)\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"再行動した場合、移動したマスは 2 回目の行動には引き継がれず、積み直しとなる。\")])]),_c('li',[_vm._v(\" エアリアル：隣接する味方ユニットが 2 体以内のとき、自ユニットの最大 HP 以外の全能力+20%\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"2 体以内 = 0 or 1 or 2 体。斜めマスは含まない。\")])]),_c('li',[_vm._v(\"シューター：自ユニットにディフェンス無視+30%付与\")]),_c('li',[_vm._v(\" ソーサラー：自ユニットにレジスト無視+30%付与\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"防御無視効果については下記ダメージ計算を参照。\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_c('a',{attrs:{\"name\":\"damage\",\"href\":\"#damage\"}}),_vm._v(\"ダメージ計算\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" 攻撃力と防御力は、物理攻撃の場合アタック&ディフェンス、魔法攻撃の場合マジック&レジスト。 \"),_c('ul',[_c('li',[_vm._v(\" 「敵ユニットのディフェンス/レジストのn%分を無視して攻撃できる」の能力を持つ場合、効果量分相手の防御力を差し引く。\"),_c('br'),_vm._v(\" ただし、この効果はディフェンス/レジストデバフへ加算する形で処理されるようで、他のデバフと合わせて 70% が効果の上限となる。 \")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" スキルのダメージ倍率は 攻撃力－防御力 の後の数値にかかる。\"),_c('span',{staticClass:\"note\"},[_vm._v(\"なので、倍率の低い範囲攻撃は高防御の敵に特別弱いわけではない。\")]),_c('ul',[_c('li',[_vm._v(\"特定の兵種に対して特攻があるスキルは、その兵種に対する専用の倍率が設定されている。\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" 与ダメージバフは無印、物理攻撃、スキル、通常攻撃など様々な種類があるが、全て加算の関係。 \"),_c('ul',[_c('li',[_vm._v(\"クラス相性の書の与ダメージアップも扱いとしては与ダメージバフらしく、加算の関係になる。\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" ダメージ耐性バフ・デバフと与ダメージバフ・デバフは掛け算の関係。 \"),_c('ul',[_c('li',[_vm._v(\"ダメージ耐性バフと与ダメージデバフはどちらも 70% が効果の上限。\"),_c('span',{staticClass:\"note\"},[_vm._v(\"両方最大まで盛ると 0.3×0.3=9% まで被ダメージを抑え込める。\")])])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" クリティカル発生時はクリティカルダメージ倍率が適用される。この倍率は 30% + バフ効果量。 \"),_c('ul',[_c('li',[_vm._v(\"クリティカル発生率は テクニック÷10 + クリティカル率バフ - 相手のクリティカル率耐性 とみられる。\")]),_c('li',[_vm._v(\" ただし、サポートの攻撃はクリティカルが発生しない模様。\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"ユニット対象バフでクリティカル率 100% にしてもサポートのダメージにはクリティカルダメージ倍率が適用されない。\")])])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" 2回攻撃を持つ場合、最初の一斉攻撃の後、相手が生き残っていたら再度攻撃を行う。\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"ギルクエ EX で高スコアを狙う場合、最初の一斉攻撃で倒れない相手を狙う。\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" サポートは常に先に攻撃の対象になり、生きている限りダメージを受けるのはサポートになる。(後述の範囲攻撃を除く) \"),_c('ul',[_c('li',[_vm._v(\"サポートが倒れた時、超過分のダメージがメインに流れることはない。\"),_c('span',{staticClass:\"note\"},[_vm._v(\"= HP1 でも 1 発は攻撃を反らせる。\")])]),_c('li',[_vm._v(\"サポートは倒れると攻撃にも参加しなくなる。アミュレットのシールドも発動しなくなる。\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" 範囲攻撃の場合、計算式は同じだが、戦闘の前後に発動するバフ・デバフなどが発動しないこと、メインとサポート両方に攻撃が行くこと、\"),_c('br'),_vm._v(\"サポートが攻撃に参加しないことなどが異なる。 \"),_c('ul',[_c('li',[_vm._v(\"ダメージを与えたときに発動する効果などは発動する。\")]),_c('li',[_vm._v(\"クリティカル判定はメイン・サポート個別に行われる。\")]),_c('li',[_vm._v(\" 範囲攻撃によりメインがサポートより先に倒れた場合、ユニット自体撃破された扱いになる。\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"つまり、範囲攻撃の連打でやられるようなケースでは、サポートをいくら固くしても対策にならない。\")])])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" 単体攻撃でありながら範囲攻撃のようにメインとサポート両方同時攻撃のスキルも存在する。 \"),_c('ul',[_c('li',[_vm._v(\"扱いとしては範囲攻撃 (非戦闘攻撃) とみられ、戦闘の前後に発動するバフ・デバフが発動せず、シールドやガードも無視する。\")]),_c('li',[_vm._v(\"スターフォースクエストの敵の単体攻撃スキルはこのタイプ。2 回攻撃のようなものなので、知らないと予想外のダメージに驚くことになる。\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_c('a',{attrs:{\"name\":\"status\",\"href\":\"#status\"}}),_vm._v(\"基本ステータスについて\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\" 初期値、レベル上昇値、☆による上昇値 はキャラ固有 \"),_c('ul',[_c('li',[_vm._v(\"レベルと☆による上昇は 1レベル / 1☆ あたりの上昇量が決まっており、リニアに増えていく方式\")]),_c('li',[_vm._v(\"1☆ あたりの上昇量は大体 4 レベル分くらいになっている模様\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_c('b',[_vm._v(\"エンゲージは基本ステータスには影響しない\")]),_c('ul',[_c('li',[_vm._v(\"戦闘力にのみ若干影響がある（\"),_c('a',{attrs:{\"href\":\"#battle_power\"}},[_vm._v(\"戦闘力\")]),_vm._v(\"を参照）\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_vm._v(\"好感度ボーナスは全開放時 \"),_c('span',{staticStyle:{\"background\":\"white\"}},[_vm._v(\"[100, 25, 15, 25, 15, 0]\")]),_vm._v(\" ([HP, アタック, ディフェンス, マジック, レジスト, テクニック] の順、以後共通)\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"アクセサリの場合他にクリティカル率があり、こちらは 15% が上限。テクニックとは別物で基本ステータスには影響しない\")]),_c('li',[_vm._v(\" エンチャントの2セット特典 (バスターの アタック/マジック+5% など) も基本ステータスへの割合強化として扱われる\"),_c('br'),_c('span',{staticClass:\"note\"},[_vm._v(\"ストライクの2セット特典の クリティカル率+7% は基本ステータスには影響しないため、戦闘力的には不利を被る\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"スキル1は戦闘時に効果を発揮するタイプで、基本ステータスには影響しない\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_c('a',{attrs:{\"name\":\"battle_power\",\"href\":\"#battle_power\"}}),_vm._v(\"戦闘力について\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\" 戦闘力は以下のように算出されます。\"),_c('br'),_c('br'),_c('code',[_vm._v(\"戦闘力＝A(ステータスに基づく基礎値) × B(☆やマスターレベルなどによる倍率)\")]),_c('br'),_vm._v(\" A の内訳：\"),_c('br'),_c('code',[_vm._v(\"HP×0.05＋攻撃力×2×(1.0＋テクニック×0.0003)＋ディフェンス×2＋レジスト×2\")]),_c('br'),_vm._v(\" B の内訳：\"),_c('br'),_c('code',[_vm._v(\" 1.0＋☆の数×0.1＋マスターレベル×0.1\"),_c('br'),_vm._v(\" ＋メインの使用スキルコスト×0.03＋エンゲージ後スキルの数×0.05＋メインの装備の☆合計×0.02＋エンチャントが4セット揃っている場合0.1\"),_c('br'),_vm._v(\" ＋サポートのスキルの数×0.05 \")]),_c('br'),_c('br'),_c('ul',[_c('li',[_vm._v(\" 攻撃力はそのキャラの攻撃タイプがアタックであればアタック、マジックであればマジック \"),_c('ul',[_c('li',[_vm._v(\"アタックキャラのマジック、マジックキャラのアタックは戦闘力に計上されない\")])])]),_c('li',[_vm._v(\" テクニックはクリティカルを模していると見られ、1000 で攻撃力 1.3 倍相当の効果となる \"),_c('ul',[_c('li',[_vm._v(\"1000 が計上される上限となっているかもしれないが、現状そこまで伸ばす方法がなく検証不能\")])])]),_c('li',[_vm._v(\" ステータス値はメインとサポートの合計 \"),_c('ul',[_c('li',[_vm._v(\"サポートの攻撃力にもメインのテクニックによる割合が乗る\")]),_c('li',[_vm._v(\"メインがアタック、サポートがマジック (またはその逆) の場合でも攻撃力として合算され、それにテクニックによる割合が乗る\")])])]),_c('li',[_vm._v(\" ☆の数やマスターレベルもメインとサポートの合計 \"),_c('ul',[_c('li',[_vm._v(\"倍率の加算になるため、サポートとリンクすると戦闘力は単純に合計するよりもずっと大きくなる\")])])]),_c('li',[_vm._v(\"エンチャントは 4 セット揃えたとき倍率に 0.1 が加算される\")]),_c('li',[_vm._v(\" 装備の効果は基本ステータス値が上がるもののみ戦闘力に計上される \"),_c('ul',[_c('li',[_vm._v(\"サポートのアミュレットも同様で、戦闘開始後に効果を発揮するもの (割合バフやステータス値の n% を加算系など) は計上されない\")]),_c('li',[_vm._v(\"アクセサリのエンチャントのクリティカル率も計上されない\")])])])])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"panel\"},[_c('b-container',[_c('b-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},[_c('h5',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\"ダメージシミュレータ\")])])],1)],1),_c('div',{staticClass:\"flex\"},[_c('div',[_c('b-container',[_c('b-form-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',[_vm._v(\"攻撃側：メイン\")])])],1),_vm._l((_vm.main),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{class:_vm.getParamClass(param),staticStyle:{\"width\":\"14em\"},attrs:{\"for\":`dmg-main-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`dmg-main-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max,\"disabled\":param.disabled()},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e(),(param.type == 'bool')?_c('b-form-checkbox',{staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`dmg-main-${name}`,\"size\":\"sm\",\"disabled\":param.disabled(),\"plain\":\"\"},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", $$v)},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1),_c('div',[_c('b-container',[_c('b-form-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',[_vm._v(\"攻撃側：サポート \"),_c('b-form-checkbox',{attrs:{\"inline\":\"\",\"plain\":\"\"},model:{value:(_vm.supportEnabled),callback:function ($$v) {_vm.supportEnabled=$$v},expression:\"supportEnabled\"}})],1)])],1),_vm._l((_vm.support),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{class:_vm.getParamClass(param),staticStyle:{\"width\":\"14em\"},attrs:{\"for\":`dmg-support-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`dmg-support-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max,\"disabled\":param.disabled()},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e(),(param.type == 'bool')?_c('b-form-checkbox',{staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`dmg-support-${name}`,\"size\":\"sm\",\"plain\":\"\",\"disabled\":param.disabled()},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", $$v)},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1),_c('div',[_c('b-container',[_c('b-form-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',[_vm._v(\"受け側\")])])],1),_vm._l((_vm.attacked),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{class:_vm.getParamClass(param),staticStyle:{\"width\":\"11em\"},attrs:{\"for\":`dmg-attacked-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`dmg-attacked-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1)]),_c('div',[_c('b-container',[_c('h5',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\"ダメージ: \"+_vm._s(_vm.dmgResult))]),_c('b-button',{on:{\"click\":function($event){return _vm.onCopyUrl()}}},[_vm._v(\"パラメータを URL としてコピー\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"panel\">\n    <b-container>\n      <b-row>\n        <b-col style=\"text-align:center\">\n          <h5 style=\"margin-bottom: 10px\">ダメージシミュレータ</h5>\n        </b-col>\n      </b-row>\n    </b-container>\n    <div class=\"flex\">\n      <div>\n        <b-container>\n          <b-form-row>\n            <b-col style=\"text-align:center\">\n              <h6>攻撃側：メイン</h6>\n            </b-col>\n          </b-form-row>\n          <b-form-row v-for=\"(param, name, index) in main\" :key=\"index\">\n            <b-col style=\"text-align: right\" align-self=\"end\">\n              <label style=\"width: 14em\" :class=\"getParamClass(param)\" :for=\"`dmg-main-${name}`\">{{param.label}}</label>\n            </b-col>\n            <b-col>\n              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 5em\" :id=\"`dmg-main-${name}`\" v-model.number=\"param.value\"\n                            size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\" :disabled=\"param.disabled()\"></b-form-input>\n              <b-form-checkbox style=\"width: 5em\" :id=\"`dmg-main-${name}`\" v-model=\"param.value\" size=\"sm\"\n                               :disabled=\"param.disabled()\" plain v-if=\"param.type == 'bool'\"></b-form-checkbox>\n            </b-col>\n          </b-form-row>\n        </b-container>\n      </div>\n      <div>\n        <b-container>\n          <b-form-row>\n            <b-col style=\"text-align:center\">\n              <h6>攻撃側：サポート <b-form-checkbox inline plain v-model=\"supportEnabled\" /></h6>\n            </b-col>\n          </b-form-row>\n          <b-form-row v-for=\"(param, name, index) in support\" :key=\"index\">\n            <b-col style=\"text-align: right\" align-self=\"end\">\n              <label style=\"width: 14em\" :class=\"getParamClass(param)\" :for=\"`dmg-support-${name}`\">{{param.label}}</label>\n            </b-col>\n            <b-col>\n              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 5em\" :id=\"`dmg-support-${name}`\" v-model.number=\"param.value\"\n                            size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\" :disabled=\"param.disabled()\"></b-form-input>\n              <b-form-checkbox style=\"width: 5em\" :id=\"`dmg-support-${name}`\" v-model=\"param.value\" size=\"sm\" plain\n                               :disabled=\"param.disabled()\" v-if=\"param.type == 'bool'\"></b-form-checkbox>\n            </b-col>\n          </b-form-row>\n        </b-container>\n      </div>\n      <div>\n        <b-container>\n          <b-form-row>\n            <b-col style=\"text-align: center\">\n              <h6>受け側</h6>\n            </b-col>\n          </b-form-row>\n          <b-form-row v-for=\"(param, name, index) in attacked\" :key=\"index\">\n            <b-col style=\"text-align:right\" align-self=\"end\">\n              <label style=\"width: 11em\" :class=\"getParamClass(param)\" :for=\"`dmg-attacked-${name}`\">{{param.label}}</label>\n            </b-col>\n            <b-col>\n              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 5em\" :id=\"`dmg-attacked-${name}`\" v-model.number=\"param.value\"\n                            size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n            </b-col>\n          </b-form-row>\n        </b-container>\n      </div>\n    </div>\n    <div>\n      <b-container>\n        <h5 style=\"margin-bottom: 10px\">ダメージ: {{dmgResult}}</h5>\n        <b-button @click=\"onCopyUrl()\">パラメータを URL としてコピー</b-button>\n      </b-container>\n    </div>\n  </div>\n</template>\n\n<script>\nimport common from \"../common\";\n\nexport default {\n  name: 'DamageSimulator',\n  props: {\n  },\n  mixins: [common],\n\n  data() {\n    return {\n      mainEnabled: true,\n      supportEnabled: true,\n      main: {\n        atk: {\n          label: \"攻撃力\",\n          type: \"number\",\n          min: 0,\n          value: 1000,\n          disabled: () => !this.mainEnabled,\n        },\n        atkBuf: {\n          label: \"攻撃力バフ (%)\",\n          type: \"number\",\n          min: -70,\n          value: 0,\n          disabled: () => !this.mainEnabled,\n        },\n        skillDamageRate: {\n          label: \"スキルダメージ倍率\",\n          type: \"number\",\n          value: 1.0,\n          disabled: () => !this.mainEnabled,\n        },\n        damageBuf: {\n          label: \"与ダメージバフ (%)\",\n          type: \"number\",\n          min: -70,\n          value: 0,\n          disabled: () => !this.mainEnabled,\n        },\n        critical: {\n          label: \"クリティカル\",\n          type: \"bool\",\n          value: true,\n          disabled: () => !this.mainEnabled,\n        },\n        criticalDamageRate: {\n          label: \"クリティカルダメージ倍率 (%)\",\n          type: \"number\",\n          value: 30,\n          disabled: () => !this.mainEnabled || !this.main.critical.value,\n        },\n        doubleAttack: {\n          label: \"2回攻撃\",\n          type: \"bool\",\n          value: false,\n          disabled: () => !this.mainEnabled,\n        },\n        rangedPenalty: {\n          label: \"遠距離キャラの近接ペナルティ\",\n          type: \"bool\",\n          value: false,\n          disabled: () => !this.mainEnabled,\n        },\n      },\n      support: {\n        atk: {\n          label: \"攻撃力\",\n          type: \"number\",\n          min: 0,\n          value: 1000,\n          disabled: () => !this.supportEnabled,\n        },\n        atkBuf: {\n          label: \"攻撃力バフ (%)\",\n          type: \"number\",\n          min: -70,\n          value: 0,\n          disabled: () => !this.supportEnabled,\n        },\n        damageBuf: {\n          label: \"与ダメージバフ (%)\",\n          type: \"number\",\n          min: -70,\n          value: 0,\n          disabled: () => !this.supportEnabled,\n        },\n        rangedPenalty: {\n          label: \"遠距離キャラの近接ペナルティ\",\n          type: \"bool\",\n          value: false,\n          disabled: () => !this.supportEnabled,\n        },\n      },\n      attacked: {\n        def: {\n          label: \"防御力\",\n          type: \"number\",\n          value: 100,\n          disabled: () => false,\n        },\n        defBuf: {\n          label: \"防御力バフ (%)\",\n          type: \"number\",\n          min: -70,\n          value: 0,\n          disabled: () => false,\n        },\n        damageRate: {\n          label: \"ダメージ耐性 (%)\",\n          type: \"number\",\n          max: 70,\n          value: 0,\n          disabled: () => false,\n        },\n        shield: {\n          label: \"シールド\",\n          type: \"number\",\n          value: 0,\n          disabled: () => false,\n        },\n      }\n    };\n  },\n\n  created() {\n    this.parseParamsUrl(window.location.href);\n  },\n  \n  mounted() {\n  },\n\n  methods: {\n    getParamClass(param) {\n      return param.disabled() ? \"disabled\" : \"\";\n    },\n\n    calcDamage() {\n      const attacked = this.attacked;\n      const main = this.main;\n      const support = this.support;\n\n      const def = attacked.def.value * (1.0 + attacked.defBuf.value * 0.01);\n      const damageResist = 1.0 - this.toNumber(attacked.damageRate.value) * 0.01;\n      const shield = attacked.shield.value;\n\n      let result = 0;\n      if (this.mainEnabled) {\n        const atk = main.atk.value * (1.0 + main.atkBuf.value * 0.01);\n        const skillDamageRate = this.toNumber(main.skillDamageRate.value);\n        const damageBuf = 1.0 + this.toNumber(main.damageBuf.value) * 0.01;\n        const criticalDamageRate = 1.0 + this.toNumber(main.criticalDamageRate.value) * 0.01;\n\n        let damage = (atk - def) * skillDamageRate * damageBuf * damageResist;\n        if (main.critical.value)\n          damage *= criticalDamageRate;\n        if (main.rangedPenalty.value)\n          damage *= 0.6;\n\n        result += Math.max(Math.round(damage), 1) * (main.doubleAttack.value ? 20 : 10);\n      }\n      if (this.supportEnabled) {\n        const atk = support.atk.value * (1.0 + support.atkBuf.value * 0.01);\n        const damageBuf = 1.0 + this.toNumber(support.damageBuf.value) * 0.01;\n\n        let damage = (atk - def) * damageBuf * damageResist;\n        if (support.rangedPenalty.value)\n          damage *= 0.6;\n\n        result += Math.max(Math.round(damage), 1) * 10;\n      }\n\n      return Math.max(result - shield, 0);\n    },\n\n    getParamsUrl() {\n      let params = [];\n\n      for (const v of Object.values(this.main))\n        params.push(v.value);\n\n      params.push(this.supportEnabled);\n      for (const v of Object.values(this.support))\n        params.push(v.value);\n\n      for (const v of Object.values(this.attacked))\n        params.push(v.value);\n\n      let url = window.location.href.replace(/\\?.+/, '').replace(/#.+/, '');\n      url += \"?dmg=\" + params.join(',') + \"#damage\";\n      return url;\n    },\n\n    parseParamsUrl(url) {\n      url = decodeURIComponent(url);\n      let q = url.match(/\\?dmg=([^#]+)/);\n      if (q) {\n        let params = q[1].split(',').map(this.parseValue);\n\n        for (const v of Object.values(this.main))\n          v.value = params.shift();\n\n        this.supportEnabled = params.shift();\n        for (const v of Object.values(this.support))\n          v.value = params.shift();\n\n        for (const v of Object.values(this.attacked))\n          v.value = params.shift();\n\n        return true;\n      }\n      return false;\n    },\n\n    onCopyUrl() {\n      const url = this.getParamsUrl();\n      this.copyToClipboard(url);\n      this.toast(`コピーしました`);\n    },\n  },\n\n  computed: {\n    dmgResult() {\n      return this.calcDamage();\n    },\n  }\n};\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DamageSimulator.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DamageSimulator.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DamageSimulator.vue?vue&type=template&id=7f548e16&scoped=true\"\nimport script from \"./DamageSimulator.vue?vue&type=script&lang=js\"\nexport * from \"./DamageSimulator.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f548e16\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"panel\"},[_c('b-container',[_c('b-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},[_c('h5',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\"戦闘力シミュレータ\")])])],1)],1),_c('div',{staticClass:\"flex\"},[_c('div',[_c('b-container',[_c('b-form-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',[_vm._v(\"メインキャラ \"),_c('b-form-checkbox',{attrs:{\"inline\":\"\",\"plain\":\"\",\"id\":\"bp-main-enabled\"},model:{value:(_vm.mainEnabled),callback:function ($$v) {_vm.mainEnabled=$$v},expression:\"mainEnabled\"}})],1)])],1),_vm._l((_vm.main),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{class:_vm.getParamClass(param),staticStyle:{\"width\":\"11em\"},attrs:{\"for\":`bp-main-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`bp-main-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max,\"disabled\":param.disabled()},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e(),(param.type == 'bool')?_c('b-form-checkbox',{staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`bp-main-${name}`,\"size\":\"sm\",\"plain\":\"\",\"disabled\":param.disabled()},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", $$v)},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1),_c('div',[_c('b-container',[_c('b-form-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',[_vm._v(\"サポートキャラ \"),_c('b-form-checkbox',{attrs:{\"inline\":\"\",\"plain\":\"\",\"id\":\"bp-support-enabled\"},model:{value:(_vm.supportEnabled),callback:function ($$v) {_vm.supportEnabled=$$v},expression:\"supportEnabled\"}})],1)])],1),_vm._l((_vm.support),function(param,name,index){return _c('b-form-row',{key:index},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{class:_vm.getParamClass(param),staticStyle:{\"width\":\"10em\"},attrs:{\"for\":`bp-support-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`bp-support-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max,\"disabled\":param.disabled()},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1)]),_c('div',[_c('b-container',[_c('h5',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\"戦闘力: \"+_vm._s(_vm.bpResult))]),_c('b-button',{on:{\"click\":function($event){return _vm.onCopyUrl()}}},[_vm._v(\"パラメータを URL としてコピー\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"panel\">\n    <b-container>\n      <b-row>\n        <b-col style=\"text-align:center\">\n          <h5 style=\"margin-bottom: 10px\">戦闘力シミュレータ</h5>\n        </b-col>\n      </b-row>\n    </b-container>\n    <div class=\"flex\">\n      <div>\n        <b-container>\n          <b-form-row>\n            <b-col style=\"text-align:center\">\n              <h6>メインキャラ <b-form-checkbox inline plain id=\"bp-main-enabled\" v-model=\"mainEnabled\" /></h6>\n            </b-col>\n          </b-form-row>\n          <b-form-row v-for=\"(param, name, index) in main\" :key=\"index\">\n            <b-col style=\"text-align: right\" align-self=\"end\">\n              <label style=\"width: 11em\" :class=\"getParamClass(param)\" :for=\"`bp-main-${name}`\">{{param.label}}</label>\n            </b-col>\n            <b-col>\n              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 5em\" :id=\"`bp-main-${name}`\" v-model.number=\"param.value\"\n                            size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\" :disabled=\"param.disabled()\"></b-form-input>\n              <b-form-checkbox style=\"width: 5em\" :id=\"`bp-main-${name}`\" v-model=\"param.value\" size=\"sm\" plain\n                               :disabled=\"param.disabled()\" v-if=\"param.type == 'bool'\"></b-form-checkbox>\n            </b-col>\n          </b-form-row>\n        </b-container>\n      </div>\n      <div>\n        <b-container>\n          <b-form-row>\n            <b-col style=\"text-align: center\">\n              <h6>サポートキャラ <b-form-checkbox inline plain id=\"bp-support-enabled\" v-model=\"supportEnabled\" /></h6>\n            </b-col>\n          </b-form-row>\n          <b-form-row v-for=\"(param, name, index) in support\" :key=\"index\">\n            <b-col style=\"text-align:right\" align-self=\"end\">\n              <label style=\"width: 10em\" :class=\"getParamClass(param)\" :for=\"`bp-support-${name}`\">{{param.label}}</label>\n            </b-col>\n            <b-col>\n              <b-form-input v-if=\"param.type == 'number'\" style=\"width: 5em\" :id=\"`bp-support-${name}`\" v-model.number=\"param.value\"\n                            size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\" :disabled=\"param.disabled()\"></b-form-input>\n            </b-col>\n          </b-form-row>\n        </b-container>\n      </div>\n    </div>\n    <div>\n      <b-container>\n        <h5 style=\"margin-bottom: 10px\">戦闘力: {{bpResult}}</h5>\n        <b-button @click=\"onCopyUrl()\">パラメータを URL としてコピー</b-button>\n      </b-container>\n    </div>\n  </div>\n</template>\n\n<script>\nimport common from \"../common\";\n\nexport default {\n  name: 'BattlePointSimulator',\n  props: {\n  },\n  mixins: [common],\n\n  data() {\n    return {\n      mainEnabled: true,\n      supportEnabled: true,\n      main: {\n        stars: {\n          label: \"⭐\",\n          type: \"number\",\n          min: 1,\n          max: 6,\n          value: 6,\n          disabled: () => !this.mainEnabled,\n        },\n        master: {\n          label: \"マスターレベル\",\n          type: \"number\",\n          min: 0,\n          max: 3,\n          value: 3,\n          disabled: () => !this.mainEnabled,\n        },\n        hp: {\n          label: \"HP\",\n          type: \"number\",\n          min: 0,\n          value: 15000,\n          disabled: () => !this.mainEnabled,\n        },\n        atk: {\n          label: \"アタック / マジック\",\n          type: \"number\",\n          min: 0,\n          value: 1500,\n          disabled: () => !this.mainEnabled,\n        },\n        def: {\n          label: \"ディフェンス\",\n          type: \"number\",\n          min: 0,\n          value: 500,\n          disabled: () => !this.mainEnabled,\n        },\n        res: {\n          label: \"レジスト\",\n          type: \"number\",\n          min: 0,\n          value: 500,\n          disabled: () => !this.mainEnabled,\n        },\n        tec: {\n          label: \"テクニック\",\n          type: \"number\",\n          min: 0,\n          value: 100,\n          disabled: () => !this.mainEnabled,\n        },\n        skillCost: {\n          label: \"スキルコスト\",\n          type: \"number\",\n          value: 6,\n          min: 0,\n          max: 6,\n          disabled: () => !this.mainEnabled,\n        },\n        eqStars: {\n          label: \"装備の⭐合計\",\n          type: \"number\",\n          min: 0,\n          max: 20,\n          value: 20,\n          disabled: () => !this.mainEnabled,\n        },\n        enchant: {\n          label: \"エンチャント4セット\",\n          type: \"bool\",\n          value: true,\n          disabled: () => !this.mainEnabled,\n        },\n        engageSkillCount: {\n          label: \"エンゲージ後スキルの数\",\n          type: \"number\",\n          value: 0,\n          disabled: () => !this.mainEnabled,\n        },\n      },\n      support: {\n        stars: {\n          label: \"⭐\",\n          type: \"number\",\n          min: 1,\n          max: 6,\n          value: 6,\n          disabled: () => !this.supportEnabled,\n        },\n        master: {\n          label: \"マスターレベル\",\n          type: \"number\",\n          min: 0,\n          max: 3,\n          value: 3,\n          disabled: () => !this.supportEnabled,\n        },\n        hp: {\n          label: \"HP\",\n          type: \"number\",\n          min: 0,\n          value: 15000,\n          disabled: () => !this.supportEnabled,\n        },\n        atk: {\n          label: \"アタック / マジック\",\n          type: \"number\",\n          min: 0,\n          value: 1500,\n          disabled: () => !this.supportEnabled,\n        },\n        def: {\n          label: \"ディフェンス\",\n          type: \"number\",\n          min: 0,\n          value: 500,\n          disabled: () => !this.supportEnabled,\n        },\n        res: {\n          label: \"レジスト\",\n          type: \"number\",\n          min: 0,\n          value: 500,\n          disabled: () => !this.supportEnabled,\n        },\n        skills: {\n          label: \"解放済みスキル\",\n          type: \"number\",\n          min: 1,\n          max: 3,\n          value: 3,\n          disabled: () => !this.supportEnabled,\n        },\n      }\n    };\n  },\n\n  created() {\n    this.parseParamsUrl(window.location.href);\n  },\n\n  methods: {\n    getParamClass(param) {\n      return param.disabled() ? \"disabled\" : \"\";\n    },\n\n    calcBattlePower() {\n      let hp = 0;\n      let atk = 0;\n      let def = 0;\n      let res = 0;\n      let tec = 0;\n      let rate = 1.0;\n      if (this.mainEnabled) {\n        const params = this.main;\n        hp += params.hp.value;\n        atk += params.atk.value;\n        def += params.def.value;\n        res += params.res.value;\n        tec += params.tec.value;\n        rate += params.stars.value * 0.1;\n        rate += params.master.value * 0.1;\n        rate += params.skillCost.value * 0.03;\n        rate += params.eqStars.value * 0.02;\n        rate += params.engageSkillCount.value * 0.05;\n        if (params.enchant.value)\n          rate += 0.1;\n      }\n      if (this.supportEnabled) {\n        const params = this.support;\n        hp += params.hp.value;\n        atk += params.atk.value;\n        def += params.def.value;\n        res += params.res.value;\n        rate += params.stars.value * 0.1;\n        rate += params.master.value * 0.1;\n        rate += params.skills.value * 0.05;\n      }\n      return Math.round(((hp * 0.05) + (atk * 2 * (1.0 + tec * 0.0003)) + (def * 2) + (res * 2)) * rate);\n    },\n\n    onCopyUrl() {\n      const url = this.getParamsUrl();\n      this.copyToClipboard(url);\n      this.toast(`コピーしました`);\n    },\n\n\n    getParamsUrl() {\n      let params = [];\n\n      params.push(this.mainEnabled);\n      for (const v of Object.values(this.main))\n        params.push(v.value);\n\n      params.push(this.supportEnabled);\n      for (const v of Object.values(this.support))\n        params.push(v.value);\n\n      let url = window.location.href.replace(/\\?.+/, '').replace(/#.+/, '');\n      url += \"?bp=\" + params.join(',') + \"#battle_power\";\n      return url;\n    },\n\n    parseParamsUrl(url) {\n      url = decodeURIComponent(url);\n      let q = url.match(/\\?bp=([^#]+)/);\n      if (q) {\n        let params = q[1].split(',').map(this.parseValue);\n\n        this.mainEnabled = params.shift();\n        for (const v of Object.values(this.main))\n          v.value = params.shift();\n\n        this.supportEnabled = params.shift();\n        for (const v of Object.values(this.support))\n          v.value = params.shift();\n\n        return true;\n      }\n      return false;\n    },\n  },\n\n  computed: {\n    bpResult() {\n      return this.calcBattlePower();\n    },\n  }\n};\n</script>\n\n<style scoped>\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BattlePointSimulator.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BattlePointSimulator.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./BattlePointSimulator.vue?vue&type=template&id=464b59f5&scoped=true\"\nimport script from \"./BattlePointSimulator.vue?vue&type=script&lang=js\"\nexport * from \"./BattlePointSimulator.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"464b59f5\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"panel\",staticStyle:{\"padding\":\"10px 0px 0px 0px\"}},[(!_vm.embed)?_c('b-container',[_c('b-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},[_c('h5',{staticStyle:{\"margin-bottom\":\"5px\"}},[_vm._v(\"ステータスシミュレータ\")])])],1)],1):_vm._e(),_c('b-tabs',{model:{value:(_vm.tabIndex),callback:function ($$v) {_vm.tabIndex=$$v},expression:\"tabIndex\"}},[_c('b-tab',{ref:\"tabMainChr\",staticStyle:{\"padding\":\"10px 10px 10px 10px\"},attrs:{\"title\":\"メインキャラ\"}},[_c('div',{staticClass:\"flex\"},[_c('div',[_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"基本情報\")])]),_vm._l((_vm.main),function(param,name,i){return _c('b-form-row',{key:i},[_c('b-col',{staticStyle:{\"text-align\":\"right\",\"margin\":\"auto 0 auto 0\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"8em\"},attrs:{\"for\":`stat-main-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`ss${_vm.uid}-main-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e(),(param.type == 'bool')?_c('b-form-checkbox',{staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`ss${_vm.uid}-main-${name}`,\"size\":\"sm\",\"plain\":\"\"},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", $$v)},expression:\"param.value\"}}):_vm._e(),(param.type == 'character')?_c('b-button',{staticClass:\"paddingless small-margin\",attrs:{\"variant\":\"outline-secondary\",\"id\":`ss${_vm.uid}-main-${name}`}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getSkillIcon(param.value),\"title\":_vm.descToTitle(param.value),\"width\":\"100\",\"height\":\"100\"}}),_c('ChrSelector',{attrs:{\"target\":`ss${_vm.uid}-main-${name}`,\"chrs\":_vm.mainChrs,\"nullable\":_vm.embed ? true : false,\"classfilter\":\"\",\"symbolfilter\":\"\",\"closeonclick\":\"\"},on:{\"click\":_vm.setMainChr}})],1):_vm._e()],1)],1)})],2)],1),_c('div',[_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"記憶の書＋強化ボード\")])]),_vm._l((_vm.mainBoosts),function(param,name,i){return _c('b-form-row',{key:i},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"9em\"},attrs:{\"for\":`ss${_vm.uid}-main-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`ss${_vm.uid}-main-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1),_c('div',{ref:\"mainSkillField\"},[_c('b-container',[_c('div',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"スキル\")])]),_c('b-form-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},_vm._l((_vm.mainSkills),function(skill,si){return _c('b-button',{key:si,staticClass:\"paddingless small-margin\",attrs:{\"id\":`ss${_vm.uid}-main-skill${si}`,\"variant\":\"outline-secondary\",\"draggable\":\"\"},on:{\"dragstart\":function($event){return _vm.onSkillDrag(si)},\"drop\":function($event){return _vm.onSkillDrop(si)},\"dragover\":function($event){$event.preventDefault();return _vm.dummyHandler()}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getSkillIcon(skill),\"title\":_vm.descToTitle(skill),\"width\":\"50\",\"height\":\"50\"}}),_c('SkillSelector',{attrs:{\"target\":`ss${_vm.uid}-main-skill${si}`,\"nullable\":\"\",\"closeonclick\":\"\",\"skills\":_vm.mainSkillList,\"excludes\":_vm.mainSkills},on:{\"click\":function($event){return _vm.setArrayElement(_vm.mainSkills, si, $event)}}})],1)}),1)],1)],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"装備\")])]),_c('b-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},_vm._l((_vm.mainItems),function(item,i){return _c('span',{key:i},[_c('b-button',{staticClass:\"paddingless small-margin\",attrs:{\"variant\":\"outline-secondary\",\"id\":`ss${_vm.uid}-main-item${i}`}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getSkillIcon(item),\"title\":_vm.descToTitle(item),\"width\":\"50\",\"height\":\"50\"}}),_c('ItemSelector',{attrs:{\"target\":`ss${_vm.uid}-main-item${i}`,\"items\":_vm.items,\"slotfilter\":_vm.mainItemSlots[i],\"classfilter\":_vm.mainClass,\"nullable\":\"\",\"closeonclick\":\"\"},on:{\"click\":function($event){return _vm.setArrayElement(_vm.mainItems, i, $event)}}})],1)],1)}),0)],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"エンチャント\")])]),_c('b-form-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},_vm._l((_vm.mainEnchantPassive),function(item,i){return _c('span',{key:i},[_c('b-button',{staticClass:\"paddingless small-margin\",attrs:{\"variant\":\"outline-secondary\",\"id\":`ss${_vm.uid}-main-enchant${i}`}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getSkillIcon(item),\"title\":_vm.descToTitle(item),\"width\":\"50\",\"height\":\"50\"}}),_c('SkillSelector',{attrs:{\"target\":`ss${_vm.uid}-main-enchant${i}`,\"nullable\":\"\",\"closeonclick\":\"\",\"skills\":_vm.getEnchantPassiveList()},on:{\"click\":function($event){return _vm.setArrayElement(_vm.mainEnchantPassive, i, $event)}}})],1)],1)}),0)],1),_vm._l((_vm.mainEnchants),function(param,name,i){return _c('b-form-row',{key:'enchant' + i},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"10em\"},attrs:{\"for\":`ss${_vm.uid}-main-enchant-${name}P`}},[_vm._v(_vm._s(param.label)+\" (%)\")])]),_c('b-col',[_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`ss${_vm.uid}-main-enchant-${name}P`,\"size\":\"sm\",\"type\":\"number\",\"min\":0},model:{value:(param.valueP),callback:function ($$v) {_vm.$set(param, \"valueP\", _vm._n($$v))},expression:\"param.valueP\"}})],1),_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"4em\"},attrs:{\"for\":`ss${_vm.uid}-main-enchant-${name}F`}},[_vm._v(\" (固定値)\")])]),_c('b-col',[_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`ss${_vm.uid}-main-enchant-${name}F`,\"size\":\"sm\",\"type\":\"number\",\"min\":0},model:{value:(param.valueF),callback:function ($$v) {_vm.$set(param, \"valueF\", _vm._n($$v))},expression:\"param.valueF\"}})],1)],1)})],2)],1)]),_c('div',[(_vm.main.character.value)?_c('div',{staticClass:\"status flex\"},[_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('HP'),\"title\":\"HP\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statMainResult[0]))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('アタック'),\"title\":\"アタック\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statMainResult[1]))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('ディフェンス'),\"title\":\"ディフェンス\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statMainResult[2]))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('マジック'),\"title\":\"マジック\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statMainResult[3]))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('レジスト'),\"title\":\"レジスト\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statMainResult[4]))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('テクニック'),\"title\":\"テクニック\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statMainResult[5]))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"戦闘力:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(_vm.statMainResult[6]))])]),(_vm.statMainResult[7])?_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"サポート込み戦闘力:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(_vm.statMainResult[7]))])]):_vm._e()]):_vm._e()])]),_c('b-tab',{ref:\"tabSupportChr\",staticStyle:{\"padding\":\"10px 10px 10px 10px\"},attrs:{\"title\":\"サポートキャラ\"}},[_c('div',{staticClass:\"flex\"},[_c('div',[_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"基本情報\")])]),_vm._l((_vm.support),function(param,name,i){return _c('b-form-row',{key:i},[_c('b-col',{staticStyle:{\"text-align\":\"right\",\"margin\":\"auto 0 auto 0\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"8em\"},attrs:{\"for\":`ss${_vm.uid}-sup-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`ss${_vm.uid}-sup-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e(),(param.type == 'bool')?_c('b-form-checkbox',{staticStyle:{\"width\":\"5em\"},attrs:{\"id\":`ss${_vm.uid}-sup-${name}`,\"size\":\"sm\",\"plain\":\"\"},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", $$v)},expression:\"param.value\"}}):_vm._e(),(param.type == 'character')?_c('b-button',{staticClass:\"paddingless small-margin\",attrs:{\"variant\":\"outline-secondary\",\"id\":`ss${_vm.uid}-sup-${name}`}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getSkillIcon(param.value),\"title\":_vm.descToTitle(param.value),\"width\":\"100\",\"height\":\"100\"}}),(_vm.main.character.value)?_c('ChrSelector',{attrs:{\"target\":`ss${_vm.uid}-sup-${name}`,\"chrs\":_vm.supChrs,\"nullable\":\"\",\"classfilter\":\"\",\"closeonclick\":\"\"},on:{\"click\":function($event){return _vm.setSupChr($event)}}}):_vm._e()],1):_vm._e()],1)],1)})],2)],1),_c('div',[_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"記憶の書＋強化ボード\")])]),_vm._l((_vm.supportBoosts),function(param,name,i){return _c('b-form-row',{key:i},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"9em\"},attrs:{\"for\":`ss${_vm.uid}-sup-${name}`}},[_vm._v(_vm._s(param.label))])]),_c('b-col',[(param.type == 'number')?_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`ss${_vm.uid}-sup-${name}`,\"size\":\"sm\",\"type\":\"number\",\"min\":param.min,\"max\":param.max},model:{value:(param.value),callback:function ($$v) {_vm.$set(param, \"value\", _vm._n($$v))},expression:\"param.value\"}}):_vm._e()],1)],1)})],2)],1),_c('div',{ref:\"supportSkillField\"},[_c('b-container',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"装備\")])]),_c('b-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},_vm._l((_vm.supportItems),function(item,i){return _c('span',{key:i},[_c('b-button',{staticClass:\"paddingless small-margin\",attrs:{\"variant\":\"outline-secondary\",\"id\":`ss${_vm.uid}-sup-item${i}`}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getSkillIcon(item),\"title\":_vm.descToTitle(item),\"width\":\"50\",\"height\":\"50\"}}),_c('ItemSelector',{attrs:{\"target\":`ss${_vm.uid}-sup-item${i}`,\"items\":_vm.items,\"slotfilter\":_vm.supItemSlots[i],\"nullable\":\"\",\"closeonclick\":\"\"},on:{\"click\":function($event){return _vm.setArrayElement(_vm.supportItems, i, $event)}}})],1)],1)}),0)],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h6',{staticStyle:{\"margin\":\"5px 0px\"}},[_vm._v(\"アミュレットスキル\")])]),_c('b-form-row',[_c('b-col',{staticStyle:{\"text-align\":\"center\"}},_vm._l((_vm.supportAmuletSkills),function(item,i){return _c('span',{key:i},[_c('b-button',{staticClass:\"paddingless small-margin\",attrs:{\"variant\":\"outline-secondary\",\"id\":`ss${_vm.uid}-support-amskill${i}`}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getSkillIcon(item),\"title\":_vm.descToTitle(item),\"width\":\"50\",\"height\":\"50\"}}),_c('SkillSelector',{attrs:{\"target\":`ss${_vm.uid}-support-amskill${i}`,\"nullable\":\"\",\"closeonclick\":\"\",\"skills\":_vm.getAmuletSkillList(i)},on:{\"click\":function($event){return _vm.setArrayElement(_vm.supportAmuletSkills, i, $event)}}})],1)],1)}),0)],1),_vm._l((_vm.supportEnchants),function(param,name,i){return _c('b-form-row',{key:'enchant' + i},[_c('b-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"align-self\":\"end\"}},[_c('label',{staticStyle:{\"width\":\"10em\"},attrs:{\"for\":`ss${_vm.uid}-sup-enchant-${name}P`}},[_vm._v(_vm._s(param.label)+\" (%)\")])]),_c('b-col',[_c('b-form-input',{staticClass:\"input-param\",staticStyle:{\"width\":\"4em\"},attrs:{\"id\":`ss${_vm.uid}-sup-enchant-${name}P`,\"size\":\"sm\",\"type\":\"number\",\"min\":0,\"step\":\"0.5\"},model:{value:(param.valueP),callback:function ($$v) {_vm.$set(param, \"valueP\", _vm._n($$v))},expression:\"param.valueP\"}})],1)],1)})],2)],1)]),_c('div',[(_vm.support.character.value)?_c('div',{staticClass:\"status flex\"},[_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('HP'),\"title\":\"HP\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statSupportResult[0]))])],1),(_vm.support.character.value.damageType=='アタック')?_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('アタック'),\"title\":\"アタック\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statSupportResult[1]))])],1):_vm._e(),(_vm.support.character.value.damageType=='マジック')?_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('マジック'),\"title\":\"マジック\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statSupportResult[3]))])],1):_vm._e(),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('ディフェンス'),\"title\":\"ディフェンス\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statSupportResult[2]))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('レジスト'),\"title\":\"レジスト\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.statSupportResult[4]))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"戦闘力:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(_vm.statSupportResult[6]))])])]):_vm._e()])])],1),_c('div',{staticStyle:{\"padding\":\"0px 10px 10px 10px\"}},[_c('div',{staticClass:\"flex\"},[_c('b-dropdown',{attrs:{\"text\":\"自動装備＆エンチャント\",\"size\":\"sm\"}},_vm._l((_vm.autoEquipTypes),function(c,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){return _vm.autoEquip(i)}}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1),(!_vm.embed)?[_c('b-button',{staticStyle:{\"margin-left\":\"0.5em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.onCopyUrl()}}},[_vm._v(\" パラメータを URL としてコピー \")])]:_vm._e()],2),(!_vm.embed)?_c('div',[_c('div',{staticClass:\"flex\",staticStyle:{\"margin\":\"10px 0 5px 0\"}},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.highscoreSearch()}}},[_vm._v(\"このレベルで戦闘力が高い組み合わせを探す\")]),_c('b-form-checkbox',{staticStyle:{\"margin-left\":\"1.0em\"},model:{value:(_vm.hssCharOnce),callback:function ($$v) {_vm.hssCharOnce=$$v},expression:\"hssCharOnce\"}},[_vm._v(\"一度出たキャラを除外\")])],1),(_vm.highscoreData.length)?_c('b-table',{attrs:{\"small\":\"\",\"outlined\":\"\",\"sticky-header\":\"\",\"items\":_vm.highscoreData,\"fields\":_vm.highscoreFields},scopedSlots:_vm._u([{key:\"cell(actions)\",fn:function(row){return [_c('b-button',{staticStyle:{\"padding\":\"1px 10px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.highscoreReplay(row.item)}}},[_vm._v(\" 再現 \")])]}}],null,false,3217728056)}):_vm._e()],1):_vm._e()])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-popover',{attrs:{\"target\":_vm.target,\"triggers\":\"click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"bottom\"}},[_c('div',{staticStyle:{\"margin\":\"4px 0px\"}},[(_vm.classfilter == true)?_c('b-button-group',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"size\":\"sm\"}},_vm._l((_vm.filter.class),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.classes[i]),\"width\":\"20px\"}})],1)}),1):_vm._e(),(_vm.slotfilter == true)?_c('b-button-group',{attrs:{\"size\":\"sm\"}},_vm._l((_vm.filter.slot),function(c,i){return _c('b-button',{key:i,attrs:{\"pressed\":c.state,\"variant\":\"outline-secondary\"},on:{\"update:pressed\":function($event){return _vm.$set(c, \"state\", $event)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.slots[i]),\"width\":\"20px\"}})],1)}),1):_vm._e()],1),_c('div',{staticClass:\"chr-area\"},[(_vm.nullable)?_c('b-link',{on:{\"mouseover\":function($event){return _vm.$emit('mouseover', null)},\"mouseleave\":function($event){return _vm.$emit('mouseleave', null)},\"click\":function($event){return _vm.onClick(null)}}},[_c('b-img-lazy',{staticClass:\"rounded-bordered\",attrs:{\"src\":_vm.getImageURL('null'),\"title\":\"(なし)\",\"width\":\"50\",\"height\":\"50\"}})],1):_vm._e(),_vm._l((_vm.filteredItems),function(v,i){return _c('b-link',{key:i,on:{\"mouseover\":function($event){return _vm.$emit('mouseover', v)},\"mouseleave\":function($event){return _vm.$emit('mouseleave', v)},\"click\":function($event){return _vm.onClick(v)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(v.icon),\"title\":_vm.descToTitle(v),\"width\":\"50\"}})],1)})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-popover :target=\"target\" triggers=\"click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"bottom\">\n    <div style=\"margin: 4px 0px\">\n      <b-button-group v-if=\"classfilter == true\" size=\"sm\" style=\"margin-right: 10px\">\n        <b-button v-for=\"(c, i) in filter.class\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n          <b-img-lazy :src=\"getImageURL(classes[i])\" width=\"20px\" />\n        </b-button>\n      </b-button-group>\n      <b-button-group v-if=\"slotfilter == true\" size=\"sm\">\n        <b-button v-for=\"(c, i) in filter.slot\" :key=\"i\" :pressed.sync=\"c.state\" variant=\"outline-secondary\">\n          <b-img-lazy :src=\"getImageURL(slots[i])\" width=\"20px\" />\n        </b-button>\n      </b-button-group>\n    </div>\n    <div class=\"chr-area\">\n      <b-link v-if=\"nullable\" @mouseover=\"$emit('mouseover', null)\" @mouseleave=\"$emit('mouseleave', null)\" @click=\"onClick(null)\">\n        <b-img-lazy :src=\"getImageURL('null')\" title=\"(なし)\" width=\"50\" height=\"50\" class=\"rounded-bordered\" />\n      </b-link>\n      <b-link v-for=\"(v, i) in filteredItems\" :key=\"i\" @mouseover=\"$emit('mouseover', v)\" @mouseleave=\"$emit('mouseleave', v)\" @click=\"onClick(v)\">\n        <b-img-lazy :src=\"getImageURL(v.icon)\" :title=\"descToTitle(v)\" width=\"50\" />\n      </b-link>\n    </div>\n  </b-popover>\n</template>\n\n<script>\nimport jsonConstants from '../../assets/constants.json'\nimport common from \"../common\";\n\nexport default {\n  name: 'ItemSelector',\n  mixins: [common],\n  props: {\n    target: {\n      type: String,\n      required: true,\n    },\n    items: {\n      type: Array,\n      required: true,\n    },\n\n    nullable: {\n      type: Boolean,\n      default: false,\n    },\n    classfilter: {\n      type: [Boolean, String],\n      default: false,\n    },\n    slotfilter: {\n      type: [Boolean, String],\n      default: false,\n    },\n    rarityfilter: {\n      type: Boolean,\n      default: false,\n    },\n\n    closeonclick: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      classes: jsonConstants.classes,\n      slots: jsonConstants.itemTypes,\n      rarities: jsonConstants.rarities,\n\n      filter: {\n        class: [],\n        slot: [],\n        rarity: [],\n      },\n    }\n  },\n\n  computed: {\n    filteredItems() {\n      return this.items.filter(a => this.filterItem(a));\n    },\n  },\n\n  created() {\n    this.fillFilter(this.filter.class, this.classes);\n    this.fillFilter(this.filter.slot, this.slots);\n    this.fillFilter(this.filter.rarity, this.rarities);\n  },\n\n  methods: {\n    filterItem(item) {\n      let ok = true;\n      if (typeof (this.classfilter) === 'boolean')\n        ok = !this.classfilter || this.filterMatch(this.filter.class, item.classIds);\n      else\n        ok = !item.classes || item.classes.includes(this.classfilter);\n\n      if (ok) {\n        if (typeof (this.slotfilter) === 'boolean')\n          ok = !this.slotfilter || this.filterMatch(this.filter.slot, item.slotId);\n        else\n          ok = item.slot == this.slotfilter;\n      }\n\n      return ok &&\n        (!this.rarityfilter || this.filterMatch(this.filter.rarity, item.rarityId));\n    },\n\n    onClick(item) {\n      this.$emit('click', item);\n      if (this.closeonclick) {\n        this.$root.$emit('bv::hide::popover', this.target)\n      }\n    }\n  }\n}\n</script>\n\n<style>\n.chr-area {\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  width: 425px;\n  min-height: 150px;\n  max-height: 250px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n/*\n.btn-outline-secondary {\n  padding: 3px !important;\n}\n*/\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ItemSelector.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ItemSelector.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ItemSelector.vue?vue&type=template&id=7a3d863d\"\nimport script from \"./ItemSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ItemSelector.vue?vue&type=script&lang=js\"\nimport style0 from \"./ItemSelector.vue?vue&type=style&index=0&id=7a3d863d&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-popover',{attrs:{\"target\":_vm.target,\"triggers\":\"click blur\",\"delay\":{show:0, hide:250},\"no-fade\":\"\",\"placement\":\"bottom\"}},[_c('div',{staticClass:\"chr-area\"},[(_vm.nullable)?_c('b-link',{on:{\"mouseover\":function($event){return _vm.$emit('mouseover', null)},\"mouseleave\":function($event){return _vm.$emit('mouseleave', null)},\"click\":function($event){return _vm.onClick(null)}}},[_c('b-img-lazy',{staticClass:\"rounded-bordered\",attrs:{\"src\":_vm.getImageURL('null'),\"title\":\"(なし)\",\"width\":\"50\",\"height\":\"50\"}})],1):_vm._e(),_vm._l((_vm.filteredItems),function(v,i){return _c('b-link',{key:i,on:{\"mouseover\":function($event){return _vm.$emit('mouseover', v)},\"mouseleave\":function($event){return _vm.$emit('mouseleave', v)},\"click\":function($event){return _vm.onClick(v)}}},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(v.icon),\"title\":`${_vm.descToTitle(v)}`,\"width\":\"50\"}})],1)})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-popover :target=\"target\" triggers=\"click blur\" :delay=\"{show:0, hide:250}\" no-fade placement=\"bottom\">\n    <div class=\"chr-area\">\n      <b-link v-if=\"nullable\"  @mouseover=\"$emit('mouseover', null)\" @mouseleave=\"$emit('mouseleave', null)\" @click=\"onClick(null)\">\n        <b-img-lazy :src=\"getImageURL('null')\" title=\"(なし)\" width=\"50\" height=\"50\" class=\"rounded-bordered\" />\n      </b-link>\n      <b-link v-for=\"(v, i) in filteredItems\" :key=\"i\" @mouseover=\"$emit('mouseover', v)\" @mouseleave=\"$emit('mouseleave', v)\" @click=\"onClick(v)\">\n        <b-img-lazy :src=\"getImageURL(v.icon)\" :title=\"`${descToTitle(v)}`\" width=\"50\" />\n      </b-link>\n    </div>\n  </b-popover>\n</template>\n\n<script>\nimport common from \"../common\";\n\nexport default {\n  name: 'SkillSelector',\n  mixins: [common],\n  props: {\n    target: {\n      type: String,\n      required: true,\n    },\n    skills: {\n      type: Array,\n      required: true,\n    },\n    excludes: {\n      type: Array,\n      default: () => [],\n    },\n    characters: {\n      type: Array,\n      default: () => [],\n    },\n\n    nullable: {\n      type: Boolean,\n      default: false,\n    },\n    closeonclick: {\n      type: Boolean,\n      default: false,\n    },\n    chrSelector: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      currentChr: null,\n    }\n  },\n\n  created() {\n  },\n\n  methods: {\n    onClick(item) {\n      this.$emit('click', item);\n      if (this.closeonclick) {\n        this.$root.$emit('bv::hide::popover', this.target)\n      }\n    }\n  },\n\n  computed: {\n    filteredItems() {\n      return this.skills.filter(a => !this.excludes.includes(a));\n    },\n  },\n}\n</script>\n\n<style>\n.chr-area {\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  width: 425px;\n  min-height: 150px;\n  max-height: 250px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n/*\n.btn-outline-secondary {\n  padding: 3px !important;\n}\n*/\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SkillSelector.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SkillSelector.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SkillSelector.vue?vue&type=template&id=fe69adda\"\nimport script from \"./SkillSelector.vue?vue&type=script&lang=js\"\nexport * from \"./SkillSelector.vue?vue&type=script&lang=js\"\nimport style0 from \"./SkillSelector.vue?vue&type=style&index=0&id=fe69adda&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"panel\" style=\"padding: 10px 0px 0px 0px;\">\n    <b-container v-if=\"!embed\">\n      <b-row>\n        <b-col style=\"text-align:center\">\n          <h5 style=\"margin-bottom: 5px\">ステータスシミュレータ</h5>\n        </b-col>\n      </b-row>\n    </b-container>\n\n    <b-tabs v-model=\"tabIndex\">\n      <b-tab title=\"メインキャラ\" style=\"padding: 10px 10px 10px 10px\" ref=\"tabMainChr\">\n        <div class=\"flex\">\n          <div>\n            <b-container>\n              <div style=\"text-align:center\">\n                <h6 style=\"margin: 5px 0px\">基本情報</h6>\n              </div>\n              <b-form-row v-for=\"(param, name, i) in main\" :key=\"i\">\n                <b-col style=\"text-align: right; margin: auto 0 auto 0;\" align-self=\"end\">\n                  <label :for=\"`stat-main-${name}`\" style=\"width: 8em\">{{param.label}}</label>\n                </b-col>\n                <b-col>\n                  <b-form-input v-if=\"param.type == 'number'\" style=\"width: 5em\" :id=\"`ss${uid}-main-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                  <b-form-checkbox v-if=\"param.type == 'bool'\" style=\"width: 5em\" :id=\"`ss${uid}-main-${name}`\" v-model=\"param.value\" size=\"sm\" plain></b-form-checkbox>\n                  <b-button v-if=\"param.type == 'character'\" variant=\"outline-secondary\" class=\"paddingless small-margin\" :id=\"`ss${uid}-main-${name}`\">\n                    <b-img-lazy :src=\"getSkillIcon(param.value)\" :title=\"descToTitle(param.value)\" width=\"100\" height=\"100\" />\n                    <ChrSelector :target=\"`ss${uid}-main-${name}`\" :chrs=\"mainChrs\" :nullable=\"embed ? true : false\" classfilter symbolfilter closeonclick @click=\"setMainChr\" />\n                  </b-button>\n                </b-col>\n              </b-form-row>\n\n            </b-container>\n          </div>\n          <div>\n            <b-container>\n              <div style=\"text-align:center\">\n                <h6 style=\"margin: 5px 0px\">記憶の書＋強化ボード</h6>\n              </div>\n              <b-form-row v-for=\"(param, name, i) in mainBoosts\" :key=\"i\">\n                <b-col style=\"text-align: right\" align-self=\"end\">\n                  <label style=\"width: 9em\" :for=\"`ss${uid}-main-${name}`\">{{param.label}}</label>\n                </b-col>\n                <b-col>\n                  <b-form-input v-if=\"param.type == 'number'\" style=\"width: 4em\" :id=\"`ss${uid}-main-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                </b-col>\n              </b-form-row>\n            </b-container>\n          </div>\n          <div ref=\"mainSkillField\">\n            <b-container>\n              <div>\n                <div style=\"text-align:center\">\n                  <h6 style=\"margin: 5px 0px\">スキル</h6>\n                </div>\n                <b-form-row>\n                  <b-col style=\"text-align: center\">\n                    <b-button v-for=\"(skill, si) in mainSkills\" :key=\"si\" :id=\"`ss${uid}-main-skill${si}`\" variant=\"outline-secondary\" class=\"paddingless small-margin\"\n                              draggable @dragstart=\"onSkillDrag(si)\" @drop=\"onSkillDrop(si)\" @dragover.prevent=\"dummyHandler()\">\n                      <b-img-lazy :src=\"getSkillIcon(skill)\" :title=\"descToTitle(skill)\" width=\"50\" height=\"50\" />\n                      <SkillSelector :target=\"`ss${uid}-main-skill${si}`\" nullable closeonclick\n                                     :skills=\"mainSkillList\" :excludes=\"mainSkills\" @click=\"setArrayElement(mainSkills, si, $event)\" />\n                    </b-button>\n                  </b-col>\n                </b-form-row>\n              </div>\n\n              <div style=\"text-align:center\">\n                <h6 style=\"margin: 5px 0px\">装備</h6>\n              </div>\n              <b-row>\n                <b-col style=\"text-align:center\">\n                  <span v-for=\"(item, i) in mainItems\" :key=\"i\">\n                    <b-button variant=\"outline-secondary\" class=\"paddingless small-margin\" :id=\"`ss${uid}-main-item${i}`\">\n                      <b-img-lazy :src=\"getSkillIcon(item)\" :title=\"descToTitle(item)\" width=\"50\" height=\"50\" />\n                      <ItemSelector :target=\"`ss${uid}-main-item${i}`\" :items=\"items\" @click=\"setArrayElement(mainItems, i, $event)\"\n                                    :slotfilter=\"mainItemSlots[i]\" :classfilter=\"mainClass\" nullable closeonclick />\n                    </b-button>\n                  </span>\n                </b-col>\n              </b-row>\n\n              <div style=\"text-align:center\">\n                <h6 style=\"margin: 5px 0px\">エンチャント</h6>\n              </div>\n              <b-form-row>\n                <b-col style=\"text-align: center\">\n                  <span v-for=\"(item, i) in mainEnchantPassive\" :key=\"i\">\n                    <b-button variant=\"outline-secondary\" class=\"paddingless small-margin\" :id=\"`ss${uid}-main-enchant${i}`\">\n                      <b-img-lazy :src=\"getSkillIcon(item)\" :title=\"descToTitle(item)\" width=\"50\" height=\"50\" />\n                      <SkillSelector :target=\"`ss${uid}-main-enchant${i}`\" nullable closeonclick\n                                     :skills=\"getEnchantPassiveList()\" @click=\"setArrayElement(mainEnchantPassive, i, $event)\" />\n                    </b-button>\n                  </span>\n                </b-col>\n              </b-form-row>\n              <b-form-row v-for=\"(param, name, i) in mainEnchants\" :key=\"'enchant' + i\">\n                <b-col style=\"text-align: right\" align-self=\"end\">\n                  <label style=\"width: 10em\" :for=\"`ss${uid}-main-enchant-${name}P`\">{{param.label}} (%)</label>\n                </b-col>\n                <b-col>\n                  <b-form-input style=\"width: 4em\" :id=\"`ss${uid}-main-enchant-${name}P`\" v-model.number=\"param.valueP\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"0\"></b-form-input>\n                </b-col>\n                <b-col style=\"text-align: right\" align-self=\"end\">\n                  <label style=\"width: 4em\" :for=\"`ss${uid}-main-enchant-${name}F`\"> (固定値)</label>\n                </b-col>\n                <b-col>\n                  <b-form-input style=\"width: 4em\" :id=\"`ss${uid}-main-enchant-${name}F`\" v-model.number=\"param.valueF\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"0\"></b-form-input>\n                </b-col>\n              </b-form-row>\n            </b-container>\n          </div>\n        </div>\n        <div>\n          <div v-if=\"main.character.value\" class=\"status flex\">\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('HP')\" title=\"HP\" width=\"18\" height=\"18\" /><span>{{statMainResult[0]}}</span></div>\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('アタック')\" title=\"アタック\" width=\"18\" height=\"18\" /><span>{{statMainResult[1]}}</span></div>\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('ディフェンス')\" title=\"ディフェンス\" width=\"18\" height=\"18\" /><span>{{statMainResult[2]}}</span></div>\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('マジック')\" title=\"マジック\" width=\"18\" height=\"18\" /><span>{{statMainResult[3]}}</span></div>\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('レジスト')\" title=\"レジスト\" width=\"18\" height=\"18\" /><span>{{statMainResult[4]}}</span></div>\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('テクニック')\" title=\"テクニック\" width=\"18\" height=\"18\" /><span>{{statMainResult[5]}}</span></div>\n            <div class=\"param-box\"><span class=\"param-name\">戦闘力:</span><span class=\"param-value\">{{statMainResult[6]}}</span></div>\n            <div class=\"param-box\" v-if=\"statMainResult[7]\"><span class=\"param-name\">サポート込み戦闘力:</span><span class=\"param-value\">{{statMainResult[7]}}</span></div>\n          </div>\n        </div>\n      </b-tab>\n      <b-tab title=\"サポートキャラ\" style=\"padding: 10px 10px 10px 10px;\" ref=\"tabSupportChr\">\n        <div class=\"flex\">\n          <div>\n            <b-container>\n              <div style=\"text-align:center\">\n                <h6 style=\"margin: 5px 0px\">基本情報</h6>\n              </div>\n              <b-form-row v-for=\"(param, name, i) in support\" :key=\"i\">\n                <b-col style=\"text-align: right; margin: auto 0 auto 0;\" align-self=\"end\">\n                  <label style=\"width: 8em\" :for=\"`ss${uid}-sup-${name}`\">{{param.label}}</label>\n                </b-col>\n                <b-col>\n                  <b-form-input v-if=\"param.type == 'number'\" style=\"width: 5em\" :id=\"`ss${uid}-sup-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                  <b-form-checkbox v-if=\"param.type == 'bool'\" style=\"width: 5em\" :id=\"`ss${uid}-sup-${name}`\" v-model=\"param.value\" size=\"sm\" plain></b-form-checkbox>\n                  <b-button v-if=\"param.type == 'character'\" variant=\"outline-secondary\" class=\"paddingless small-margin\" :id=\"`ss${uid}-sup-${name}`\">\n                    <b-img-lazy :src=\"getSkillIcon(param.value)\" :title=\"descToTitle(param.value)\" width=\"100\" height=\"100\" />\n                    <ChrSelector v-if=\"main.character.value\" :target=\"`ss${uid}-sup-${name}`\" :chrs=\"supChrs\" nullable classfilter closeonclick @click=\"setSupChr($event)\" />\n                  </b-button>\n                </b-col>\n              </b-form-row>\n            </b-container>\n          </div>\n          <div>\n            <b-container>\n              <div style=\"text-align:center\">\n                <h6 style=\"margin: 5px 0px\">記憶の書＋強化ボード</h6>\n              </div>\n              <b-form-row v-for=\"(param, name, i) in supportBoosts\" :key=\"i\">\n                <b-col style=\"text-align: right\" align-self=\"end\">\n                  <label style=\"width: 9em\" :for=\"`ss${uid}-sup-${name}`\">{{param.label}}</label>\n                </b-col>\n                <b-col>\n                  <b-form-input v-if=\"param.type == 'number'\" style=\"width: 4em\" :id=\"`ss${uid}-sup-${name}`\" v-model.number=\"param.value\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"param.min\" :max=\"param.max\"></b-form-input>\n                </b-col>\n              </b-form-row>\n            </b-container>\n          </div>\n          <div ref=\"supportSkillField\">\n            <b-container>\n              <div style=\"text-align:center\">\n                <h6 style=\"margin: 5px 0px\">装備</h6>\n              </div>\n              <b-row>\n                <b-col style=\"text-align:center\">\n                  <span v-for=\"(item, i) in supportItems\" :key=\"i\">\n                    <b-button variant=\"outline-secondary\" class=\"paddingless small-margin\" :id=\"`ss${uid}-sup-item${i}`\">\n                      <b-img-lazy :src=\"getSkillIcon(item)\" :title=\"descToTitle(item)\" width=\"50\" height=\"50\" />\n                      <ItemSelector :target=\"`ss${uid}-sup-item${i}`\" :items=\"items\" @click=\"setArrayElement(supportItems, i, $event)\"\n                                    :slotfilter=\"supItemSlots[i]\" nullable closeonclick />\n                    </b-button>\n                  </span>\n                </b-col>\n              </b-row>\n\n              <div style=\"text-align:center\">\n                <h6 style=\"margin: 5px 0px\">アミュレットスキル</h6>\n              </div>\n              <b-form-row>\n                <b-col style=\"text-align: center\">\n                  <span v-for=\"(item, i) in supportAmuletSkills\" :key=\"i\">\n                    <b-button variant=\"outline-secondary\" class=\"paddingless small-margin\" :id=\"`ss${uid}-support-amskill${i}`\">\n                      <b-img-lazy :src=\"getSkillIcon(item)\" :title=\"descToTitle(item)\" width=\"50\" height=\"50\" />\n                      <SkillSelector :target=\"`ss${uid}-support-amskill${i}`\" nullable closeonclick\n                                     :skills=\"getAmuletSkillList(i)\" @click=\"setArrayElement(supportAmuletSkills, i, $event)\" />\n                    </b-button>\n                  </span>\n                </b-col>\n              </b-form-row>\n              <b-form-row v-for=\"(param, name, i) in supportEnchants\" :key=\"'enchant' + i\">\n                <b-col style=\"text-align: right\" align-self=\"end\">\n                  <label style=\"width: 10em\" :for=\"`ss${uid}-sup-enchant-${name}P`\">{{param.label}} (%)</label>\n                </b-col>\n                <b-col>\n                  <b-form-input style=\"width: 4em\" :id=\"`ss${uid}-sup-enchant-${name}P`\" v-model.number=\"param.valueP\" size=\"sm\" type=\"number\" class=\"input-param\" :min=\"0\" step=\"0.5\"></b-form-input>\n                </b-col>\n              </b-form-row>\n            </b-container>\n          </div>\n        </div>\n        <div>\n          <div v-if=\"support.character.value\" class=\"status flex\">\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('HP')\" title=\"HP\" width=\"18\" height=\"18\" /><span>{{statSupportResult[0]}}</span></div>\n            <div class=\"param-box\" v-if=\"support.character.value.damageType=='アタック'\"><b-img-lazy :src=\"getImageURL('アタック')\" title=\"アタック\" width=\"18\" height=\"18\" /><span>{{statSupportResult[1]}}</span></div>\n            <div class=\"param-box\" v-if=\"support.character.value.damageType=='マジック'\"><b-img-lazy :src=\"getImageURL('マジック')\" title=\"マジック\" width=\"18\" height=\"18\" /><span>{{statSupportResult[3]}}</span></div>\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('ディフェンス')\" title=\"ディフェンス\" width=\"18\" height=\"18\" /><span>{{statSupportResult[2]}}</span></div>\n            <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('レジスト')\" title=\"レジスト\" width=\"18\" height=\"18\" /><span>{{statSupportResult[4]}}</span></div>\n            <div class=\"param-box\"><span class=\"param-name\">戦闘力:</span><span class=\"param-value\">{{statSupportResult[6]}}</span></div>\n          </div>\n        </div>\n      </b-tab>\n    </b-tabs>\n    <div style=\"padding: 0px 10px 10px 10px\">\n      <div class=\"flex\">\n        <b-dropdown text=\"自動装備＆エンチャント\" size=\"sm\">\n          <b-dropdown-item class=\"d-flex flex-column\" v-for=\"(c, i) in autoEquipTypes\" :key=\"i\" @click=\"autoEquip(i)\">\n            {{ c }}\n          </b-dropdown-item>\n        </b-dropdown>\n        <template v-if=\"!embed\">\n          <b-button size=\"sm\" @click=\"onCopyUrl()\" style=\"margin-left: 0.5em;\">\n            パラメータを URL としてコピー\n          </b-button>\n        </template>\n      </div>\n      <div v-if=\"!embed\">\n        <div class=\"flex\" style=\"margin: 10px 0 5px 0;\">\n          <b-button size=\"sm\" @click=\"highscoreSearch()\">このレベルで戦闘力が高い組み合わせを探す</b-button>\n          <b-form-checkbox v-model=\"hssCharOnce\" style=\"margin-left: 1.0em;\">一度出たキャラを除外</b-form-checkbox>\n        </div>\n        <b-table v-if=\"highscoreData.length\" small outlined sticky-header :items=\"highscoreData\" :fields=\"highscoreFields\">\n          <template #cell(actions)=\"row\">\n            <b-button size=\"sm\" @click=\"highscoreReplay(row.item)\" style=\"padding: 1px 10px\">\n              再現\n            </b-button>\n          </template>\n        </b-table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ChrSelector from '../parts/ChrSelector.vue'\nimport ItemSelector from '../parts/ItemSelector.vue'\nimport SkillSelector from '../parts/SkillSelector.vue'\nimport commonjs from \"../common.js\";\nimport lookupjs from \"./lookup.js\";\n\nexport default {\n  name: 'StatusSimulator',\n  components: {\n    ChrSelector,\n    ItemSelector,\n    SkillSelector,\n  },\n  props: {\n    embed: {\n      type: Boolean,\n      default: false,\n    },\n    data: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  mixins: [commonjs, lookupjs],\n\n  data() {\n    return {\n      uid: this.$genUniqueId(),\n\n      mainItemSlots: [\"武器\", \"鎧\", \"兜\", \"アクセサリ\"],\n      supItemSlots: [\"月のアミュレット\", \"太陽のアミュレット\"],\n\n      main: {\n        character: {\n          label: \"キャラ\",\n          type: \"character\",\n          value: null,\n        },\n        star: {\n          label: \"⭐\",\n          type: \"number\",\n          min: 1,\n          max: 6,\n          value: 6,\n        },\n        level: {\n          label: \"レベル\",\n          type: \"number\",\n          min: 1,\n          value: 114,\n        },\n        master: {\n          label: \"マスターレベル\",\n          type: \"number\",\n          min: 0,\n          max: 3,\n          value: 3,\n        },\n        loveBonus: {\n          label: \"好感度ボーナス\",\n          type: \"bool\",\n          value: true,\n        },\n        engage: {\n          label: \"エンゲージ\",\n          type: \"bool\",\n          value: true,\n        },\n      },\n      mainBoosts: {\n        hp: {\n          label: \"HP (%)\",\n          type: \"number\",\n          min: 0,\n          value: 150,\n        },\n        atk: {\n          label: \"アタック (%)\",\n          type: \"number\",\n          min: 0,\n          value: 140,\n        },\n        def: {\n          label: \"ディフェンス (%)\",\n          type: \"number\",\n          min: 0,\n          value: 130,\n        },\n        mag: {\n          label: \"マジック (%)\",\n          type: \"number\",\n          min: 0,\n          value: 140,\n        },\n        res: {\n          label: \"レジスト (%)\",\n          type: \"number\",\n          min: 0,\n          value: 130,\n        },\n        tec: {\n          label: \"テクニック (%)\",\n          type: \"number\",\n          min: 0,\n          value: 50,\n        },\n      },\n      mainEnchants: {\n        hp: {\n          label: \"HP\",\n          valueP: 0,\n          valueF: 0,\n        },\n        atk: {\n          label: \"アタック\",\n          valueP: 0,\n          valueF: 0,\n        },\n        def: {\n          label: \"ディフェンス\",\n          valueP: 0,\n          valueF: 0,\n        },\n        mag: {\n          label: \"マジック\",\n          valueP: 0,\n          valueF: 0,\n        },\n        res: {\n          label: \"レジスト\",\n          valueP: 0,\n          valueF: 0,\n        },\n      },\n      mainSkills: [null, null, null],\n      mainItems: [null, null, null, null],\n      mainEnchantPassive: [null],\n\n      support: {\n        character: {\n          label: \"キャラ\",\n          type: \"character\",\n          value: null,\n        },\n        star: {\n          label: \"⭐\",\n          type: \"number\",\n          min: 1,\n          max: 6,\n          value: 6,\n        },\n        level: {\n          label: \"レベル\",\n          type: \"number\",\n          min: 1,\n          value: 114,\n        },\n        master: {\n          label: \"マスターレベル\",\n          type: \"number\",\n          min: 0,\n          max: 3,\n          value: 3,\n        },\n        loveBonus: {\n          label: \"好感度ボーナス\",\n          type: \"bool\",\n          value: true,\n        },\n      },\n      supportBoosts: {\n        hp: {\n          label: \"HP (%)\",\n          type: \"number\",\n          min: 0,\n          value: 110,\n        },\n        atk: {\n          label: \"アタック (%)\",\n          type: \"number\",\n          min: 0,\n          value: 120,\n        },\n        def: {\n          label: \"ディフェンス (%)\",\n          type: \"number\",\n          min: 0,\n          value: 110,\n        },\n        mag: {\n          label: \"マジック (%)\",\n          type: \"number\",\n          min: 0,\n          value: 120,\n        },\n        res: {\n          label: \"レジスト (%)\",\n          type: \"number\",\n          min: 0,\n          value: 110,\n        },\n      },\n      supportEnchants: {\n        hp: {\n          label: \"HP\",\n          valueP: 0,\n          valueF: 0,\n        },\n        atk: {\n          label: \"アタック\",\n          valueP: 0,\n          valueF: 0,\n        },\n        def: {\n          label: \"ディフェンス\",\n          valueP: 0,\n          valueF: 0,\n        },\n        mag: {\n          label: \"マジック\",\n          valueP: 0,\n          valueF: 0,\n        },\n        res: {\n          label: \"レジスト\",\n          valueP: 0,\n          valueF: 0,\n        },\n      },\n      supportItems: [null, null],\n      supportAmuletSkills: [null, null],\n\n      autoEquipTypes: [\n        \"戦闘力優先\",\n        \"ダメージ優先\",\n        \"デバフ優先\",\n        \"攻撃力優先\",\n        \"HP 優先\",\n        \"ディフェンス優先\",\n        \"レジスト優先\",\n        \"リセット\",\n      ],\n      AutoEquipType: {\n        BattlePower: 0,\n        Damage: 1,\n        Debuf: 2,\n        AttackPower: 3,\n        HP: 4,\n        Def: 5,\n        Res: 6,\n        Reset: 7,\n      },\n\n      tabIndex: 0,\n      highscoreData: [],\n      highscoreFields: [\n        {\n          key: \"index\",\n          label: \"順位\",\n        },\n        {\n          key: \"bp\",\n          label: \"戦闘力\",\n        },\n        {\n          key: \"main\",\n          label: \"メイン\",\n        },\n        {\n          key: \"support\",\n          label: \"サポート\",\n        },\n        {\n          key: \"actions\",\n          label: \"アクション\",\n        }\n      ],\n      hssCharOnce: false,\n\n      prevMainEngage: true,\n      draggingSkillIdx: -1,\n    };\n  },\n\n  created() {\n    this.setupDB();\n    this.deserialize(structuredClone(this.data));\n    if (!this.embed) {\n      this.setMainChr(this.mainChrs[0]);\n      this.parseParamsUrl(window.location.href);\n    }\n  },\n  \n  mounted() {\n    this.$nextTick(() => {\n      // サポートのタブも同じサイズにしておく\n      // (そうしないと popover 内で使う際タブを切り替えると移動が起きるため)\n      this.$refs.tabSupportChr.$el.style.minHeight = `${this.$refs.tabMainChr.$el.clientHeight}px`;\n      this.$refs.tabSupportChr.$el.style.minWidth = `${this.$refs.tabMainChr.$el.clientWidth}px`;\n\n      this.$refs.supportSkillField.style.minWidth = `${this.$refs.mainSkillField.clientWidth}px`;\n    });\n  },\n\n  methods: {\n    setMainChr(chr) {\n      this.main.character.value = chr;\n      if (!chr) {\n        this.support.character.value = null;\n      }\n      this.validateItems();\n\n      for (let k in this.mainEnchants) {\n        let params = this.mainEnchants[k];\n        params.valueP = 0;\n        params.valueF = 0;\n        if (chr && chr.damageType == params.label) {\n          params.valueP = 35;\n        }\n      }\n      this.autoMainSkill();\n      this.autoEquip(this.embed ? 1 : 0);\n    },\n    updateItemScore() {\n      let dmgTypes = {};\n      let debufTypes = {};\n\n      const chr = this.main.character.value;\n      if (chr) {\n        const buf = (type, rate = 1) => {\n          dmgTypes[type] = { rate: rate };\n        };\n        const debuf = (type, rate = 1) => {\n          debufTypes[type] = { rate: rate };\n        };\n\n        buf(\"与ダメージ\"); buf(\"クリティカルダメージ倍率\", 1.5);\n        debuf(\"ダメージ耐性\", 1.25); \n        if (chr.damageType == \"アタック\") {\n          buf(\"アタック\", 1.25); buf(\"与ダメージ(物理)\"); \n          debuf(\"ダメージ耐性(物理)\", 1.25);\n        }\n        else {\n          buf(\"マジック\", 1.25); buf(\"与ダメージ(魔法)\");\n          debuf(\"ダメージ耐性(魔法)\", 1.25);\n        }\n\n        // 攻撃スキルがセットされていたら 与ダメージ(スキル) を考慮\n        let isAttackSkillSet = false;\n        for (const skill of this.mainSkills) {\n          if (skill && skill.isActive && skill.damageRate) {\n            isAttackSkillSet = true;\n            buf(\"与ダメージ(スキル)\");\n            break;\n          }\n        }\n\n        // アサシン、2回攻撃持ち、攻撃スキルなしの場合 与ダメージ(通常攻撃) を考慮\n        if (chr.class == \"アサシン\" || chr.talent?.doubleAttack || !isAttackSkillSet) {\n          buf(\"与ダメージ(通常攻撃)\", 1.01);\n        }\n      }\n\n      const condMatch = (effect) => {\n        if (effect.condition) {\n          if (effect.value > 0 && effect.condition.turn) {\n            // ターン経過が必要なバフは除外\n            // (マイナス効果は考慮)\n            return false;\n          }\n\n          // 近接攻撃時/遠距離攻撃時バフを考慮\n          if (effect.condition.onCloseCombat && chr.range > 1) {\n            return false;\n          }\n          if (effect.condition.onRangedCombat && chr.range == 1) {\n            return false;\n          }\n\n          if (effect.condition.onClass) {\n            // 特定クラスに対してのみ有効な効果を考慮\n            if (!effect.condition.onClass.includes(chr?.class)) {\n              return false;\n            }\n          }\n          if (effect.condition.onClassAdvantage) {\n            // 攻撃対象が特定のクラスの場合のみ有効な効果は現状微妙なので除外\n            return false;\n          }\n        }\n        return true;\n      };\n\n      for (let item of this.items) {\n        let dmgEffects = new Array(this.effectTypes.length);\n        let debufEffects = new Array(this.effectTypes.length);\n        for (let effect of (item.buff ?? [])) {\n          const t = dmgTypes[effect.type];\n          if (t && condMatch(effect)) {\n            dmgEffects[effect.typeId] = effect.value * t.rate; // += ではなく = 、ブループラネット等対策。\n          }\n        }\n        for (let effect of (item.debuff ?? [])) {\n          const t = debufTypes[effect.type];\n          if (t) {\n            debufEffects[effect.typeId] = effect.value * t.rate;\n          }\n        }\n        item.debufScore = debufEffects.reduce((total, v) => v ? total + v : total, 0);\n        item.dmgScore = dmgEffects.reduce((total, v) => v ? total + v : total, 0);\n        item.dmgScore += item.debufScore;\n      }\n    },\n\n    autoMainSkill() {\n      this.mainSkills = this.autoMainSkillImpl(this.main.character.value);\n    },\n    autoMainSkillImpl(chr) {\n      if (!chr) {\n        return [null, null, null];\n      }\n      if (chr.engage) {\n        chr.engage.enabled = this.main.engage.value;\n      }\n      let skills = [...chr.skills];\n      skills = skills.sort((a, b) => this.getSkillBPRate(b) - this.getSkillBPRate(a));\n      return skills.slice(0, 3);\n    },\n    setSupChr(chr) {\n      this.support.character.value = chr;\n\n      for (let k in this.supportEnchants) {\n        let params = this.supportEnchants[k];\n        params.valueP = 0;\n        params.valueF = 0;\n        if (chr && chr.damageType == params.label) {\n          params.valueP = 15;\n        }\n      }\n      this.autoEquip(this.embed ? 1 : 0);\n    },\n\n    getParamClass(param) {\n      return param.disabled() ? \"disabled\" : \"\";\n    },\n\n    findItem(name) {\n      const r = this.searchTableWithName.get(name);\n      if (!r)\n        console.log(`${name} not found`);\n      return r;\n    },\n\n    getSkillIcon(skill) {\n      return this.getImageURL(skill ? skill.icon : null);\n    },\n    getSkillBPRate(skill) {\n      let score = 0;\n      if (skill) {\n        score += skill.cost * 0.03;\n        if (skill.isEngageSkill)\n          score += 0.05;\n      }\n      return score;\n    },\n\n    matchClass(item, chr) {\n      if (item && chr) {\n        if (!item.classes || item.classes.includes(chr.class))\n          return true;\n      }\n      return false;\n    },\n    mainCanEquip(item, slot = null) {\n      if (this.matchClass(item, this.main.character.value)) {\n        if (!slot || item.slot == slot)\n          return true;\n      }\n      return false;\n    },\n    supportCanEquip(item, slot) {\n      if (item) {\n        if (!slot || item.slot == slot)\n          return true;\n      }\n      return false;\n    },\n\n    validateItems() {\n      let mainItems = this.mainItems;\n      for (let i = 0; i < mainItems.length; ++i) {\n        if (!this.mainCanEquip(mainItems[i], this.mainItemSlots[i]))\n          mainItems[i] = null;\n      }\n\n      var supItems = this.supportItems;\n      for (let i = 0; i < supItems.length; ++i) {\n        if (!this.supportCanEquip(supItems[i], this.supItemSlots[i]))\n          supItems[i] = null;\n      }\n    },\n\n    autoEquipImpl(ma, sa, type) {\n      let result = {\n        main: {\n          items: [null, null, null, null],\n          enchants: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n          enchantPassive: [null],\n        },\n        support: {\n          items: [null, null],\n          enchants: [0, 0, 0, 0, 0],\n          amuletSkills: [null, null],\n        },\n      };\n\n      this.updateItemScore();\n      const mapi = ma.character ? ma.character.damageType == \"アタック\" ? 1 : 3 : 0;\n      const sapi = sa.character ? sa.character.damageType == \"アタック\" ? 1 : 3 : 0;\n      const symbol = ma.character?.symbol;\n      const tec = ma.status[5];\n      let ap = Math.round(ma.status[mapi] * 1.35);\n      if (sa.character) {\n        ap += sa.status[sapi];\n      }\n      //console.log(`ap: ${ap}`);\n\n      const getHp = item => item.status[0];\n      const getDef = item => item.status[2];\n      const getRes = item => item.status[4];\n      const getAPMain = item => item.status[mapi];\n      const getAPSup = item => item.status[sapi];\n      const getDmg = item => item.dmgScore;\n      const getDebuf = item => item.debufScore;\n\n      const enAPMain = mapi == 1 ?\n        c => c.name.match(/^atk/) :\n        c => c.name.match(/^mag/);\n      const enAPSup = sapi == 1 ?\n        c => c.name.match(/^atk/) :\n        c => c.name.match(/^mag/);\n\n      const cmp = this.compare;\n      const getItemBattlePower = (item, api) => this.getEstimatedItemBattlePower(item.status, api, ap, tec);\n      const cmpPow = (a, b, api) => {\n        const bpa = getItemBattlePower(a, api);\n        const bpb = getItemBattlePower(b, api);\n        if (bpa != bpb) {\n          return cmp(bpa, bpb);\n        }\n        else {\n          // 戦闘力が同じならデメリットなしを優先。\n          // どちらもデメリット無しならダメージが出る方を優先。\n          const na = !a.negativeEffects ? 1 : 0;\n          const nb = !b.negativeEffects ? 1 : 0;\n          return na != nb ? cmp(na, nb) : cmp(getDmg(a), getDmg(b));\n        }\n      };\n\n      const pickItem = (items, filter, sortf) => {\n        if (filter) {\n          let filtered = items.filter(filter);\n          if (filtered.length) {\n            items = filtered;\n          }\n        }\n        items.sort(sortf);\n        return items[0];\n      };\n\n      const adjustSymbol = (item) => {\n        const pattern = /^(ゼニス|オリジン|ナディア)/;\n        if (item && item.name.match(pattern)) {\n          let r = item.name.replace(pattern, symbol);\n          return this.findItem(r);\n        }\n        return item;\n      };\n\n      const pickItemsMain = (filter = null, sortf = null) => {\n        if (!ma.character)\n          return;\n        const cond = a => this.matchClass(a, ma.character);\n        if (!sortf)\n          sortf = (a, b) => cmpPow(a, b, mapi);\n        let weapon = pickItem(this.weapons.filter(cond), filter, sortf);\n        let armor = pickItem(this.armors.filter(cond), filter, sortf);\n        let helmet = pickItem(this.helmets.filter(cond), filter, sortf);\n        let accessory = pickItem(this.accessories.filter(cond), filter, sortf);\n        armor = adjustSymbol(armor);\n        helmet = adjustSymbol(helmet);\n        accessory = adjustSymbol(accessory);\n        result.main.items = [weapon, armor, helmet, accessory];\n      };\n\n      const pickItemsSupport = (filter = null) => {\n        if (!sa.character)\n          return;\n        const sortf = (a, b) => cmpPow(a, b, sapi);\n        let amulet1 = pickItem(this.amulets1, filter, sortf);\n        let amulet2 = pickItem(this.amulets2, filter, sortf);\n        result.support.items = [amulet1, amulet2];\n      };\n\n      const pickOptimalEnchants = (filterFunc = null, scoreBooster = null) => {\n        if (!ma.character)\n          return;\n        const s = ma.status;\n        let r = [0.05, 0, 2, 0, 2]; // score rate\n        r[mapi] = 2 * (1.0 + tec * 0.0003);\n        if (scoreBooster) {\n          for (let i = 0; i < r.length; ++i)\n            r[i] *= scoreBooster[i];\n        }\n\n        let dst = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\n        let cmdlists = [[], [], [], []];\n        const cmd = (i, name, score, exec) => {\n          cmdlists[i].push({\n            name: name,\n            score: score,\n            exec: exec,\n          });\n        };\n        const hpP = (i, v) => cmd(i, \"hpP\", s[0] * (v / 100) * r[0], () => dst[0] += v);\n        const hpF = (i, v) => cmd(i, \"hpF\", v * r[0], () => dst[1] += v);\n        const atkP = (i, v) => cmd(i, \"atkP\", s[1] * (v / 100) * r[1], () => dst[2] += v);\n        const atkF = (i, v) => cmd(i, \"atkF\", v * r[1], () => dst[3] += v);\n        const defP = (i, v) => cmd(i, \"defP\", s[2] * (v / 100) * r[2], () => dst[4] += v);\n        const defF = (i, v) => cmd(i, \"defF\", v * r[2], () => dst[5] += v);\n        const magP = (i, v) => cmd(i, \"magP\", s[3] * (v / 100) * r[3], () => dst[6] += v);\n        const magF = (i, v) => cmd(i, \"magF\", v * r[3], () => dst[7] += v);\n        const resP = (i, v) => cmd(i, \"resP\", s[4] * (v / 100) * r[4], () => dst[8] += v);\n        const resF = (i, v) => cmd(i, \"resF\", v * r[4], () => dst[9] += v);\n\n        const paramsP = [\n          [10, 15, 5, 15, 5],\n          [15, 5, 15, 5, 15],\n          [15, 5, 15, 5, 15],\n          [10, 10, 10, 10, 10],\n        ];\n        const paramsF = [\n          [131, 31, 7, 31, 7],\n          [200, 11, 19, 11, 19],\n          [200, 11, 19, 11, 19],\n          [131, 21, 13, 21, 13],\n        ];\n        for (let i = 0; i < paramsP.length; ++i) {\n          hpP(i, paramsP[i][0]); hpF(i, paramsF[i][0]);\n          atkP(i, paramsP[i][1]); atkF(i, paramsF[i][1]);\n          defP(i, paramsP[i][2]); defF(i, paramsF[i][2]);\n          magP(i, paramsP[i][3]); magF(i, paramsF[i][3]);\n          resP(i, paramsP[i][4]); resF(i, paramsF[i][4]);\n        }\n\n        const len = cmdlists[0].length;\n        if (filterFunc) {\n          for (let i = 0; i < cmdlists.length; ++i) {\n            const filtered = cmdlists[i].filter(filterFunc).slice(0, 3);\n            for (let c of filtered)\n              c.exec();\n            cmdlists[i] = cmdlists[i].filter(a => !filtered.includes(a));\n          }\n        }\n        for (let cl of cmdlists) {\n          cl.sort((a, b) => cmp(a.score, b.score));\n        }\n        for (let cl of cmdlists) {\n          let n = 3 - (len - cl.length);\n          for (let i = 0; i < n; ++i)\n            cl[i].exec();\n        }\n        result.main.enchants = dst;\n      };\n\n      const pickOptialAmuletSkills = (filterFunc = null, scoreBooster = null) => {\n        if (!sa.character)\n          return;\n        const s = sa.status;\n        let r = [0.05, 0, 2, 0, 2]; // score rate\n        r[sapi] = 2 * (1.0 + tec * 0.0003); // リンク前提でテクニックも考慮\n        if (scoreBooster) {\n          for (let i = 0; i < r.length; ++i)\n            r[i] *= scoreBooster[i];\n        }\n\n        let dst = [0, 0, 0, 0, 0];\n\n        let cmdlists = [[], [], [], []];\n        const cmd = (i, name, score, exec) => {\n          cmdlists[i].push({ name: name, score: score, exec: exec });\n        };\n        const hpP = (i, v) => cmd(i, \"hpP\", s[0] * (v / 100) * r[0], () => dst[0] += v);\n        const atkP = (i, v) => cmd(i, \"atkP\", s[1] * (v / 100) * r[1], () => dst[1] += v);\n        const defP = (i, v) => cmd(i, \"defP\", s[2] * (v / 100) * r[2], () => dst[2] += v);\n        const magP = (i, v) => cmd(i, \"magP\", s[3] * (v / 100) * r[3], () => dst[3] += v);\n        const resP = (i, v) => cmd(i, \"resP\", s[4] * (v / 100) * r[4], () => dst[4] += v);\n\n        const paramsP = [\n          [7.5, 7.5, 7.5, 7.5, 7.5],\n          [7.5, 7.5, 7.5, 7.5, 7.5],\n        ];\n        for (let i = 0; i < paramsP.length; ++i) {\n          hpP(i, paramsP[i][0]);\n          atkP(i, paramsP[i][1]);\n          defP(i, paramsP[i][2]);\n          magP(i, paramsP[i][3]);\n          resP(i, paramsP[i][4]);\n        }\n\n        const len = cmdlists[0].length;\n        if (filterFunc) {\n          for (let i = 0; i < cmdlists.length; ++i) {\n            const filtered = cmdlists[i].filter(filterFunc).slice(0, 3);\n            for (let c of filtered)\n              c.exec();\n            cmdlists[i] = cmdlists[i].filter(a => !filtered.includes(a));\n          }\n        }\n        for (let cl of cmdlists) {\n          cl.sort((a, b) => cmp(a.score, b.score));\n        }\n        for (let cl of cmdlists) {\n          let n = 1 - (len - cl.length);\n          for (let i = 0; i < n; ++i)\n            cl[i].exec();\n        }\n        result.support.enchants = dst;\n      };\n\n\n      let enchant = \"バスター\";\n\n      const AutoEquipType = this.AutoEquipType;\n      if (type == AutoEquipType.BattlePower) { // 戦闘力優先\n        pickItemsMain();\n        pickOptimalEnchants();\n        pickItemsSupport();\n        pickOptialAmuletSkills();\n      }\n      else if (type == AutoEquipType.Damage) { // ダメージ優先\n        const sortf = (a, b) => {\n          const sa = getDmg(a);\n          const sb = getDmg(b);\n          return sa != sb ? cmp(sa, sb) : cmpPow(a, b, mapi);\n        };\n        pickItemsMain(getAPMain, sortf);\n        pickOptimalEnchants(enAPMain);\n        pickItemsSupport(getAPSup);\n        pickOptialAmuletSkills(enAPSup);\n        enchant = \"ストライク\";\n\n      }\n      else if (type == AutoEquipType.Debuf) { // デバフ優先\n        const sortf = (a, b) => {\n          const sa = getDebuf(a);\n          const sb = getDebuf(b);\n          return sa != sb ? cmp(sa, sb) : cmpPow(a, b, mapi);\n        };\n        pickItemsMain(null, sortf);\n        pickOptimalEnchants(enAPMain);\n        pickItemsSupport(getAPSup);\n        pickOptialAmuletSkills(enAPSup);\n        enchant = \"ストライク\";\n      }\n      else if (type == AutoEquipType.AttackPower) { // 攻撃力優先\n        pickItemsMain(getAPMain);\n        pickOptimalEnchants(enAPMain);\n        pickItemsSupport(getAPSup);\n        pickOptialAmuletSkills(enAPSup);\n      }\n      else if (type == AutoEquipType.HP) { // HP 優先\n        pickItemsMain(getHp);\n        pickOptimalEnchants(c => c.name.match(/^hp/));\n        pickItemsSupport(getHp);\n        pickOptialAmuletSkills(c => c.name.match(/^hp/));\n        enchant = \"アイアン\";\n      }\n      else if (type == AutoEquipType.Def) { // ディフェンス優先\n        pickItemsMain(getDef);\n        pickOptimalEnchants(c => c.name.match(/^def/));\n        pickItemsSupport(getDef);\n        pickOptialAmuletSkills(c => c.name.match(/^def/));\n        enchant = \"アイス\";\n      }\n      else if (type == AutoEquipType.Res) { // レジスト優先\n        pickItemsMain(getRes);\n        pickOptimalEnchants(c => c.name.match(/^res/));\n        pickItemsSupport(getRes);\n        pickOptialAmuletSkills(c => c.name.match(/^res/));\n        enchant = \"アイス\";\n      }\n      if (type != AutoEquipType.Reset && ma.character) {\n        result.main.enchantPassive = [this.getEnchantPassive(enchant)];\n      }\n\n      if (ma.character && sa.character) {\n        const find = (uid) => this.searchTableWithUid.get(uid);\n        const mdt = ma.character.damageType;\n        const sdt = sa.character.damageType;\n        let list = [null, null];\n        if (sdt == \"アタック\" && mdt == \"アタック\") {\n          list[0] = find(\"x501\");\n        }\n        else if (sdt == \"アタック\" && mdt == \"マジック\") {\n          list[0] = find(\"x502\");\n        }\n        else if (sdt == \"マジック\" && mdt == \"アタック\") {\n          list[0] = find(\"x503\");\n        }\n        else if (sdt == \"マジック\" && mdt == \"マジック\") {\n          list[0] = find(\"x504\");\n        }\n        list[1] = find(\"x602\");\n        result.support.amuletSkills = list;\n      }\n\n      return result;\n    },\n\n    autoEquip(type) {\n      let msa = this.getStatMainArgs();\n      msa.items = [];\n      msa.enchantsP = [];\n      msa.enchantsF = [];\n      let ssa = this.getStatSupportArgs();\n\n      const ma = {\n        character: msa.character,\n        status: this.calcStatMainImpl(msa, null, true),\n      };\n      const sa = {\n        character: ssa.character,\n        status: this.calcStatSupportImpl(ssa),\n      };\n      const r = this.autoEquipImpl(ma, sa, type);\n\n      if (this.tabIndex == 0 || !ma.character) {\n        for (const v of Object.values(this.mainEnchants)) {\n          v.valueP = r.main.enchants.shift();\n          v.valueF = r.main.enchants.shift();\n        }\n        this.mainItems = [...r.main.items];\n        this.mainEnchantPassive = [...r.main.enchantPassive];\n      }\n      {\n        for (const v of Object.values(this.supportEnchants))\n          v.valueP = r.support.enchants.shift();\n        this.supportItems = [...r.support.items];\n        this.supportAmuletSkills = [...r.support.amuletSkills];\n      }\n    },\n\n    highscoreSearch() {\n      let msa = this.getStatMainArgs();\n      let ssa = this.getStatSupportArgs();\n      const powMain = (a) => this.getBattlePower(this.getMainChrStatus(a, msa.level, msa.star, msa.master, msa.loveBonus, msa.boosts));\n      const powSup = (a) => this.getBattlePower(this.getSupportChrStatus(a, ssa.level, ssa.star, ssa.master, ssa.loveBonus, ssa.boosts));\n\n      const maxChars = this.hssCharOnce ? 75 : 50;\n      const mainChrs = [...this.mainChrs].sort((a, b) => this.compare(powMain(a), powMain(b))).slice(0, maxChars);\n      const supChrs = [...this.supChrs].sort((a, b) => this.compare(powSup(a), powSup(b))).slice(0, maxChars);\n\n      let results = [];\n\n      const getPEnchants = (a) => {\n        let r = [];\n        for (let i = 0; i < a.length; ++i)\n          if (i % 2 == 0)\n            r.push(a[i]);\n        return r;\n      };\n      const getFEnchants = (a) => {\n        let r = [];\n        for (let i = 0; i < a.length; ++i)\n          if (i % 2 == 1)\n            r.push(a[i]);\n        return r;\n      };\n\n      for (const mchr of mainChrs) {\n        for (const schr of supChrs) {\n          msa.items = [];\n          msa.enchantsP = [];\n          msa.enchantsF = [];\n          msa.skills = [];\n          ssa.items = [];\n          ssa.enchantsP = [];\n\n          msa.character = mchr;\n          ssa.character = schr;\n          const r = this.autoEquipImpl({\n            character: mchr,\n            status: this.calcStatMainImpl(msa, null, true),\n          }, {\n            character: schr,\n            status: this.calcStatSupportImpl(ssa),\n          }, 0);\n\n          msa.items = r.main.items;\n          msa.enchantsP = getPEnchants(r.main.enchants);\n          msa.enchantsF = getFEnchants(r.main.enchants);\n          msa.enchantPassive = r.main.enchantPassive;\n          r.main.skills = msa.skills = this.autoMainSkillImpl(mchr);\n\n          ssa.items = r.support.items;\n          ssa.enchantsP = r.support.enchants;\n          const bp = this.calcStatMainImpl(msa, ssa)[7]\n\n          results.push({\n            bp: bp,\n            main: mchr.name,\n            support: schr.name,\n            data: {\n              main: mchr,\n              support: schr,\n              msa: msa,\n              ssa: ssa,\n              result: r,\n            }\n          });\n        }\n      }\n\n      results = results.sort((a, b) => this.compare(a.bp, b.bp));\n      if (this.hssCharOnce) {\n        let filtered = [];\n        let used = new Set();\n        for (let e of results) {\n          if (!used.has(e.data.main) && !used.has(e.data.support)) {\n            filtered.push(e);\n            used.add(e.data.main);\n            used.add(e.data.support);\n          }\n        }\n        results = filtered;\n      }\n      results = results.slice(0, 200);\n\n      let usedChr = new Set();\n      for (let i = 0; i < results.length; ++i) {\n        let r = results[i];\n        r.index = i + 1;\n        r._cellVariants = {};\n        if (!usedChr.has(r.main)) {\n          usedChr.add(r.main);\n          r._cellVariants.main = \"primary\";\n        }\n        if (!usedChr.has(r.support)) {\n          usedChr.add(r.support);\n          r._cellVariants.support = \"warning\";\n        }\n      }\n      this.highscoreData = results;\n    },\n\n    highscoreReplay(rec) {\n      let s = this;\n      const msa = rec.data.msa;\n      const ssa = rec.data.ssa;\n      const r = rec.data.result;\n      {\n        s.main.character.value = rec.data.main;\n        s.main.star.value = msa.star;\n        s.main.level.value = msa.level;\n        s.main.master.value = msa.master;\n        s.main.loveBonus.value = msa.loveBonus;\n\n        let boosts = [...msa.boosts];\n        for (const v of Object.values(s.mainBoosts))\n          v.value = boosts.shift();\n\n        let enchants = [...r.main.enchants];\n        for (const v of Object.values(s.mainEnchants)) {\n          v.valueP = enchants.shift();\n          v.valueF = enchants.shift();\n        }\n\n        s.mainItems = [...r.main.items];\n        s.mainEnchantPassive = [...r.main.enchantPassive];\n        s.mainSkills = [...r.main.skills];\n      }\n      {\n        s.support.character.value = rec.data.support;\n        s.support.star.value = ssa.star;\n        s.support.level.value = ssa.level;\n        s.support.master.value = ssa.master;\n        s.support.loveBonus.value = ssa.loveBonus;\n\n        let boosts = [...ssa.boosts];\n        for (const v of Object.values(s.supportBoosts))\n          v.value = boosts.shift();\n\n        let enchants = [...r.support.enchants];\n        for (const v of Object.values(s.supportEnchants)) {\n          v.valueP = enchants.shift();\n        }\n\n        s.supportItems = [...r.support.items];\n      }\n    },\n\n    getStatMainArgs() {\n      const s = this;\n      let r = {\n        character: s.main.character.value,\n        star: s.main.star.value,\n        level: s.main.level.value,\n        master: s.main.master.value,\n        loveBonus: s.main.loveBonus.value,\n        engage: s.main.engage.value,\n        boosts: Object.values(s.mainBoosts).map(a => a.value),\n        enchantsP: Object.values(s.mainEnchants).map(a => a.valueP),\n        enchantsF: Object.values(s.mainEnchants).map(a => a.valueF),\n        items: [...s.mainItems],\n        enchantPassive: [...s.mainEnchantPassive],\n        skills: [...s.mainSkills],\n      };\n      return r;\n    },\n    getStatSupportArgs() {\n      const s = this;\n      let r = {\n        character: s.support.character.value,\n        star: s.support.star.value,\n        level: s.support.level.value,\n        master: s.support.master.value,\n        loveBonus: s.support.loveBonus.value,\n        boosts: Object.values(s.supportBoosts).map(a => a.value),\n        enchantsP: Object.values(s.supportEnchants).map(a => a.valueP),\n        items: [...s.supportItems],\n      };\n      return r;\n    },\n    calcStatMainImpl(ma, sa, skipBP = false) {\n      const empty = [0, 0, 0, 0, 0, 0];\n      const chr = ma.character;\n      if (!chr)\n        return empty;\n\n      let r = this.getMainChrStatus(chr, ma.level, ma.star, ma.master, ma.loveBonus, ma.boosts);\n\n      let enchantP = [...ma.enchantsP];\n      if (enchantP.length) {\n        for (const eps of ma.enchantPassive) {\n          if (!eps)\n            continue;\n          const ep = eps.baseStatusBoost;\n          if (ep) {\n            if (ep.hp) enchantP[0] += ep.hp;\n            if (ep.atk) enchantP[1] += ep.atk;\n            if (ep.def) enchantP[2] += ep.def;\n            if (ep.mag) enchantP[3] += ep.mag;\n            if (ep.res) enchantP[4] += ep.res;\n            if (ep.tec) enchantP[5] += ep.tec;\n          }\n        }\n      }\n\n      for (let i = 0; i < enchantP.length; ++i) {\n        r[i] = Math.round(r[i] * (1.0 + enchantP[i] * 0.01));\n      }\n\n      const items = ma.items.filter(a => a != null);\n      for (const item of items) {\n        for (let i = 0; i < r.length; ++i)\n          r[i] += item.status[i];\n      }\n      for (let i = 0; i < ma.enchantsF.length; ++i)\n        r[i] += ma.enchantsF[i];\n\n      if (skipBP)\n        return r;\n\n      // 以下戦闘力\n      let bpr = 1.0;\n      bpr += 0.1 * ma.star;\n      bpr += 0.1 * ma.master;\n      for (let skill of ma.skills) {\n        // スキルコスト & エンゲージスキルボーナス\n        bpr += this.getSkillBPRate(skill);\n      }\n      bpr += 0.02 * (5 * items.length); // アイテムの☆合計\n      if (items.length == 4)\n        bpr += 0.1; // エンチャント4セット\n      const bpMain = Math.round(this.getBattlePower(r) * bpr);\n      const rMain = [...r, bpMain];\n      if (!sa || !sa.character)\n        return rMain;\n\n      const sup = sa.character;\n      bpr += 0.1 * sa.star;\n      bpr += 0.1 * sa.master;\n      bpr += 0.05 * 3; // スキル開放\n\n      const sr = this.calcStatSupportImpl(sa);\n      for (let i of [0, 2, 4])\n        r[i] += sr[i];\n\n      const mapi = chr.damageType == \"アタック\" ? 1 : 3;\n      const sapi = sup.damageType == \"アタック\" ? 1 : 3;\n      r[mapi] += sr[sapi];\n      const bpTotal = Math.round(this.getBattlePower(r) * bpr);\n      return [...rMain, bpTotal];\n    },\n    calcStatMain() {\n      return this.calcStatMainImpl(this.getStatMainArgs(), this.getStatSupportArgs());\n    },\n\n    calcStatSupportImpl(sa) {\n      const empty = [0, 0, 0, 0, 0, 0];\n      const chr = sa.character;\n      if (!chr)\n        return empty;\n\n      let r = this.getSupportChrStatus(chr, sa.level, sa.star, sa.master, sa.loveBonus, sa.boosts, sa.enchantsP);\n\n      const items = sa.items.filter(a => a != null);\n      for (const item of items) {\n        for (let i = 0; i < r.length; ++i)\n          r[i] += item.status[i];\n      }\n\n      // テクニック除去\n      r[5] = 0;\n\n      // 以下戦闘力\n      let bpr = 1.0;\n      bpr += 0.1 * sa.star;\n      bpr += 0.1 * sa.master;\n      bpr += 0.05 * 3; // スキル開放\n      let bp = Math.round(this.getBattlePower(r) * bpr);\n\n      return [...r, bp];\n    },\n    calcStatSupport() {\n      return this.calcStatSupportImpl(this.getStatSupportArgs());\n    },\n\n    serialize() {\n      let params = [];\n\n      const getUid = obj => obj ? obj.uid : \"none\";\n\n      for (let v of Object.values(this.main)) {\n        if (v.type == \"character\")\n          params.push(getUid(v.value));\n        else\n          params.push(v.value);\n      }\n      for (let v of Object.values(this.mainBoosts))\n        params.push(v.value);\n      for (let v of Object.values(this.mainEnchants)) {\n        params.push(v.valueP);\n        params.push(v.valueF);\n      }\n      for (let v of this.mainSkills)\n        params.push(getUid(v));\n      for (let v of this.mainItems)\n        params.push(getUid(v));\n      for (let v of this.mainEnchantPassive)\n        params.push(getUid(v));\n\n      for (let v of Object.values(this.support)) {\n        if (v.type == \"character\")\n          params.push(getUid(v.value));\n        else\n          params.push(v.value);\n      }\n      for (let v of Object.values(this.supportBoosts))\n        params.push(v.value);\n      for (let v of Object.values(this.supportEnchants))\n        params.push(v.valueP);\n\n      for (let v of this.supportItems)\n        params.push(getUid(v));\n      for (let v of this.supportAmuletSkills)\n        params.push(getUid(v));\n\n      return params;\n    },\n    deserialize(params) {\n      if (!Array.isArray(params) || params.length == 0) {\n        return;\n      }\n      //console.log(params);\n\n      const find = uid => uid ? this.searchTableWithUid.get(uid.toString()) : null;\n\n      for (let v of Object.values(this.main)) {\n        if (v.type == \"character\")\n          v.value = find(params.shift());\n        else\n          v.value = params.shift();\n      }\n      if (this.main.character.value?.engage) {\n        this.main.character.value.engage.enabled = this.main.engage.value;\n      }\n\n      for (let v of Object.values(this.mainBoosts))\n        v.value = params.shift();\n      for (let v of Object.values(this.mainEnchants)) {\n        v.valueP = params.shift();\n        v.valueF = params.shift();\n      }\n\n      this.mainSkills = [\n        find(params.shift()),\n        find(params.shift()),\n        find(params.shift()),\n      ];\n      this.mainItems = [\n        find(params.shift()),\n        find(params.shift()),\n        find(params.shift()),\n        find(params.shift()),\n      ];\n      this.mainEnchantPassive = [\n        find(params.shift()),\n      ];\n\n      for (let v of Object.values(this.support)) {\n        if (v.type == \"character\")\n          v.value = find(params.shift());\n        else\n          v.value = params.shift();\n      }\n      for (let v of Object.values(this.supportBoosts))\n        v.value = params.shift();\n      for (let v of Object.values(this.supportEnchants))\n        v.valueP = params.shift();\n\n      this.supportItems = [\n        find(params.shift()),\n        find(params.shift()),\n      ];\n      this.supportAmuletSkills = [\n        find(params.shift()),\n        find(params.shift()),\n      ];\n    },\n\n    getParamsUrl() {\n      let params = this.serialize();\n      let url = window.location.href.replace(/\\?.+/, '').replace(/#.+/, '');\n      url += \"?stat=\" + params.join(',') + \"#status\";\n      //this.parseParamsUrl(url); // debug\n      return url;\n    },\n\n    parseParamsUrl(url) {\n      url = decodeURIComponent(url);\n      let q = url.match(/\\?stat=([^#]+)/);\n      if (q) {\n        let params = q[1].split(',').map(this.parseValue);\n        this.deserialize(params);\n        return true;\n      }\n      return false;\n    },\n\n    onChange() {\n      if (this.embed) {\n        if (!this.cooldown) {\n          this.$emit('change', this);\n          // 非常に美しくないが、連打を防ぐため少し間を置く\n          this.cooldown = true;\n          setTimeout(() => { this.cooldown = false }, 100);\n        }\n      }\n      if (this.prevMainEngage != this.main.engage.value) {\n        this.prevMainEngage = this.main.engage.value;\n        this.autoMainSkill();\n      }\n    },\n\n    onSkillDrag(idx) {\n      this.draggingSkillIdx = idx;\n    },\n    onSkillDrop(idx) {\n      if (this.draggingSkillIdx >= 0) {\n        let tmp = [...this.mainSkills];\n        tmp[this.draggingSkillIdx] = this.mainSkills[idx];\n        tmp[idx] = this.mainSkills[this.draggingSkillIdx];\n        this.mainSkills = tmp;\n      }\n      this.draggingSkillIdx = -1;\n    },\n    dummyHandler() {\n    },\n\n    onCopyUrl() {\n      const url = this.getParamsUrl();\n      this.copyToClipboard(url);\n      this.toast(`コピーしました`);\n    },\n  },\n\n  computed: {\n    mainClass() {\n      const chr = this.main.character.value;\n      return chr ? chr.class : true;\n    },\n    mainSkillList() {\n      return this.main.character.value?.skills ?? [];\n    },\n\n    statMainResult() {\n      return this.calcStatMain();\n    },\n    statSupportResult() {\n      return this.calcStatSupport();\n    },\n  },\n\n  watch: {\n    main: { handler: function () { this.onChange(); }, deep: true },\n    mainBoosts: { handler: function () { this.onChange(); }, deep: true },\n    mainItems: { handler: function () { this.onChange(); }, deep: true },\n    mainEnchantPassive: { handler: function () { this.onChange(); }, deep: true },\n    mainEnchants: { handler: function () { this.onChange(); }, deep: true },\n    mainSkills: { handler: function () { this.onChange(); }, deep: true },\n    support: { handler: function () { this.onChange(); }, deep: true },\n    supportBoosts: { handler: function () { this.onChange(); }, deep: true },\n    supportItems: { handler: function () { this.onChange(); }, deep: true },\n    supportEnchants: { handler: function () { this.onChange(); }, deep: true },\n    supportAmuletSkills: { handler: function () { this.onChange(); }, deep: true },\n  },\n\n};\n</script>\n\n<style>\n.small-margin {\n  margin: 3px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatusSimulator.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatusSimulator.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./StatusSimulator.vue?vue&type=template&id=762c47c0\"\nimport script from \"./StatusSimulator.vue?vue&type=script&lang=js\"\nexport * from \"./StatusSimulator.vue?vue&type=script&lang=js\"\nimport style0 from \"./StatusSimulator.vue?vue&type=style&index=0&id=762c47c0&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"message-board\"},[(_vm.fetching)?_c('div',{staticStyle:{\"position\":\"absolute\",\"padding\":\"10px\"}},[_c('b-spinner',{attrs:{\"small\":\"\",\"label\":\"Spinning\"}})],1):_vm._e(),_c('ul',{ref:\"messageUl\",class:['message-ul', _vm.messageClass]},_vm._l((_vm.messages),function(m,i){return _c('li',{key:i,staticClass:\"message-li\"},[_c('span',{staticClass:\"user-name\"},[_vm._v(_vm._s(m.name)+\" : \")]),_c('span',{staticClass:\"message\",staticStyle:{\"margin-left\":\"0.25em\"},domProps:{\"innerHTML\":_vm._s(m.message)}}),_c('span',{staticClass:\"date\",staticStyle:{\"margin-left\":\"0.5em\"}},[_vm._v(_vm._s(m.date))])])}),0),_c('div',{staticClass:\"flex inputs\"},[_c('div',[_c('b-form-input',{staticStyle:{\"width\":\"8em\"},attrs:{\"size\":\"sm\",\"placeholder\":\"お名前\"},model:{value:(_vm.userName),callback:function ($$v) {_vm.userName=$$v},expression:\"userName\"}})],1),_c('div',{staticStyle:{\"margin-left\":\"0.25em\",\"flex\":\"1\"}},[_c('b-form-textarea',{attrs:{\"size\":\"sm\",\"placeholder\":\"メッセージ\"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1),_c('div',{staticStyle:{\"margin-left\":\"0.25em\"}},[_c('b-button',{staticStyle:{\"min-width\":\"4em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.sendMessage()}}},[_vm._v(\"送信\")])],1),_c('div',{staticStyle:{\"margin-left\":\"0.25em\"}},[_c('b-button',{attrs:{\"size\":\"sm\",\"title\":`投稿があった時通知 (現在 ${_vm.subscribed ? 'On' : 'Off'})`},on:{\"click\":function($event){_vm.subscribed=!_vm.subscribed}}},[_c('b-icon',{attrs:{\"icon\":_vm.subscribed ? 'bell-fill' : 'bell'}})],1)],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"message-board\">\n    <div v-if=\"fetching\" style=\"position: absolute; padding: 10px;\">\n      <b-spinner small label=\"Spinning\"></b-spinner>\n    </div>\n    <ul :class=\"['message-ul', messageClass]\" ref=\"messageUl\">\n      <li v-for=\"(m, i) of messages\" :key=\"i\" class=\"message-li\">\n        <span class=\"user-name\">{{m.name}} : </span>\n        <span class=\"message\" style=\"margin-left: 0.25em\" v-html=\"m.message\"></span>\n        <span class=\"date\" style=\"margin-left: 0.5em\">{{m.date}}</span>\n      </li>\n    </ul>\n    <div class=\"flex inputs\">\n      <div><b-form-input size=\"sm\" v-model=\"userName\" placeholder=\"お名前\" style=\"width: 8em\"></b-form-input></div>\n      <div style=\"margin-left: 0.25em; flex: 1;\"><b-form-textarea size=\"sm\" v-model=\"message\" placeholder=\"メッセージ\" style=\"\"></b-form-textarea></div>\n      <div style=\"margin-left: 0.25em;\"><b-button size=\"sm\" @click=\"sendMessage()\" style=\"min-width: 4em;\">送信</b-button></div>\n      <div style=\"margin-left: 0.25em;\"><b-button size=\"sm\" :title=\"`投稿があった時通知 (現在 ${subscribed ? 'On' : 'Off'})`\" @click=\"subscribed=!subscribed\"><b-icon :icon=\"subscribed ? 'bell-fill' : 'bell'\" /></b-button></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as lut from \"../utils.js\";\n\nexport default {\n  name: 'MessageBoard',\n  props: {\n    thread: {\n      type: String,\n      required: true,\n    },\n    messageClass: {\n      type: String,\n      default: \"\",\n    },\n    fetchCallback: {\n      type: Function,\n      default: null,\n    },\n  },\n\n  data() {\n    return {\n      subscribed: false,\n      userName: \"\",\n      message: \"\",\n\n      fetching: false,\n      messages: [],\n      anchors: [],\n    }\n  },\n\n  mounted() {\n    this.userName = localStorage.getItem(`userName`) ?? \"\";\n    this.subscribed = localStorage.getItem(`subscribe.${this.thread}`) != null;\n    this.reload();\n  },\n\n  destroyed() {\n    this.discard();\n  },\n\n  methods: {\n    reload() {\n      this.fetching = true;\n      fetch(`${lut.MessageServer}?mode=getm&thread=${this.thread}`)\n        .then(a => a.json())\n        .then(mesages => {\n          this.fetching = false;\n          this.messages = mesages;\n          for (let m of this.messages) {\n            m.message = this.sanitizeText(m.message);\n          }\n\n          this.$nextTick(() => {\n            let ul = this.$refs.messageUl;\n            if (ul) {\n              ul.scrollTo(0, ul.scrollHeight);\n            }\n\n            this.discard();\n            for (let m of ul.getElementsByClassName(\"message\")) {\n              for (let a of m.children) {\n                this.anchors.push(a);\n              }\n            }\n            this.$emit('change', this);\n          });\n        });\n    },\n\n    discard() {\n      this.$emit('discard', this);\n      this.anchors = [];\n    },\n\n    sendMessage() {\n      const thread = this.thread;\n      const name = encodeURIComponent(this.userName);\n      const message = encodeURIComponent(this.message);\n      if (message.length > 0) {\n        fetch(`${lut.MessageServer}?mode=putm&thread=${thread}&name=${name}&message=${message}`)\n          .then(a => a.json())\n          .then(obj => {\n            this.message = \"\";\n            this.subscribed = true;\n            this.reload();\n            lut.updateSubscribeLastCheck();\n          });\n      }\n    },\n\n    sanitizeText(str) {\n      const callback = (c) => {\n        const table = {\n          '<': '&lt;',\n          '>': '&gt;',\n          '\\n': '<br />',\n        };\n        return table[c] || c;\n      };\n      str = str.replace(/[&<>\\n]/g, callback);\n      // [[スキル名]] を anchor 化、ItemPopovers で popover 化\n      str = str.replace(/\\[\\[(.+?)\\]\\]/g, \"<a href='javascript:void(0);'>$1</a>\");\n      return str;\n    }\n  },\n\n  watch: {\n    userName: function (v) {\n      localStorage.setItem(`userName`, v);\n    },\n    subscribed: function (v) {\n      const key = `subscribe.${this.thread}`;\n      if (v) {\n        localStorage.setItem(key, 'true');\n      }\n      else {\n        localStorage.removeItem(key);\n      }\n      //console.log(`subscribed: ${v}`);\n    },\n  },\n}\n</script>\n\n<style scoped>\n  .message-ul {\n    margin: 0.25em 0 0.25em 0;\n    max-height: 16em;\n    overflow-y: auto;\n  }\n\n  .message-li {\n    display: list-item;\n    list-style-type: disc;\n    margin-left: 15px;\n  }\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MessageBoard.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MessageBoard.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MessageBoard.vue?vue&type=template&id=4a69ef82&scoped=true\"\nimport script from \"./MessageBoard.vue?vue&type=script&lang=js\"\nexport * from \"./MessageBoard.vue?vue&type=script&lang=js\"\nimport style0 from \"./MessageBoard.vue?vue&type=style&index=0&id=4a69ef82&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a69ef82\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"root\" @mousemove=\"onMouseMove\">\n    <div class=\"header\" :class=\"{ 'hidden': !showHeader }\">\n      <Navigation />\n    </div>\n\n    <div class=\"content\" style=\"margin-top: 70px;\" :style=\"style\">\n      <div class=\"about\">\n        <h2><a name=\"toc\" href=\"#toc\"></a>目次</h2>\n        <p>\n          <ul>\n            <li><a href=\"#about\">このサイトについて</a></li>\n            <li><a href=\"#buff\">バフ・デバフの競合・重複</a></li>\n            <li><a href=\"#class-advantage\">クラス相性</a></li>\n            <li><a href=\"#notes\">その他のバフと補足事項</a></li>\n            <li><a href=\"#damage\">ダメージ計算</a></li>\n            <li><a href=\"#status\">基本ステータスについて</a></li>\n            <li><a href=\"#battle_power\">戦闘力について</a></li>\n          </ul>\n        </p>\n\n        <h2><a name=\"about\" href=\"#about\"></a>このサイトについて</h2>\n        <p>\n          <b-link href=\"https://www.legend-clover.net/\" target=\"_blank\">れじぇくろ！</b-link>の攻略データベースです。主にバフ・デバフを検索するのを目的としています。<br />\n        </p>\n\n        <h2>バフ・デバフの競合・重複<a name=\"buff\" href=\"#buff\">.</a></h2>\n        <p>\n          れじぇくろのバフ・デバフの関係は以下のようになっています。<br />\n          <ul>\n            <li>同系統のバフが同時にかかった場合、アクティブスキル同士は競合し、一番効果が高いもののみ適用。</li>\n            <li>ただし、メインキャラのアクティブとサポートキャラのアクティブは別枠で効果が加算になる。</li>\n            <li>タレント、パッシブスキル、装備の効果は全て加算。ただし、同スキル・同アイテム同士に限っては競合。</li>\n            <li>デバフも同じルール。バフとデバフが同時にかかった場合、% を足し合わせて相殺となる。</li>\n          </ul>\n          <br />\n          つまり、大雑把には<br />\n          <b>一番効果の高いメインのアクティブ＋一番効果の高いサポートのアクティブ＋全タレント・パッシブ・装備効果</b><br />\n          と覚えておいてよいでしょう。<br />\n          <br />\n          しかし、アクティブ同士の関係は厳密にはもっと複雑です。<br />\n          一部特殊なアクティブスキルがあり、これらのバフは無条件で他のアクティブと加算になります。<br />\n          これらは「一時的にパッシブスキルを付与する」という扱いになっているようです。<br />\n          シンボルスキルに付随する加護 (アタック～レジスト以外のバフ) はこちらに分類されます。<br />\n          それ以外の該当スキルを全て以下に列挙します。大抵は条件付きバフのみが特殊枠で、他は通常のアクティブ枠です。(スキルの注釈を参照)<br />\n          単体or自己バフスキル：\n          <span v-for=\"(skill, si) of specialBuffSkillsSingle\" :key=\"`sbss${si}`\" style=\"margin: 4px\">\n            <b-link :ref=\"po\">{{skill.name}}</b-link>\n          </span><br />\n          範囲or全体バフスキル：\n          <span v-for=\"(skill, si) of specialBuffSkillsMulti\" :key=\"`sbsm${si}`\" style=\"margin: 4px\">\n            <b-link :ref=\"po\">{{skill.name}}</b-link>\n          </span><br />\n\n          <br />\n          加えて、与ダメージとダメージ耐性にはまた別のルールがあります。<br />\n          これらには物理与ダメージ、魔法与ダメージ、スキル与ダメージといったバリエーションがありますが、<br />\n          異なるバリエーションであればアクティブ同士でも効果が加算になります。<br />\n          与ダメージのバリエーションは 無印、物理、魔法、スキル、範囲スキル、通常攻撃 の 6 種、<br />\n          ダメージ耐性のバリエーションは 無印、物理、魔法、範囲スキル (敵専用) の 4 種になります。<br />\n          <ul>\n            <li>例1: <b-link :ref=\"po\">お届け物です！</b-link>＋<b-link :ref=\"po\">総員、突撃用意</b-link>＋<b-link :ref=\"po\">テスト勉強のお手伝い</b-link>＋<b-link :ref=\"po\">道教式チアリーディング</b-link>＝物理通常攻撃与ダメージ +95%</li>\n            <li>例2: <b-link :ref=\"po\">お届け物です！</b-link>＋<b-link :ref=\"po\">総員、突撃用意</b-link>＋<b-link :ref=\"po\">リトルマロース</b-link>＋<b-link :ref=\"po\">発明官女</b-link>＝物理範囲スキル与ダメージ +100% & 魔法範囲スキル与ダメージ +110%</li>\n          </ul>\n          <s>なお、通常攻撃与ダメージバフは反撃には乗らないことが確認されています。(2023/04 現在。バグか仕様かは不明)</s><br />\n          2023//05 のアップデートにて通常攻撃与ダメージバフは反撃にも乗るように変更されました。<br />\n          <br />\n          一部のバフ・デバフには上限があることが確認されています。<br />\n          該当するのは基本ステータス値へのデバフ (アタック・ディフェンス・マジック・レジスト)、およびダメージ耐性バフと与ダメージデバフで、<br />\n          これらは 70% 以上盛っても実際に効果を発揮するのは 70% までとなります。<br />\n          <span class=\"note\">この 70% はバフ・デバフを相殺した上での上限。なので、例えば 50% のバフを得ている敵は 120% デバフでようやく上限到達となる。</span><br />\n          なお、基本ステータス値へのバフ、与ダメージバフ、ダメージ耐性デバフに関しては上限はないものとみられます。<br />\n        </p>\n\n        <h2><a name=\"class-advantage\" href=\"#class-advantage\"></a>クラス相性</h2>\n        <p>\n          クラス間の有利不利は戦闘時のアタック / マジックへのバフ・デバフという形で表現されています。<br />\n          <b>通常のアタックバフやマジックバフとは加算の関係</b>になり、メイン・サポート両方に個別に適用されます。<br />\n          また、これらは通常の戦闘前バフとは異なり、範囲攻撃にも適用されます。<br />\n          <b-table outlined bordered :items=\"stat.classBonusBase\">\n            <template #head(攻撃側)=\"r\">\n              攻撃側＼防御側{{r.null}}\n            </template>\n            <template #cell()=\"r\">\n              <span v-html=\"n2percent(r.value)\" />\n            </template>\n          </b-table>\n          <br />\n\n          クラス相性の書により効果が強化され、全開放時は以下になります。<br />\n          また、クラス相性の書の「耐性」の効果により、不利相性で攻撃される際に敵にかかるバフが減ります。<br />\n          例: プレイヤー側のソルジャーがライダーから攻撃される際、敵にかかるバフが本来の 45% から 35% に減じる (全開放時)<br />\n          なお、<b>同じクラス相性の書でも「与ダメージ」の効果は与ダメージバフと同列の扱い (加算の関係)</b> になります。\n          <b-table outlined bordered :items=\"stat.classBonusMax\">\n            <template #head(攻撃側)=\"r\">\n              攻撃側＼防御側{{r.null}}\n            </template>\n            <template #cell()=\"r\">\n              <span v-html=\"n2percent(r.value)\" />\n            </template>\n          </b-table>\n        </p>\n\n        <h2><a name=\"notes\" href=\"#notes\"></a>その他のバフと補足事項</h2>\n        <p>\n          タレント、スキル、アイテム以外の方法で得られるバフに関して記載します。<br />\n          これらも同系統の効果とは加算になり、競合するケースはないとみられます。<br />\n          <br />\n          エンチャントのセット効果の多くはバフを持ちます。<br />\n          これらのバフはメインのみが対象となります。\n          <ul>\n            <li>バスター：アタック/マジック+5%、味方ターンでの戦闘時、アタック/ダメージ耐性+15%</li>\n            <li>チャージ：アタック/マジック+5%、自ユニットのHPが75%以上の時、アタック/マジック/ディフェンス/レジスト+10%</li>\n            <li>フェザー：アタック/マジック+5%、与ダメージ+10%、行動終了時、確率(40%)で移動+1(1ターン)</li>\n            <li>\n              クイック：アタック/マジック+5%、アクティブスキルでダメージを与えた時、そのスキルのクールダウン-1(発動してから2ターン毎に発動可能)<br />\n              <span class=\"note\">この「2ターン毎」は再行動では短縮できず、純粋にターン経過を要する</span>\n            </li>\n            <li>ノヴァ：アタック/マジック+5%、スキル与ダメージ+10%、範囲スキル使用時、更にスキル与ダメージ+10%</li>\n            <li>アイアン：最大HP+10%、ダメージ耐性+15%</li>\n            <li>リフレクト：最大HP+10%、敵ターンでの戦闘時、その戦闘後、確率(40%)で自ユニットの受けたダメージの40%を反射する</li>\n            <li>\n              バックアップ：最大HP+10%、自身を中心とした範囲3マス以内の全ての味方メインのディフェンス/レジスト+5%<br />\n              <span class=\"note\">バックアップバフ同士は競合となる。(= バックアップ持ち2人の範囲内にいても+5%止まり)</span>\n            </li>\n            <li>アイス：ディフェンス/レジスト+5%、戦闘後、確率(10%)で敵ユニットにフリーズ(1ターン)を付与する</li>\n            <li>ブライト：ディフェンス/レジスト+5%、治療効果+25%</li>\n            <li>クリスタル：ディフェンス/レジスト+5%、自ユニットのHPが50%以下の時、戦闘後、確率(40%)でメイン、サポートそれぞれのHPが最大の20%回復</li>\n            <li>ストライク：クリティカル率+7%、クリティカルダメージ倍率+30%</li>\n            <li>ブレイク：クリティカル率+7%、味方ターンでの戦闘時、かつ敵ユニットのHPが50%以上の時、与ダメージ+20%</li>\n          </ul>\n          <br />\n          マスタークラス特性にはバフを得るものがあります。<br />\n          以下いずれもマスタークラス 3 での効果で、「自ユニットの」の記載がないものはメインのみが対象です。<br />\n          <ul>\n            <li>ランサー：アタックに基礎ディフェンス値の 30% を加算、敵ターンでの戦闘時、自ユニットのディフェンス+10%</li>\n            <li>\n              ライダー：味方ターンでの戦闘時、自ユニットのアタックに 移動したマス×10% 加算 (最大50%)<br />\n              <span class=\"note\">再行動した場合、移動したマスは 2 回目の行動には引き継がれず、積み直しとなる。</span>\n            </li>\n            <li>\n              エアリアル：隣接する味方ユニットが 2 体以内のとき、自ユニットの最大 HP 以外の全能力+20%<br />\n              <span class=\"note\">2 体以内 = 0 or 1 or 2 体。斜めマスは含まない。</span>\n            </li>\n            <li>シューター：自ユニットにディフェンス無視+30%付与</li>\n            <li>\n              ソーサラー：自ユニットにレジスト無視+30%付与<br />\n              <span class=\"note\">防御無視効果については下記ダメージ計算を参照。</span>\n            </li>\n          </ul>\n          <br />\n          スターフォースクエストでは、所持している全キャラの☆の合計×0.2% 分 アタックとマジックへのバフを得ます。<span class=\"note\">= ☆500 で +100%。</span><br />\n          <br />\n          <b>装備の効果は特に記載がない場合メインのみが対象</b>である点に注意が必要です。<br />\n          サポートも対象の効果は「自ユニットの」という記述があり、区別されています。<br />\n          <span class=\"note\">例: <b-link :ref=\"po\">天蝎の天鎧</b-link> のダメージ耐性はメインのみが対象、<b-link :ref=\"po\">乙女の天衣</b-link> のダメージ耐性はサポートも対象。</span><br />\n          同様に、アミュレットの効果はサポートのみが対象となります。シールドはサポートが倒れている場合発動しません。<br />\n          <br />\n          アンドロメダの<b-link :ref=\"po\">神に勝る美</b-link>やオリオンの<b-link :ref=\"po\">オレの女に手は出させない</b-link>は、HP が 75% ちょうどの場合、以上以下両方の効果が発動します。<br />\n          <span class=\"note\"><b-link :ref=\"po\">天秤の天帽</b-link>などの自傷効果で 25% 減らすことができるが、最大 HP が 4 で割り切れる数でないと 76% になってしまう模様。</span><br />\n        </p>\n\n        <h2><a name=\"damage\" href=\"#damage\"></a>ダメージ計算</h2>\n        <DamageSimulator />\n        <p>\n          れじぇくろのダメージ計算式は以下のようになっています。<br />\n          <code>ダメージ＝(攻撃側の攻撃力－受ける側の防御力)×(スキルのダメージ倍率)×(与ダメージバフ・デバフ)×(ダメージ耐性バフ・デバフ)×(クリティカルダメージ倍率)×乱数×10</code><br />\n          <br />\n          <ul>\n            <li>メイン・サポート個別にこの計算が行われる。</li>\n            <li>最後の ×10 は 1 戦闘に 10 回攻撃が行われるということで、戦闘アニメーションONだと 1 攻撃あたりのダメージが表示される。</li>\n            <li>\n              攻撃力と防御力は、物理攻撃の場合アタック&ディフェンス、魔法攻撃の場合マジック&レジスト。\n              <ul>\n                <li>\n                  「敵ユニットのディフェンス/レジストのn%分を無視して攻撃できる」の能力を持つ場合、効果量分相手の防御力を差し引く。<br />\n                  ただし、この効果はディフェンス/レジストデバフへ加算する形で処理されるようで、他のデバフと合わせて 70% が効果の上限となる。\n                </li>\n              </ul>\n            </li>\n            <li>\n              スキルのダメージ倍率は 攻撃力－防御力 の後の数値にかかる。<span class=\"note\">なので、倍率の低い範囲攻撃は高防御の敵に特別弱いわけではない。</span>\n              <ul>\n                <li>特定の兵種に対して特攻があるスキルは、その兵種に対する専用の倍率が設定されている。</li>\n              </ul>\n            </li>\n            <li>\n              与ダメージバフは無印、物理攻撃、スキル、通常攻撃など様々な種類があるが、全て加算の関係。\n              <ul>\n                <li>クラス相性の書の与ダメージアップも扱いとしては与ダメージバフらしく、加算の関係になる。</li>\n              </ul>\n            </li>\n            <li>\n              ダメージ耐性デバフも同様で、無印、物理攻撃などいくつかの種類があるが、全て加算の関係。\n            </li>\n            <li>\n              ダメージ耐性バフ・デバフと与ダメージバフ・デバフは掛け算の関係。\n              <ul>\n                <li>ダメージ耐性バフと与ダメージデバフはどちらも 70% が効果の上限。<span class=\"note\">両方最大まで盛ると 0.3×0.3=9% まで被ダメージを抑え込める。</span></li>\n              </ul>\n            </li>\n            <li>\n              クリティカル発生時はクリティカルダメージ倍率が適用される。この倍率は 30% + バフ効果量。\n              <ul>\n                <li>クリティカル発生率は テクニック÷10 + クリティカル率バフ - 相手のクリティカル率耐性 とみられる。</li>\n                <li>\n                  ただし、サポートの攻撃はクリティカルが発生しない模様。<br />\n                  <span class=\"note\">ユニット対象バフでクリティカル率 100% にしてもサポートのダメージにはクリティカルダメージ倍率が適用されない。</span>\n                </li>\n              </ul>\n            </li>\n            <li>乱数による振れ幅はわずかで、±2% 程度。</li>\n            <li>\n              遠距離攻撃キャラが近接攻撃した場合、最終ダメージに 0.6 倍される。\n              <ul>\n                <li>メイン・サポート両方に個別に適用。</li>\n                <li>\n                  「遠距離攻撃キャラ」の定義は、装備やバフを含まない基礎射程が 2 であること、である模様。<br />\n                  <span class=\"note\">基礎射程 1 のキャラを<b-link :ref=\"po\">蒼水晶の槍</b-link>や<b-link :ref=\"po\">天導の聖火</b-link>で射程を伸ばして近接攻撃しても 0.6 倍はされない。</span>\n                </li>\n              </ul>\n            </li>\n            <li>\n              2回攻撃を持つ場合、最初の一斉攻撃の後、相手が生き残っていたら再度攻撃を行う。<br />\n              <span class=\"note\">ギルクエ EX で高スコアを狙う場合、最初の一斉攻撃で倒れない相手を狙う。</span>\n            </li>\n            <li>\n              反射を持つ場合、戦闘後、生き残っていたら受けたダメージの効果量 % 分を固定ダメージとして相手に返す。\n              <ul>\n                <li>戦闘後に発動するデバフなどについても同様で、戦闘後生き残っていないと発動しない。</li>\n                <li><b-link :ref=\"po\">ラストスタンド</b-link>などで復活しても撃破された扱いであるらしく、発動しない。</li>\n              </ul>\n            </li>\n            <li>戦闘の前後に発生する固定ダメージは、防御力やシールドの影響を受けず、バフ・デバフも乗らない、文字通り固定値のダメージを与える。</li>\n            <li>\n              サポートは常に先に攻撃の対象になり、生きている限りダメージを受けるのはサポートになる。(後述の範囲攻撃を除く)\n              <ul>\n                <li>サポートが倒れた時、超過分のダメージがメインに流れることはない。<span class=\"note\">= HP1 でも 1 発は攻撃を反らせる。</span></li>\n                <li>サポートは倒れると攻撃にも参加しなくなる。アミュレットのシールドも発動しなくなる。</li>\n              </ul>\n            </li>\n            <li>\n              範囲攻撃の場合、計算式は同じだが、戦闘の前後に発動するバフ・デバフなどが発動しないこと、メインとサポート両方に攻撃が行くこと、<br />サポートが攻撃に参加しないことなどが異なる。\n              <ul>\n                <li>ダメージを与えたときに発動する効果などは発動する。</li>\n                <li>クリティカル判定はメイン・サポート個別に行われる。</li>\n                <li>\n                  範囲攻撃によりメインがサポートより先に倒れた場合、ユニット自体撃破された扱いになる。<br />\n                  <span class=\"note\">つまり、範囲攻撃の連打でやられるようなケースでは、サポートをいくら固くしても対策にならない。</span>\n                </li>\n              </ul>\n            </li>\n            <li>\n              単体攻撃でありながら範囲攻撃のようにメインとサポート両方同時攻撃のスキルも存在する。\n              <ul>\n                <li>扱いとしては範囲攻撃 (非戦闘攻撃) とみられ、戦闘の前後に発動するバフ・デバフが発動せず、シールドやガードも無視する。</li>\n                <li>スターフォースクエストの敵の単体攻撃スキルはこのタイプ。2 回攻撃のようなものなので、知らないと予想外のダメージに驚くことになる。</li>\n              </ul>\n            </li>\n          </ul>\n        </p>\n\n        <h2><a name=\"status\" href=\"#status\"></a>基本ステータスについて</h2>\n        <StatusSimulator />\n        <p class=\"desc\">\n          基本ステータスとは、戦闘前に決定するステータス値で、キャラ画面の情報で表示されるものがそれになります。<br />\n          割合バフや「能力値の n %を加算」系の効果は基本ステータスに対する割合として機能します。戦闘力も基本ステータスから算出されます。<br />\n          基本ステータスは以下のように算出されます。<br />\n          <br />\n          メインの場合：<br />\n          <code>基本ステータス＝(初期値＋レベル上昇値＋☆上昇値＋好感度ボーナス＋マスターボーナス)×(記憶の書＋強化ボード)×(割合エンチャント)＋装備＋固定値エンチャント</code><br />\n          <br />\n          サポートの場合：<br />\n          <code>基本ステータス＝(初期値＋レベル上昇値＋☆上昇値＋好感度ボーナス＋マスターボーナス)×(記憶の書＋強化ボード＋基本ステータス系アミュレットスキル)＋装備</code><br />\n          <br />\n          <ul>\n            <li>\n              初期値、レベル上昇値、☆による上昇値 はキャラ固有\n              <ul>\n                <li>レベルと☆による上昇は 1レベル / 1☆ あたりの上昇量が決まっており、リニアに増えていく方式</li>\n                <li>1☆ あたりの上昇量は大体 4 レベル分くらいになっている模様</li>\n              </ul>\n            </li>\n            <li>\n              <b>エンゲージは基本ステータスには影響しない</b>\n              <ul>\n                <li>戦闘力にのみ若干影響がある（<a href=\"#battle_power\">戦闘力</a>を参照）</li>\n              </ul>\n            </li>\n            <li>好感度ボーナスは全開放時 <span style=\"background: white\">[100, 25, 15, 25, 15, 0]</span> ([HP, アタック, ディフェンス, マジック, レジスト, テクニック] の順、以後共通)</li>\n            <li>\n              マスターボーナスはクラスレベルに応じて得られる上昇値で、メインとサポートで内容が異なる\n              <b-table small outlined :items=\"stat.masterBonus\"></b-table>\n            </li>\n            <li>\n              記憶の書と強化ボードの合計はカンスト時以下になる\n              <b-table small outlined :items=\"stat.bookBonus\"></b-table>\n            </li>\n            <li>\n              エンチャントの上限は割合と固定値でそれぞれ以下になる (SSR の場合。テクニックには影響しないので除外)\n              <b-table small outlined :items=\"stat.enchantBonus\"></b-table>\n              <ul>\n                <li>アクセサリの場合他にクリティカル率があり、こちらは 15% が上限。テクニックとは別物で基本ステータスには影響しない</li>\n                <li>\n                  エンチャントの2セット特典 (バスターの アタック/マジック+5% など) も基本ステータスへの割合強化として扱われる<br />\n                  <span class=\"note\">ストライクの2セット特典の クリティカル率+7% は基本ステータスには影響しないため、戦闘力的には不利を被る</span>\n                </li>\n              </ul>\n            </li>\n            <li>\n              アミュレットスキルは割合上昇のみで、上限は以下になる (こちらも SSR の場合。テクニックには影響しないので除外)\n              <b-table small outlined :items=\"stat.amuletBonus\"></b-table>\n              <ul>\n                <li>スキル1は戦闘時に効果を発揮するタイプで、基本ステータスには影響しない</li>\n              </ul>\n            </li>\n          </ul>\n        </p>\n\n        <h2><a name=\"battle_power\" href=\"#battle_power\"></a>戦闘力について</h2>\n        <BattlePointSimulator />\n        <p>\n          戦闘力は以下のように算出されます。<br />\n          <br />\n          <code>戦闘力＝A(ステータスに基づく基礎値) × B(☆やマスターレベルなどによる倍率)</code><br />\n          A の内訳：<br />\n          <code>HP×0.05＋攻撃力×2×(1.0＋テクニック×0.0003)＋ディフェンス×2＋レジスト×2</code><br />\n          B の内訳：<br />\n          <code>\n            1.0＋☆の数×0.1＋マスターレベル×0.1<br />\n            ＋メインの使用スキルコスト×0.03＋エンゲージ後スキルの数×0.05＋メインの装備の☆合計×0.02＋エンチャントが4セット揃っている場合0.1<br />\n            ＋サポートのスキルの数×0.05\n          </code><br />\n          <br />\n          <ul>\n            <li>\n              攻撃力はそのキャラの攻撃タイプがアタックであればアタック、マジックであればマジック\n              <ul>\n                <li>アタックキャラのマジック、マジックキャラのアタックは戦闘力に計上されない</li>\n              </ul>\n            </li>\n            <li>\n              テクニックはクリティカルを模していると見られ、1000 で攻撃力 1.3 倍相当の効果となる\n              <ul>\n                <li>1000 が計上される上限となっているかもしれないが、現状そこまで伸ばす方法がなく検証不能</li>\n              </ul>\n            </li>\n            <li>\n              ステータス値はメインとサポートの合計\n              <ul>\n                <li>サポートの攻撃力にもメインのテクニックによる割合が乗る</li>\n                <li>メインがアタック、サポートがマジック (またはその逆) の場合でも攻撃力として合算され、それにテクニックによる割合が乗る</li>\n              </ul>\n            </li>\n            <li>\n              ☆の数やマスターレベルもメインとサポートの合計\n              <ul>\n                <li>倍率の加算になるため、サポートとリンクすると戦闘力は単純に合計するよりもずっと大きくなる</li>\n              </ul>\n            </li>\n            <li>エンチャントは 4 セット揃えたとき倍率に 0.1 が加算される</li>\n            <li>\n              装備の効果は基本ステータス値が上がるもののみ戦闘力に計上される\n              <ul>\n                <li>サポートのアミュレットも同様で、戦闘開始後に効果を発揮するもの (割合バフやステータス値の n% を加算系など) は計上されない</li>\n                <li>アクセサリのエンチャントのクリティカル率も計上されない</li>\n              </ul>\n            </li>\n          </ul>\n        </p>\n      </div>\n    </div>\n\n    <ItemPopovers />\n  </div>\n</template>\n\n<script>\nimport Navigation from './Navigation.vue'\nimport DamageSimulator from './simulator/DamageSimulator.vue'\nimport BattlePointSimulator from './simulator/BattlePointSimulator.vue'\nimport StatusSimulator from './simulator/StatusSimulator.vue'\nimport MessageBoard from './parts/MessageBoard.vue'\n\nimport jsonMainActive from '../assets/main_active.json'\nimport jsonMainPassive from '../assets/main_passive.json'\nimport jsonMainTalents from '../assets/main_talents.json'\nimport jsonNpcMainChrs from '../assets/npc_main_characters.json'\nimport jsonMainChrs from '../assets/main_characters.json'\nimport jsonSupportActive from '../assets/support_active.json'\nimport jsonSupportPassive from '../assets/support_passive.json'\nimport jsonSupportChrs from '../assets/support_characters.json'\nimport jsonItems from '../assets/items.json'\nimport common from \"./common\";\n\nimport ItemPopovers from './parts/ItemPopovers.vue'\nimport ItemPopoversJs from \"./parts/ItemPopovers.js\";\n\nexport default {\n  name: 'About',\n  components: {\n    Navigation,\n    DamageSimulator,\n    BattlePointSimulator,\n    StatusSimulator,\n    MessageBoard,\n    ItemPopovers,\n  },\n  mixins: [common, ItemPopoversJs],\n\n  data() {\n    return {\n      stat: {\n        masterBonus: [\n          { \"種類\": \"メイン\", \"レベル1\": [200, 0, 0, 0, 0, 0], \"レベル2\": [400, 0, 0, 0, 0, 0], \"レベル3\": [800, 0, 0, 0, 0, 0] },\n          { \"種類\": \"サポート\", \"レベル1\": [300, 15, 8, 15, 8, 0], \"レベル2\": [600, 30, 16, 30, 16, 0], \"レベル3\": [1200, 55, 28, 55, 28, 0] },\n        ],\n        bookBonus: [\n          { \"種類\": \"メイン\", \"上昇率 (%)\": [150, 140, 130, 140, 130, 50] },\n          { \"種類\": \"サポート\", \"上昇率 (%)\": [110, 120, 110, 120, 110, 0] },\n        ],\n        enchantBonus: [\n          { \"種類\": \"武器\", \"割合 (%)\": [10, 15, 5, 15, 5], \"固定値\": [131, 31, 7, 31, 7] },\n          { \"種類\": \"鎧\", \"割合 (%)\": [15, 5, 15, 5, 15], \"固定値\": [200, 11, 19, 11, 19] },\n          { \"種類\": \"兜\", \"割合 (%)\": [15, 5, 15, 5, 15], \"固定値\": [200, 11, 19, 11, 19] },\n          { \"種類\": \"アクセサリ\", \"割合 (%)\": [10, 10, 10, 10, 10], \"固定値\": [131, 21, 13, 21, 13] },\n          { \"種類\": \"合計\", \"割合 (%)\": [50, 35, 45, 35, 45], \"固定値\": [662, 74, 58, 74, 58] },\n        ],\n        amuletBonus: [\n          { \"種類\": \"月アミュレットスキル2\", \"割合 (%)\": [7.5, 7.5, 7.5, 7.5, 7.5] },\n          { \"種類\": \"太陽アミュレットスキル2\", \"割合 (%)\": [7.5, 7.5, 7.5, 7.5, 7.5] },\n          { \"種類\": \"合計\", \"割合 (%)\": [15, 15, 15, 15, 15] },\n        ],\n\n        classBonusBase: [\n          { \"攻撃側\": \"ソルジャー\", \"ソルジャー\":  0, \"ランサー\": 45, \"ライダー\":-35, \"エアリアル\":  0, \"アサシン\":  0, \"シューター\":  0, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"ランサー\",   \"ソルジャー\":-35, \"ランサー\":  0, \"ライダー\": 45, \"エアリアル\":  0, \"アサシン\":  0, \"シューター\":  0, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"ライダー\",   \"ソルジャー\": 45, \"ランサー\":-35, \"ライダー\":  0, \"エアリアル\":  0, \"アサシン\":  0, \"シューター\":  0, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"エアリアル\", \"ソルジャー\":  0, \"ランサー\":  0, \"ライダー\":  0, \"エアリアル\":  0, \"アサシン\": 45, \"シューター\":-35, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"アサシン\",   \"ソルジャー\":  0, \"ランサー\":  0, \"ライダー\":  0, \"エアリアル\":-35, \"アサシン\":  0, \"シューター\": 45, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"シューター\", \"ソルジャー\":  0, \"ランサー\":  0, \"ライダー\":  0, \"エアリアル\": 45, \"アサシン\":-35, \"シューター\":  0, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"ソーサラー\", \"ソルジャー\": 20, \"ランサー\": 20, \"ライダー\": 20, \"エアリアル\":-15, \"アサシン\":-15, \"シューター\":-15, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"セイント\",   \"ソルジャー\":-15, \"ランサー\":-15, \"ライダー\":-15, \"エアリアル\": 20, \"アサシン\": 20, \"シューター\": 20, \"ソーサラー\": 0, \"セイント\": 0 },\n        ],\n        classBonusMax: [\n          { \"攻撃側\": \"ソルジャー\", \"ソルジャー\":  0, \"ランサー\": 75, \"ライダー\":-35, \"エアリアル\":  0, \"アサシン\":  0, \"シューター\":  0, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"ランサー\",   \"ソルジャー\":-35, \"ランサー\":  0, \"ライダー\": 75, \"エアリアル\":  0, \"アサシン\":  0, \"シューター\":  0, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"ライダー\",   \"ソルジャー\": 75, \"ランサー\":-35, \"ライダー\":  0, \"エアリアル\":  0, \"アサシン\":  0, \"シューター\":  0, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"エアリアル\", \"ソルジャー\":  0, \"ランサー\":  0, \"ライダー\":  0, \"エアリアル\":  0, \"アサシン\": 75, \"シューター\":-35, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"アサシン\",   \"ソルジャー\":  0, \"ランサー\":  0, \"ライダー\":  0, \"エアリアル\":-35, \"アサシン\":  0, \"シューター\": 75, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"シューター\", \"ソルジャー\":  0, \"ランサー\":  0, \"ライダー\":  0, \"エアリアル\": 75, \"アサシン\":-35, \"シューター\":  0, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"ソーサラー\", \"ソルジャー\": 35, \"ランサー\": 35, \"ライダー\": 35, \"エアリアル\":-15, \"アサシン\":-15, \"シューター\":-15, \"ソーサラー\": 0, \"セイント\": 0 },\n          { \"攻撃側\": \"セイント\",   \"ソルジャー\":-15, \"ランサー\":-15, \"ライダー\":-15, \"エアリアル\": 35, \"アサシン\": 35, \"シューター\": 35, \"ソーサラー\": 0, \"セイント\": 0 },\n        ],\n      },\n    };\n  },\n\n  created() {\n    document.title = \"れじぇくろDB: 解説\";\n\n    this.mainActive = structuredClone(jsonMainActive);\n    this.mainPassive = structuredClone(jsonMainPassive);\n    this.mainTalents = structuredClone(jsonMainTalents);\n    this.npcMainChrs = structuredClone(jsonNpcMainChrs);\n    this.mainChrs = structuredClone(jsonMainChrs);\n    this.supActive = structuredClone(jsonSupportActive);\n    this.supPassive = structuredClone(jsonSupportPassive);\n    this.supChrs = structuredClone(jsonSupportChrs);\n    this.items = structuredClone(jsonItems);\n\n    this.setupCharacters(this.npcMainChrs, this.mainActive, this.mainPassive, this.mainTalents, { npc: this.npcMainChrs });\n    this.setupCharacters(this.mainChrs, this.mainActive, this.mainPassive, this.mainTalents, { npc: this.npcMainChrs });\n    this.setupCharacters(this.supChrs, this.supActive, this.supPassive);\n    this.setupItems(this.items);\n\n    this.searchTable = new Map();\n    for (let s of [...this.mainActive, ...this.mainPassive, ...this.mainTalents, ...this.supActive, ...this.supPassive, ...this.items])\n      this.searchTable.set(s.name, s);\n\n    this.specialBuffSkillsSingle = [];\n    this.specialBuffSkillsMulti = [];\n    for (const skill of this.mainActive) {\n      if (!skill.isSymbolSkill) {\n        for (const e of skill.buff ?? []) {\n          if (![\"トークン\", \"リジェネ\", \"ガード\"].includes(e.type) && e.hasSpecialSlot) {\n            const target = e.trigger?.target ?? e.target;\n            if (target == \"自身\" || (!target && skill.area == \"単体\"))\n              this.specialBuffSkillsSingle.push(skill);\n            else\n              this.specialBuffSkillsMulti.push(skill);\n            break;\n          }\n        }\n      }\n    }\n  },\n\n  mounted() {\n  },\n\n  methods: {\n    findItem(name) {\n      const r = this.searchTable.get(name);\n      //if (!r) {\n      //  console.log(`${name} not found`);\n      //}\n      return r;\n    },\n\n    n2percent(n) {\n      if (typeof (n) === 'number')\n        return n == 0 ? \"-\" : n > 0 ? `+${n}%` : `${n}%`;\n      else\n        return `<b>${n}</b>`;\n    },\n  },\n\n  computed: {\n  }\n}\n</script>\n\n<style scoped>\ndiv.about {\n  max-width: 1200px;\n  padding: 20px;\n  margin: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 0.3rem;\n  background: rgb(245, 245, 245);\n  box-shadow: 0 3px 6px rgba(140,149,159,0.5);\n}\n\n.about h2 {\n  font-size: 1.75em;\n}\n\n.about p {\n  margin-bottom: 30px;\n}\n\n.about ul {\n  list-style-type: disc;\n  margin: 0;\n}\n\n.about li {\n  display: list-item;\n  margin: 0 15px;\n}\n\n.note {\n  font-size: 80%;\n  color: rgb(150, 150, 150);\n}\n\n.panel {\n  padding: 10px;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 0.3rem;\n  display: inline-block;\n  background: white;\n}\n\n.panel h6 {\n  margin-bottom: 5px;\n}\n</style>\n\n<style>\n.desc .table {\n  width: auto;\n  margin: 3px;\n}\n.input-dropdown button {\n  padding: 0.1em;\n}\n\nlabel.disabled {\n  color: rgb(180, 180, 180);\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./About.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./About.vue?vue&type=template&id=25b8723a&scoped=true\"\nimport script from \"./About.vue?vue&type=script&lang=js\"\nexport * from \"./About.vue?vue&type=script&lang=js\"\nimport style0 from \"./About.vue?vue&type=style&index=0&id=25b8723a&prod&scoped=true&lang=css\"\nimport style1 from \"./About.vue?vue&type=style&index=1&id=25b8723a&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25b8723a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root\",on:{\"mousemove\":_vm.onMouseMove}},[_c('div',{staticClass:\"header\",class:{ 'hidden': !_vm.showHeader }},[_c('Navigation')],1),_c('div',{staticClass:\"content\",staticStyle:{\"margin-top\":\"70px\"},style:(_vm.style)},[_c('div',{staticClass:\"about\"},[_vm._m(0),_c('p',[_vm._v(\" 2023/11 現在、マスターランクを切り替えるボタンが表示されなくなるバグが確認されています。\"),_c('br'),_vm._v(\" この状況に陥るとマスターランクを 11 以上に上げられなくなってしまいます。\"),_c('br'),_vm._v(\" 以下はこの状態に陥った際、切り替えボタンを復活させる方法です。\"),_c('br'),_c('br'),_vm._v(\" 前提として、ブラウザ版で、かつブラウザは Chrome か Edge である必要があります。\"),_c('br'),_vm._v(\" 実行後は各種設定がリセットされるため、普段使っているのとは違う方で実行するといいでしょう。\"),_c('br'),_vm._v(\" (実行するブラウザでのみ設定がリセットされボタンが復活します)\"),_c('br'),_vm._v(\" なお、開発者ツールを使います。開発者ツールを扱うことに抵抗がある人はやめておいたほうがいいでしょう。\"),_c('br'),_c('br'),_vm._m(1),_c('pre',{staticClass:\"code\"},[_vm._v(\"window.indexedDB.open(\\\"/idbfs\\\").onsuccess = (event) => {\\n  let db = event.target.result;\\n  let tx = db.transaction(\\\"FILE_DATA\\\", \\\"readwrite\\\");\\n  let store = tx.objectStore(\\\"FILE_DATA\\\");\\n  store.getAllKeys().onsuccess = (event) => {\\n    for(const key of event.target.result) {\\n      if(key.endsWith(\\\"/PlayerPrefs\\\")) {\\n        store.get(key).onsuccess = (event) => {\\n          let data = event.target.result;\\n          const masterRankOn = new Uint8Array([0x55, 0x6E, 0x69, 0x74, 0x79, 0x50, 0x72, 0x66, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x10, 0x00, 0x10, 0x4D, 0x61, 0x73, 0x74, 0x65, 0x72, 0x52, 0x61, 0x6E, 0x6B, 0x43, 0x68, 0x61, 0x6E, 0x67, 0x65, 0x02, 0x7B, 0x7D]);\\n          data.contents = masterRankOn;\\n          store.put(data, key).onsuccess = (event) => {\\n            console.log(event.target.result);\\n          };\\n        };\\n      }\\n    }\\n  };\\n};\\n\")]),_c('b-link',{attrs:{\"href\":\"img/misc/masterrank1.jpg\",\"target\":\"_blank\"}},[_c('b-img',{attrs:{\"src\":\"img/misc/masterrank1.jpg\",\"height\":\"300px\"}})],1),_c('b-link',{attrs:{\"href\":\"img/misc/masterrank2.jpg\",\"target\":\"_blank\"}},[_c('b-img',{attrs:{\"src\":\"img/misc/masterrank2.jpg\",\"height\":\"300px\"}})],1)],1)])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h2',[_c('a',{attrs:{\"name\":\"master-rank-bug\",\"href\":\"#master-rank-bug\"}}),_vm._v(\"マスターランク切り替えボタンについて\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\"ゲームのページを開き、Ctrl + Shift + I を押す (開発者ツールが出てくる)\")]),_c('li',[_vm._v(\"開発者ツールの「アプリケーション」に移動\")]),_c('li',[_vm._v(\"下記スクリーンショットの下の方にあるフレームを選ぶところで \\\"index.html\\\" を選択 (デフォルトは \\\"top\\\" になってるはず)\")]),_c('li',[_vm._v(\"index.html が選択された状態で下記スクリプトをコンソールにコピペし、実行\")]),_c('li',[_vm._v(\"ゲーム再起動 (ページリロード) すると、各種設定が初期化された上でボタンが復活しているはず\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"root\" @mousemove=\"onMouseMove\">\n    <div class=\"header\" :class=\"{ 'hidden': !showHeader }\">\n      <Navigation />\n    </div>\n\n    <div class=\"content\" style=\"margin-top: 70px;\" :style=\"style\">\n      <div class=\"about\">\n\n        <h2><a name=\"master-rank-bug\" href=\"#master-rank-bug\"></a>マスターランク切り替えボタンについて</h2>\n        <p>\n          2023/11 現在、マスターランクを切り替えるボタンが表示されなくなるバグが確認されています。<br />\n          この状況に陥るとマスターランクを 11 以上に上げられなくなってしまいます。<br />\n          以下はこの状態に陥った際、切り替えボタンを復活させる方法です。<br />\n          <br />\n          前提として、ブラウザ版で、かつブラウザは Chrome か Edge である必要があります。<br />\n          実行後は各種設定がリセットされるため、普段使っているのとは違う方で実行するといいでしょう。<br />\n          (実行するブラウザでのみ設定がリセットされボタンが復活します)<br />\n          なお、開発者ツールを使います。開発者ツールを扱うことに抵抗がある人はやめておいたほうがいいでしょう。<br />\n          <br />\n          <ul>\n            <li>ゲームのページを開き、Ctrl + Shift + I を押す (開発者ツールが出てくる)</li>\n            <li>開発者ツールの「アプリケーション」に移動</li>\n            <li>下記スクリーンショットの下の方にあるフレームを選ぶところで \"index.html\" を選択 (デフォルトは \"top\" になってるはず)</li>\n            <li>index.html が選択された状態で下記スクリプトをコンソールにコピペし、実行</li>\n            <li>ゲーム再起動 (ページリロード) すると、各種設定が初期化された上でボタンが復活しているはず</li>\n          </ul>\n          <pre class=\"code\">\nwindow.indexedDB.open(\"/idbfs\").onsuccess = (event) => {\n  let db = event.target.result;\n  let tx = db.transaction(\"FILE_DATA\", \"readwrite\");\n  let store = tx.objectStore(\"FILE_DATA\");\n  store.getAllKeys().onsuccess = (event) => {\n    for(const key of event.target.result) {\n      if(key.endsWith(\"/PlayerPrefs\")) {\n        store.get(key).onsuccess = (event) => {\n          let data = event.target.result;\n          const masterRankOn = new Uint8Array([0x55, 0x6E, 0x69, 0x74, 0x79, 0x50, 0x72, 0x66, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x10, 0x00, 0x10, 0x4D, 0x61, 0x73, 0x74, 0x65, 0x72, 0x52, 0x61, 0x6E, 0x6B, 0x43, 0x68, 0x61, 0x6E, 0x67, 0x65, 0x02, 0x7B, 0x7D]);\n          data.contents = masterRankOn;\n          store.put(data, key).onsuccess = (event) => {\n            console.log(event.target.result);\n          };\n        };\n      }\n    }\n  };\n};\n</pre>\n          <b-link href=\"img/misc/masterrank1.jpg\" target=\"_blank\"><b-img src=\"img/misc/masterrank1.jpg\" height=\"300px\" /></b-link>\n          <b-link href=\"img/misc/masterrank2.jpg\" target=\"_blank\"><b-img src=\"img/misc/masterrank2.jpg\" height=\"300px\" /></b-link>\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>import Navigation from './Navigation.vue'\nimport common from \"./common\";\n\nexport default {\n  name: 'Misc',\n  components: {\n    Navigation,\n  },\n  mixins: [common],\n\n  data() {\n    return {\n    };\n  },\n\n  created() {\n    document.title = \"れじぇくろDB: その他\";\n  },\n\n  mounted() {\n  },\n\n  methods: {\n  },\n\n  computed: {\n  }\n}</script>\n\n<style scoped>\n  div.about {\n    padding: 20px;\n    margin: 5px;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 0.3rem;\n    background: rgb(245, 245, 245);\n    box-shadow: 0 3px 6px rgba(140,149,159,0.5);\n  }\n\n  .about h2 {\n    font-size: 1.75em;\n  }\n\n  .about p {\n    margin-bottom: 30px;\n  }\n\n  .about ul {\n    list-style-type: disc;\n    margin: 0;\n  }\n\n  .about li {\n    display: list-item;\n    margin: 0 15px;\n  }\n\n  .note {\n    font-size: 80%;\n    color: rgb(150, 150, 150);\n  }\n\n  .panel {\n    padding: 10px;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 0.3rem;\n    display: inline-block;\n    background: white;\n  }\n\n  .panel h6 {\n    margin-bottom: 5px;\n  }\n\n  .code {\n    padding: 20px;\n    margin: 5px;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 0.3rem;\n    background: rgb(230, 230, 235);\n    box-shadow: 0 3px 6px rgba(140,149,159,0.5);\n  }\n\n</style>\n\n<style>\n  .desc .table {\n    width: auto;\n    margin: 3px;\n  }\n\n  .input-dropdown button {\n    padding: 0.1em;\n  }\n\n  label.disabled {\n    color: rgb(180, 180, 180);\n  }\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Misc.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Misc.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Misc.vue?vue&type=template&id=28bbf2f0&scoped=true\"\nimport script from \"./Misc.vue?vue&type=script&lang=js\"\nexport * from \"./Misc.vue?vue&type=script&lang=js\"\nimport style0 from \"./Misc.vue?vue&type=style&index=0&id=28bbf2f0&prod&scoped=true&lang=css\"\nimport style1 from \"./Misc.vue?vue&type=style&index=1&id=28bbf2f0&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28bbf2f0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"root\",staticClass:\"root\",attrs:{\"id\":\"root\"},on:{\"mousemove\":_vm.onMouseMove}},[_c('div',{staticClass:\"header\",class:{ 'hidden': !_vm.showHeader }},[_c('Navigation')],1),_c('div',{staticClass:\"about\",staticStyle:{\"margin-top\":\"60px\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.simulation),expression:\"!simulation\"}],staticClass:\"content\",staticStyle:{\"margin-bottom\":\"20px\"}},[_c('div',{staticClass:\"main-panel\",staticStyle:{\"padding\":\"10px\"}},[_c('h2',{staticStyle:{\"margin-bottom\":\"5px\"}},[_vm._v(\"バトルシミュレータ\")]),_vm._m(0),_c('div',[_vm._v(\" 使い方は、クエスト欄でマップを選択、ユニット欄の「編集」でユニットを編成し、「シミュレーション開始」で戦闘を開始。あとはだいたい実際のゲームと同じように動作します。\"),_c('br'),_vm._v(\" 戦闘結果は\"),_c('b-link',{on:{\"click\":function($event){return _vm.toggleReplayList(true)}}},[_vm._v(\"リプレイ\")]),_vm._v(\"として保存することができます。リプレイの途中からの再開も可能です。まずはリプレイを見てみると機能を把握しやすいでしょう：\"),_c('b-link',{on:{\"click\":function($event){_vm.importReplayFromUrl('64ebe357f471ab7fc66aadab9e1c1be7', (r) => _vm.playbackReplay(r, { immediate: true }))}}},[_vm._v(\"リプレイを再生\")]),_c('br'),_c('div',[_c('br'),_c('b-link',{on:{\"click\":function($event){_vm.detailedDescription=!_vm.detailedDescription}}},[_vm._v(\"シミュレーション時の動作の詳細\")]),_vm._v(\" (長いのでクリックで展開)\"),_c('br'),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.detailedDescription),expression:\"detailedDescription\"}]},[_vm._v(\" できるだけ実際のゲームの動作に合わせていますが、再現できていない仕様や検証しやすいように意図的に変えている部分もあります。以下目立った違いやTips： \"),_c('ul',[_c('li',[_vm._v(\"ランダム要素を完全に排しており、ダメージのばらつきがありません\")]),_c('li',[_vm._v(\"クリティカルヒットする可能性がある攻撃 (=メインの攻撃) は100%クリティカル扱いになります\")]),_c('li',[_vm._v(\"本来確率で発動する効果も100%発動します (ただし、自傷効果はこれでは支障が出るため、オプションで切れるようになっています)\")]),_c('li',[_vm._v(\"バフ解除やランダムバフも一定の規則に則った動作になります (シミュレーション開始後の「自動ランダムバフ」などのオプションを参照)\")]),_c('li',[_vm._v(\"HP割合に応じて増減する効果 (\"),_c('b-link',{ref:_vm.po},[_vm._v(\"道教式チアリーディング\")]),_vm._v(\"の与ダメージバフなど) は現状常に最大効果を適用します (正確な動作が分かっていないため暫定処置)\")],1),_c('li',[_vm._v(\"編成で☆の増減ができますが、タレント/サポートアクティブは現状☆を考慮せず最大レベル時の効果を適用します (対応が大変なため暫定処置)\")]),_c('li',[_vm._v(\"状態異常と無効化系は大部分が未実装です (現状 強化不可 はガーディアンをなにもせず待機させて模倣する必要があります)\")]),_c('li',[_vm._v(\"ユニットを選択するとその時点で影響下にあるバフ・デバフが表示されます。攻撃対象を選んでいる状態であれば戦闘時発動効果も考慮されます\")]),_c('li',[_vm._v(\"デベロッパーツールを出しておくとコンソールに詳細なログが出ます (Chrome や Edge なら Ctrl + Shift + I)\")])])])],1),_c('br')],1),_c('div',[_vm._v(\" アイテムやスキルのデータは入力漏れやミスが残っている可能性があります。 \")])])]),_c('div',{staticClass:\"content\",staticStyle:{\"margin-bottom\":\"20px\"},style:(_vm.style)},[_c('div',{staticClass:\"main-panel\"},[(!_vm.simulation)?_c('div',{staticClass:\"menu-widgets flex\",staticStyle:{\"margin\":\"0px 10px 15px 10px\"}},[_c('div',{staticClass:\"widget\"},[_c('span',[_vm._v(\"クエスト：\")]),_c('b-dropdown',{staticStyle:{\"min-width\":\"20em\"},attrs:{\"text\":_vm.battleData ? _vm.battleData.name : '',\"id\":\"battle_selector\"}},_vm._l((_vm.battleList),function(battle,i){return _c('b-dropdown-item',{key:i,staticClass:\"d-flex flex-column\",on:{\"click\":function($event){_vm.selectBattle(battle.uid, true); _vm.updateURL();}}},[_vm._v(\" \"+_vm._s(battle.name)+\" \")])}),1)],1)]):_vm._e(),(!_vm.simulation)?_c('b-tabs',{model:{value:(_vm.phaseTabIndex),callback:function ($$v) {_vm.phaseTabIndex=$$v},expression:\"phaseTabIndex\"}},_vm._l((_vm.phaseList),function(phase){return _c('b-tab',{key:phase.id,attrs:{\"title\":phase.desc},on:{\"click\":function($event){_vm.selectPhase(phase.id, true); _vm.updateURL();}}})}),1):_vm._e(),_c('div',{staticStyle:{\"padding\":\"10px\",\"background-color\":\"white\",\"display\":\"flex\"}},[_c('div',{ref:\"cells\",staticClass:\"grid-container\",on:{\"mousedown\":function($event){if('button' in $event && $event.button !== 1)return null;$event.preventDefault();$event.stopPropagation();},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;$event.preventDefault();$event.stopPropagation();return _vm.onCellRClick()},\"contextmenu\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onCellRClick()}}},[_vm._l((_vm.cells),function(cell,i){return _c('div',{key:`c${i}`,class:_vm.getCellClass(cell),style:(cell.style),attrs:{\"id\":cell.id,\"draggable\":_vm.isCellDraggable(cell)},on:{\"click\":function($event){$event.stopPropagation();return _vm.onClickCell(cell)},\"mouseover\":function($event){return _vm.onEnterCell(cell)},\"mouseleave\":function($event){return _vm.onLeaveCell(cell)},\"dragstart\":function($event){return _vm.onDragCell(cell)},\"drop\":function($event){return _vm.onDropCell(cell)},\"dragover\":function($event){$event.preventDefault();}}})}),_vm._l((_vm.allActiveUnits),function(unit){return [(unit.isNxN)?_vm._l((unit.occupiedCells),function(pos){return _c('div',{key:`${unit.fid}[${pos[0]}][${pos[1]}]`,staticClass:\"unit-cell\",style:(`transform: translate(${pos[0] * 50}px, ${pos[1] * 50}px)`)},[_c('b-img',{staticClass:\"center\",class:_vm.getUnitIconClass(unit),attrs:{\"src\":_vm.getImageURL(unit.main.class),\"width\":\"40\",\"height\":\"40\"}})],1)}):[_c('div',{key:unit.fid,staticClass:\"unit-cell\",attrs:{\"id\":`unit-${unit.fid}`}},[(unit.isEnemy && unit.hasSupport)?[_c('b-img',{staticClass:\"center\",class:_vm.getUnitIconClass(unit),staticStyle:{\"left\":\"17px\",\"top\":\"17px\",\"z-index\":\"1\"},attrs:{\"src\":_vm.getImageURL(unit.main.class),\"width\":\"30\",\"height\":\"30\"}}),_c('b-img',{staticClass:\"center\",class:_vm.getUnitIconClass(unit),staticStyle:{\"left\":\"33px\",\"top\":\"33px\",\"z-index\":\"0\"},attrs:{\"src\":_vm.getImageURL(unit.support.class),\"width\":\"30\",\"height\":\"30\"}})]:(unit.isEnemy)?[_c('b-img',{staticClass:\"center\",class:_vm.getUnitIconClass(unit),attrs:{\"src\":_vm.getImageURL(unit.main.class),\"width\":\"40\",\"height\":\"40\"}})]:(unit.isPlayer)?[_c('div',[_c('b-img',{staticClass:\"center\",class:_vm.getUnitIconClass(unit),attrs:{\"src\":_vm.getImageURL(unit.main.icon),\"width\":\"50\",\"height\":\"50\"}})],1)]:_vm._e()],2)]]}),(_vm.loading)?_c('div',{staticClass:\"menu-panel\",staticStyle:{\"padding\":\"10px\",\"position\":\"absolute\"}},[_c('b-spinner',{attrs:{\"small\":\"\",\"label\":\"Spinning\"}})],1):_vm._e()],2),_c('div',{ref:\"enemyList\",staticClass:\"enemy-list\"},[(_vm.simulation)?_c('div',{staticClass:\"character\"},[_c('div',{staticClass:\"info\"},[_c('h5',{staticStyle:{\"font-size\":\"18pt\"}},[_vm._v(\"スコア\")]),_c('div',{staticClass:\"grid\",staticStyle:{\"grid-template-columns\":\"auto auto 1fr\"}},[_vm._l((_vm.allPlayerUnits),function(unit){return [_c('div',{key:`portrait-${unit.fid}`,staticStyle:{\"grid-column\":\"1\"}},[_c('b-img-lazy',{class:`${!unit.isAlive ? 'grayscale' : ''}`,attrs:{\"src\":_vm.getImageURL(unit.main.icon),\"title\":unit.main.name,\"width\":\"50\",\"height\":\"50\",\"rounded\":\"\"}})],1),_c('div',{key:`score-${unit.fid}`,staticStyle:{\"grid-column\":\"2\",\"margin-left\":\"10px\",\"text-align\":\"right\"},domProps:{\"innerHTML\":_vm._s(_vm.scoreToHtml(unit.sim.score))}}),_c('div',{key:`pad-${unit.fid}`,staticStyle:{\"grid-column\":\"3\"}})]}),_c('div',{staticStyle:{\"grid-column\":\"1\",\"font-size\":\"18pt\"}},[_vm._v(\"合計\")]),_c('div',{staticStyle:{\"grid-column\":\"2\",\"margin-left\":\"10px\",\"text-align\":\"right\"},domProps:{\"innerHTML\":_vm._s(_vm.scoreToHtml(_vm.simulation.score))}}),_c('div',{staticStyle:{\"grid-column\":\"3\"}})],2)])]):_vm._e(),_vm._l((_vm.activeEnemyUnits),function(unit){return [_c('div',{key:unit.fid,staticClass:\"character\",class:{ 'highlighted': _vm.isUnitHighlighted(unit) },attrs:{\"id\":'unit_'+unit.fid}},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main.icon),\"title\":unit.main.name,\"width\":\"80\",\"height\":\"80\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\"},[_c('h5',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(unit.main.name + (unit.isSummon ? ' (召喚ユニット)' : ' (メイン)')))}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main.class),\"title\":'クラス:'+unit.main.class,\"height\":\"25\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main.damageType),\"title\":'攻撃タイプ:'+unit.main.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(unit.main.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('移動'),\"title\":\"移動\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(unit.main.move))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"レベル:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(unit.main.level))])])],1),(unit.main.status)?_c('div',{staticClass:\"status2\",domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(unit.main.status))}}):_vm._e()]),_c('div',{staticClass:\"skills\"},[_vm._l((unit.main.skills),function(skill){return [(!skill.isNormalAttack)?_c('div',{key:skill.uid,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()])])])]):_vm._e()]})],2)])]),(unit.hasSupport && _vm.displayType >= 2)?_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support.icon),\"title\":unit.support.name,\"width\":\"80\",\"height\":\"80\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\"},[_c('h5',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(unit.support.name+' (サポート)'))}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support.class),\"title\":'クラス:'+unit.support.class,\"height\":\"25\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support.damageType),\"title\":'攻撃タイプ:'+unit.support.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(unit.support.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('span',{staticClass:\"param-name\"},[_vm._v(\"レベル:\")]),_c('span',{staticClass:\"param-value\"},[_vm._v(_vm._s(unit.support.level))])])],1),(unit.support.status)?_c('div',{staticClass:\"status2\",domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(unit.support.status))}}):_vm._e()])])]):_vm._e()])]})],2)])],1)]),(_vm.simulation)?_c('div',{class:`content sim-commands ${_vm.simulation.isPlayerTurn ? 'player-turn' : 'enemy-turn'}`,on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"unit-panel\"},[(_vm.selectedUnit && _vm.actionsToSelect.length)?_c('div',{staticStyle:{\"margin-bottom\":\"20px\",\"display\":\"flex\",\"flex-wrap\":\"wrap\"}},[(_vm.selectedUnit.sim.isOnMultiMove)?_c('div',{staticStyle:{\"font-size\":\"16pt\",\"color\":\"gray\",\"width\":\"100%\"}},[_vm._v(\"再移動中\")]):_vm._e(),(_vm.selectedUnit.sim.isOnMultiAction)?_c('div',{staticStyle:{\"font-size\":\"16pt\",\"color\":\"gray\",\"width\":\"100%\"}},[_vm._v(\"再行動中\")]):_vm._e(),_c('b-button',{staticStyle:{\"width\":\"45px\",\"height\":\"45px\",\"margin-right\":\"5px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.onClickWait();}}},[_vm._v(\" 待機 \")]),_vm._l((_vm.actionsToSelect),function(skill){return _c('div',{key:skill.uid,class:_vm.getActionClass(skill, _vm.selectedUnit),attrs:{\"title\":_vm.descToTitle(skill)},on:{\"click\":function($event){return _vm.onClickAction(skill)}}},[_c('b-img',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"src\":_vm.getImageURL(skill.icon)}}),(!skill.available)?_c('div',{staticClass:\"text-overlay\"},[_vm._v(\"CT\"+_vm._s(isFinite(skill.coolTime) ? skill.coolTime : \"∞\"))]):_vm._e()],1)})],2):_vm._e(),_c('div',[_c('h5',[_vm._v(\" ターン\"+_vm._s(_vm.simulation.turn)+\" : \"+_vm._s(_vm.simulation.isPlayerTurn ? 'プレイヤー': 'エネミー')+\"フェイズ \")]),(!_vm.simulation.onPlayback)?_c('b-button',{staticStyle:{\"width\":\"10em\",\"margin-right\":\"1em\"},attrs:{\"size\":\"sm\",\"disabled\":_vm.simulation.turn == _vm.simulation.maxTurn && _vm.simulation.isEnemyTurn},on:{\"click\":function($event){return _vm.endTurn()}}},[_vm._v(\" ターン終了 \")]):_vm._e(),(_vm.simulation.onPlayback && !_vm.simulation.isPlaying)?_c('b-button',{staticStyle:{\"width\":\"10em\",\"margin-right\":\"1em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.beginPlayback()}}},[_vm._v(\" 再生開始 \")]):_vm._e()],1),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[(_vm.selectedUnit)?_c('b-button',{staticStyle:{\"margin-right\":\"0.25em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.eraseSelectedUnit()}}},[_vm._v(\" このユニットを撃破 \")]):_vm._e(),_c('b-button',{staticStyle:{\"width\":\"14em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.endSimulation()}}},[_vm._v(\" シミュレーション終了 \")])],1)]),_c('div',{staticClass:\"unit-panel\"},[(_vm.showConfirm)?_c('div',[_c('b-button',{staticStyle:{\"width\":\"14em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.confirmAction()}}},[_vm._v(\" 行動を確定 \")])],1):(_vm.selectedUnit)?_c('div',[_c('b-table',{attrs:{\"small\":\"\",\"borderless\":\"\",\"hover\":\"\",\"items\":_vm.simOptions,\"fields\":_vm.simOptionFields,\"tbody-tr-attr\":(r)=>{ return {id: `simopt-${r.name}`}; }},scopedSlots:_vm._u([{key:\"cell(value)\",fn:function(r){return [_c('div',{staticClass:\"flex\"},[_c('div',{staticStyle:{\"margin-left\":\"auto\"}},[_c('b-form-checkbox',{model:{value:(r.item.value),callback:function ($$v) {_vm.$set(r.item, \"value\", $$v)},expression:\"r.item.value\"}})],1)])]}},{key:\"cell(label)\",fn:function(r){return [_c('div',[_vm._v(_vm._s(r.item.label))]),_c('b-popover',{attrs:{\"target\":`simopt-${r.item.name}`,\"triggers\":\"hover focus\"}},[_c('div',{domProps:{\"innerHTML\":_vm._s(r.item.desc)}})])]}}],null,false,4085637882)})],1):_c('div',[_vm._v(\" シミュレーションモードでは実際のゲームのようにユニットを操作できます。\"),_c('br'),_vm._v(\" しかし、検証のため、あるいは再現が難しいため、動作が異なる点もあります。以下大雑把な説明。\"),_c('br'),_c('ul',[_vm._m(1),_vm._m(2),_c('li',[_vm._v(\"移動可能範囲は表示されますが、それを無視して無限に移動できます。また、無限に再行動できます。\")]),_c('li',[_vm._v(\"CT 中のアクティブスキルも使用可能です。\")]),_c('li',[_vm._v(\"やり直したい場合、\"),_c('b',[_c('b-link',{on:{\"mouseenter\":function($event){return _vm.highlight('history', true)},\"mouseleave\":function($event){return _vm.highlight('history', false)}}},[_vm._v(\"履歴\")]),_vm._v(\"から過去に遡ることができます\")],1),_vm._v(\"。\")])])])])]):_vm._e(),_c('div',{staticClass:\"grid\",staticStyle:{\"position\":\"fixed\",\"right\":\"5px\",\"bottom\":\"5px\",\"grid-template-columns\":\"auto auto\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showReplayList),expression:\"showReplayList\"}],staticClass:\"unit-panel\",staticStyle:{\"min-width\":\"1200px\",\"max-width\":\"1600px\",\"max-height\":\"500px\",\"margin-right\":\"5px\",\"grid-column\":\"1\"}},[_c('div',{staticClass:\"flex\",staticStyle:{\"margin-bottom\":\"5px\"}},[_c('h5',[_vm._v(\"公開されているリプレイ\")]),_c('div',{staticStyle:{\"margin-left\":\"auto\"}},[_c('b-button',{staticStyle:{\"margin-left\":\"1em\",\"padding\":\"0px 5px\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.showReplayList=false;}}},[_vm._v(\"✖\")])],1)]),(_vm.fetching)?[_c('div',{staticStyle:{\"padding\":\"10px\"}},[_c('b-spinner',{attrs:{\"small\":\"\",\"label\":\"Spinning\"}})],1)]:[_c('b-table',{staticStyle:{\"min-width\":\"90%\",\"margin-bottom\":\"5px\"},attrs:{\"small\":\"\",\"outlined\":\"\",\"sticky-header\":\"\",\"items\":_vm.replayList,\"fields\":_vm.replayFields},scopedSlots:_vm._u([{key:\"cell(battle)\",fn:function(row){return [_c('span',{staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(_vm._s(_vm.getItemName(row.item.battle)))])]}},{key:\"cell(score)\",fn:function(row){return [_c('span',{staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(_vm._s(row.item.score))])]}},{key:\"cell(units)\",fn:function(row){return [_c('span',{staticStyle:{\"white-space\":\"nowrap\"}},_vm._l((row.item.units ?? []),function(uid,i){return _c('b-img',{key:i,attrs:{\"src\":_vm.getImageURL(uid),\"width\":\"35px\",\"height\":\"35px\"}})}),1)]}},{key:\"cell(actions)\",fn:function(row){return [_c('div',{staticClass:\"flex\",staticStyle:{\"white-space\":\"nowrap\"}},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){_vm.downloadReplay(row.item); _vm.showReplayList=false;}}},[_vm._v(\" ロード \")]),_c('b-button',{staticStyle:{\"margin-left\":\"0.25em\"},attrs:{\"size\":\"sm\",\"id\":`replay-${row.item.hash}`},on:{\"click\":function($event){return _vm.copyReplayUrl(row.item)}}},[_vm._v(\" URLコピー \")]),(row.item.delkey)?_c('b-button',{staticStyle:{\"margin-left\":\"0.25em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.deleteReplay(row.item)}}},[_vm._v(\" 削除 \")]):_vm._e()],1)]}}])})],(_vm.simulation ?? _vm.replay)?_c('div',{staticStyle:{\"margin-bottom\":\"0.75em\"}},[_c('div',{staticClass:\"flex\",staticStyle:{\"margin-bottom\":\"0.25em\"}},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.uploadReplay()}}},[_vm._v(\" 現在のリプレイを公開 \")]),_c('b-form-input',{staticStyle:{\"width\":\"8em\",\"margin-left\":\"0.5em\"},attrs:{\"size\":\"sm\",\"placeholder\":\"投稿者名\"},model:{value:(_vm.userName),callback:function ($$v) {_vm.userName=$$v},expression:\"userName\"}}),_c('b-form-input',{staticStyle:{\"flex\":\"1\",\"margin-left\":\"0.5em\"},attrs:{\"size\":\"sm\",\"placeholder\":\"コメント\"},model:{value:(_vm.commentReplay),callback:function ($$v) {_vm.commentReplay=$$v},expression:\"commentReplay\"}})],1),_vm._m(3)]):_vm._e(),_c('div',{staticClass:\"flex\"},[(_vm.simulation ?? _vm.replay)?_c('b-button',{staticStyle:{\"min-width\":\"12em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.exportReplayAsFile()}}},[_vm._v(\" ファイルにエクスポート \")]):_vm._e(),_c('b-button',{staticStyle:{\"min-width\":\"12em\",\"margin-left\":\"0.5em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.importReplayFromFile()}}},[_vm._v(\" ファイルからインポート \")])],1)],2),_c('div',{staticClass:\"unit-panel\",staticStyle:{\"grid-column\":\"2\",\"width\":\"200px\",\"margin-top\":\"auto\"},attrs:{\"id\":\"history\",\"tabindex\":\"0\"},on:{\"click\":function($event){$event.stopPropagation();},\"keydown\":[function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"up\",38,$event.key,[\"Up\",\"ArrowUp\"]))return null;$event.stopPropagation();return _vm.onKeyReplay($event)},function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"down\",40,$event.key,[\"Down\",\"ArrowDown\"]))return null;$event.stopPropagation();return _vm.onKeyReplay($event)}]}},[_c('div',{staticStyle:{\"max-height\":\"350px\",\"overflow-y\":\"auto\",\"overscroll-behavior\":\"none\"}},[(_vm.simulation ?? _vm.replay)?[_vm._l(((_vm.simulation ?? _vm.replay).states.toReversed()),function(r,i){return [_c('div',{key:i,staticClass:\"flex\",style:(`margin: 2px 0px; ${ _vm.simulation?.statePos==-i-1 ? 'background: rgb(200,200,210)': '' }`),attrs:{\"id\":`sim-state-${-i-1}`}},[_c('b-button',{staticStyle:{\"padding\":\"0px\",\"width\":\"30px\",\"height\":\"30px\",\"margin-right\":\"0.25em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.setReplayState(-i-1);}}},[_vm._v(\"▶\")]),(r.desc.isAction)?[_c('b-img',{attrs:{\"src\":_vm.getImageURL(r.desc.unitIcon),\"width\":\"35px\",\"height\":\"35px\"}}),_c('b-img',{attrs:{\"src\":_vm.getImageURL(r.desc.skillIcon),\"width\":\"35px\",\"height\":\"35px\"}}),_c('b-img',{attrs:{\"src\":_vm.getImageURL(r.desc.targetIcon),\"width\":\"35px\",\"height\":\"35px\"}})]:[_c('span',[_vm._v(_vm._s(`T${r.turn} ${r.phase==0?'(プレイヤー)':'(エネミー)'}`)+\" 開始\")])]],2)]})]:_vm._e()],2),_c('b-button',{staticStyle:{\"min-width\":\"13em\",\"margin-top\":\"0.5em\"},attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.toggleReplayList()}}},[_vm._v(\" リプレイ \")])],1)]),_c('div',{staticClass:\"content\",style:(_vm.style)},[_c('div',{staticClass:\"main-panel\",staticStyle:{\"margin-top\":\"10px\",\"margin-bottom\":\"10px\"}},[(!_vm.simulation)?_c('div',{staticClass:\"flex\",staticStyle:{\"margin\":\"0px 10px 20px 10px\"}},[_c('a',{attrs:{\"name\":\"loadout\",\"href\":\"#loadout\"}}),_c('b-dropdown',{staticStyle:{\"min-width\":\"10em\"},attrs:{\"text\":\"編成をセーブ\"}},_vm._l((_vm.slotNames),function(name,i){return _c('b-dropdown-item',{key:i,on:{\"click\":function($event){return _vm.saveLoadout(i)}}},[_vm._v(\"スロット\"+_vm._s(i)+\": \"+_vm._s(name))])}),1),_c('b-dropdown',{staticStyle:{\"min-width\":\"10em\",\"margin-left\":\"1em\"},attrs:{\"text\":\"編成をロード\"}},[_vm._l((_vm.slotNames),function(name,i){return _c('b-dropdown-item',{key:i,on:{\"click\":function($event){return _vm.loadLoadout(i)}}},[_vm._v(\"スロット\"+_vm._s(i)+\": \"+_vm._s(name))])}),_c('b-dropdown-item',{on:{\"click\":function($event){return _vm.loadLoadout(99)}}},[_vm._v(\"バックアップ\")])],2),_c('b-button',{staticStyle:{\"min-width\":\"10em\",\"margin-left\":\"1em\"},on:{\"click\":function($event){return _vm.clearLoadout()}}},[_vm._v(\" 編成をクリア \")]),_c('b-button',{staticStyle:{\"width\":\"14em\",\"margin-left\":\"4em\"},on:{\"click\":function($event){return _vm.beginSimulation()}}},[_vm._v(\" シミュレーション開始 \")]),(_vm.replay)?_c('b-button',{staticStyle:{\"margin-left\":\"1em\"},attrs:{\"id\":\"btn-follow-replay\"},on:{\"click\":function($event){return _vm.playbackReplay(_vm.replay)}}},[_vm._v(\" 現在の構成でリプレイをなぞる \"),_c('b-popover',{attrs:{\"target\":`btn-follow-replay`,\"triggers\":\"hover focus\"}},[_vm._v(\" 行動パターンはそのまま装備だけ変えてダメージの変化を調べるための機能です。\"),_c('br'),_vm._v(\" 射程、スキル構成、ユニットの生死が変わるような変化があるとなぞれなくなって中断される可能性があります。\"),_c('br')])],1):_vm._e()],1):_vm._e(),(!_vm.simulation)?_c('div',{staticClass:\"flex\",staticStyle:{\"margin\":\"0px 10px 10px 10px\"}},[_c('b-form-input',{staticStyle:{\"width\":\"16em\"},attrs:{\"placeholder\":\"編成名\"},model:{value:(_vm.slotName),callback:function ($$v) {_vm.slotName=$$v},expression:\"slotName\"}}),_c('b-form-input',{staticStyle:{\"flex\":\"1\",\"margin-left\":\"0.5em\"},attrs:{\"placeholder\":\"コメント\"},model:{value:(_vm.slotDesc),callback:function ($$v) {_vm.slotDesc=$$v},expression:\"slotDesc\"}})],1):_vm._e(),(!_vm.simulation)?_c('b-tabs',{model:{value:(_vm.unitTabIndex),callback:function ($$v) {_vm.unitTabIndex=$$v},expression:\"unitTabIndex\"}},_vm._l((_vm.playerUnits),function(unit,ui){return _c('b-tab',{key:ui,staticStyle:{\"background-color\":\"white\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('h2',{staticStyle:{\"font-size\":\"1em\"},attrs:{\"draggable\":\"\"},on:{\"dragstart\":function($event){return _vm.onDragUnit(unit)},\"drop\":function($event){return _vm.onDropUnit(unit)},\"dragover\":function($event){$event.preventDefault();}}},[_vm._v(\" ユニット\"+_vm._s(ui+1)+\" \"),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main?.icon),\"width\":\"30\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support?.icon),\"width\":\"30\"}})],1)]},proxy:true}],null,true)},[_c('div',{staticStyle:{\"min-width\":\"1520px\",\"min-height\":\"500px\"},on:{\"dragover\":function($event){$event.preventDefault();},\"drop\":function($event){$event.preventDefault();return _vm.onDropLoadout($event)}}},[(!_vm.simulation)?_c('div',{staticStyle:{\"padding\":\"10px\",\"display\":\"flex\"}},[_c('b-button',{staticStyle:{\"width\":\"12em\"},attrs:{\"id\":`btn-edit-unit${ui}`},on:{\"click\":function($event){unit.showEditor=!unit.showEditor}}},[_vm._v(\"編集\")]),_c('b-popover',{attrs:{\"target\":`btn-edit-unit${ui}`,\"custom-class\":\"status-simulator-popover\",\"show\":unit.showEditor,\"delay\":{show:0, hide:250},\"no-fade\":\"\"},on:{\"update:show\":function($event){return _vm.$set(unit, \"showEditor\", $event)}}},[_c('StatusSimulator',{attrs:{\"embed\":\"\",\"data\":unit.editorData},on:{\"change\":function($event){return unit.edit($event)}}}),_c('div',{staticClass:\"flex\",staticStyle:{\"margin\":\"0 0 10px 10px\"}},[_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){unit.showEditor=false}}},[_vm._v(\"閉じる\")])],1)],1),_c('div',{staticStyle:{\"margin-left\":\"1em\",\"color\":\"rgb(160,160,160)\"}},[_vm._v(\"マップ上のユニットはドラッグで位置を交換できます\")])],1):_vm._e(),_c('div',{staticClass:\"flex\",staticStyle:{\"align-items\":\"flex-start\"}},[(unit.main.cid)?_c('div',{staticClass:\"character\"},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main.icon),\"title\":unit.main.name,\"width\":\"100\",\"height\":\"100\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\"},[_c('h5',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(unit.main.name))}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main.class),\"title\":'クラス:'+unit.main.class,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main.symbol),\"title\":'シンボル:'+unit.main.symbol,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main.rarity),\"title\":'レアリティ:'+unit.main.rarity,\"height\":\"20\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.main.damageType),\"title\":'攻撃タイプ:'+unit.main.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(unit.main.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('移動'),\"title\":\"移動\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(unit.main.move))])],1)],1),_c('div',{staticClass:\"status2\",domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(unit.main.status))}})]),_c('div',{staticClass:\"skills\"},[_vm._l((unit.main.skills),function(skill,si){return [(!skill.isNormalAttack)?_c('div',{key:`skill${si}`,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}})],1),_c('div',{staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()])])])]):_vm._e()]})],2),_c('div',{staticClass:\"skills\"},_vm._l((unit.main.items),function(skill,si){return _c('div',{key:`item${si}`,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}})],1),_c('div',{staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[(skill.slot)?_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.slot),\"title\":'部位:'+skill.slot,\"height\":\"20\"}}):_vm._e(),_vm._v(\" \"+_vm._s(skill.name)+\" \")],1)]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()])])])])}),0)])])]):_vm._e(),(unit.support.cid)?_c('div',{staticClass:\"character\"},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support.icon),\"title\":unit.support.name,\"width\":\"100\",\"height\":\"100\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\"},[_c('h5',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(unit.support.name))}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support.class),\"title\":'クラス:'+unit.support.class,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support.supportType),\"title\":'サポートタイプ:'+unit.support.supportType,\"height\":\"25\"}}),_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support.rarity),\"title\":'レアリティ:'+unit.support.rarity,\"height\":\"20\"}}),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(unit.support.damageType),\"title\":'攻撃タイプ:'+unit.support.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(unit.support.range))])],1)],1),_c('div',{staticClass:\"status2\",domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(unit.support.status, '', unit.support.damageType))}})]),_c('div',{staticClass:\"skills\"},_vm._l((unit.support.skills),function(skill,si){return _c('div',{key:`skill${si}`,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()])])])])}),0),_c('div',{staticClass:\"skills\"},_vm._l((unit.support.items),function(skill,si){return _c('div',{key:`item${si}`,staticClass:\"skill\",class:_vm.getSkillClass(skill)},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 2),expression:\"displayType >= 2\"}],staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[(skill.slot)?_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.slot),\"title\":'部位:'+skill.slot,\"height\":\"20\"}}):_vm._e(),_vm._v(\" \"+_vm._s(skill.name)+\" \")],1)]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()])])])])}),0)])])]):_vm._e()])])])}),1):_vm._e(),(_vm.simulation && _vm.selectedUnit)?_c('div',{staticClass:\"flex\",staticStyle:{\"align-items\":\"flex-start\"},attrs:{\"set\":_vm.unit=_vm.selectedUnit}},[(_vm.unit.main.cid)?_c('div',{staticClass:\"character\"},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.main.icon),\"title\":_vm.unit.main.name,\"width\":\"100\",\"height\":\"100\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\"},[_c('h5',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(_vm.unit.main.name))}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.main.class),\"title\":'クラス:'+_vm.unit.main.class,\"height\":\"25\"}}),(_vm.unit.main?.symbol)?_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.main.symbol),\"title\":'シンボル:'+_vm.unit.main.symbol,\"height\":\"25\"}}):_vm._e(),(_vm.unit.main?.rarity)?_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.main.rarity),\"title\":'レアリティ:'+_vm.unit.main.rarity,\"height\":\"20\"}}):_vm._e(),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.main.damageType),\"title\":'攻撃タイプ:'+_vm.unit.main.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.unit.main.range))])],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('移動'),\"title\":\"移動\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.unit.main.move))])],1)],1),_c('div',{staticClass:\"status2\",domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(_vm.unit.main.status))}})])])])]):_vm._e(),(_vm.unit.support.cid)?_c('div',{staticClass:\"character\"},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"portrait\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.support.icon),\"title\":_vm.unit.support.name,\"width\":\"100\",\"height\":\"100\",\"rounded\":\"\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.displayType >= 1),expression:\"displayType >= 1\"}],staticClass:\"detail\"},[_c('div',{staticClass:\"info\"},[_c('h5',{domProps:{\"innerHTML\":_vm._s(_vm.chrNameToHtml(_vm.unit.support.name))}}),_c('div',{staticClass:\"status\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.support.class),\"title\":'クラス:'+_vm.unit.support.class,\"height\":\"25\"}}),(_vm.unit.support?.supportType)?_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.support.supportType),\"title\":'サポートタイプ:'+_vm.unit.support.supportType,\"height\":\"25\"}}):_vm._e(),(_vm.unit.support?.rarity)?_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.support.rarity),\"title\":'レアリティ:'+_vm.unit.support.rarity,\"height\":\"20\"}}):_vm._e(),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(_vm.unit.support.damageType),\"title\":'攻撃タイプ:'+_vm.unit.support.damageType,\"width\":\"20\",\"height\":\"20\"}})],1),_c('div',{staticClass:\"param-box\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL('射程'),\"title\":\"射程\",\"width\":\"18\",\"height\":\"18\"}}),_c('span',[_vm._v(_vm._s(_vm.unit.support.range))])],1)],1),_c('div',{staticClass:\"status2\",domProps:{\"innerHTML\":_vm._s(_vm.statusToHtml(_vm.unit.support.status, '', _vm.unit.support.damageType))}})])])])]):_vm._e()]):_vm._e(),(_vm.simulation && _vm.selectedUnit)?_c('div',{staticClass:\"character\",staticStyle:{\"align-items\":\"flex-start\",\"width\":\"1510px\",\"max-width\":\"1510px\"}},[[_c('h5',{staticStyle:{\"margin\":\"5px\"}},[_vm._v(\"影響下にあるスキル\")]),_c('div',{staticClass:\"flex info\"},[_vm._m(4),_vm._l((_vm.effectValuesToHtml(_vm.unit.main.buf, _vm.unit.main.bufCv)),function(l,li){return [_c('div',{key:li,domProps:{\"innerHTML\":_vm._s(l)}})]})],2),(_vm.unit.support.isAlive)?_c('div',{staticClass:\"flex info\"},[_vm._m(5),_vm._l((_vm.effectValuesToHtml(_vm.unit.support.buf, _vm.unit.support.bufCv)),function(l,li){return [_c('div',{key:li,domProps:{\"innerHTML\":_vm._s(l)}})]})],2):_vm._e(),_c('div',{staticClass:\"skills\",staticStyle:{\"display\":\"flex\",\"margin-top\":\"5px\"}},[_vm._l((_vm.selectedUnit.sim.affectedSkills),function(skill,si){return [(!skill.isNormalAttack)?_c('div',{key:`skill${si}`,staticClass:\"skill\",class:_vm.getSkillClass(skill),staticStyle:{\"width\":\"745px\",\"max-width\":\"745px\"}},[_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"icon\"},[_c('b-img-lazy',{attrs:{\"src\":_vm.getImageURL(skill.icon),\"with\":\"50\",\"height\":\"50\"}})],1),_c('div',{staticClass:\"desc\"},[_c('div',{staticClass:\"flex\"},[_c('h6',[_vm._v(_vm._s(skill.name))]),_c('div',{staticClass:\"param-group\",domProps:{\"innerHTML\":_vm._s(_vm.skillParamsToHtml(skill))}})]),_c('p',[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.descToHtml(skill))}}),(skill.note)?_c('span',{staticClass:\"note\",domProps:{\"innerHTML\":_vm._s(_vm.noteToHtml(skill))}}):_vm._e()]),_c('span',{staticClass:\"note\"},[_c('div',{staticClass:\"effect-group\"},[_vm._l(([...skill.effects, ...skill.randomEffects]),function(e){return [_vm._l(((_vm.selectedUnit.sim.affectedEffects[e.uid] ?? [])),function(d,di){return [_c('div',{key:`${e.uid}${di}`,staticClass:\"effect-box\"},[_c('span',{class:`effect ${d.effect.enabled ? 'caution' : ''}`},[_vm._v(\" \"+_vm._s(d.desc)+\" \"),(d.isTimed)?_c('b-badge',{staticClass:\"tag\",attrs:{\"variant\":\"secondary\",\"pill\":\"\"},on:{\"click\":function($event){return d.remove()}}},[_vm._v(\"×\")]):_vm._e()],1)])]})]})],2)])])])]):_vm._e()]})],2)]],2):_vm._e(),(_vm.simulation)?_c('div',{staticStyle:{\"height\":\"300px\"}}):_vm._e()],1)]),_c('ItemPopovers')],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',[_vm._v(\" ユニットを自由に編成・配置し、ダメージなどの戦闘結果を計算するシミュレータです。\"),_c('br'),_vm._v(\" 主にギルドクエストEXの攻略とキャラ評価に使うことを目的としており、これまでのEXでそれなりに信頼できる結果が得られることが実証されています。\"),_c('br'),_c('br')])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_c('b',[_vm._v(\"右クリックでキャンセル\")]),_vm._v(\"の動作になります。\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('li',[_c('b',[_vm._v(\"敵フェイズでは敵ユニットを手動で操作する必要があります\")]),_vm._v(\"。正確な再現が困難なため、自動では行動しません。\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flex\"},[_c('span',{staticStyle:{\"margin-left\":\"0.5em\",\"color\":\"rgb(160,160,160)\"}},[_vm._v(\"(投稿者本人は投稿したデータを削除可能)\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h6',[_vm._v(\"メイン合計: \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h6',[_vm._v(\"サポート合計: \")])])\n}]\n\nexport { render, staticRenderFns }","export let $g = {\r\n  sim: null,\r\n  get config() {\r\n    return this.sim?.config;\r\n  },\r\n  log(text) {\r\n    console.log(text);\r\n  },\r\n};\r\n","import { $g } from \"./battle_globals.js\";\nimport { SimUnit, UnitState } from \"./battle_unit.js\";\nimport { unique, count, minElement } from \"../utils.js\";\n\nexport function scalar(v) {\n  return Array.isArray(v) ? v.at(-1) : v;\n}\n\nexport const Shape = {\n  Diamond: 0x00, // 菱形(範囲)\n  Square: 0x01, // 正方形(周囲)\n  Directional: 0x02, // 直線\n  Special: 0x03, // 特殊形状指定\n  HollowDiamond: 0x10, // 自身を除く範囲\n  HollowSquare: 0x11, // 自身を除く周囲\n};\nexport const Direction = {\n  None: 0,\n  Up: 1,\n  Right: 2,\n  Down: 3,\n  Left: 4,\n}\n\nexport function calcDistace(pos1, pos2) {\n  return Math.abs(pos1[0] - pos2[0]) + Math.abs(pos1[1] - pos2[1]);\n}\nexport function calcDirection(base, target) {\n  const dir = [target[0] - base[0], target[1] - base[1]];\n  if (dir[1] < 0) {\n    return Direction.Up;\n  }\n  else if (dir[0] > 0) {\n    return Direction.Right;\n  }\n  else if (dir[1] > 0) {\n    return Direction.Down;\n  }\n  else if (dir[0] < 0) {\n    return Direction.Left;\n  }\n  return Direction.None; // base == target\n}\nexport function areaStringToEnum(s) {\n  if (s == '範囲') { return Shape.Diamond; }\n  else if (s == '周囲') { return Shape.Square; }\n  else if (s == '直線') { return Shape.Directional; }\n  else if (s == '特殊') { return Shape.Special; }\n  else if (s == '範囲(自身を除く)') { return Shape.HollowDiamond; }\n  else if (s == '周囲(自身を除く)') { return Shape.HollowSquare; }\n  return null;\n}\nexport function parseArea(args) {\n  let size = 0;\n  let shape = Shape.Diamond;\n  if (typeof (args) === 'number') {\n    size = args;\n  }\n  else if (Array.isArray(args)) {\n    size = Array.isArray(args[0]) ? args[0].at(-1) : args[0];\n    shape = areaStringToEnum(args[1]) ?? Shape.Diamond;\n  }\n  return {\n    size: size,\n    shape: shape\n  };\n}\n\nexport function genDiamondCoords(radius) {\n  const seqX = (n) => {\n    if (n == 0)\n      return [0];\n    let r = [];\n    for (let i = 0; i <= n; ++i)\n      r.push(i);\n    for (let i = n - 1; i >= -n; --i)\n      r.push(i);\n    for (let i = -n + 1; i < 0; ++i)\n      r.push(i);\n    return r;\n  };\n  const seqY = (n) => {\n    if (n == 0)\n      return [0];\n    let r = [];\n    for (let i = -n; i <= n; ++i)\n      r.push(i);\n    for (let i = n - 1; i > -n; --i)\n      r.push(i);\n    return r;\n  };\n  let sx = seqX(radius);\n  let sy = seqY(radius);\n  return sx.map((x, i) => [sx[i], sy[i]])\n}\n\n// params: {\n//  shape: Shape,\n//  center: [x,y],\n//  size: Number,\n//  direction: Direction, (Shape.Directional) の場合\n//  shapeData: [], (Shape.Special) の場合\n//}\nexport function isInside(pos, params) {\n  const distance = () => {\n    return [Math.abs(pos[0] - params.center[0]), Math.abs(pos[1] - params.center[1])];\n  };\n\n  let shape = params.shape ?? Shape.Diamond;\n  if ((shape & 0x0f) == Shape.Diamond) { // 範囲\n    let [dx, dy] = distance();\n    if ((shape & 0x10) != 0 && (dx + dy == 0))\n      return false; // 自身を除く\n    return (dx + dy) <= params.size;\n  }\n  else if ((shape & 0x0f) == Shape.Square) { // 周囲\n    let [dx, dy] = distance();\n    if ((shape & 0x10) != 0 && (dx + dy == 0))\n      return false; // 自身を除く\n    return Math.max(dx, dy) <= params.size;\n  }\n  else if (shape == Shape.Directional) { // 直線\n    let [dx, dy] = distance();\n    let center = params.center;\n    if (Math.max(dx, dy) <= params.size && (pos[0] == center[0] || pos[1] == center[1])) {\n      // 4 方向いずれかに入っていたらここに来る\n      let dir = params.direction;\n      return !dir || dir == Direction.None || dir == calcDirection(center, pos);\n    }\n    return false;\n  }\n  else if (shape == Shape.Special) { // 特殊\n    if (params.shapeData) {\n      const line = params.shapeData[pos[1]];\n      if (line)\n        return line[pos[0]] == 1;\n    }\n    return false;\n  }\n}\n\nexport function callHandler(funcName, ctx, ...callees) {\n  for (let c of callees) {\n    c[funcName](ctx);\n  //  try {\n  //    c[funcName]();\n  //  }\n  //  catch (except) {\n  //    console.log(`!!! ${funcName}`);\n  //    console.log(c);\n  //  }\n  }\n}\n\nexport function evaluateCondition(ctx, cond)\n{\n  if (!cond)\n    return true;\n\n  const condExp = function (val1, cmp, val2) {\n    if (val1 == null)\n      val1 = 0;\n    if (typeof (val2) == \"string\")\n      val2 = ctx[val2];\n    const table = {\n      \"==\": () => val1 == val2,\n      \">\": () => val1 > val2,\n      \"<\": () => val1 < val2,\n      \">=\": () => val1 >= val2,\n      \"<=\": () => val1 <= val2,\n      \"!=\": () => val1 != val2,\n    };\n    return table[cmp]();\n  }\n\n  let ok = true;\n\n  const boolProps = [\n    \"onOwnTurn\", \"onEnemyTurn\",\n    \"onActiveSkill\", \"onSingleSkill\", \"onAreaSkill\",\n    \"onBattle\", \"onCloseCombat\", \"onRangedCombat\",\n    \"onDamage\", \"onCriticalHit\", \"onKill\", \"onClassAdvantage\",\n    \"onMultiMove\", \"onMultiAction\", \"onIdle\"\n  ];\n  for (const p of boolProps) {\n    if (p in cond) {\n      if (Boolean(ctx[p]) != cond[p]) {\n        ok = false;\n        break;\n      }\n    }\n  }\n\n  const includesProps = [\n    [\"onClass\", \"class\"],\n    [\"onTargetClass\", \"targetClass\"],\n    [\"onSymbol\", \"symbol\"],\n    [\"onTerrain\", \"terrain\"]\n  ];\n  for (const [cname, pname] of includesProps) {\n    if (cname in cond) {\n      if (!cond[cname].includes(ctx[pname])) {\n        ok = false;\n        break;\n      }\n    }\n  }\n\n  const queryFuncPros = [\n    [\"onEffect\", \"isOnEffect\"],\n  ];\n  for (const [cname, fname] of queryFuncPros) {\n    if (cname in cond) {\n      if (!ctx[fname](cond[cname])) {\n        ok = false;\n        break;\n      }\n    }\n  }\n\n  const binaryExpressionProps = [\n    \"turn\",\n    \"hp\", \"targetHp\",\n    \"activeBuffCount\", \"targetActiveBuffCount\",\n    \"activeDebuffCount\", \"targetActiveDebuffCount\",\n  ];\n  for (const p of binaryExpressionProps) {\n    if (p in cond) {\n      if (!condExp(ctx[p], ...cond[p])) {\n        ok = false;\n        break;\n      }\n    }\n  }\n\n  const getExpressionProps = [\n    [\"nearAllyCount\", \"area\", \"getNearAllyCount\"],\n    [\"nearEnemyCount\", \"area\", \"getNearEnemyCount\"],\n    [\"token\", \"tokenName\", \"getTokenCount\"],\n    [\"targetToken\", \"tokenName\", \"getTargetTokenCount\"],\n  ];\n  for (const [cname, pname, fname] of getExpressionProps) {\n    if (cname in cond) {\n      const c = cond[cname];\n      if (!condExp(ctx[fname](c[pname]), ...c.compare)) {\n        ok = false;\n        break;\n      }\n    }\n  }\n\n  return ok;\n}\n\nexport function getTargetUnits(ctx, json) {\n  const getAllyWithLowestHpRate = () => {\n    let allies = $g.sim.activeUnits.filter(a => a.isPlayer == ctx.unit.isPlayer);\n    let lowest = minElement(allies, (a, b) => a.hpRate < b.hpRate);\n    return lowest ? [lowest] : [];\n  };\n\n  let targetTable = {\n    \"自身\": () => [ctx.unit],\n    \"攻撃対象\": () => ctx.targets ?? (ctx.target ? [ctx.target] : []),\n    \"スキル対象\": () => ctx.targets ?? (ctx.target ? [ctx.target] : []),\n    \"範囲\": () => ctx.getUnitsInArea(json.area),\n    \"乱択\": () => ctx.getUnitsInArea(json.area),\n    \"味方(低HP)\": () => getAllyWithLowestHpRate(),\n    \"味方全体\": () => $g.sim.activeUnits.filter(a => a.isPlayer == ctx.unit.isPlayer),\n    \"敵全体\": () => $g.sim.activeUnits.filter(a => a.isPlayer != ctx.unit.isPlayer),\n    \"召喚先\": () => ctx.unit.summon,\n    \"召喚元\": () => ctx.unit.summoner ? [ctx.unit.summoner] : [],\n  };\n  if (json.target in targetTable) {\n    return targetTable[json.target]();\n  }\n  else {\n    console.log(`!! 未サポートの target ${json.target} !!`);\n    return [];\n  }\n}\n\nexport function makeActionContext(unit, target, skill) {\n  let sim = $g.sim;\n\n  const damageProps = [\n    \"damageToSupport\", \"damageToMain\",\n    \"additionalDamageToSupport\", \"additionalDamageToMain\",\n  ];\n  const damageRecordBase = {\n    get(fid) {\n      let r = this[fid];\n      if (r === undefined) {\n        r = this[fid] = {\n          main: 0,\n          support: 0,\n          additional: 0,\n          get total() { return this.main + this.support + this.additional; }\n        };\n      }\n      return r;\n    },\n    clear() {\n      for (const k of Object.keys(this)) {\n        if (typeof (this[k]) == \"object\") {\n          delete this[k];\n        }\n      }\n    }\n  };\n\n  let ctx = {\n    move: 0,\n    range: 0,\n    get turn() { return sim.turn; },\n    get phase() { return sim.phase; },\n    get onCloseCombat() { return this.onBattle && this.range == 1; },\n    get onRangedCombat() { return this.onBattle && this.range > 1; },\n    get terrain() { return \"\"; },\n\n    // skill 関連\n    skill: skill,\n    get onNormalAttack() { return this.skill === null || this.skill.isNormalAttack; }, // skill が undefined の場合は false \n    get onActiveSkill() { return this.skill && !this.skill.isNormalAttack; },\n    get onAreaSkill() { return this.onActiveSkill && this.skill.isAreaTarget; },\n    get onSingleSkill() { return this.onActiveSkill && this.skill.isSingleTarget; },\n\n    // unit 関連\n    unit: unit,\n    get class() { return this.unit.mainClass; },\n    get symbol() { return this.unit.symbol; },\n    get hp() { return this.unit.hpRate; },\n    get activeBuffCount() { return this.unit.activeBuffCount },\n    get activeDebuffCount() { return this.unit.activeDebuffCount; },\n    get onOwnTurn() { return sim.isOwnTurn(this.unit); },\n    get onEnemyTurn() { return !sim.isOwnTurn(this.unit); },\n    isOnEffect(args) { return this.unit.isOnEffect(args); },\n    getTokenCount(args) { return this.unit.getTokenCount(args); },\n    getUnitsInArea(args) { return this.unit.getUnitsInArea(args); },\n    getNearAllyCount(args) { return unique(this.unit.getAlliesInArea(args)).length; },\n    getNearEnemyCount(args) { return unique(this.unit.getEnemiesInArea(args)).length; },\n\n    // target 関連\n    target: target,\n    get targetClass() { return this.target?.mainClass; },\n    get targetHp() { return this.target?.hpRate ?? 0; },\n    get targetActiveBuffCount() { return this.target?.activeBuffCount ?? 0; },\n    get targetActiveDebuffCount() { return this.target?.activeDebuffCount ?? 0; },\n    getTargetTokenCount(args) { return this.target ? this.target.getTokenCount(args) : 0; },\n\n    // ダメージ関連\n    damageDealt: Object.create(damageRecordBase),\n    damageTaken: Object.create(damageRecordBase),\n    healDealt: Object.create(damageRecordBase),\n    healTaken: Object.create(damageRecordBase),\n    addDamage(v, fromChr, toChr) {\n      let from = fromChr.unit;\n      let to = toChr.unit;\n\n      let dealt = this.damageDealt.get(from.fid);\n      if (!this.attackInProgress) {\n        dealt.additional += v;\n      }\n      else if (fromChr.isSupport) {\n        dealt.support += v;\n      }\n      else {\n        dealt.main += v;\n      }\n\n      let taken = this.damageTaken.get(to.fid);\n      if (toChr.isSupport) {\n        taken.support += v;\n      }\n      else {\n        taken.main += v;\n      }\n\n      // スコア加算\n      if (from.isPlayer != to.isPlayer) { // 自傷ダメージはカウントしない\n        from.score += v;\r\n      }\n    },\n    addHeal(v, fromChr, toChr) {\n      let from = fromChr.unit;\n      let to = toChr.unit;\n\n      let dealt = this.healDealt.get(from.fid);\n      if (fromChr.isSupport) {\n        dealt.support += v;\n      }\n      else {\n        dealt.main += v;\n      }\n\n      let taken = this.healTaken.get(to.fid);\n      if (toChr.isSupport) {\n        taken.support += v;\n      }\n      else {\n        taken.main += v;\n      }\n    },\n\n    makeChild() {\n      let r = Object.create(this);\n      // base 側に変更を伝達するため、直接 base 側の関数を呼ぶ\n      r.addDamage = (...args) => { this.addDamage(...args); };\n      r.addHeal = (...args) => { this.addHeal(...args); };\n      return r;\n    },\n    inheritDamage(parent) {\n      this.addDamage = (...args) => { parent.addDamage(...args); };\n      this.addHeal = (...args) => { parent.addHeal(...args); };\n    },\n\n    _inheritProps(parent, props) {\n      for (const p of props) {\n        if (p in parent) {\n          this[p] = parent[p];\n        }\n      }\n    },\n    inheritBattleParams(parent) {\n      this._inheritProps(parent, [\"range\", \"onAttack\", \"onBattle\"]);\n    },\n    inheritAttackerParams(parent) {\n      this.inheritBattleParams(parent);\n      this._inheritProps(parent, [\"onPhysicalDamage\", \"onMagicDamage\"]);\n      if (parent.isTargetGuardian) {\n        this.onGuard = true;\n      }\n    },\n  };\n\n  if (skill?.isAttackSkill) {\n    ctx.onAttack = true;\n    if (skill?.isBattleSkill)\n      ctx.onBattle = true;\n  }\n  ctx.move = (unit?.moveDistance ?? 0) + (unit?.prevMoveDistance ?? 0);\n\n  return ctx;\n}\n\nexport function getEffectMultiply(self, ctx) {\n  // 効果が重複するタイプの重複率\n  const mul = self.multiply;\n  if (mul) {\n    const table = {\n      \"move\": () => ctx.move,\n      \"distance\": () => Math.max(ctx.range - 1, 0),\n      \"token\": () => ctx.getTokenCount(mul.tokenName),\n      \"targetToken\": () => ctx.getTargetTokenCount(mul.tokenName),\n      \"activeBuffCount\": () => ctx.activeBuffCount,\n      \"targetActiveBuffCount\": () => ctx.targetActiveBuffCount,\n      \"nearAllyCount\": () => ctx.getNearAllyCount(mul.area),\n      \"nearEnemyCount\": () => ctx.getNearEnemyCount(mul.area),\n    };\n    return Math.min(table[mul.by](), mul.max);\n  }\n  return 1;\n}\n\nexport function getEffectValue(self, ctx, unit) {\n  let r = 0;\n  if ('value' in self) {\n    r = self.value;\n  }\n  else if ('variable' in self) {\n    // HP 割合などに応じて効果が上下するタイプ\n    // とりあえず常に最大値を返すようにしておく\n    r = scalar(self.variable.max);\n  }\n  else if ('add' in self) {\n    // \"アタックの n% をマジックに加算\" など\n    const v = self.add;\n    const chr = v.source == \"サポート\" ? unit.support : unit.main;\n    const table = {\n      \"最大HP\": () => chr.baseHp,\n      \"アタック\": () => chr.baseAtk,\n      \"ディフェンス\": () => chr.baseDef,\n      \"マジック\": () => chr.baseMag,\n      \"レジスト\": () => chr.baseRes,\n    };\n    r = Math.round(table[v.from]() * scalar(v.rate));\n  }\n\n  r *= getEffectMultiply(self, ctx);\n  return self.isDebuff ? -r : r;\n}\n\nexport function makeSimEffect(effect, stop = false) {\n  let self = Object.create(effect);\n  self.enabled = false; // シリアライズ不要\n\n  let data = {};\n  self.data = data; // serializable data\n\n  if ('duration' in self) {\n    data.count = self.duration; // 残有効時間\n    data.isStopped = stop; // 自己バフはかけたターンは時間経過しない。そのためのフラグ。\n    Object.defineProperty(self, \"count\", {\n      get: () => data.count,\n      set: (v) => { data.count = v },\n    });\n    Object.defineProperty(self, \"isStopped\", {\n      get: () => data.isStopped,\n      set: (v) => { data.isStopped = v },\n    });\n  }\n  else {\n    Object.defineProperty(self, \"count\", {\n      get: () => Infinity,\n      set: (v) => { },\n    });\n  }\n  Object.defineProperty(self, \"isTimed\", {\n    get: () => isFinite(self.count),\n  });\n  Object.defineProperty(self, \"isExpired\", {\n    get: () => self.count <= 0,\n  });\n  Object.defineProperty(self, \"isAdditive\", {\n    get: () => 'add' in self,\n  });\n\n  self.activate = function (bySelf) {\n    if ('duration' in self) {\n      self.count = self.duration;\n      if (bySelf) {\n        self.isStopped = false;\n      }\n    }\n  }\n  self.getValue = function (ctx, unit) {\n    return getEffectValue(self, ctx, unit);\n  }\n\n  self._getValue = function (ctx, baseStat) {\n    let r = 0;\n    const effect = self;\n    if (effect.value) {\n      r = effect.value;\n    }\n    else if (effect.variable) {\n      // HP 割合などに応じて効果が上下するタイプ\n      // フルスペック時の効果を返す\n      if (Array.isArray(effect.variable.max)) {\n        r = effect.variable.max[effect.variable.max.length - 1];\n      }\n      else {\n        r = effect.variable.max;\n      }\n    }\n    else if (effect.add) {\n      // \"アタックの n% をマジックに加算\" など\n      // 正確な評価は困難だが 0 にはしたくないので、とりあえず 1/4 したのをスコアにしておく\n      r = effect.add.rate * 0.25;\n    }\n    return r;\n  }\n  return self;\n}\n\nexport function makeSimSkill(skill, ownerUnit) {\n  let self = Object.create(skill);\n  self.owner = ownerUnit;\n\n  const subactionTable = {\n    shield: {\n      prefix: 's',\n      invoke: (ctx) => self.invokeShield(ctx),\n    },\n    revive: {\n      prefix: 'r',\n      invoke: (ctx) => self.invokeRevive(ctx),\n    },\n    heal: {\n      prefix: 'h',\n      invoke: (ctx) => self.invokeHeal(ctx),\n    },\n    areaDamage: {\n      prefix: 'ad',\n      invoke: (ctx) => self.invokeAreaDamage(ctx),\n    },\n    fixedDamage: {\n      prefix: 'fd',\n      invoke: (ctx) => self.invokeFixedDamage(ctx),\n      triggerOnMultiMove: true\n    },\n    ctReduction: {\n      prefix: 'cr',\n      invoke: (ctx) => self.invokeCtReduction(ctx),\n    },\n    buffCancel: {\n      prefix: 'bc',\n      invoke: (ctx) => self.invokeBuffCanel(ctx),\n    },\n    debuffCancel: {\n      prefix: 'dc',\n      invoke: (ctx) => self.invokeDebuffCanel(ctx),\n    },\n    doubleAttack: {\n      prefix: 'da',\n      invoke: (ctx) => self.invokeDoubleAttack(ctx),\n    },\n    multiAction: {\n      prefix: 'ma',\n      invoke: (ctx) => self.invokeMultiAction(ctx),\n    },\n    multiMove: {\n      prefix: 'mm',\n      invoke: (ctx) => self.invokeMultiMove(ctx),\n    },\n  };\n\n  if (skill?.area) {\n    Object.defineProperty(self, 'area', {\n      get: () => {\n        if (typeof (skill.area) != 'number') {\n          return skill.area;\n        }\n        let r = skill.area;\n        if (skill.isMainSkill) {\n          r += self.owner.main.getBuffValue(\"範囲\");\n        }\n        return r;\n      },\n    });\n  }\n  if (skill?.range) {\n    Object.defineProperty(self, 'range', {\n      get: () => {\n        if (typeof (skill.range) != 'number') {\n          return skill.range;\n        }\n        if (skill.isNormalAttack) {\n          let chr = self.owner.main;\n          return chr.range + chr.getBuffValue(\"射程(通常攻撃)\");\n        }\n        else {\n          let chr = skill.isMainSkill ? self.owner.main : self.owner.support;\n          return skill.range + chr.getBuffValue(\"射程(スキル)\");\n        }\n      },\n    });\n  }\n\n  let data = {};\n  self.data = data; // serializable data\n\n  if (self.isActive) {\n    let pname = 'coolTime';\n    let id = `${pname}`;\n    data[id] = 0;\n    Object.defineProperty(self, pname, {\n      get: () => { return data[id]; },\n      set: (v) => { data[id] = v; },\n    });\n\n    self.makeRangeParams = function () {\n      let r = {};\n      if (this.range == \"自ユニット\")\n        r.size = 0;\n      else if (this.range == \"単体\")\n        r.size = 1;\n      else if (this.range == \"全体\")\n        r.size = 99;\n      else\n        r.size = this.range;\n      r.shape = areaStringToEnum(this.rangeShape) ?? Shape.Diamond;\n      return r;\n    };\n    self.makeAreaParams = function () {\n      let r = {};\n      if (this.area == \"自ユニット\")\n        r.size = 0;\n      else if (this.area == \"単体\")\n        r.size = 1;\n      else if (this.area == \"全体\")\n        r.size = 99;\n      else\n        r.size = this.area;\n      r.shape = areaStringToEnum(this.areaShape) ?? Shape.Diamond;\n      if (this.shapeData)\n        r.shapeData = this.shapeData;\n      return r;\n    };\n  }\n  Object.defineProperty(self, 'available', {\n    get: function () { return !this.isActive || this.coolTime <= 0; },\n  });\n\n\n  const wrapEffect = (baseEffect) => {\n    let e = Object.create(baseEffect);\n    Object.defineProperty(e, 'parent', {\n      get: () => self,\n    });\n    if (baseEffect.trigger?.ct) {\n      e.trigger = Object.create(baseEffect.trigger);\n\n      let pname = 'coolTime';\n      let id = `${e.index}.${pname}`;\n      data[id] = 0;\n      Object.defineProperty(e.trigger, pname, {\n        get: () => { return data[id]; },\n        set: (v) => { data[id] = v; },\n      });\n    }\n    if (baseEffect.randomTable) {\n      e.randomTable = baseEffect.randomTable.map(e => wrapEffect(e));\n    }\n    return e;\n  };\n  if (self.buff) {\n    self.buff = self.buff.map(e => wrapEffect(e));\n  }\n  if (self.debuff) {\n    self.debuff = self.debuff.map(e => wrapEffect(e));\n  }\n\n  const setupSubaction = (name, prefix) => {\n    if (!(name in self)) {\n      return;\n    }\n\n    let list = self[name].map(a => Object.create(a));\n    Object.defineProperty(self, name, {\n      get: () => list,\n    });\n    for (let i = 0; i < list.length; ++i) {\n      let obj = list[i];\n      if ('ct' in obj) {\n        let pname = 'coolTime';\n        let id = `${prefix}${i}.${pname}`;\n        data[id] = 0;\n        Object.defineProperty(obj, pname, {\n          get: () => { return data[id]; },\n          set: (v) => { data[id] = v; },\n        });\n      }\n      if ('count' in obj) {\n        let pname = 'remain';\n        let id = `${prefix}${i}.${pname}`;\n        data[id] = obj.count;\n        Object.defineProperty(obj, pname, {\n          get: () => { return data[id]; },\n          set: (v) => { data[id] = v; },\n        });\n      }\n    }\n  };\n  for (const [name, info] of Object.entries(subactionTable)) {\n    setupSubaction(name, info.prefix);\n  }\n\n\n  self.activate = function (bySelf) {\n    for (let e of this.effects) {\n      e.activate(bySelf);\n    }\n  }\n\n  self.invokeSummon = function (ctx) {\n    for (let sum of this.summon ?? []) {\n      if (evaluateCondition(ctx, sum.condition)) {\n        let unit = new SimUnit(sum.makeUnit());\n        unit.coord = [...ctx.targetCell];\n        unit.setSummoner(ctx.unit);\n        $g.sim.addUnit(unit);\n        $g.log(`!! 召喚 ${ctx.unit.main.name} (${self.name}) -> ${unit.main.name}!!`);\n        break;\n      }\n    }\n  };\n  self.invokePositionManipulate = function (ctx) {\n    for (let act of this.positionManipulate ?? []) {\n      let u = ctx.unit;\n      let t = ctx.target;\n      if (u && t && (t.isPlayer == u.isPlayer || !t.hasResist(\"位置移動\"))) {\n        const getDir = (pos, center) => {\n          const [dx,dy] = [pos[0] - center[0], pos[1] - center[1]];\n          if (dx == 0 || dy == 0) { // どちらかの軸が合ってないと無効としておく\n            if      (dy < 0) { return [ 0, -1]; } // top\n            else if (dx > 0) { return [ 1,  0]; } // right\n            else if (dy > 0) { return [ 0,  1]; } // down\n            else if (dx < 0) { return [-1,  0]; } // left\n          }\n          return null;\n        };\n        const directionalMove = (dir, maxMove) => {\n          if (!dir || t.hasResist(\"位置移動\")) {\n            return;\n          }\n          let pos = t.coord;\n          for (let i = 0; i < maxMove; ++i) {\n            let next = [pos[0] + dir[0], pos[1] + dir[1]];\n            if ($g.sim.canMoveInto(next)) {\n              pos = next;\n            }\n            else {\n              break;\n            }\n          }\n          t.coord = pos;\n        };\n        const teleport = () => {\n          if (t.isPlayer != u.isPlayer) {\n            return;\n          }\n          // todo:\n        };\n        const table = {\n          \"引き寄せ\": () => directionalMove(getDir(u.coord, t.coord), self.range),\n          \"後退\": () => directionalMove(getDir(t.coord, u.coord), act.value),\n          \"テレポート\": () => teleport(),\n        };\n        table[act.type]();\n      }\n    }\n    //positionManipulate\n  };\n\n  self.invokeShield = function (ctx) {\n    for (let act of self?.shield ?? []) {\n      if (!act.coolTime && evaluateCondition(ctx, act.condition)) {\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n\n      let u = ctx.unit;\n        let target = act.target == \"自身(サポート)\" ? u.support : u.main;\n        if (target.isAlive) {\n          let src = act.source == \"サポート\" ? u.support : u.main;\n          let rate = scalar(act.rate);\n        const table = {\n            \"最大HP\": () => { return src.baseHp * rate; },\n            \"アタック\": () => { return src.baseAtk * rate; },\n            \"ディフェンス\": () => { return src.baseDef * rate; },\n            \"マジック\": () => { return src.baseMag * rate; },\n            \"レジスト\": () => { return src.baseRes * rate; },\n            \"固定値\": () => { return act.value; },\n        };\n          target.shield = Math.max(table[act.base](), target.shield);\n          $g.log(`!! シールド ${target.name} (${self.name})!!`);\n        }\n      }\n    }\n  };\n  self.invokeRevive = function (ctx) {\n    for (let act of self?.revive ?? []) {\n      if (act.remain && evaluateCondition(ctx, act.condition)) {\n        --act.remain;\n        let u = ctx.unit;\n        let rate = scalar(act.rate);\n        u.main.receiveHeal(u.main.maxHp * rate, u.main, ctx);\n        u.support.receiveHeal(u.support.maxHp * rate, u.main, ctx);\n        $g.log(`!! 復活 ${u.main.name} (${self.name})!!`);\n      }\n    }\n  };\n  self.invokeHeal = function (ctx, timing = null) {\n    for (let act of self?.heal ?? []) {\n      if (act.timing == timing && !act.coolTime && evaluateCondition(ctx, act.condition)) {\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n\n        let u = ctx.unit;\n        let from = self.isSupportSkill ? u.support : u.main;\n        let rate = scalar(act.rate);\n        let buf = (from.getBuffValue(\"治療効果\") / 100 + 1);\n        const apply = (chr, value) => {\n          let base = value * rate;\n          // 治療効果 と 被治療効果 は乗算の関係\n          let boost = buf * (chr.getBuffValue(\"被治療効果\") / 100 + 1);\n          chr.receiveHeal(base * boost, from, ctx);\n        };\n        const table = {\n          \"マジック\": (t) => {\n            let value = from.status[3];\n            apply(t.main, value);\n            apply(t.support, value);\n          },\n          \"最大HP\": (t) => {\n            apply(t.main, t.main.maxHp);\n            apply(t.support, t.support.maxHp);\n          },\n          \"与ダメージ\": (t) => {\n            let dmg = ctx.damageDealt.get(u.fid);\n            let value = (from.isMain ? dmg.main : dmg.support);\n            apply(t.main, value);\n            apply(t.support, value);\n          },\n        };\n        for (let t of getTargetUnits(ctx, act)) {\n          if (u.isPlayer == t.isPlayer && t.isAlive) {\n            table[act.base](t);\n            $g.log(`!! 回復 ${u.main.name} (${self.name}) -> ${t.main.name}!!`);\n          }\n        }\n      }\n    }\n  };\n  self.invokeBuffSteal = function (ctx, timing = null) {\n    if (!$g.config.autoBuffCancel) {\n      return;\n    }\n    for (let act of self?.buffSteal ?? []) {\n      if (act.timing == timing && !act.coolTime && evaluateCondition(ctx, act.condition)) {\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n\n        let u = ctx.unit;\n        let count = scalar(act.value);\n        for (let t of unique(getTargetUnits(ctx, act))) {\n          if (u.isPlayer != t.isPlayer) {\n            let buff = t.removeEffectsByCondition(count, e => e.isBuff && e.isCancelable);\n            for (let b of buff) {\n              let t = u.applyEffect(b.__proto__);\n              if (t) {\n                t.count = b.count + 1;\n              }\n            }\n            $g.log(`!! バフ奪取 ${u.main.name} (${self.name}) -> ${t.main.name}!!`);\n          }\n        }\n      }\n    }\n  };\n  self.invokeBuffCancel = function (ctx, timing = null) {\n    if (!$g.config.autoBuffCancel) {\n      return;\n    }\n    for (let act of self?.buffCancel ?? []) {\n      if (act.timing == timing && !act.coolTime && evaluateCondition(ctx, act.condition)) {\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n\n        let u = ctx.unit;\n        let count = scalar(act.value);\n        for (let t of unique(getTargetUnits(ctx, act))) {\n          if (u.isPlayer != t.isPlayer) {\n            // ダメージ耐性を優先的に消す\n            const conditions = [\n              e => e.isBuff && e.isCancelable && e.type.startsWith(\"ダメージ耐性\"),\n              e => e.isBuff && e.isCancelable,\n            ];\n            t.removeEffectsByCondition(count, ...conditions);\n            $g.log(`!! バフ解除 ${u.main.name} (${self.name}) -> ${t.main.name}!!`);\n          }\n        }\n      }\n    }\n  };\n  self.invokeDebuffCancel = function (ctx, timing = null) {\n    if (!$g.config.autoBuffCancel) {\n      return;\n    }\n    for (let act of self?.debuffCancel ?? []) {\n      if (act.timing == timing && !act.coolTime && evaluateCondition(ctx, act.condition)) {\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n\n        let u = ctx.unit;\n        let count = scalar(act.value);\n        for (let t of unique(getTargetUnits(ctx, act))) {\n          if (u.isPlayer == t.isPlayer) {\n            // 与ダメージに絡むものを優先的に消す\n            const conditions = [\n              e => e.isDebuff && e.isCancelable && (e.type == u.main.damageType || e.type.startsWith(\"与ダメージ\")),\n              e => e.isDebuff && e.isCancelable,\n            ];\n            t.removeEffectsByCondition(count, ...conditions);\n            $g.log(`!! デバフ解除 ${u.main.name} (${self.name}) -> ${t.main.name}!!`);\n          }\n        }\n      }\n    }\n  };\n  self.invokeAreaDamage = function (ctx, timing = null) {\n    for (let act of self?.areaDamage ?? []) {\n      if (act.timing == timing && !act.coolTime && evaluateCondition(ctx, act.condition)) {\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n\n        let u = ctx.unit;\n        for (let t of getTargetUnits(ctx, act)) {\n          if (u.isPlayer != t.isPlayer) {\n            // todo\n            $g.log(`!! エリアダメージ ${u.main.name} (${self.name}) -> ${t.main.name}!!`);\n          }\n        }\n      }\n    }\n  };\n  self.invokeFixedDamage = function (ctx, timing = null) {\n    for (let act of self?.fixedDamage ?? []) {\n      if (act.timing == timing && !act.coolTime && evaluateCondition(ctx, act.condition)) {\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n\n        let u = ctx.unit;\n        let from = self.isSupportSkill ? u.support : u.main;\n        let rate = scalar(act.rate) * getEffectMultiply(act, ctx);\n        const apply = (chr, value) => {\n          if (chr.isAlive) {\n            chr.receiveDamage(value * rate, from, ctx);\n          }\n        };\n        const table = {\n          \"最大HP\": (t) => {\n            apply(t.main, t.main.maxHp);\n            apply(t.support, t.support.maxHp);\n          },\n          \"アタック\": (t) => {\n            let value = from.status[1];\n            apply(t.main, value);\n            apply(t.support, value);\n          },\n          \"ディフェンス\": (t) => {\n            let value = from.status[2];\n            apply(t.main, value);\n            apply(t.support, value);\n          },\n          \"マジック\": (t) => {\n            let value = from.status[3];\n            apply(t.main, value);\n            apply(t.support, value);\n          },\n          \"レジスト\": (t) => {\n            let value = from.status[4];\n            apply(t.main, value);\n            apply(t.support, value);\n          },\n          \"与ダメージ\": (t) => {\n            let dmg = ctx.damageTaken[t.fid];\n            apply(t.main, dmg.main);\n            apply(t.support, dmg.support);\n          },\n        };\n        for (let t of unique(getTargetUnits(ctx, act))) {\n          if (u.isPlayer != t.isPlayer || act.target == \"自身\") {\n            // 自傷ダメージはオプションで有効にしない限り発動しないようにしておく\n            if (($g.config.selfDamage || act.target != \"自身\")) {\n              table[act.base](t);\n              $g.log(`!! 固定ダメージ ${u.main.name} (${self.name}) -> ${t.main.name}!!`);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  self.invokeCtReduction = function (ctx, timing = null) {\n    let succeeded = false;\n    for (let act of self?.ctReduction ?? []) {\n      if (act.timing == timing && !act.coolTime && evaluateCondition(ctx, act.condition)) {\n        succeeded = true;\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n\n        let u = ctx.unit;\n        for (let t of unique(getTargetUnits(ctx, act))) {\n          if (t.isPlayer == u.isPlayer) {\n            let cond = null;\n            if (act.targetSkill == \"使用したスキル\") {\n              cond = (skill) => skill === ctx.skill;\n            }\n            else {\n              cond = (skill) => skill !== self;\n            }\n            t.reduceSkillCT(act.value, cond);\n            $g.log(`!! CT減 ${u.main.name} (${self.name}) -> ${t.main.name}!!`);\n          }\n        }\n      }\n    }\n    return succeeded;\n  };\n\n  self.invokeSupportAttack = function (ctx) {\n    let succeeded = false;\n    for (let act of self?.supportAttack ?? []) {\n      if (!act.coolTime && evaluateCondition(ctx, act.condition)) {\n        succeeded = true;\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n      }\n      if (succeeded) {\n        $g.log(`!! サポート同時攻撃 ${ctx.unit.main.name} (${self.name}) !!`);\n      }\n    }\n    return succeeded;\n  };\n  self.invokeDoubleAttack = function (ctx) {\n    let succeeded = false;\n    if (ctx.onNormalAttack) {\n      for (let act of self?.doubleAttack ?? []) {\n        if (!act.coolTime && evaluateCondition(ctx, act.condition)) {\n          succeeded = true;\n          if (act.ct) {\n            act.coolTime = act.ct;\n          }\n        }\n        if (succeeded) {\n          $g.log(`!! 2回攻撃 ${ctx.unit.main.name} (${self.name}) !!`);\n        }\n      }\n    }\n    return succeeded;\n  };\n  self.invokeMultiAction = function (ctx) {\n    if (ctx.unit.hasBadStatus(\"強化不可\")) {\n      return false;\n    }\n    let succeeded = false;\n    for (let act of self?.multiAction ?? []) {\n      if (!act.coolTime && ctx.onOwnTurn && evaluateCondition(ctx, act.condition)) {\n        if (act.target == \"スキル対象\") {\n          ctx.target.state = UnitState.Ready;\n          // 他者への再行動の場合 succeeded は false\n        }\n        else {\n          ctx.onMultiAction = true;\n          succeeded = true;\n        }\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n      }\n      if (succeeded) {\n        $g.log(`!! 再行動 ${ctx.unit.main.name} (${self.name}) !!`);\n      }\n    }\n    return succeeded;\n  };\n  self.invokeMultiMove = function (ctx) {\n    let succeeded = false;\n    for (let act of skill?.multiMove ?? []) {\n      if (!act.coolTime && !ctx.onWait && evaluateCondition(ctx, act.condition)) {\n        succeeded = true;\n        ctx.onMultiMove = true;\n\n        let m = -1; // -1: バフ込みの元の移動力\n        if (act.type == \"基本移動力\") {\n        }\n        else if (act.type == \"固定値移動力\") {\n          m = act.value;\n        }\n        else if (act.type == \"残移動力\") {\n          m = ctx.unit.main.move - ctx.move;\n        }\n        // 複数の multiMove が同時に発動する可能性があり、その場合 -1 が最優先、それ以外だと最も移動量が高い方を優先\n        ctx.multiMoveValue = m == -1 ? m : Math.max(m, ctx.multiMoveValue ?? 0);\n\n        if (act.ct) {\n          act.coolTime = act.ct;\n        }\n      }\n      if (succeeded) {\n        $g.log(`!! 再移動 ${ctx.unit.main.name} (${self.name}) !!`);\n      }\n    }\n    return succeeded;\n  };\n\n\n  self.getDamageRate = function (ctx) {\n    for (const s of self.damageRateSp ?? []) {\n      if (evaluateCondition(ctx, s.condition)) {\n        return scalar(s.value);\n      }\n    }\n    return scalar(self.damageRate);\n  };\n\n  self.startCoolTime = function () {\n    if (this.isActive) {\n      if (this.isSupportSkill) {\n        this.coolTime = Infinity;\n      }\n      else if (this.ct) {\n        this.coolTime = this.ct + 1;\n      }\n    }\n  };\n\n  self.onFire = function (ctx) {\n    // バフ・デバフ発動\n    // ここで処理するのはスキル発動時効果のみで、攻撃前後や戦闘前後に発動するものは別途 trigger で処理される\n    let u = ctx.unit;\n    for (let t of unique(ctx.targets)) {\n      let tctx = makeActionContext(t);\n      // trigger がない効果を即時起動していく\n      // condition は付与時ではなく発動時の条件なのでここでは評価不要\n      for (let e of this.effects) {\n        if (!e.trigger && ((e.isBuff && t.isPlayer == u.isPlayer) || (e.isDebuff && t.isPlayer != u.isPlayer))) {\n          if ([undefined, \"スキル対象\", \"攻撃対象\"].includes(e.target) || (this.isSelfTarget && t === u)) {\n            t.applyEffect(e, u === t);\n          }\n        }\n      }\n    }\n\n    this.invokeSummon(ctx);\n    this.invokePositionManipulate(ctx);\n    this.invokeFixedDamage(ctx);\n    this.invokeAreaDamage(ctx);\n    this.invokeHeal(ctx);\n    this.invokeBuffSteal(ctx);\n    this.invokeBuffCancel(ctx);\n    this.invokeDebuffCancel(ctx);\n    this.invokeCtReduction(ctx);\n    //console.log(this);\n  };\n\n  self.trigger = function (ctx, timing) {\n    let u = ctx.unit;\n    for (let e of this.effects) {\n      let tri = e.trigger;\n      if (tri && tri.timing == timing && !tri.coolTime) {\n        if (tri.ct) {\n          tri.coolTime = tri.ct;\n        }\n        let prevTarget = ctx.target;\n        let targets = unique(getTargetUnits(ctx, tri));\n\n        const applyRandomSelection = function (e, targets) {\n          targets = targets.filter(a => e.isBuff ? a.isPlayer == u.isPlayer : a.isPlayer != u.isPlayer);\n          let eid = e.uid;\n          if (e.type == \"ランダム\") {\n            if (e.isBuff) {\n              eid = e.randomTable.find(a => a.type == \"与ダメージ\")?.uid;\n            }\n            else if (e.isDebuff) {\n              eid = e.randomTable.find(a => a.type == \"ダメージ耐性\")?.uid;\n            }\n          }\n\n          const max = e.trigger.unitCount;\n          if (targets.length <= max) {\n            return targets;\n          }\n          let r = [];\n          // 効果がまだかかっていないユニットを選ぶ\n          for (let t of targets) {\n            if (!t.timedEffects.find(a => a.uid == eid)) {\n              if (r.push(t) >= max) {\n                break;\n              }\n            }\n          }\n          // まだ選べる場合適当に候補を追加\n          if (r.length < max) {\n            for (let t of targets) {\n              if (!r.find(a => a === t)) {\n                if (r.push(t) >= max) {\n                  break;\n                }\n              }\n            }\n          }\n          return r;\n        };\n        if (e.trigger.target == \"乱択\") {\n          if ($g.config.autoRandomSelection) {\n            targets = applyRandomSelection(e, targets);\n          }\n          else {\n            // autoRandomSelection が無効の場合ユーザーが手動で選択するのでここではなにもしない\n            targets = [];\n          }\n        }\n\n        for (let t of targets) {\n          ctx.target = t;\n          if (((e.isBuff && t.isPlayer == u.isPlayer) || (e.isDebuff && t.isPlayer != u.isPlayer)) && evaluateCondition(ctx, tri.condition)) {\n            t.applyEffect(e, u === t);\n          }\n        }\n        ctx.target = prevTarget;\n      }\n    }\n    this.invokeFixedDamage(ctx, timing);\n    this.invokeAreaDamage(ctx, timing);\n    this.invokeHeal(ctx, timing);\n    this.invokeBuffSteal(ctx, timing);\n    this.invokeBuffCancel(ctx, timing);\n    this.invokeDebuffCancel(ctx, timing);\n    this.invokeCtReduction(ctx, timing);\n  };\n\n  //#region callbacks\n  self.onSimulationBegin = function (ctx) {\n  };\n  self.onSimulationEnd = function (ctx) {\n  };\n  self.onOwnTurnBegin = function (ctx) {\n    this.trigger(ctx, \"自ターン開始時\");\n  };\n  self.onOwnTurnEnd = function (ctx) {\n    this.trigger(ctx, \"自ターン終了時\");\n\n    // 再行動などのクールタイム減\n    for (const [name, info] of Object.entries(subactionTable)) {\n      for (let act of self[name] ?? []) {\n        if (act.coolTime) {\n          --act.coolTime;\n        }\n      }\n    }\n    for (let e of this.effects) {\n      if (e.trigger?.coolTime) {\n        --e.trigger.coolTime;\n      }\n    }\n  };\n  self.onOpponentTurnBegin = function (ctx) {\n    this.trigger(ctx, \"敵ターン開始時\");\n  };\n  self.onOpponentTurnEnd = function (ctx) {\n    this.trigger(ctx, \"敵ターン終了時\");\n  };\n\n  self.onActionBegin = function (ctx) {\n    this.trigger(ctx, \"行動前\");\n  };\n  self.onActionEnd = function (ctx) {\n    this.trigger(ctx, \"行動後\");\n  };\n\n  self.onAttackBegin = function (ctx) {\n    this.trigger(ctx, \"攻撃前\");\n  };\n  self.onAttackEnd = function (ctx) {\n    this.trigger(ctx, \"攻撃後\");\n  };\n\n  self.onBattleBegin = function (ctx) {\n    this.trigger(ctx, \"戦闘前\");\n  };\n  self.onBattleEnd = function (ctx) {\n    this.trigger(ctx, \"戦闘後\");\n  };\n\n  self.onKill = function (ctx) {\n    this.trigger(ctx, \"敵撃破時\");\n  };\n\n  self.onDeath = function (ctx) {\n    this.trigger(ctx, \"死亡時\");\n  };\n\n  self.onRevive = function (ctx) {\n    this.trigger(ctx, \"復活時\");\n  };\n\n  //#endregion callbacks\n  return self;\n}\n\n","import { $g } from \"./battle_globals.js\";\nimport { scalar, parseArea, callHandler, makeSimSkill, makeSimEffect, evaluateCondition, makeActionContext, getEffectValue } from \"./battle_skill.js\";\nimport { unique, count, enumerate } from \"../utils.js\";\n\nfunction $vue() {\n  return window.$vue;\n}\n\nexport function mergeChrData(dst, src) {\n  const props = [\n    \"isMain\", \"isSupport\",\n    \"name\", \"icon\", \"class\", \"rarity\", \"symbol\", \"supportType\", \"damageType\",\n    \"range\", \"move\", \"shape\",\n  ];\n  if (src) {\n    for (const prop of props) {\n      if (prop in src)\n        dst[prop] = src[prop];\n      else\n        delete dst[prop];\n    }\n  }\n  else {\n    for (const prop of props) {\n      delete dst[prop];\n    }\n  }\n}\n\n\nexport class BaseUnit {\n  isEnemy = false;\n  isPlayer = false;\n\n  base = BaseUnit.emptyUnit;\n  sim = null;\n  editorData = [];\n  showEditor = false;\n\n  static get emptyUnit() {\n    return {\n      coord: [0, 0],\n      main: {\n        cid: \"\",\n        skills: [],\n        items: [],\n        status: [0, 0, 0, 0, 0, 0], // 基礎ステ\n      },\n      support: {\n        cid: \"\",\n        skills: [],\n        items: [],\n        status: [0, 0, 0, 0, 0, 0], // 基礎ステ\n      },\n      summon: [],\n    };\n  }\n\n  get coord() {\n    //return this.base.coord;\n    return [...(this.sim ? this.sim.coord : this.base.coord)];\n  }\n  set coord(v) {\n    if (this.sim)\n      this.sim.coord = [...v];\n    else\n      this.base.coord = [...v];\n  }\n  get prevCoord() { return this.sim.prevCoord; }\n  set prevCoord(v) { this.sim.prevCoord = [...v]; }\n  get moveDistance() { return this.sim.moveDistance; }\n  set moveDistance(v) { this.sim.moveDistance = v; }\n  get prevMoveDistance() { return this.sim.prevMoveDistance; }\n  set prevMoveDistance(v) { this.sim.prevMoveDistance = v; }\n\n  get isValid() { return this.main.cid; }\n  get main() { return this.sim ? this.sim.main : this.base.main; }\n  get support() { return this.sim ? this.sim.support : this.base.support; }\n  get hasSupport() { return this.base.support.cid; }\n  get actions() { return this.sim ? this.sim.actions : []; }\n\n  get move() {\n    if (this.sim) {\n      return this.sim.move < 0 ? this.sim.main.move : this.sim.move;\n    }\n    else {\n      return this.main.move;\n    }\n  }\n  get range() { return this.sim ? this.sim.main.range : this.main.range; }\n  get isAlive() { return this.sim ? this.sim.isAlive : false; }\n  get isActive() { return this.sim ? this.sim.isActive : false; }\n\n  get isNxN() { return Boolean(this.base.main?.shape); }\n  get shape() { return this.base.main?.shape; }\n  get occupiedCells() { return this.enumerateOccupiedCells(); }\n\n  constructor(isPlayer = true) {\n    if (isPlayer)\n      this.isPlayer = true;\n    else\n      this.isEnemy = true;\n  }\n  initialize() {\n    const emp = BaseUnit.emptyUnit;\n    Object.assign(this.base.main, emp.main);\n    Object.assign(this.base.support, emp.support);\n    this.showEditor = false;\n    this.editorData = [];\n\n    mergeChrData(this.base.main, null);\n    mergeChrData(this.base.support, null);\n  }\n  setup() {\n    const setupProperties = (self) => {\n      const getterTable = {\n        isValid: function () { return Boolean(this.cid); },\n        baseHp: function () { return this.status[0]; },\n        baseAtk: function () { return this.status[1]; },\n        baseDef: function () { return this.status[2]; },\n        baseMag: function () { return this.status[3]; },\n        baseRes: function () { return this.status[4]; },\n        baseTec: function () { return this.status[5]; },\n      };\n      for (const [key, func] of Object.entries(getterTable)) {\n        Object.defineProperty(self, key, {\n          configurable: true,\n          get: func,\n        });\n      }\n    };\n    setupProperties(this.base.main);\n    setupProperties(this.base.support);\n\n    const makeSummonUnit = (chr) => {\n      let main = Object.create(chr);\n      Object.defineProperty(main, \"skills\", {\n        get: () => [chr.talent, ...chr.skills],\n      });\n      main.cid = chr.uid;\n      main.level = this.main.level;\n      main.status = $vue().getNPCChrStatus(main, main.level);\n\n      let u = new BaseUnit(this.isPlayer);\n      u.base.main = main;\n      u.isSummon = true;\n      u.setup();\n      return u;\n    };\n    this.base.summon = [];\n    for (let skill of this.base.main.skills) {\n      if (skill.summon) {\n        for (let sum of skill.summon) {\n          if (!sum.makeUnit) {\n            sum.makeUnit = () => makeSummonUnit(sum.chr);\n          }\n        }\n        this.base.summon = this.base.summon.concat(skill.summon.map(a => a.makeUnit()));\n      }\n    }\n    //console.log(this);\n  }\n  swap(v) {\n    const swapProperty = $vue().swapProperty;\n    swapProperty(this.base, v.base, \"main\");\n    swapProperty(this.base, v.base, \"support\");\n    swapProperty(this, v, \"editorData\");\n  }\n\n  saveState() {\n    this.sim?.saveState();\n  }\n  loadState() {\n    this.sim?.loadState();\n  }\n\n  serialize() {\n    const serializeChr = function (src) {\n      return {\n        cid: src.cid,\n        skills: src.skills.map(a => a.uid),\n        items: src.items.map(a => a.uid),\n        status: src.status,\n        level: src.level,\n      };\n    };\n    let r = {\n      main: serializeChr(this.base.main),\n      support: serializeChr(this.base.support),\n      editorData: [...this.editorData],\n    };\n    return r;\n  }\n  deserialize(r) {\n    const findItemByUid = $vue().findItemByUid;\n    const deserializeChr = function (dst, src) {\n      const chr = findItemByUid(src.cid);\n      mergeChrData(dst, chr);\n      dst.cid = src.cid;\n      dst.skills = src.skills.map(findItemByUid);\n      dst.items = src.items.map(findItemByUid);\n      dst.status = [...src.status];\n      dst.level = src.level;\n    };\n    deserializeChr(this.base.main, r.main);\n    deserializeChr(this.base.support, r.support);\n    this.editorData = [...r.editorData];\n    this.setup();\n  }\n  edit(ss) {\n    const findItemByUid = $vue().findItemByUid;\n    const copyArray = $vue().copyArray;\n    // エディタ側のオブジェクトとこちら側のオブジェクトは別個体なため、uid を元にこちら側のオブジェクトに差し替える。\n\n    let main = this.base.main;\n    const mainChr = findItemByUid(ss.main.character.value?.uid);\n    mergeChrData(main, mainChr);\n    main.cid = mainChr?.uid ?? \"\";\n    main.skills = [];\n    if (mainChr) {\n      main.skills = [mainChr.talent, ...ss.mainSkills].filter(a => a).map(a => findItemByUid(a.uid));\n    }\n    main.items = [...ss.mainEnchantPassive, ...ss.mainItems].filter(a => a).map(a => findItemByUid(a.uid));\n    main.status = ss.statMainResult.slice(0, 6);\n    main.level = ss.main.level.value;\n\n    let support = this.base.support;\n    const supChr = findItemByUid(ss.support.character.value?.uid);\n    mergeChrData(support, supChr);\n    support.cid = supChr?.uid ?? \"\";\n    support.skills = [];\n    if (supChr) {\n      support.skills = [...supChr.skills].filter(a => a).map(a => findItemByUid(a.uid));\n    }\n    support.items = [...ss.supportItems, ...ss.supportAmuletSkills].filter(a => a).map(a => findItemByUid(a.uid));\n    support.status = ss.statSupportResult.slice(0, 6);\n    support.level = ss.support.level.value;\n\n    copyArray(this.editorData, ss.serialize());\n\n    this.setup();\n    //console.log(this);\n  }\n\n  *enumerateOccupiedCells() {\n    const shape = this.shape;\n    if (shape) {\n      for (let y = 0; y < shape.length; ++y) {\n        for (let x = 0; x < shape[y].length; ++x) {\n          if (shape[y][x]) {\n            yield [x, y];\n          }\n        }\n      }\n    }\n    else {\n      yield this.coord;\n    }\n  }\n}\n\n\nexport const UnitState = {\n  End: 0,\n  Ready: 1,\n  MultiAction: 2,\n  MultiMove: 3,\n}\n\nexport class SimUnit {\n\n  //#region fields\n  base = null; // BaseUnit\n  isDormant = false; // serializable 配置前 (出現ターン前) のユニットは true\n  state = UnitState.Ready; // serializable\n  move = -1; // serializable 残移動量。-1 だと main.move。\n  moveDistance = 0;\n  prevMoveDistance = 0; // serializable\n  coord = [0, 0]; // serializable\n  prevCoord = [0, 0];\n\n  main = {\n    buf: {},\n    bufCv: {}, // 変換系バフ (アタックの n% をマジックに加算 など)。内容は {\"アタック\": 100} などでそのまま加算する\n    hp: 0, // serializable\n    maxHp: 0,\n    shield: 0,\n  };\n  support = {\n    buf: {},\n    bufCv: {},\n    hp: 0, // serializable\n    maxHp: 0,\n    shield: 0,\n  };\n  ephemeralDebuf = {}; // 戦闘時に相手にかけるデバフ\n\n  summon = []; // 召喚したユニット\n  guardians = []; // ガード元。{unit: SimUnit, condition: Function} の配列\n  selfEffects = []; // SimEffect\n  areaEffects = []; // SimEffect\n  timedEffects = []; // serializable SimEffect\n  score = 0; // serializable\n\n  affectedEffects = {};\n  affectedSkills = [];\n  //#endregion fields\n\n\n  //#region props\n  get fid() { return this.base.fid; }\n  get phase() { return this.base.phase; }\n  get isAlive() { return this.main.hp > 0; }\n  get isActive() { return !this.isDormant && this.isAlive; }\n  get isPlayer() { return this.base.isPlayer; }\n  get isEnemy() { return this.base.isEnemy; }\n  get isSummon() { return this.base.isSummon; }\n  get isNxN() { return this.base.isNxN; }\n  get shape() { return this.base.shape; }\n  get occupiedCells() { return this.base.occupiedCells; }\n  get symbol() { return this.main.symbol; }\n  get mainClass() { return this.main.class; }\n  get hpRate() {\n    if (!isFinite(this.main.hp)) {\n      return 100;\n    }\n    else {\n      return Math.floor((this.main.hp + this.support.hp) / (this.main.maxHp + this.support.maxHp) * 100);\n    }\n  }\n\n  get isReady() { return this.state == UnitState.Ready || this.state == UnitState.MultiAction; }\n  get isEnded() { return this.state == UnitState.End; }\n  get isOnMultiAction() { return this.state == UnitState.MultiAction; }\n  get isOnMultiMove() { return this.state == UnitState.MultiMove; }\n\n  get activeBuffCount() {\n    return this.timedEffects.reduce((total, e) => {\n      if (e.isActiveBuff) {\n        total += 1;\n      }\n      return total;\n    }, 0);\n  }\n  get activeDebuffCount() {\n    return this.timedEffects.reduce((total, e) => {\n      if (e.isActiveDebuff) {\n        total += 1;\n      }\n      return total;\n    }, 0);\n  }\n  get actions() {\n    return this.skills.filter(a => a.isActive);\n  }\n  get passives() {\n    return this.skills.filter(a => a.isPassive || a.isTalent || a.isItem);\n  }\n  get effects() {\n    return [...this.selfEffects, ...this.areaEffects, ...this.timedEffects];\n  }\n  //#endregion props\n\n\n  //#region methods\n  constructor(unit) {\n    unit.sim = this;\n    this.base = unit;\n    this.coord = [...unit.base.coord];\n\n    if (unit.phase && unit.phase != \"0\") {\n      this.isDormant = true;\n    }\n\n    const setupProperties = (chr, base) => {\n      let getterTable = {\n        unit: () => this,\n        isValid: () => base.isValid,\n        isAlive: () => chr.hp > 0,\n        baseStatus: () => base.status,\n        baseHp: () => base.status[0],\n        baseAtk: () => base.status[1],\n        baseDef: () => base.status[2],\n        baseMag: () => base.status[3],\n        baseRes: () => base.status[4],\n        baseTec: () => base.status[5],\n        baseRange: () => base.range,\n        status: () => {\n          // バフ込みステータス\n          const props = [\"最大HP\", \"アタック\", \"ディフェンス\", \"マジック\", \"レジスト\", \"テクニック\",];\n          let r = [...base.status];\n          for (let i = 0; i < r.length; ++i) {\n            if (i == 0) {\n              r[i] = chr.hp;\n            }\n            else {\n              const prop = props[i];\n              r[i] = Math.round(r[i] * Math.max(chr.getBuffValue(prop) / 100 + 1, 0.3) + chr.getConvertedBuffValue(prop));\n            }\n          }\n          return r;\n        },\n        range: () => Math.max(base.range + chr.getBuffValue(\"射程(通常攻撃)\"), 0),\n      };\n      if (chr.isMain) {\n        getterTable.baseMove = () => base.move;\n        getterTable.move = () => Math.max(base.move + chr.getBuffValue(\"移動\"), 0);\n      }\n      if (chr.damageType == \"アタック\") {\n        getterTable.baseAttackPower = () => base.status[1];\n      }\n      else {\n        getterTable.baseAttackPower = () => base.status[3];\n      }\n\n      let funcTable = {\n        getBuffValue: (type) => chr.buf[type] ?? 0,\n        getConvertedBuffValue: (type) => chr.bufCv[type] ?? 0,\n\n        receiveDamage: function (value, fromChr, ctx) {\n          if (this.shield > 0) {\n            this.shield = Math.max(this.shield - Math.max(value, 0), 0);\n            return 0;\n          }\n          else {\n            this.hp = Math.max(this.hp - Math.max(value, 0), 0);\n            ctx.addDamage(value, fromChr, this);\n            return value;\n          }\n        },\n        receiveHeal: function (value, fromChr, ctx) {\n          this.hp = Math.min(this.hp + Math.max(value, 0), this.maxHp);\n          ctx.addHeal(value, fromChr, this);\n        },\n      };\n\n      chr.maxHp = chr.baseHp;\n      chr.hp = -1;\n      chr.shield = 0;\n      chr.buf = {};\n      chr.bufCv = {};\n      for (const [key, func] of Object.entries(getterTable)) {\n        Object.defineProperty(chr, key, {\n          configurable: true,\n          get: func,\n        });\n      }\n      for (const [key, func] of Object.entries(funcTable)) {\n        chr[key] = func;\n      }\n    };\n    {\n      const base = unit.base.main;\n      this.main = Object.create(base);\n      setupProperties(this.main, base);\n    }\n    if (unit.base.support) {\n      const base = unit.base.support;\n      this.support = Object.create(base);\n      setupProperties(this.support, base);\n    }\n\n\n    let vue = $vue();\n    if (unit) {\n      let opt = [];\n      if (!this.isNxN) {\n        // 通常攻撃追加\n        let atk = makeSimSkill($vue().findItemByUid(this.main.damageType == \"アタック\" ? \"9999999\" : \"9999998\"), this);\n        opt.push(atk);\n      }\n\n      let classPassiveMain = [];\n      let classPassiveSup = [];\n      if (unit.isEnemy) {\n        classPassiveMain = vue.getClassPassiveNpcMain(unit.main?.class);\n        classPassiveSup = vue.getClassPassiveNpcSupport(unit.support?.class);\n      }\n      else if (unit.isSummon) {\n        classPassiveMain = vue.getClassPassiveSummonMain(unit.main?.class);\n        classPassiveSup = vue.getClassPassiveSummonSupport(unit.support?.class);\n      }\n      else {\n        classPassiveMain = vue.getClassPassiveMain(unit.main?.class);\n        classPassiveSup = vue.getClassPassiveSupport(unit.support?.class);\n      }\n      this.skills = [\n        ...opt,\n        ...(unit.main.skills ?? []),\n        ...(unit.main.items ?? []),\n        ...classPassiveMain,\n        ...(unit.support?.skills ?? []),\n        ...(unit.support?.items ?? []),\n        ...classPassiveSup,\n      ].map(skill => makeSimSkill(skill, this));\n      //console.log(this.skills.map(s => s.name).join(\", \"));\n    }\n\n    //console.log(this);\n  }\n\n  serialize() {\n    let r = {};\n    r.fid = this.fid;\n    r.coord = [...this.coord];\n    r.isDormant = this.isDormant;\n    r.state = this.state;\n    r.move = this.move;\n    r.prevMoveDistance = this.prevMoveDistance;\n\n    r.skills = this.skills.map(a => {\n      return {\n        uid: a.uid,\n        data: { ...a.data },\n      };\n    });\n    r.timedEffects = this.timedEffects.map(a => {\n      return {\n        uid: a.uid,\n        fid: a.parent.owner.fid,\n        data: { ...a.data },\n      };\n    });\n\n    if (this.main) {\n      r.main = {\n        hp: this.main.hp\n      };\n    }\n    if (this.support) {\n      r.support = {\n        hp: this.support.hp\n      };\n    }\n\n    if (this.isSummon) {\n      r.summoner = this.summoner.fid;\n      r.summonUid = this.main.uid;\n    }\n    else {\n      r.score = this.score;\n    }\n    return r;\n  }\n  deserialize(r) {\n    this.coord = [...r.coord];\n    this.isDormant = r.isDormant;\n    this.state = r.state;\n    this.move = r.move;\n    this.prevMoveDistance = r.prevMoveDistance;\n\n    for (const so of r.skills) {\n      let skill = this.skills.find(a => a.uid == so.uid);\n      if (skill) {\n        Object.assign(skill.data, so.data);\n      }\n    }\n\n    this.timedEffects = [];\n    for (const so of r.timedEffects) {\n      let owner = $g.sim.findUnit(so.fid);\n      let e = null;\n      if (owner) {\n        found: for (const skill of owner.skills) {\n          for (const effect of enumerate(skill.effects, skill.randomEffects)) {\n            if (effect.uid == so.uid) {\n              e = makeSimEffect(effect);\n              break found;\n            }\n          }\n        }\n      }\n      if (!e) {\n        e = makeSimEffect($g.sim.findItem(so.uid));\n      }\n      Object.assign(e.data, so.data);\n      this.timedEffects.push(e);\n    }\n\n    if (this.main && r.main) {\n      this.main.hp = r.main.hp;\n    }\n    if (this.support && r.support) {\n      this.support.hp = r.support.hp;\n    }\n    if (r.summoner) {\n      this.setSummoner($g.sim.findUnit(r.summoner));\n    }\n    if (\"score\" in r) {\n      this.score = r.score;\n    }\n  }\n\n  setSummoner(summoner) {\n    this.summoner = summoner;\n    summoner.summon.push(this);\n    Object.defineProperty(this, \"score\", {\n      get: () => { return summoner.score },\n      set: (v) => { summoner.score = v },\n    });\n  }\n\n  // effect: BaseEffect (SimEffect ではない)\n  applyEffect(effect, stop = false) {\n    if (effect.isBuff && effect.isCancelable && this.hasBadStatus(\"強化不可\")) {\n      return null;\n    }\n    if (effect.type == \"ランダム\") {\n      if ($g.config.autoRandomBuff) {\n        let tmp = null;\n        if (effect.isBuff) {\n          tmp = effect.randomTable.find(a => a.type == \"与ダメージ\");\n        }\n        else if (effect.isDebuff) {\n          tmp = effect.randomTable.find(a => a.type == \"ダメージ耐性\");\n        }\n        if (tmp) {\n          effect = tmp;\n        }\n      }\n      else {\n        return null;\r\n      }\n    }\n\n    let r = null;\n    const append = () => {\n      r = makeSimEffect(effect, stop);\n      this.timedEffects.push(r);\n    };\n    if (effect.stack) {\n      let pos = -1, count = 0;\n      for (let i = 0; i < this.timedEffects.length; ++i) {\n        if (this.timedEffects[i].uid == effect.uid) {\n          ++count;\n          if (pos == -1)\n            pos = i;\n        }\n      }\n      if (count >= effect.stack) {\n        this.timedEffects.splice(pos, 1);\n      }\n      append();\n    }\n    else if (effect.slot) {\n      if (effect.hasSpecialSlot) {\n        // 特殊スロットの場合、同系統のバフであれば上書き。\n        // ゲーム中の挙動と同じではないが、大体近い挙動ではあるはず。\n        for (let i = 0; i < this.timedEffects.length; ++i) {\n          const e = this.timedEffects[i];\n          if (e.slot == effect.slot && e.type == effect.type) {\n            this.timedEffects.splice(i, 1);\n            break;\n          }\n        }\n        append();\n      }\n      else {\n        for (let i = 0; i < this.timedEffects.length; ++i) {\n          const e = this.timedEffects[i];\n          if (e.slot == effect.slot && e.type == effect.type) {\n            if (e.value > effect.value) {\n              return;\n            }\n            else {\n              this.timedEffects.splice(i, 1);\n              break;\n            }\n          }\n        }\n        append();\n      }\n    }\n    else {\n      let pos = this.timedEffects.findIndex(a => a.uid == effect.uid);\n      if (pos != -1) {\n        this.timedEffects.splice(pos, 1);\n      }\n      append();\n    }\n    console.log(`${effect.type} ${effect.value ?? effect.variant ?? effect.tokenName ?? ''} ${effect.duration ?? ''}T (by ${effect.parent.name}) -> ${this.main.name}`);\n    return r;\n  }\n  // ユーザーイベント版\n  applyEffect_(effect) {\n    this.applyEffect(effect);\n    this.evaluateBuffs();\n    $g.sim.addUserEvent({\n      type: \"applyEffect\",\n      target: this.fid,\n      effect: effect.uid,\n    });\n  }\n\n  removeEffectsByCondition(count, ...conditions) {\n    let r = [];\n    for (const cond of conditions) {\n      for (let i = 0; i < this.timedEffects.length && r.length < count; /**/) {\n        let e = this.timedEffects[i];\n        if (cond(e)) {\n          r.push(this.timedEffects.splice(i, 1)[0]);\n        }\n        else {\n          ++i;\n        }\n      }\n    }\n    return r;\n  }\n  removeEffect(effect) {\n    let i = this.timedEffects.findIndex(a => a === effect);\n    if (i != -1) {\n      this.timedEffects.splice(i, 1);\n    }\n    return i;\n  }\n  // ユーザーイベント版\n  removeEffect_(i) {\n    if (i != -1) {\n      this.timedEffects.splice(i, 1);\n      this.evaluateBuffs();\n      $g.sim.addUserEvent({\n        type: \"removeEffect\",\n        target: this.fid,\n        index: i,\n      });\n    }\n  }\n\n  _addAreaEffect(e) {\n    // スタックするエリアエフェクトはないので単純に uid で競合を除外できる\n    if (!this.areaEffects.find(a => a.uid == e.uid)) {\n      this.areaEffects.push(makeSimEffect(e));\n    }\n  }\n  beforeUpdateAreaEffects() {\n    this.areaEffects = [];\n    this.guardians = [];\n  }\n  updateAreaEffects() {\n    const apply = (effect, cond) => {\n      for (let u of $g.sim.activeUnits) {\n        if (u !== this && cond(u)) {\n          u._addAreaEffect(effect);\n        }\n      }\n    };\n    const applyArea = (effect, cond) => {\n      $g.sim.enumerateUnitsInArea(this.coord, parseArea(effect.area), (u) => {\n        if (u !== this && cond(u)) {\n          u._addAreaEffect(effect);\n        }\n      }, true);\n    };\n    const applyGuard = (effect) => {\n      $g.sim.enumerateUnitsInArea(this.coord, parseArea(effect.area), (u) => {\n        if (u !== this && u.isPlayer == this.isPlayer) {\n          u.guardians.push({\n            unit: this,\n            condition(ctx) {\n              return effect.variant == \"全攻撃\" || ctx.unit.main.damageType == effect.variant;\n            },\n          });\n        }\n      }, true);\n    };\n\n    for (let p of this.passives) {\n      for (let e of p?.buff ?? []) {\n        if (e.type == \"ガード\") {\n          applyGuard(e);\n        }\n        else if (e.target == \"味方全体\") {\n          apply(e, u => u.isPlayer == this.isPlayer)\n        }\n        else if (e.target == \"範囲\") {\n          applyArea(e, u => u.isPlayer == this.isPlayer);\n        }\n        else if (e.target == \"召喚先\") {\n          apply(e, u => u.summoner === this)\n        }\n        else if (e.target == \"召喚元\") {\n          apply(e, u => u.summon.find(a => a === this))\n        }\n      }\n      for (let e of p?.debuff ?? []) {\n        if (e.target == \"敵全体\") {\n          apply(e, u => u.isPlayer != this.isPlayer)\n        }\n        else if (e.target == \"範囲\") {\n          applyArea(e, u => u.isPlayer != this.isPlayer);\n        }\n      }\n    }\n  }\n  afterUpdateAreaEffects() {\n    this.evaluateBuffs();\n  }\n\n  evaluateBuffs(ctx = null) {\n    if (!ctx) {\n      ctx = makeActionContext(this);\n    }\n    let bufMain = {};\n    let bufMainCv = {};\n    let bufSup= {};\n    let bufSupCv = {};\n    let epDebuf = {};\n\n    const addValue = (obj, prop, value) => {\n      if (!(prop in obj)) {\n        obj[prop] = 0;\n      }\n      obj[prop] += value;\n    }\n\n    const processEffect = (e) => {\n      // ディフェンス無視, レジスト無視, クリティカル率耐性 は戦闘時に相手にかけるデバフとして扱う\n      const specialDebuffTypes = {\n        \"ディフェンス無視\": \"ディフェンス\",\n        \"レジスト無視\": \"レジスト\",\n        \"クリティカル率耐性\": \"クリティカル率\",\n      };\n\n      if ([\"ランダム\", \"トークン\"].includes(e.type)) {\n        // do nothing\n      }\n      else if ((e.isDebuff && e.ephemeral) || Object.keys(specialDebuffTypes).includes(e.type)) {\n        if (e.isDebuff) {\n          addValue(epDebuf, e.type, e.getValue(ctx, this));\n        }\n        else {\n          addValue(epDebuf, specialDebuffTypes[e.type], -e.getValue(ctx, this));\n        }\n      }\n      else {\n        const add = (e, dstRate, dstConverted) => {\n          if (e.isAdditive) {\n            addValue(dstConverted, e.type, e.getValue(ctx, this));\n          }\n          else {\n            addValue(dstRate, e.type, e.getValue(ctx, this));\n          }\n        };\n\n        const notForSupport = [\"テクニック\", \"クリティカル率\", \"クリティカルダメージ倍率\", \"移動\", \"範囲\", \"射程(通常攻撃)\", \"射程(スキル)\"].includes(e.type);\n        if (e.target == \"自身(メイン)\") {\n          add(e, bufMain, bufMainCv);\n        }\n        else if (e.target == \"自身(サポート)\") {\n          add(e, bufSup, bufSupCv);\n        }\n        else {\n          add(e, bufMain, bufMainCv);\n          if (!notForSupport)\n            add(e, bufSup, bufSupCv);\n        }\n      }\n    };\n\n    for (const e of this.effects) {\n      e.enabled = false;\n      if ((!e.ephemeral || (e.ephemeralOnBattle && ctx.onBattle) || (e.ephemeralOnAttack && ctx.onAttack)) && evaluateCondition(ctx, e.condition)) {\n        e.enabled = true;\n        processEffect(e);\n      }\n    }\n\n    this.affectedSkills = unique([...this.passives, ...this.effects.map(a => a.parent)], (a, b) => a.uid == b.uid);\n    this.affectedEffects = {};\n\n    // 表示用のエフェクトのリストを構築\n    for (let e of this.effects) {\n      const uid = e.uid;\n      const makeDesc = (e) => {\n        let type = e.type;\n        if (e.ephemeral) {\n          type += e.ephemeralOnAttack ? \"(攻撃時)\" : \"(戦闘時)\";\n        }\n        let value = getEffectValue(e, ctx, this);\n        value = `${value >= 0 ? '+' : ''}${value}`;\n        if (!e.add && ![\"移動\", \"射程(通常攻撃)\", \"射程(スキル)\", \"範囲\", \"トークン\", \"ガード\", \"リジェネ\"].includes(e.type)) {\n          value += \"%\";\n        }\n\n        if (e.type == \"トークン\") {\n          type = e.tokenName;\n          value = \"\";\n        }\n        else if (e.type == \"ガード\") {\n          if (e.variant != \"全攻撃\") {\n            type += `(${e.variant})`;\n          }\n          value = \"\";\n        }\n        else if (e.type == \"リジェネ\") {\n          value = \"\";\n        }\n\n        let cnt = \"\";\n        if (e?.isTimed) {\n          cnt = ` (${e.count}T)`\n        }\n        else if (e?.duration) {\n          cnt = ` (${e.duration}T)`\n        }\n        return `${type}${value}${cnt}`;\n      };\n\n      if (!(uid in this.affectedEffects)) {\n        this.affectedEffects[uid] = [];\n      }\n      if (e.type == \"ランダム\") {\n        let table = e.randomTable.map(re => {\n          return {\n            desc: makeDesc(re),\n            append: () => {\n              this.applyEffect_(re);\n            },\n          };\n        });\n        this.affectedEffects[uid].push({\n          effect: e,\n          isRandom: true,\n          randomTable: table,\n        });\n      }\n      else {\n        this.affectedEffects[uid].push({\n          effect: e,\n          isTimed: isFinite(e.count),\n          remove: () => {\n            this.removeEffect_(this.timedEffects.findIndex(a => a === e));\n          },\n          desc: makeDesc(e),\n        });\n      }\n    }\n\n    const reorder = (dst) => {\n      let r = {};\n      for (const v of $vue().effectTypes) {\n        if (v in dst) {\n          r[v] = dst[v];\n        }\n      }\n      return r;\n    };\n    this.main.buf = reorder(bufMain);\n    this.main.bufCv = reorder(bufMainCv);\n    this.support.buf = reorder(bufSup);\n    this.support.bufCv = reorder(bufSupCv);\n    this.ephemeralDebuf = reorder(epDebuf);\n    //console.log(this);\n  }\n\n\n  hasResist(type) {\n    // todo:\n    // デバフ・状態異常などに対する耐性が入る予定\n    return false;\n  }\n  hasBadStatus(type) {\n    // todo:\n    // 状態異常の影響下にあるか\n    return false;\n  }\n  getEphemeralDebuffValue(type) {\n    return this.ephemeralDebuf[type] ?? 0;\n  }\n\n  getRange(ctx) {\n    if (ctx.skill) {\n      return ctx.skill.range;\n    }\n    let chr = ctx?.onSupportAttack ? this.support : this.main;\n    return chr.range;\n  }\n  getAttackPower(ctx) {\n    let chr = ctx.onSupportAttack ? this.support : this.main;\n    let target = ctx.target;\n    let base = 0, rate = 0, add = 0;\n    if (ctx.onPhysicalDamage) {\n      base = chr.baseAtk;\n      rate = chr.getBuffValue(\"アタック\")\n      rate += target ? target.getEphemeralDebuffValue(\"アタック\") : 0;\n      add = chr.getConvertedBuffValue(\"アタック\");\n    }\n    else {\n      base = chr.baseMag;\n      rate = chr.getBuffValue(\"マジック\");\n      rate += target ? target.getEphemeralDebuffValue(\"マジック\") : 0;\n      add = chr.getConvertedBuffValue(\"マジック\");\n    }\n    return base * Math.max(rate / 100 + 1, 0.3) + add;\n  }\n  getDefensePower(ctx) {\n    let chr = ctx.onSupportDefense ? this.support : this.main;\n    let target = ctx.target;\n    let base = 0, rate = 0, add = 0;\n    if (ctx.onPhysicalDamage) {\n      base = chr.baseDef;\n      rate = chr.getBuffValue(\"ディフェンス\");\n      rate += target ? target.getEphemeralDebuffValue(\"ディフェンス\") : 0;\n      add = chr.getConvertedBuffValue(\"ディフェンス\");\n    }\n    else {\n      base = chr.baseRes;\n      rate = chr.getBuffValue(\"レジスト\");\n      rate += target ? target.getEphemeralDebuffValue(\"レジスト\") : 0;\n      add = chr.getConvertedBuffValue(\"レジスト\");\n    }\n    return base * Math.max(rate / 100 + 1, 0.3) + add;\n  }\n  getDamageDealBuff(ctx) {\n    let chr = ctx.onSupportAttack ? this.support : this.main;\n    let target = ctx.target;\n    let v = 0;\n    v += chr.getBuffValue(\"与ダメージ\");\n    v += target ? target.getEphemeralDebuffValue(\"与ダメージ\") : 0;\n    if (ctx.onPhysicalDamage) {\n      v += chr.getBuffValue(\"与ダメージ(物理)\");\n      v += target ? target.getEphemeralDebuffValue(\"与ダメージ(物理)\") : 0;\n    }\n    else {\n      v += chr.getBuffValue(\"与ダメージ(魔法)\");\n      v += target ? target.getEphemeralDebuffValue(\"与ダメージ(魔法)\") : 0;\n    }\n    if (ctx.onActiveSkill) {\n      v += chr.getBuffValue(\"与ダメージ(スキル)\");\n      v += target ? target.getEphemeralDebuffValue(\"与ダメージ(スキル)\") : 0;\n      if (ctx.onAreaSkill) {\n        v += chr.getBuffValue(\"与ダメージ(範囲スキル)\");\n        v += target ? target.getEphemeralDebuffValue(\"与ダメージ(範囲スキル)\") : 0;\n      }\n    }\n    else if (ctx.onNormalAttack) {\n      v += chr.getBuffValue(\"与ダメージ(通常攻撃)\");\n      v += target ? target.getEphemeralDebuffValue(\"与ダメージ(通常攻撃)\") : 0;\n    }\n    return Math.max(v / 100 + 1, 0.3);\n  }\n  getDamageTakenBuff(ctx) {\n    let chr = ctx.onSupportDefense ? this.support : this.main;\n    let target = ctx.target;\n    let v = 0;\n    v += chr.getBuffValue(\"ダメージ耐性\");\n    v += target ? target.getEphemeralDebuffValue(\"ダメージ耐性\") : 0;\n    if (ctx.onPhysicalDamage) {\n      v += chr.getBuffValue(\"ダメージ耐性(物理)\");\n      v += target ? target.getEphemeralDebuffValue(\"ダメージ耐性(物理)\") : 0;\n    }\n    else {\n      v += chr.getBuffValue(\"ダメージ耐性(魔法)\");\n      v += target ? target.getEphemeralDebuffValue(\"ダメージ耐性(魔法)\") : 0;\n    }\n    if (ctx.onAreaSkill) {\n      v += chr.getBuffValue(\"ダメージ耐性(範囲スキル)\");\n      v += target ? target.getEphemeralDebuffValue(\"ダメージ耐性(範囲スキル)\") : 0;\n    }\n    return 1.0 - Math.min(v / 100, 0.7);\n  }\n  getCriticalRate(ctx) {\n    if (ctx.onSupportAttack) {\n      return 0;\n    }\n    else {\n      let chr = this.main;\n      let target = ctx.target;\n      let tec = chr.baseTec * (chr.getBuffValue(\"テクニック\") / 100 + 1);\n      let buf = chr.getBuffValue(\"クリティカル率\") + (target ? target.getEphemeralDebuffValue(\"クリティカル率\") : 0);\n      return ((tec / 10) + buf) / 100;\n    }\n  }\n  getCriticalDamageRate(ctx) {\n    if (ctx?.onSupportAttack) {\n      return 1.0;\n    }\n    else {\n      let chr = this.main;\n      let target = ctx.target;\n      let buf = chr.getBuffValue(\"クリティカルダメージ倍率\") + (target ? target.getEphemeralDebuffValue(\"クリティカルダメージ倍率\") : 0);\n      return 1.3 + (buf / 100);\n    }\n  }\n\n  // NxN ボスは範囲内のマス分返す。\n  // 1 体としてカウントしたい場合 unique() を使うこと。\n  getUnitsInArea(args) {\n    return $g.sim.getUnitsInArea(this.coord, parseArea(args));\n  }\n  getAlliesInArea(args) {\n    return this.getUnitsInArea(args).filter(u => u.isPlayer == this.isPlayer && u !== this);\n  }\n  getEnemiesInArea(args) {\n    return this.getUnitsInArea(args).filter(u => u.isPlayer != this.isPlayer);\n  }\n  getTokenCount(tokenName) {\n    let r = 0;\n    for (let e of this.timedEffects) {\n      if (e.type == \"トークン\" && e.tokenName == tokenName) {\n        ++r;\n      }\n    }\n    return r;\n  }\n  isOnEffect(skillIds) {\n    for (let e of this.effects) {\n      if (skillIds.includes(e.parent.uid)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  _invokeSkillAction(ctx, act) {\n    let succeeded = false;\n    let skills = ctx.skill ? [ctx.skill, ...this.passives] : this.passives;\n    for (let skill of skills) {\n      if (skill[act](ctx)) {\n        succeeded = true;\n      }\n    }\n    return succeeded;\n  }\n\n  wait() {\n    if (this.state == UnitState.Ready) {\n      $g.sim.fireSkill(this, null, { onIdle: true });\n    }\n  }\n  invokeShield(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeShield\");\n  }\n  invokeRevive(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeRevive\");\n  }\n  invokeHeal(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeHeal\");\n  }\n  invokeFixedDamage(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeFixedDamage\");\n  }\n  invokeAreaDamage(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeAreaDamage\");\n  }\n\n  invokeSupportAttack(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeSupportAttack\");\n  }\n  invokeDoubleAttack(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeDoubleAttack\");\n  }\n  invokeMultiAction(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeMultiAction\");\n  }\n  invokeMultiMove(ctx) {\n    return this._invokeSkillAction(ctx, \"invokeMultiMove\");\n  }\n\n  invokeRegeneration(ctx) {\n    for (let effect of this.effects) {\n      // 極めて微妙だが battle_skill.js の invokeHeal() からコピペ\n      if (effect.type == \"リジェネ\" && evaluateCondition(ctx, effect.condition)) {\n        let from = this.main;\n        let rate = scalar(effect.rate);\n        let buf = (from.getBuffValue(\"治療効果\") / 100 + 1);\n        const apply = (chr, value) => {\n          let base = value * rate;\n          // 治療効果 と 被治療効果 は乗算の関係\n          let boost = buf * (chr.getBuffValue(\"被治療効果\") / 100 + 1);\n          chr.receiveHeal(base * boost, from, ctx);\n        };\n        const table = {\n          \"最大HP\": (t) => {\n            apply(t.main, t.main.maxHp);\n            apply(t.support, t.support.maxHp);\n          },\n          \"マジック\": (t) => {\n            let caster = effect.parent.owner.main;\n            let value = caster.status[3];\n            apply(t.main, value);\n            apply(t.support, value);\n          },\n        };\n        table[effect.base](this);\n        console.log(`!! リジェネ ${this.main.name} (${effect.parent.name}) !!`);\n      }\n    }\n  }\n\n\n  // バフ・デバフの効果時間減\n  reduceEffectDuration() {\n    for (let e of this.timedEffects) {\n      if (!e.isStopped && e.count > 0) {\n        --e.count;\n      }\n    }\n    this.eraseExpiredEffects();\n  }\n  resumeEffectDuration() {\n    for (let e of this.timedEffects) {\n      if (e.isStopped) {\n        e.isStopped = false;\n      }\n    }\n  }\n  eraseExpiredEffects() {\n    this.timedEffects = this.timedEffects.filter(a => !a.isExpired);\n  }\n\n  // スキルの CT 減\n  reduceSkillCT(n, condFunc = null) {\n    for (let a of this.actions) {\n      if (a.coolTime && (!condFunc || condFunc(a))) {\n        a.coolTime = Math.max(a.coolTime - n, 0);\n      }\n    }\n  }\n  //#endregion methods\n\n  _dbgLog(message) {\n    //console.log(`${this.main.name}: ${message}`);\n  }\n\n  _callHandler(funcName, ctx) {\n    this._dbgLog(funcName);\n    if (!ctx) {\n      ctx = makeActionContext(this);\n    }\n    let skills = ctx?.skill ? [ctx.skill, ...this.passives] : this.passives;\n    callHandler(funcName, ctx, ...skills);\n    $vue().addBalloons(ctx);\n  }\n\n\n  //#region callbacks\n\n  onSimulationBegin(ctx) {\n    this._callHandler(\"onSimulationBegin\", ctx);\n    for (let passive of this.passives) {\n      for (let effect of passive.buff ?? []) {\n        if (!effect.trigger) {\n          this.selfEffects.push(makeSimEffect(effect));\n        }\n      }\n      for (let effect of passive.debuff ?? []) {\n        // 戦闘時デバフはエフェクトは自身に付与され、戦闘時に相手に効果を発揮 (ややこしい…)\n        if (!effect.trigger && effect.ephemeral) {\n          this.selfEffects.push(makeSimEffect(effect));\n        }\n      }\n    }\n  }\n\n  // onSimulationBegin() の直後に呼ばれる。ステータスの初期化を行う。\n  // onSimulationBegin() の中だと自キャラ以外への影響があるバフが対応できないケースがあるため、別パスにしている。\n  setup() {\n    const setupHp = (chr) => {\n      chr.maxHp = Math.round(chr.baseHp * (chr.getBuffValue(\"最大HP\") / 100 + 1));\n      if (chr.hp < 0) {\n        // deserialize 後は残 HP が設定されていてここには来ない\n        chr.hp = chr.maxHp;\n      }\n    };\n    setupHp(this.main);\n    setupHp(this.support);\n  }\n\n  onSimulationEnd(ctx) {\n    this._callHandler(\"onSimulationEnd\", ctx);\n    this.base.sim = null;\n  }\n\n  // 自ターン開始前/後\n  onOwnTurnBegin(ctx) {\n    this._callHandler(\"onOwnTurnBegin\", ctx);\n  }\n  onOwnTurnEnd(ctx) {\n    this._callHandler(\"onOwnTurnEnd\", ctx);\n    this.resumeEffectDuration();\n    this.state = UnitState.Ready;\n  }\n\n  // 相手ターン開始前/後\n  onOpponentTurnBegin(ctx) {\n    this._callHandler(\"onOpponentTurnBegin\", ctx);\n  }\n  onOpponentTurnEnd(ctx) {\n    this._callHandler(\"onOpponentTurnEnd\", ctx);\n  }\n\n  // 移動後、行動確定時、戦闘開始前もしくは非戦闘を含むスキル使用前に呼ばれる\n  // 攻撃の場合は直後に onAttackBegin() が、\n  // 戦闘に入る場合は直後に onBattleBegin() が呼ばれる\n  onActionBegin(ctx) {\n    this._callHandler(\"onActionBegin\", ctx);\n  }\n  onActionEnd(ctx) {\n    this._callHandler(\"onActionEnd\", ctx);\n    if (!this.isOnMultiMove && (!this.isNxN || ctx.onWait)) { // NxN ボスは待機時のみカウントを進める\n      this.reduceSkillCT(1);\n      this.reduceEffectDuration();\n    }\n  }\n\n  // 移動後、行動確定時、戦闘非戦闘を問わず攻撃前に呼ばれる\n  // 戦闘に入る場合は直後に onBattleBegin() が呼ばれる\n  onAttackBegin(ctx) {\n    this._callHandler(\"onAttackBegin\", ctx);\n  }\n  onAttackEnd(ctx) {\n    this._callHandler(\"onAttackEnd\", ctx);\n  }\n\n  // 戦闘前 (非範囲攻撃、ゲーム中戦闘画面に入るもの) に呼ばれる\n  // 攻撃される側も呼ばれる\n  onBattleBegin(ctx) {\n    this._callHandler(\"onBattleBegin\", ctx);\n    this.invokeShield(ctx);\n  }\n  onBattleEnd(ctx) {\n    this.main.shield = 0;\n    this.support.shield = 0;\n    this.invokeRegeneration(ctx);\n    this._callHandler(\"onBattleEnd\", ctx);\n  }\n\n  // 手段を問わず敵撃破時に呼ばれる\n  onKill(ctx) {\n    this._callHandler(\"onKill\", ctx);\n  }\n\n  // 手段を問わず撃破されたとき呼ばれる\n  onDeath(ctx) {\n    this._callHandler(\"onDeath\", ctx);\n    this.invokeRevive(ctx);\n    if (this.isAlive) {\n      // ラストスタンドなどで復活した場合 onRevive()\n      this.onRevive(ctx);\n    }\n    if (!this.isAlive) {\n      this.selfEffects = [];\n      this.areaEffects = [];\n      this.timedEffects = [];\n      if (this.summoner) {\n        let pos = this.summoner.summon.findIndex(a => a == this);\n        if (pos != -1) {\n          this.summoner.summon.splice(pos, 1);\n        }\n      }\n    }\n  }\n\n  // ラストスタンドなどで復活した時呼ばれる\n  onRevive(ctx) {\n    this._callHandler(\"onRevive\", ctx);\n  }\n  //#endregion callbacks\n\n\n  //#region impl\n  static copyProps(dst, src) {\n    if (!src)\n      return;\n    for (const k in src) {\n      if (Object.hasOwn(src, k)) {\n        const v = src[k];\n        if (Array.isArray(v)) {\n          dst[k] = [...v];\n        }\n        else {\n          dst[k] = v;\n        }\n      }\n    }\n  }\n  //#endregion impl\n}\n","export * from \"./battle_unit.js\";\nexport * from \"./battle_skill.js\";\nimport { genDiamondCoords, callHandler, makeActionContext, evaluateCondition, isInside } from \"./battle_skill.js\";\nimport { BaseUnit, SimUnit, UnitState } from \"./battle_unit.js\";\nimport { $g } from \"./battle_globals.js\";\n\nexport const replayVersion = \"1.0.0\";\n\nexport const Phase = {\n  Player: 0,\n  Enemy: 1,\n}\n\nexport class SimContext {\n\n  //#region fields (serializable)\n  config = {\n    autoBuffCancel: true,\n    autoRandomBuff: true,\n    autoRandomSelection: true,\n    selfDamage: false,\n  };\n  turn = 1;\n  phase = Phase.Player;\n  unitIdSeed = 0; // 追加ユニットの ID 生成用の数\n  units = [];\n\n  userEvents = [];\n  desc = { // プレイバック用データ\n    score: 0,\n    unit: \"\", // fid\n    skill: \"\", // uid\n    target: \"\", // fid or [fid]\n    cell: [-1, -1],\n    comment: \"\",\n  };\n  states = [];\n  //#endregion fields (serializable)\n\n  //#region fields (non-serializable)\n  battleId = \"\";\n  maxTurn = 0;\n  divX = 0;\n  divY = 0;\n  terrain = [];\n  unitTable = {};\n  statePos_ = -1;\n  //#endregion fields (non-serializable)\n\n\n  //#region props\n  get activeUnits() { return this.units.filter(u => !u.isDormant); }\n  get activePlayerUnits() { return this.units.filter(u => !u.isDormant && u.isPlayer); }\n  get activeEnemyUnits() { return this.units.filter(u => !u.isDormant && !u.isPlayer); }\n  get isPlayerTurn() { return this.phase == Phase.Player; }\n  get isEnemyTurn() { return this.phase == Phase.Enemy; }\n  get phaseId() { return `${this.turn}${this.isPlayerTurn ? 'P' : 'E'}`; }\n\n  get score() {\n    return Object.values(this.unitTable).reduce((total, u) => total + (u.isPlayer && !u.isSummon ? u.score : 0), 0);\n  }\n  get statePos() { return this.statePos_; }\n  set statePos(v) {\n    const state = this.states.at(v);\n    this.loadState(state);\n    this.statePos_ = v;\n    if (state.desc?.skillArgs?.coord) {\n      $vue().blinkCell(state.desc.skillArgs.coord);\n    }\n    $vue().resetUnitPositionAll(true);\n  }\n  //#endregion props\n\n\n  //#region construct, serialize, playback\n  constructor(battleData, baseUnits) {\n    $g.sim = this;\n    this.battleId = battleData.uid;\n    this.maxTurn = battleData.turn;\n\n    [this.divX, this.divY] = battleData.mapSize;\n    this.terrain = battleData.terrain;\n\n    this.units = baseUnits.filter(a => a.isValid).map(a => new SimUnit(a));\n    for (let u of this.units) {\n      this.unitTable[u.fid] = u;\n    }\n  }\n\n  serialize() {\n    return this.states;\n  }\n  deserialize(r) {\n    this.states = r;\n    this.statePos = -1;\n    for (let s of this.states) {\n      s.desc = this.makeDesc(s.desc);\n    }\n  }\n\n  makeDesc(desc) {\n    let r = { ...desc };\n    if (!r.unitIcon) {\n      r.unitIcon = $g.sim.findUnit(r.unit)?.main?.icon;\n      r.skillIcon = $g.sim.findItem(r.skill)?.icon;\n      r.targetIcon = $g.sim.findUnitByCoord(r.skillArgs?.coord)?.main?.icon;\n    }\n    r.isAction = Boolean(r.unitIcon);\n    return r;\n  }\n  saveState() {\n    let r = {\n      config: { ...this.config },\n      turn: this.turn,\n      phase: this.phase,\n      unitIdSeed: this.unitIdSeed,\n      // 配置されたユニットは死んだものも記録\n      units: Object.values(this.unitTable).map(a => a.serialize()),\n      userEvents: this.userEvents,\n      desc: this.makeDesc(this.desc),\n    };\n    return r;\n  }\n  loadState(r) {\n    if (!r) {\n      return;\n    }\n\n    if (\"config\" in r) {\n      this.config = { ...r.config };\n    }\n    this.turn = r.turn;\n    this.phase = r.phase;\n    this.unitIdSeed = r.unitIdSeed;\n\n    const constructUnit = (json) => {\n      let base = this.findBaseUnit(json.fid);\n      if (!base && json.summoner) {\n        // 召喚ユニットは召喚元ユニットのスキルから BaseUnit を作成する必要がある\n        let summoner = this.findBaseUnit(json.summoner);\n        for (let skill of summoner.main.skills) {\n          let so = (skill.summon ?? []).find(o => o.uid == json.summonUid);\n          if (so) {\n            base = so.makeUnit();\n            base.fid = json.fid;\n            break;\n          }\n        }\n      }\n      let r = new SimUnit(base);\n      this.unitTable[r.fid] = r;\n      return r;\n    };\n    let units = r.units.map(a => constructUnit(a));\n    for (let i = 0; i < r.units.length; ++i) {\n      let u = units[i];\n      u.deserialize(r.units[i]);\n    }\n    this.units = units.filter(a => a.isAlive); // 死んだユニットも入っているので除外しておく\n    this.onSimulationBegin();\n  }\n  // unit, skill, target: 説明用\n  pushState(unit = null, skill = null, skillArgs = null) {\n    // リプレイ再生中の場合現在位置以降のレコードを切り捨てる\n    if (this.statePos_ != -1) {\n      this.states.splice(this.statePos_ + 1, this.states.length);\n      this.statePos_ = -1;\n    }\n\n    this.desc.score = Math.round(this.score);\n    this.desc.unit = unit ? unit.fid : \"\";\n    this.desc.skill = skill ? skill.uid : \"\";\n    if (skillArgs) {\n      this.desc.skillArgs = { ...skillArgs };\n    }\n    else {\n      delete this.desc.skillArgs;\n    }\n    this.states.push(this.saveState());\n\n    this.desc.comment = \"\";\n    this.userEvents = [];\n  }\n  // opt: {\n  //   interval: Number,\n  //   next: Function,\n  //}\n  playback(state, opt) {\n    const callNext = () => {\n      if (opt?.next)\n        opt.next();\n    };\n    const handlers = {\n      eraseUnit: (e) => {\n        this.eraseUnit(this.findUnit(e.target));\n      },\n      applyEffect: (e) => {\n        let u = this.findUnit(e.target);\n        if (u) {\n          u.applyEffect_(this.findItem(e.effect));\n        }\n      },\n      removeEffect: (e) => {\n        let u = this.findUnit(e.target);\n        if (u) {\n          u.removeEffect_(e.index);\n        }\n      },\n    };\n    for (let evt of state.userEvents ?? []) {\n      handlers[evt.type](evt);\n    }\n    if (\"config\" in state && !this.config.override) {\n      Object.assign(this.config, state.config);\n    }\n\n    const desc = state.desc;\n    if (desc.unit) {\n      let unit = this.findUnit(desc.unit);\n      let uop = state.units.find(u => u.fid == desc.unit);\n      let skill = null;\n      if (!unit || !uop) {\n        $g.log(\"ユニットが見つからないため中断しました。\");\n        throw new Error(\"unit not found\");\n      }\n      if (desc.skill) {\n        skill = unit.skills.find(a => a.uid == desc.skill);\n        if (!skill) {\n          $g.log(\"スキルが見つからないため中断しました。\");\n          throw new Error(\"skill not found\");\n        }\n      }\n\n      let pf = this.makePathFinder(unit, true);\n      let dist = pf.getMoveDistance(uop.coord);\n      let prev = unit.coord;\n      unit.moveDistance = dist < 0 ? unit.move : dist;\n      unit.coord = uop.coord;\n      $vue().setUnitPath(unit.base, pf.getPath(uop.coord, prev), {\n        interval: opt?.interval,\n        onfinish: () => {\n          this.fireSkill(unit, skill, desc.skillArgs);\n          callNext();\n        },\n      });\n    }\n    else {\n      if (state.turn != this.turn || state.phase != this.phase) {\n        this.passTurn();\n      }\n      callNext();\n    }\n  }\n\n  addUserEvent(e) {\n    this.userEvents.push(e);\n    //console.log(e);\n  }\n\n  addUnit(unit) {\n    ++this.unitIdSeed;\n    unit.base.fid = `X${this.unitIdSeed}`;\n    this.unitTable[unit.fid] = unit;\n    this.units.push(unit);\n\n    unit.onSimulationBegin();\n    unit.setup();\n    this.updateAreaEffects();\n    $vue().resetUnitPosition(unit.base, true);\n  }\n  notifyDead(unit) {\n    this.units = this.units.filter(a => a.isAlive);\n    // 死んだユニットの情報が必要なケースもあるため、unitTable からは消さない\n  }\n  //#endregion construct, serialize, playback\n\n\n  //#region unit operation\n  findItem(uid) {\n    return window.$vue.findItemByUid(uid);\n  }\n  findUnit(fid) {\n    return this.unitTable[fid];\n  }\n  findBaseUnit(fid) {\n    let r = window.$vue.playerUnits.find(a => a.fid == fid) ?? window.$vue.enemyUnits.find(a => a.fid == fid);\n    return r;\n  }\n  findUnitByCoord(coord) {\n    if (!coord)\n      return null;\n    for (const u of this.activeUnits) {\n      if (u.isNxN) {\n        // NxN ボス\n        if (u.shape[coord[1]][coord[0]]) {\n          return u;\n        }\n      }\n      else if (u.coord[0] == coord[0] && u.coord[1] == coord[1]) {\n        return u;\n      }\n    }\n    return null;\n  }\n  enumerateUnitsInArea(center, params, callback, once = false) {\n    params = { center: center, ...params };\n    for (const u of this.activeUnits) {\n      // NxN ボスは該当マス分コールバックを呼ぶ\n      // ただし once == true の場合 1 回で切り上げる\n      for (let pos of u.occupiedCells) {\n        if (isInside(pos, params)) {\n          callback(u, pos);\n          if (once) {\n            break;\n          }\n        }\n      }\n    }\n  }\n  getUnitsInArea(center, params) {\n    // ソート用距離関数\n    // 同距離の場合、0 時方向から時計回り順に並べる\n    const dist = (base, target) => {\n      if (!base || !target) {\n        return 0;\n      }\n      let dx = target[0] - base[0];\n      let dy = target[1] - base[1];\n      let md = Math.abs(dx) + Math.abs(dy); // マンハッタン距離\n      if (md == 0) {\n        return 0;\n      }\n      else {\n        let ed = Math.sqrt((dx * dx) + (dy * dy)); // ユークリッド距離\n        let r = Math.atan2(dx / ed, -dy / ed); // 0 時方向からのラジアン角\n        let cd = (r / (Math.PI * 2) + 1) % 1; // 時計回り距離 (0～1)\n        return md + cd;\n      }\n    };\n    let r = [];\n    this.enumerateUnitsInArea(center, params, (u, pos) => {\n      r.push({ unit: u, distance: dist(center, pos) });\n    });\n    r.sort((a, b) => a.distance - b.distance);\n    return r.map(a => a.unit);\n  }\n\n  makePathFinder(unit = null, build = false) {\n    let pf = new PathFinder(this.divX, this.divY, this.terrain);\n    if (unit) {\n      pf.setObstacles(this.activeUnits.filter(u => u.isPlayer != unit.isPlayer));\n      pf.setOccupied(this.activeUnits.filter(u => u.isPlayer == unit.isPlayer && u.fid != unit.fid));\n      for (let pos of unit.occupiedCells) {\n        pf.setStart(pos);\n      }\n      if (build) {\n        let sim = unit.sim ?? unit;\n        pf.buildPath(sim.base.move, sim.isOnMultiMove ? 0 : unit.range);\n      }\n    }\n    return pf;\n  }\n\n  isOwnTurn(unit) {\n    return unit && ((unit.isPlayer && this.isPlayerTurn) || (unit.isEnemy && this.isEnemyTurn));\n  }\n\n  getTerrain(pos) {\n    const [x, y] = pos;\n    if (x >= 0 && y >= 0 && x < this.divX && y < this.divY) {\n      return this.terrain[y][x];\n    }\n    return null;\n  }\n  isTerrainPassable(pos) {\n    // 現状通行可能か不可能かの 2 値。ちゃんとサポートするならもっと複雑になる\n    return this.getTerrain(pos) == 0;\n  }\n  canMoveInto(pos) {\n    return this.isTerrainPassable(pos) && !this.findUnitByCoord(pos);\n  }\n\n\n  placeUnit(unit, pos) {\n    // 指定座標が占有されていた場合はずらす\n    // 上から時計回りの菱形の順でトライしていく\n    const maxRadius = 5;\n    for (let r = 0; r < maxRadius; ++r) {\n      for (let s of genDiamondCoords(r)) {\n        let c = [pos[0] + s[0], pos[1] + s[1]];\n        if (this.canMoveInto(c)) {\n          unit.coord = c;\n          unit.isDormant = false;\n          $vue().resetUnitPosition(unit.base, true);\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // ユーザー操作により呼ばれる\n  eraseUnit(unit) {\n    let u = unit?.sim ?? unit;\n    if (u) {\n      let ctx = makeActionContext(u);\n      u.main.hp = 0;\n      u.onDeath(ctx);\n      if (!u.isAlive) { // 復活持ちはここでも生きている\n        this.notifyDead(u);\n      }\n      this.updateAreaEffects();\n\n      this.addUserEvent({\n        type: \"eraseUnit\",\n        target: u.fid\n      });\n    }\n  }\n  //#endregion unit operation\n\n\n  //#region attack\n  // attacker: chr\n  doAttack(ctx, attacker, targetStack, skill) {\n    let actx = ctx.makeChild();\n    actx.attacker = attacker;\n    actx.skill = skill;\n\n    if (!targetStack.find(a => a.isValid)) {\n      return actx;\n    }\n\n    let aunit = attacker.unit;\n    if (attacker.isMain)\n      actx.onMainAttack = true;\n    else\n      actx.onSupportAttack = true;\n    if (attacker.damageType == \"アタック\")\n      actx.onPhysicalDamage = true;\n    else\n      actx.onMagicDamage = true;\n    if (actx.onBattle && attacker.baseRange > 1 && actx.range <= 1)\n      actx.onRangedPenarty = true;\n\n    if (!attacker.isAlive) {\n      // 既に死んでたら何もしない (サポートが死んでる場合ここに来る)\n      return actx;\n    }\n    if (actx.range > aunit.getRange(actx) && !actx.forceJoinSupport) {\n      // 射程外でサポート同時攻撃もない場合何もしない\n      return actx;\n    }\n\n    let attackCount = 10;\n    let atk = aunit.getAttackPower(actx);\n    let dmgDealBuff = aunit.getDamageDealBuff(actx);\n    let critDmgRate = aunit.getCriticalDamageRate(actx);\n    let damageRate = skill ? skill.getDamageRate(actx) : 1.0;\n    let rangedPenarty = actx.onRangedPenarty ? 0.6 : 1.0;\n\n    const calcDamage = (t, breakOnKill) => {\n      actx.defender = t;\n      let dunit = t.unit;\n      // 防御側コンテキスト\n      let dctx = makeActionContext(dunit, aunit, null);\n      dctx.inheritAttackerParams(actx);\n      dctx.attacker = actx.attacker;\n      dctx.defender = actx.defender;\n      if (t.isSupport)\n        dctx.onSupportDefense = true;\n      else\n        dctx.onMainDefense = true;\n\n      let def = dunit.getDefensePower(dctx);\n      let baseDmg = Math.max(atk - def, 1);\n      let dmgTakenBuff = dunit.getDamageTakenBuff(dctx);\n      let damage = baseDmg * damageRate * dmgDealBuff * dmgTakenBuff * critDmgRate * rangedPenarty;\n\n      let totalDamage = 0;\n      while (attackCount) {\n        totalDamage += t.receiveDamage(damage, attacker, ctx);\n        --attackCount;\n        if (breakOnKill && !t.isAlive) {\n          break;\n        }\n      }\n    };\n\n    while (attackCount) {\n      let t = targetStack.at(-1);\n      if (!t.isAlive && targetStack.length > 1) {\n        targetStack.pop();\n        continue;\n      }\n      calcDamage(t, targetStack.length > 1);\n    }\n\n    return actx;\n  }\n\n  getBattleResult(unit, skill, target, ctx) {\n    // 攻撃側コンテキスト\n    ctx.onAttack = ctx.onBattle = true;\n    let actx = ctx.makeChild();\n\n    // 防御側コンテキスト\n    let dctx = makeActionContext(target, unit, null);\n    dctx.inheritBattleParams(actx);\n    dctx.inheritDamage(ctx);\n\n    callHandler(\"onAttackBegin\", actx, unit);\n    callHandler(\"onBattleBegin\", actx, unit);\n    callHandler(\"onAttackBegin\", dctx, target);\n    callHandler(\"onBattleBegin\", dctx, target);\n    unit.evaluateBuffs(actx);\n    target.evaluateBuffs(dctx);\n\n    let attacker = [unit.main, unit.support].filter(c => c.isAlive);\n    let defender = [target.main, target.support].filter(c => c.isAlive);\n    if (attacker.length && defender.length) {\n      // 戦闘前に相手が固定ダメージで死んだ場合などはここに来ないまま戦闘終了となる\n      ctx.attackInProgress = true;\n      if (unit.invokeSupportAttack(actx)) {\n        actx.forceJoinSupport = true;\n      }\n\n      // 攻撃側の攻撃\n      this.doAttack(actx, unit.support, defender, null);\n      this.doAttack(actx, unit.main, defender, skill);\n      if (defender.at(-1).isAlive && unit.invokeDoubleAttack(actx)) {\n        // 対象が生き残っていて2回攻撃の条件を満たしていたらもう一度攻撃\n        this.doAttack(actx, unit.main, defender, skill);\n      }\n\n      // 防御側の反撃\n      this.doAttack(dctx, target.support, attacker, null);\n      this.doAttack(dctx, target.main, attacker, null);\n      if (attacker.at(-1).isAlive && target.invokeDoubleAttack(dctx)) {\n        // 対象が生き残っていて2回攻撃の条件を満たしていたらもう一度攻撃\n        this.doAttack(dctx, target.main, attacker, null);\n      }\n      ctx.attackInProgress = false;\n    }\n\n    if (ctx.damageDealt.get(unit.fid).total > 0) {\n      actx.onCriticalHit = ctx.onCriticalHit = true; // とりあえずダメージを与えたらクリティカル扱い\n      actx.onDamage = ctx.onDamage = true;\n    }\n    if (ctx.damageDealt.get(target.fid).total > 0) {\n      dctx.onCriticalHit = true;\n      dctx.onDamage = true;\n    }\n\n    if (unit.isAlive) {\n      callHandler(\"onAttackEnd\", actx, unit);\n      callHandler(\"onBattleEnd\", actx, unit);\n    }\n    if (target.isAlive) {\n      callHandler(\"onAttackEnd\", dctx, target);\n      callHandler(\"onBattleEnd\", dctx, target);\n    }\n    unit.eraseExpiredEffects();\n    target.eraseExpiredEffects();\n  }\n\n  getAreaAttackResult(unit, skill, targets, ctx) {\n    ctx.onAttack = !skill.isSupportSkill;\n    if (ctx.onAttack) {\n      callHandler(\"onAttackBegin\", ctx, unit);\n    }\n\n    ctx.attackInProgress = true;\n    let attacker = skill.isSupportSkill ? unit.support : unit.main;\n    for (let target of targets ?? []) {\n      // 攻撃側コンテキスト\n      // target に依存するバフがあるので、ループの内側である必要がある\n      let actx = ctx.makeChild();\n      actx.target = target;\n      unit.evaluateBuffs(actx);\n\n      // 防御側コンテキスト (継承不要)\n      let dctx = makeActionContext(target, unit, null);\n      target.evaluateBuffs(dctx);\n\n      this.doAttack(actx, attacker, [target.main], skill);\n      this.doAttack(actx, attacker, [target.support], skill);\n    }\n    ctx.attackInProgress = false;\n\n    if (ctx.damageDealt.get(unit.fid).total > 0) {\n      ctx.onCriticalHit = true; // とりあえずダメージを与えたらクリティカル扱い\n      ctx.onDamage = true;\n    }\n\n    if (ctx.onAttack) {\n      callHandler(\"onAttackEnd\", ctx, unit);\n    }\n    unit.eraseExpiredEffects();\n  }\n\n  fireSkill(unit, skill, skillArgs) {\n    if (!$g.sim) { // シミュレーションが中断された場合対策\n      return;\n    }\n    this.updateAreaEffects();\n    unit = unit.sim ?? unit;\n    let target = null;\n    let targets = [];\n    let targetCell = null;\n    if (skill) {\n      if (skillArgs.coord) {\n        targetCell = [...skillArgs.coord];\n      }\n      if (skill.isSelfTarget) {\n        target = unit;\n      }\n      else if (skill.isTargetCell) {\n      }\n      else if (skill.isSingleTarget) {\n        target = this.findUnitByCoord(skillArgs.coord);\n      }\n      else if (skill.isAreaTarget) {\n        if (skill.isGlobalTarget || skill.isRadialAreaTarget || skill.isDirectionalAreaTarget) {\n          targets = this.getUnitsInArea(unit.coord, { ...skillArgs, ...skill.makeAreaParams() });\n        }\n        else {\n          targets = this.getUnitsInArea(skillArgs.coord, { ...skillArgs, ...skill.makeAreaParams() });\n        }\n      }\n    }\n    if (target) {\n      targets = [target];\n    }\n\n    let doActionBegin = (skill?.isSupportSkill || unit.isOnMultiMove) ? false : true;\n    // ややこしいが、行動終了時は再移動でも発動\n    let doActionEnd = (skill?.isSupportSkill) ? false : true;\n    let doAttack = false;\n    let doBattle = false;\n    let multiAction = false;\n    let multiMove = false;\n    let onGuard = false;\n    let doSupportAttackSkill = false;\n\n    // 戦闘・非戦闘の区分け\n    if (skill && skill.isMainSkill && skill.isAttackSkill) {\n      doAttack = true;\n      doBattle = skill.isNormalAttack || skill.isSingleTarget;\n      if (doBattle) {\n        // ガード処理\n        let ctx = makeActionContext(unit);\n        for (let guard of target.guardians) {\n          if (guard.condition(ctx)) {\n            $g.log(`!! ガード ${guard.unit.main.name} -> ${target.main.name} !!`);\n            target = guard.unit;\n            onGuard = true;\n            break;\n          }\n        }\n      }\n    }\n    else if (skill && skill.isSupportSkill && skill.isAttackSkill) {\n      // サポートのスキルは 戦闘時/攻撃時 効果を発動しない\n      doSupportAttackSkill = true;\n    }\n\n    // 条件変数を設定\n    // ここでは通常攻撃の場合も必ず skill が設定されている\n    // (getBattleResult で反撃側やサポートの場合 ctx.skill は null になる)\n    let ctx = makeActionContext(unit, target, skill);\n    ctx.targetCell = targetCell ? [...targetCell] : null;\n    ctx.targets = targets;\n    if (doActionBegin) { ctx.onAction = true; }\n    if (doAttack) { ctx.onAttack = true; }\n    if (doBattle) { ctx.onBattle = true; }\n    if (onGuard) { ctx.isTargetGuardian = true; }\n    if (!skill) { // 待機\n      ctx.onWait = true;\n      if (skillArgs?.onIdle) { ctx.onIdle = true; } // 明示的に「待機」指示せずターン終了した場合\n    }\n    if (targetCell) {\n      // NxN ボス対策として target.coord ではなく targetCell との距離を取る\n      ctx.range = Math.abs(unit.coord[0] - targetCell[0]) + Math.abs(unit.coord[1] - targetCell[1]);\n    }\n\n    if (doActionBegin) {\n      callHandler(\"onActionBegin\", ctx, unit);\n    }\n\n    // 待機の場合 skill は null\n    if (skill) {\n      skill.startCoolTime();\n      // 攻撃処理\n      if (doBattle) {\n        this.getBattleResult(unit, skill, target, ctx);\n      }\n      else if (doAttack || doSupportAttackSkill) {\n        // 敵にダメージ味方にバフ系のスキルの場合 targets には両陣営のユニットが入っている\n        let enemies = targets.filter(a => a.isPlayer != unit.isPlayer);\n        this.getAreaAttackResult(unit, skill, enemies, ctx);\n      }\n      skill.onFire(ctx);\n      this.updateAreaEffects();\n    }\n    else {\n      ctx.onWait = true;\n    }\n\n    const handleDeath = (t) => {\n      let r = false;\n      if (!t.isAlive) {\n        r = true;\n        let dctx = makeActionContext(t);\n        callHandler(\"onDeath\", dctx, t);\n        if (!t.isAlive) {\n          this.notifyDead(t);\n        }\n      }\n      return r;\n    };\n    let deadUnits = [];\n    const checkKill = () => {\n      for (let fid of Object.keys(ctx.damageTaken)) {\n        let t = this.findUnit(fid);\n        if (!deadUnits.find(u => u.fid == fid) && handleDeath(t)) {\n          if (t.isPlayer != unit.isPlayer) {\n            ctx.onKill = true;\n          }\n          if (!t.isAlive) {\n            deadUnits.push(t);\n          }\n        }\n      }\n    };\n\n    checkKill();\n    if (unit.isAlive) {\n      if (doActionEnd) {\n        callHandler(\"onActionEnd\", ctx, unit);\n        checkKill();\n      }\n      if (ctx.onKill) {\n        callHandler(\"onKill\", ctx, unit);\n      }\n    }\n    if (target?.isAlive) {\n      if (!unit.isAlive) {\n        // 攻撃側が反撃で倒れた場合、防御側の onKill を呼ぶ\n        let dctx = makeActionContext(target, unit);\n        callHandler(\"onKill\", dctx, target);\n      }\n    }\n\n    if (!unit.isAlive) {\n      unit.state = UnitState.End;\n    }\n    else if (doActionEnd) {\n      if (!unit.isNxN || ctx.onWait) {\n        if (unit.invokeMultiAction(ctx)) {\n          multiAction = true;\n        }\n        if (unit.invokeMultiMove(ctx)) {\n          multiMove = true;\n          unit.move = ctx.multiMoveValue;\n        }\n\n        if (multiAction) {\n          unit.state = UnitState.MultiAction;\n        }\n        else if (multiMove) {\n          unit.state = UnitState.MultiMove;\n        }\n        else {\n          unit.state = UnitState.End;\n        }\n      }\n    }\n    else {\n      if (skill?.isSupportSkill) {\n        // サポートアクティブ使用時は残移動量を設定\n        unit.move = unit.main.move - ctx.move;\n      }\n    }\n\n    // 移動量リセット\n    if (unit.state == UnitState.MultiAction || unit.state == UnitState.End) {\n      unit.move = -1;\n    }\n    unit.prevMoveDistance = doActionEnd ? 0 : unit.moveDistance;\n    unit.moveDistance = 0;\n\n    this.updateAreaEffects();\n    this.pushState(unit, skill, skillArgs);\n    console.log(ctx);\n\n    this.deadUnits = [];\n    $vue().addBalloons(ctx);\n    if (skillArgs?.coord) {\n      $vue().blinkCell(skillArgs.coord);\n    }\n    return ctx;\n  }\n  //#endregion attack\n\n\n  //#region simulation & callbacks\n  updateAreaEffects() {\n    for (let u of this.activeUnits) {\n      u.beforeUpdateAreaEffects();\n    }\n    for (let u of this.activeUnits) {\n      u.updateAreaEffects();\n    }\n    for (let u of this.activeUnits) {\n      u.afterUpdateAreaEffects();\n    }\n  }\n\n  start(replay) {\n    this.onSimulationBegin();\n    if (!replay) {\n      this.onPlayerTurnBegin();\n    }\n  }\n  finish() {\n    this.onSimulationEnd();\n  }\n  passTurn() {\n    if (this.isPlayerTurn) {\n      this.phase = Phase.Enemy;\n      this.onPlayerTurnEnd();\n      this.onEnemyTurnBegin();\n    }\n    else if (this.turn < this.maxTurn) {\n      ++this.turn;\n      this.phase = Phase.Player;\n      this.onEnemyTurnEnd();\n      this.onPlayerTurnBegin();\n    }\n    else {\n      console.log(\"End of Battle\");\n    }\n  }\n\n  onSimulationBegin() {\n    for (let u of this.units) {\n      u.onSimulationBegin();\n    }\n    this.updateAreaEffects();\n    for (let u of this.units) {\n      u.setup();\n    }\n    this.updateAreaEffects();\n  }\n  onSimulationEnd() {\n    for (let u of Object.values(this.unitTable)) {\n      u.onSimulationEnd();\n    }\n    if ($g.sim == this) {\n      $g.sim = null;\n    }\n  }\n\n  onPlayerTurnBegin() {\n    for (let u of this.activePlayerUnits) {\n      u.onOwnTurnBegin();\n    }\n    for (let u of this.activeEnemyUnits) {\n      u.onOpponentTurnBegin();\n    }\n    this.updateAreaEffects();\n    this.pushState();\n  }\n  onPlayerTurnEnd() {\n    for (let u of this.activePlayerUnits) {\n      u.wait();\n    }\n    for (let u of this.activePlayerUnits) {\n      u.onOwnTurnEnd();\n    }\n    for (let u of this.activeEnemyUnits) {\n      u.onOpponentTurnEnd();\n    }\n  }\n\n  onEnemyTurnBegin() {\n    // 増援配置\n    const pid = this.phaseId;\n    for (let u of this.units) {\n      if (u.isDormant && u.phase == pid) {\n        this.placeUnit(u, u.coord);\n      }\n    }\n    this.updateAreaEffects();\n\n    for (let u of this.activeEnemyUnits) {\n      u.onOwnTurnBegin();\n    }\n    for (let u of this.activePlayerUnits) {\n      u.onOpponentTurnBegin();\n    }\n    this.updateAreaEffects();\n    this.pushState();\n  }\n  onEnemyTurnEnd() {\n    for (let u of this.activeEnemyUnits) {\n      u.wait();\n    }\n    for (let u of this.activeEnemyUnits) {\n      u.onOwnTurnEnd();\n    }\n    for (let u of this.activePlayerUnits) {\n      u.onOpponentTurnEnd();\n    }\n  }\n  //#endregion simulation & callbacks\n}\n\n\nexport class PathFinder\n{\n  cells = [];\n  xdiv = 0;\n  ydiv = 0;\n\n  constructor(xdiv, ydiv, terrain = null) {\n    this.xdiv = xdiv;\n    this.ydiv = ydiv;\n    this.cells = Array(xdiv * ydiv);\n    for (let y = 0; y < this.ydiv; ++y) {\n      for (let x = 0; x < this.xdiv; ++x) {\n        this.cells[this.ydiv * y + x] = {\n          moveDistance: -1,\n          shootDistance: -1,\n          isObstacle: false,\n          isOccupied: false,\n        };\n      }\n    }\n\n    if (this.xdiv == terrain?.length) {\n      for (let y = 0; y < this.ydiv; ++y) {\n        for (let x = 0; x < this.xdiv; ++x) {\n          if (terrain[y][x] != 0) {\n            this.cells[this.ydiv * y + x].isObstacle = true;\n          }\n        }\n      }\n    }\n  }\n  getCell(x, y) {\n    if ((x >= 0 && x < this.xdiv) && (y >= 0 && y < this.ydiv)) {\n      return this.cells[this.ydiv * y + x];\n    }\n    return null;\n  }\n\n  getDistance(pos) {\n    return this.getCell(pos[0], pos[1])?.shootDistance ?? -1;\n  }\n  getMoveDistance(pos) {\n    return this.getCell(pos[0], pos[1])?.moveDistance ?? -1;\n  }\n  isPassable(pos) {\n    const c = this.getCell(pos[0], pos[1]);\n    return c && !c.isObstacle;\n  }\n  isInMoveRange(pos) {\n    return pos && (this.getCell(pos[0], pos[1])?.moveDistance ?? -1) >= 0;\n  }\n  isInFireRange(pos) {\n    return pos && (this.getCell(pos[0], pos[1])?.shootDistance ?? -1) >= 0;\n  }\n  setShootRangeShape(shape, center) {\n    for (let y = 0; y < this.ydiv; ++y) {\n      for (let x = 0; x < this.xdiv; ++x) {\n        if (shape[y][x]) {\n          let d = 0;\n          if (center) {\n            d = Math.abs(x - center[0]) + Math.abs(y - center[1]);\n          }\n          this.getCell(x, y).shootDistance = d;\n        }\n      }\n    }\n  }\n  setStart(pos) {\n    let c = this.getCell(pos[0], pos[1]);\n    if (c) {\n      c.moveDistance = 0;\n    }\n  }\n  setStartUnit(unit) {\n    for (let pos of unit.occupiedCells) {\n      this.setStart(pos);\n    }\n  }\n  setObstacles(units) {\n    for (const u of units) {\n      for (let pos of u.occupiedCells) {\n        let c = this.getCell(pos[0], pos[1]);\n        if (c) {\n          c.isObstacle = true;\n        }\n      }\n    }\n  }\n  setOccupied(units) {\n    for (const u of units) {\n      for (let pos of u.occupiedCells) {\n        let c = this.getCell(pos[0], pos[1]);\n        if (c) {\n          c.isOccupied = true;\n        }\n      }\n    }\n  }\n  buildPath(move, rangeParams = null) {\n    for (let m = 0; m < move; ++m) {\n      for (let y = 0; y < this.ydiv; ++y) {\n        for (let x = 0; x < this.xdiv; ++x) {\n          this._chartCell(x, y, m);\n        }\n      }\n    }\n    if (rangeParams) {\n      for (let y = 0; y < this.ydiv; ++y) {\n        for (let x = 0; x < this.xdiv; ++x) {\n          this._shootCell(x, y, rangeParams);\n        }\n      }\n    }\n  }\n  getPath(pos, from) {\n    let d = this.getMoveDistance(pos);\n    if (d < 0)\n      return [from, pos];\n    let path = [pos];\n    let cur = [...pos];\n    while (d > 0) {\n      let len = path.length;\n      for (let n of [[0, 1], [1, 0], [0, -1], [-1, 0]]) {\n        let next = [cur[0] + n[0], cur[1] + n[1]];\n        let nd = this.getMoveDistance(next);\n        if (nd != -1 && nd < d) {\n          path.push(next);\n          cur = next;\n          d = nd;\n          break;\n        }\n      }\n      if (path.length == len) {\n        return null;\n      }\n    }\n    return path.toReversed();\n  }\n\n  _chartCell(x, y, distance) {\n    let c = this.getCell(x, y);\n    if (c.isObstacle || c.moveDistance > -1) {\n      return;\n    }\n    const neighbors = [\n      this.getCell(x + 1, y + 0),\n      this.getCell(x + 0, y + 1),\n      this.getCell(x - 1, y + 0),\n      this.getCell(x + 0, y - 1),\n    ];\n    for (let n of neighbors) {\n      if (n && n.moveDistance == distance) {\n        c.shootDistance = c.moveDistance = distance + 1;\n      }\n    }\n  }\n  _shootCell(x, y, rangeParams) {\n    let c = this.getCell(x, y);\n    if (c.moveDistance < 0 || c.isOccupied) {\n      return;\n    }\n    let params = {\n      center: [x, y],\n      ...rangeParams,\n    };\n    const apply = (pos) => {\n      if (isInside(pos, params)) {\n        let tc = this.getCell(pos[0], pos[1]);\n        if (tc) {\n          let d = Math.max(c.moveDistance, 0) + (Math.abs(pos[0] - x) + Math.abs(pos[1] - y));\n          tc.shootDistance = tc.shootDistance == -1 ? d : Math.min(tc.shootDistance, d);\n        }\n      }\n    };\n    if (rangeParams.shapeData) {\n      apply([x, y]);\n    }\n    else if (rangeParams.size) {\n      let size = rangeParams.size;\n      for (let ry = -size; ry <= size; ++ry) {\n        for (let rx = -size; rx <= size; ++rx) {\n          apply([x + rx, y + ry]);\n        }\n      }\n    }\n    else {\n      apply([x, y]);\n    }\n  }\n  toString() {\n    const cellToChr = (c) => {\n      if (c.isObstacle) {\n        return 'x';\n      }\n      else if (c.moveDistance == -1) {\n        return ' ';\n      }\n      else {\n        return `${c.moveDistance}`\n      }\n    };\n    let r = \"\";\n    for (let y = 0; y < this.ydiv; ++y) {\n      r += this.cells.slice(this.ydiv * y, this.ydiv * (y + 1)).map(c => cellToChr(c)).join(', ') + '\\n';\n    }\n    return r;\n  }\n}\n\nfunction $vue() {\n  return window.$vue;\n}\n","<template>\n  <div class=\"root\" id=\"root\" ref=\"root\" @mousemove=\"onMouseMove\">\n    <div class=\"header\" :class=\"{ 'hidden': !showHeader }\">\n      <Navigation />\n    </div>\n    <div class=\"about\" style=\"margin-top: 60px;\">\n    </div>\n\n    <div v-show=\"!simulation\" class=\"content\" style=\"margin-bottom: 20px;\">\n      <div class=\"main-panel\" style=\"padding: 10px;\">\n        <h2 style=\"margin-bottom: 5px\">バトルシミュレータ</h2>\n        <div>\n          ユニットを自由に編成・配置し、ダメージなどの戦闘結果を計算するシミュレータです。<br />\n          主にギルドクエストEXの攻略とキャラ評価に使うことを目的としており、これまでのEXでそれなりに信頼できる結果が得られることが実証されています。<br />\n          <br />\n        </div>\n        <div>\n          使い方は、クエスト欄でマップを選択、ユニット欄の「編集」でユニットを編成し、「シミュレーション開始」で戦闘を開始。あとはだいたい実際のゲームと同じように動作します。<br />\n          戦闘結果は<b-link @click=\"toggleReplayList(true)\">リプレイ</b-link>として保存することができます。リプレイの途中からの再開も可能です。まずはリプレイを見てみると機能を把握しやすいでしょう：<b-link @click=\"importReplayFromUrl('64ebe357f471ab7fc66aadab9e1c1be7', (r) => playbackReplay(r, { immediate: true }))\">リプレイを再生</b-link><br />\n          <div>\n            <br />\n            <b-link @click=\"detailedDescription=!detailedDescription\">シミュレーション時の動作の詳細</b-link> (長いのでクリックで展開)<br />\n            <div v-show=\"detailedDescription\">\n              できるだけ実際のゲームの動作に合わせていますが、再現できていない仕様や検証しやすいように意図的に変えている部分もあります。以下目立った違いやTips：\n              <ul>\n                <li>ランダム要素を完全に排しており、ダメージのばらつきがありません</li>\n                <li>クリティカルヒットする可能性がある攻撃 (=メインの攻撃) は100%クリティカル扱いになります</li>\n                <li>本来確率で発動する効果も100%発動します (ただし、自傷効果はこれでは支障が出るため、オプションで切れるようになっています)</li>\n                <li>バフ解除やランダムバフも一定の規則に則った動作になります (シミュレーション開始後の「自動ランダムバフ」などのオプションを参照)</li>\n                <li>HP割合に応じて増減する効果 (<b-link :ref=\"po\">道教式チアリーディング</b-link>の与ダメージバフなど) は現状常に最大効果を適用します (正確な動作が分かっていないため暫定処置)</li>\n                <li>編成で☆の増減ができますが、タレント/サポートアクティブは現状☆を考慮せず最大レベル時の効果を適用します (対応が大変なため暫定処置)</li>\n                <li>状態異常と無効化系は大部分が未実装です (現状 強化不可 はガーディアンをなにもせず待機させて模倣する必要があります)</li>\n                <li>ユニットを選択するとその時点で影響下にあるバフ・デバフが表示されます。攻撃対象を選んでいる状態であれば戦闘時発動効果も考慮されます</li>\n                <li>デベロッパーツールを出しておくとコンソールに詳細なログが出ます (Chrome や Edge なら Ctrl + Shift + I)</li>\n              </ul>\n            </div>\n          </div>\n          <br />\n        </div>\n        <div>\n          アイテムやスキルのデータは入力漏れやミスが残っている可能性があります。\n        </div>\n      </div>\n    </div>\n\n    <div class=\"content\" :style=\"style\" style=\"margin-bottom: 20px;\">\n      <div class=\"main-panel\">\n        <div v-if=\"!simulation\" class=\"menu-widgets flex\" style=\"margin: 0px 10px 15px 10px;\">\n          <div class=\"widget\">\n            <span>クエスト：</span>\n            <b-dropdown :text=\"battleData ? battleData.name : ''\" id=\"battle_selector\" style=\"min-width: 20em;\">\n              <b-dropdown-item v-for=\"(battle, i) in battleList\" class=\"d-flex flex-column\" :key=\"i\" @click=\"selectBattle(battle.uid, true); updateURL();\">\n                {{ battle.name }}\n              </b-dropdown-item>\n            </b-dropdown>\n          </div>\n        </div>\n\n        <b-tabs v-if=\"!simulation\" v-model=\"phaseTabIndex\">\n          <b-tab v-for=\"phase in phaseList\" :title=\"phase.desc\" @click=\"selectPhase(phase.id, true); updateURL();\" :key=\"phase.id\"></b-tab>\n        </b-tabs>\n\n        <div style=\"padding: 10px; background-color: white; display: flex;\">\n          <div ref=\"cells\" class=\"grid-container\"\n               @mousedown.middle.prevent.stop=\"\"\n               @click.middle.prevent.stop=\"onCellRClick()\"\n               @click.right.prevent.stop=\"onCellRClick()\">\n            <div v-for=\"(cell, i) in cells\" :key=\"`c${i}`\" :class=\"getCellClass(cell)\" :style=\"cell.style\" :id=\"cell.id\"\n                 @click.stop=\"onClickCell(cell)\"\n                 @mouseover=\"onEnterCell(cell)\" @mouseleave=\"onLeaveCell(cell)\"\n                 :draggable=\"isCellDraggable(cell)\" @dragstart=\"onDragCell(cell)\" @drop=\"onDropCell(cell)\" @dragover.prevent=\"\">\n            </div>\n            <template v-for=\"unit in allActiveUnits\">\n              <template v-if=\"unit.isNxN\">\n                <div v-for=\"pos in unit.occupiedCells\" :key=\"`${unit.fid}[${pos[0]}][${pos[1]}]`\" :style=\"`transform: translate(${pos[0] * 50}px, ${pos[1] * 50}px)`\" class=\"unit-cell\">\n                  <b-img :src=\"getImageURL(unit.main.class)\" class=\"center\" :class=\"getUnitIconClass(unit)\" width=\"40\" height=\"40\" />\n                </div>\n              </template>\n              <template v-else>\n                <div :key=\"unit.fid\" :id=\"`unit-${unit.fid}`\" class=\"unit-cell\">\n                  <template v-if=\"unit.isEnemy && unit.hasSupport\">\n                    <b-img :src=\"getImageURL(unit.main.class)\" class=\"center\" :class=\"getUnitIconClass(unit)\"\n                           width=\"30\" height=\"30\" style=\"left: 17px; top: 17px; z-index: 1;\" />\n                    <b-img :src=\"getImageURL(unit.support.class)\" class=\"center\" :class=\"getUnitIconClass(unit)\"\n                           width=\"30\" height=\"30\" style=\"left: 33px; top: 33px; z-index: 0;\" />\n                  </template>\n                  <template v-else-if=\"unit.isEnemy\">\n                    <b-img :src=\"getImageURL(unit.main.class)\" class=\"center\" :class=\"getUnitIconClass(unit)\" width=\"40\" height=\"40\" />\n                  </template>\n                  <template v-else-if=\"unit.isPlayer\">\n                    <div>\n                      <b-img :src=\"getImageURL(unit.main.icon)\" class=\"center\" :class=\"getUnitIconClass(unit)\" width=\"50\" height=\"50\" />\n                    </div>\n                  </template>\n                </div>\n              </template>\n            </template>\n            <div v-if=\"loading\" class=\"menu-panel\" style=\"padding: 10px; position: absolute;\">\n              <b-spinner small label=\"Spinning\"></b-spinner>\n            </div>\n          </div>\n\n          <div ref=\"enemyList\" class=\"enemy-list\">\n            <div v-if=\"simulation\" class=\"character\">\n              <div class=\"info\">\n                <h5 style=\"font-size: 18pt;\">スコア</h5>\n                <div class=\"grid\" style=\"grid-template-columns: auto auto 1fr;\">\n                  <template v-for=\"unit in allPlayerUnits\">\n                    <div :key=\"`portrait-${unit.fid}`\" style=\"grid-column: 1;\">\n                      <b-img-lazy :src=\"getImageURL(unit.main.icon)\" :title=\"unit.main.name\" :class=\"`${!unit.isAlive ? 'grayscale' : ''}`\" width=\"50\" height=\"50\" rounded />\n                    </div>\n                    <div :key=\"`score-${unit.fid}`\" style=\"grid-column: 2; margin-left: 10px; text-align: right;\" v-html=\"scoreToHtml(unit.sim.score)\" />\n                    <div :key=\"`pad-${unit.fid}`\" style=\"grid-column: 3;\" />\n                  </template>\n\n                  <div style=\"grid-column: 1; font-size: 18pt;\">合計</div>\n                  <div style=\"grid-column: 2; margin-left: 10px; text-align: right;\" v-html=\"scoreToHtml(simulation.score)\" />\n                  <div style=\"grid-column: 3;\" />\n                </div>\n              </div>\n            </div>\n\n            <template v-for=\"unit in activeEnemyUnits\">\n              <div class=\"character\" :class=\"{ 'highlighted': isUnitHighlighted(unit) }\" :id=\"'unit_'+unit.fid\" :key=\"unit.fid\">\n                <div class=\"flex\">\n                  <div class=\"portrait\">\n                    <b-img-lazy :src=\"getImageURL(unit.main.icon)\" :title=\"unit.main.name\" width=\"80\" height=\"80\" rounded />\n                  </div>\n                  <div class=\"detail\" v-show=\"displayType >= 1\">\n                    <div class=\"info\">\n                      <h5 v-html=\"chrNameToHtml(unit.main.name + (unit.isSummon ? ' (召喚ユニット)' : ' (メイン)'))\"></h5>\n                      <div class=\"status\">\n                        <b-img-lazy :src=\"getImageURL(unit.main.class)\" :title=\"'クラス:'+unit.main.class\" height=\"25\" />\n                        <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(unit.main.damageType)\" :title=\"'攻撃タイプ:'+unit.main.damageType\" width=\"20\" height=\"20\" /></div>\n                        <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{unit.main.range}}</span></div>\n                        <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('移動')\" title=\"移動\" width=\"18\" height=\"18\" /><span>{{unit.main.move}}</span></div>\n                        <div class=\"param-box\"><span class=\"param-name\">レベル:</span><span class=\"param-value\">{{unit.main.level}}</span></div>\n                      </div>\n                      <div v-if=\"unit.main.status\" class=\"status2\" v-html=\"statusToHtml(unit.main.status)\" />\n                    </div>\n                    <div class=\"skills\">\n                      <template v-for=\"skill in unit.main.skills\">\n                        <div v-if=\"!skill.isNormalAttack\" class=\"skill\" :class=\"getSkillClass(skill)\" :key=\"skill.uid\">\n                          <div class=\"flex\">\n                            <div class=\"icon\">\n                              <b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" />\n                            </div>\n                            <div class=\"desc\" v-show=\"displayType >= 2\">\n                              <div class=\"flex\">\n                                <h6>{{ skill.name }}</h6>\n                                <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                              </div>\n                              <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                            </div>\n                          </div>\n                        </div>\n                      </template>\n                    </div>\n                  </div>\n                </div>\n\n                <div v-if=\"unit.hasSupport && displayType >= 2\" class=\"flex\">\n                  <div class=\"portrait\">\n                    <b-img-lazy :src=\"getImageURL(unit.support.icon)\" :title=\"unit.support.name\" width=\"80\" height=\"80\" rounded />\n                  </div>\n                  <div class=\"detail\" v-show=\"displayType >= 1\">\n                    <div class=\"info\">\n                      <h5 v-html=\"chrNameToHtml(unit.support.name+' (サポート)')\"></h5>\n                      <div class=\"status\">\n                        <b-img-lazy :src=\"getImageURL(unit.support.class)\" :title=\"'クラス:'+unit.support.class\" height=\"25\" />\n                        <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(unit.support.damageType)\" :title=\"'攻撃タイプ:'+unit.support.damageType\" width=\"20\" height=\"20\" /></div>\n                        <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{unit.support.range}}</span></div>\n                        <div class=\"param-box\"><span class=\"param-name\">レベル:</span><span class=\"param-value\">{{unit.support.level}}</span></div>\n                      </div>\n                      <div v-if=\"unit.support.status\" class=\"status2\" v-html=\"statusToHtml(unit.support.status)\" />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </template>\n\n          </div>\n\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"simulation\" :class=\"`content sim-commands ${simulation.isPlayerTurn ? 'player-turn' : 'enemy-turn'}` \" @click.stop=\"\">\n      <div class=\"unit-panel\">\n        <div v-if=\"selectedUnit && actionsToSelect.length\" style=\"margin-bottom: 20px; display: flex; flex-wrap: wrap;\">\n          <div v-if=\"selectedUnit.sim.isOnMultiMove\" style=\"font-size: 16pt; color: gray; width: 100%;\">再移動中</div>\n          <div v-if=\"selectedUnit.sim.isOnMultiAction\" style=\"font-size: 16pt; color: gray; width: 100%;\">再行動中</div>\n          <b-button size=\"sm\" style=\"width: 45px; height: 45px; margin-right: 5px;\" @click=\"onClickWait();\">\n            待機\n          </b-button>\n          <div v-for=\"skill of actionsToSelect\" :key=\"skill.uid\" :class=\"getActionClass(skill, selectedUnit)\" :title=\"descToTitle(skill)\" @click=\"onClickAction(skill)\">\n            <b-img :src=\"getImageURL(skill.icon)\" style=\"width: 100%; height: 100%;\" />\n            <div v-if=\"!skill.available\" class=\"text-overlay\">CT{{isFinite(skill.coolTime) ? skill.coolTime : \"∞\"}}</div>\n          </div>\n        </div>\n        <div>\n          <h5>\n            ターン{{ simulation.turn }} : {{ simulation.isPlayerTurn ? 'プレイヤー': 'エネミー' }}フェイズ\n          </h5>\n          <b-button v-if=\"!simulation.onPlayback\" size=\"sm\" @click=\"endTurn()\" style=\"width: 10em; margin-right: 1em;\"\n                    :disabled=\"simulation.turn == simulation.maxTurn && simulation.isEnemyTurn\">\n            ターン終了\n          </b-button>\n          <b-button v-if=\"simulation.onPlayback && !simulation.isPlaying\" size=\"sm\" @click=\"beginPlayback()\" style=\"width: 10em; margin-right: 1em;\">\n            再生開始\n          </b-button>\n        </div>\n        <div style=\"margin-top: 20px\">\n          <b-button v-if=\"selectedUnit\" size=\"sm\" style=\"margin-right: 0.25em;\" @click=\"eraseSelectedUnit()\">\n            このユニットを撃破\n          </b-button>\n          <b-button size=\"sm\" @click=\"endSimulation()\" style=\"width: 14em;\">\n            シミュレーション終了\n          </b-button>\n        </div>\n      </div>\n\n      <div class=\"unit-panel\">\n        <div v-if=\"showConfirm\">\n          <b-button size=\"sm\" @click=\"confirmAction()\" style=\"width: 14em;\">\n            行動を確定\n          </b-button>\n        </div>\n        <div v-else-if=\"selectedUnit\">\n          <b-table small borderless hover :items=\"simOptions\" :fields=\"simOptionFields\" :tbody-tr-attr=\"(r)=>{ return {id: `simopt-${r.name}`}; }\">\n            <template #cell(value)=\"r\">\n              <div class=\"flex\">\n                <div style=\"margin-left: auto\">\n                  <b-form-checkbox v-model=\"r.item.value\"></b-form-checkbox>\n                </div>\n              </div>\n            </template>\n            <template #cell(label)=\"r\">\n              <div>{{r.item.label}}</div>\n              <b-popover :target=\"`simopt-${r.item.name}`\" triggers=\"hover focus\">\n                <div v-html=\"r.item.desc\" />\n              </b-popover>\n            </template>\n          </b-table>\n        </div>\n        <div v-else>\n          シミュレーションモードでは実際のゲームのようにユニットを操作できます。<br />\n          しかし、検証のため、あるいは再現が難しいため、動作が異なる点もあります。以下大雑把な説明。<br />\n          <ul>\n            <li><b>右クリックでキャンセル</b>の動作になります。</li>\n            <li><b>敵フェイズでは敵ユニットを手動で操作する必要があります</b>。正確な再現が困難なため、自動では行動しません。</li>\n            <li>移動可能範囲は表示されますが、それを無視して無限に移動できます。また、無限に再行動できます。</li>\n            <li>CT 中のアクティブスキルも使用可能です。</li>\n            <li>やり直したい場合、<b><b-link @mouseenter=\"highlight('history', true)\" @mouseleave=\"highlight('history', false)\">履歴</b-link>から過去に遡ることができます</b>。</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"grid\" style=\"position: fixed; right: 5px; bottom: 5px; grid-template-columns: auto auto;\">\n      <div v-show=\"showReplayList\" class=\"unit-panel\" style=\"min-width: 1200px; max-width: 1600px; max-height: 500px; margin-right: 5px; grid-column: 1; \">\n        <div class=\"flex\" style=\"margin-bottom: 5px;\">\n          <h5>公開されているリプレイ</h5>\n          <div style=\"margin-left: auto;\">\n            <b-button size=\"sm\" @click=\"showReplayList=false;\" style=\"margin-left: 1em; padding: 0px 5px;\">✖</b-button>\n          </div>\n        </div>\n        <template v-if=\"fetching\">\n          <div style=\"padding: 10px;\">\n            <b-spinner small label=\"Spinning\"></b-spinner>\n          </div>\n        </template>\n        <template v-else>\n          <b-table small outlined sticky-header :items=\"replayList\" :fields=\"replayFields\" style=\"min-width: 90%; margin-bottom: 5px;\">\n            <template #cell(battle)=\"row\">\n              <span style=\"white-space: nowrap;\">{{getItemName(row.item.battle)}}</span>\n            </template>\n            <template #cell(score)=\"row\">\n              <span style=\"white-space: nowrap;\">{{row.item.score}}</span>\n            </template>\n            <template #cell(units)=\"row\">\n              <span style=\"white-space: nowrap;\">\n                <b-img v-for=\"(uid, i) of row.item.units ?? []\" :key=\"i\" :src=\"getImageURL(uid)\" width=\"35px\" height=\"35px\" />\n              </span>\n            </template>\n            <template #cell(actions)=\"row\">\n              <div class=\"flex\" style=\"white-space: nowrap;\">\n                <b-button size=\"sm\" @click=\"downloadReplay(row.item); showReplayList=false;\">\n                  ロード\n                </b-button>\n                <b-button size=\"sm\" :id=\"`replay-${row.item.hash}`\" @click=\"copyReplayUrl(row.item)\" style=\"margin-left: 0.25em\">\n                  URLコピー\n                </b-button>\n                <b-button v-if=\"row.item.delkey\" size=\"sm\" @click=\"deleteReplay(row.item)\" style=\"margin-left: 0.25em\">\n                  削除\n                </b-button>\n              </div>\n            </template>\n          </b-table>\n        </template>\n        <div v-if=\"simulation ?? replay\" style=\"margin-bottom: 0.75em;\">\n          <div class=\"flex\" style=\"margin-bottom: 0.25em;\">\n            <b-button size=\"sm\" @click=\"uploadReplay()\">\n              現在のリプレイを公開\n            </b-button>\n            <b-form-input size=\"sm\" v-model=\"userName\" placeholder=\"投稿者名\" style=\"width: 8em; margin-left: 0.5em;\"></b-form-input>\n            <b-form-input size=\"sm\" v-model=\"commentReplay\" placeholder=\"コメント\" style=\"flex: 1; margin-left: 0.5em;\"></b-form-input>\n          </div>\n          <div class=\"flex\">\n            <span style=\"margin-left: 0.5em; color: rgb(160,160,160);\">(投稿者本人は投稿したデータを削除可能)</span>\n          </div>\n        </div>\n        <div class=\"flex\">\n          <b-button v-if=\"simulation ?? replay\" size=\"sm\" @click=\"exportReplayAsFile()\" style=\"min-width: 12em;\">\n            ファイルにエクスポート\n          </b-button>\n          <b-button size=\"sm\" @click=\"importReplayFromFile()\" style=\"min-width: 12em; margin-left: 0.5em;\">\n            ファイルからインポート\n          </b-button>\n        </div>\n      </div>\n\n      <div id=\"history\" class=\"unit-panel\" style=\"grid-column: 2; width: 200px; margin-top: auto;\" @click.stop=\"\" tabindex=\"0\" @keydown.up.stop=\"onKeyReplay($event)\" @keydown.down.stop=\"onKeyReplay($event)\">\n        <div style=\"max-height: 350px; overflow-y: auto; overscroll-behavior: none;\">\n          <template v-if=\"simulation ?? replay\">\n            <template v-for=\"(r, i) of (simulation ?? replay).states.toReversed()\">\n              <div class=\"flex\" :style=\"`margin: 2px 0px; ${ simulation?.statePos==-i-1 ? 'background: rgb(200,200,210)': '' }`\" :key=\"i\" :id=\"`sim-state-${-i-1}`\">\n                <b-button size=\"sm\" style=\"padding: 0px; width: 30px; height: 30px; margin-right: 0.25em;\" @click=\"setReplayState(-i-1);\">▶</b-button>\n                <template v-if=\"r.desc.isAction\">\n                  <b-img :src=\"getImageURL(r.desc.unitIcon)\" width=\"35px\" height=\"35px\" />\n                  <b-img :src=\"getImageURL(r.desc.skillIcon)\" width=\"35px\" height=\"35px\" />\n                  <b-img :src=\"getImageURL(r.desc.targetIcon)\" width=\"35px\" height=\"35px\" />\n                </template>\n                <template v-else>\n                  <span>{{`T${r.turn} ${r.phase==0?'(プレイヤー)':'(エネミー)'}`}} 開始</span>\n                </template>\n              </div>\n            </template>\n          </template>\n        </div>\n        <b-button size=\"sm\" style=\"min-width: 13em; margin-top: 0.5em;\" @click=\"toggleReplayList()\">\n          リプレイ\n        </b-button>\n      </div>\n    </div>\n\n    <div class=\"content\" :style=\"style\">\n      <div class=\"main-panel\" style=\"margin-top: 10px; margin-bottom: 10px;\">\n        <div class=\"flex\" v-if=\"!simulation\" style=\"margin: 0px 10px 20px 10px;\">\n          <a name=\"loadout\" href=\"#loadout\"></a>\n          <b-dropdown text=\"編成をセーブ\" style=\"min-width: 10em;\">\n            <b-dropdown-item v-for=\"(name, i) in slotNames\" :key=i @click=\"saveLoadout(i)\">スロット{{i}}: {{name}}</b-dropdown-item>\n          </b-dropdown>\n          <b-dropdown text=\"編成をロード\" style=\"min-width: 10em; margin-left: 1em; \">\n            <b-dropdown-item v-for=\"(name, i) in slotNames\" :key=i @click=\"loadLoadout(i)\">スロット{{i}}: {{name}}</b-dropdown-item>\n            <b-dropdown-item @click=\"loadLoadout(99)\">バックアップ</b-dropdown-item>\n          </b-dropdown>\n\n          <b-button @click=\"clearLoadout()\" style=\"min-width: 10em; margin-left: 1em; \">\n            編成をクリア\n          </b-button>\n\n          <b-button style=\"width: 14em; margin-left: 4em;\" @click=\"beginSimulation()\">\n            シミュレーション開始\n          </b-button>\n          <b-button v-if=\"replay\" id=\"btn-follow-replay\" @click=\"playbackReplay(replay)\" style=\"margin-left: 1em;\">\n            現在の構成でリプレイをなぞる\n            <b-popover :target=\"`btn-follow-replay`\" triggers=\"hover focus\">\n              行動パターンはそのまま装備だけ変えてダメージの変化を調べるための機能です。<br />\n              射程、スキル構成、ユニットの生死が変わるような変化があるとなぞれなくなって中断される可能性があります。<br />\n            </b-popover>\n          </b-button>\n        </div>\n\n        <div v-if=\"!simulation\" class=\"flex\" style=\"margin: 0px 10px 10px 10px;\">\n          <b-form-input v-model=\"slotName\" placeholder=\"編成名\" style=\"width: 16em\"></b-form-input>\n          <b-form-input v-model=\"slotDesc\" placeholder=\"コメント\" style=\"flex: 1; margin-left: 0.5em; \"></b-form-input>\n        </div>\n\n        <b-tabs v-if=\"!simulation\" v-model=\"unitTabIndex\">\n          <b-tab v-for=\"(unit, ui) in playerUnits\" :key=\"ui\" style=\"background-color: white;\">\n            <template #title>\n              <h2 style=\"font-size: 1em;\" draggable @dragstart=\"onDragUnit(unit)\" @drop=\"onDropUnit(unit)\" @dragover.prevent=\"\">\n                ユニット{{ui+1}}\n                <b-img-lazy :src=\"getImageURL(unit.main?.icon)\" width=\"30\" />\n                <b-img-lazy :src=\"getImageURL(unit.support?.icon)\" width=\"30\" />\n              </h2>\n            </template>\n\n            <div @dragover.prevent @drop.prevent=\"onDropLoadout($event)\" style=\"min-width: 1520px; min-height: 500px;\">\n              <div v-if=\"!simulation\" style=\"padding: 10px; display: flex\">\n                <b-button :id=\"`btn-edit-unit${ui}`\" @click=\"unit.showEditor=!unit.showEditor\" style=\"width: 12em;\">編集</b-button>\n                <b-popover :target=\"`btn-edit-unit${ui}`\" custom-class=\"status-simulator-popover\" :show.sync=\"unit.showEditor\" :delay=\"{show:0, hide:250}\" no-fade>\n                  <StatusSimulator embed :data=\"unit.editorData\" @change=\"unit.edit($event)\" />\n                  <div class=\"flex\" style=\"margin: 0 0 10px 10px;\">\n                    <b-button size=\"sm\" @click=\"unit.showEditor=false\">閉じる</b-button>\n                  </div>\n                </b-popover>\n                <div style=\"margin-left: 1em; color: rgb(160,160,160);\">マップ上のユニットはドラッグで位置を交換できます</div>\n              </div>\n\n              <div class=\"flex\" style=\"align-items: flex-start;\">\n                <div v-if=\"unit.main.cid\" class=\"character\">\n                  <div class=\"flex\">\n                    <div class=\"portrait\">\n                      <b-img-lazy :src=\"getImageURL(unit.main.icon)\" :title=\"unit.main.name\" width=\"100\" height=\"100\" rounded />\n                    </div>\n                    <div class=\"detail\" v-show=\"displayType >= 1\">\n                      <div class=\"info\">\n                        <h5 v-html=\"chrNameToHtml(unit.main.name)\"></h5>\n                        <div class=\"status\">\n                          <b-img-lazy :src=\"getImageURL(unit.main.class)\" :title=\"'クラス:'+unit.main.class\" height=\"25\" />\n                          <b-img-lazy :src=\"getImageURL(unit.main.symbol)\" :title=\"'シンボル:'+unit.main.symbol\" height=\"25\" />\n                          <b-img-lazy :src=\"getImageURL(unit.main.rarity)\" :title=\"'レアリティ:'+unit.main.rarity\" height=\"20\" />\n                          <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(unit.main.damageType)\" :title=\"'攻撃タイプ:'+unit.main.damageType\" width=\"20\" height=\"20\" /></div>\n                          <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{unit.main.range}}</span></div>\n                          <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('移動')\" title=\"移動\" width=\"18\" height=\"18\" /><span>{{unit.main.move}}</span></div>\n                        </div>\n                        <div class=\"status2\" v-html=\"statusToHtml(unit.main.status)\" />\n                      </div>\n                      <div class=\"skills\">\n                        <template v-for=\"(skill, si) in unit.main.skills\">\n                          <div class=\"skill\" v-if=\"!skill.isNormalAttack\" :class=\"getSkillClass(skill)\" :key=\"`skill${si}`\">\n                            <div class=\"flex\">\n                              <div class=\"icon\">\n                                <b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" />\n                              </div>\n                              <div class=\"desc\">\n                                <div class=\"flex\">\n                                  <h6>{{ skill.name }}</h6>\n                                  <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                                </div>\n                                <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                              </div>\n                            </div>\n                          </div>\n                        </template>\n                      </div>\n                      <div class=\"skills\">\n                        <div class=\"skill\" v-for=\"(skill, si) in unit.main.items\" :class=\"getSkillClass(skill)\" :key=\"`item${si}`\">\n                          <div class=\"flex\">\n                            <div class=\"icon\">\n                              <b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" />\n                            </div>\n                            <div class=\"desc\">\n                              <div class=\"flex\">\n                                <h6>\n                                  <b-img-lazy v-if=\"skill.slot\" :src=\"getImageURL(skill.slot)\" :title=\"'部位:'+skill.slot\" height=\"20\" />\n                                  {{ skill.name }}\n                                </h6>\n                              </div>\n                              <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div v-if=\"unit.support.cid\" class=\"character\">\n                  <div class=\"flex\">\n                    <div class=\"portrait\">\n                      <b-img-lazy :src=\"getImageURL(unit.support.icon)\" :title=\"unit.support.name\" width=\"100\" height=\"100\" rounded />\n                    </div>\n                    <div class=\"detail\" v-show=\"displayType >= 1\">\n                      <div class=\"info\">\n                        <h5 v-html=\"chrNameToHtml(unit.support.name)\"></h5>\n                        <div class=\"status\">\n                          <b-img-lazy :src=\"getImageURL(unit.support.class)\" :title=\"'クラス:'+unit.support.class\" height=\"25\" />\n                          <b-img-lazy :src=\"getImageURL(unit.support.supportType)\" :title=\"'サポートタイプ:'+unit.support.supportType\" height=\"25\" />\n                          <b-img-lazy :src=\"getImageURL(unit.support.rarity)\" :title=\"'レアリティ:'+unit.support.rarity\" height=\"20\" />\n                          <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(unit.support.damageType)\" :title=\"'攻撃タイプ:'+unit.support.damageType\" width=\"20\" height=\"20\" /></div>\n                          <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{unit.support.range}}</span></div>\n                        </div>\n                        <div class=\"status2\" v-html=\"statusToHtml(unit.support.status, '', unit.support.damageType)\" />\n                      </div>\n                      <div class=\"skills\">\n                        <div class=\"skill\" v-for=\"(skill, si) in unit.support.skills\" :class=\"getSkillClass(skill)\" :key=\"`skill${si}`\">\n                          <div class=\"flex\">\n                            <div class=\"icon\">\n                              <b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" />\n                            </div>\n                            <div class=\"desc\" v-show=\"displayType >= 2\">\n                              <div class=\"flex\">\n                                <h6>{{ skill.name }}</h6>\n                                <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                              </div>\n                              <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"skills\">\n                        <div class=\"skill\" v-for=\"(skill, si) in unit.support.items\" :class=\"getSkillClass(skill)\" :key=\"`item${si}`\">\n                          <div class=\"flex\">\n                            <div class=\"icon\">\n                              <b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" />\n                            </div>\n                            <div class=\"desc\" v-show=\"displayType >= 2\">\n                              <div class=\"flex\">\n                                <h6>\n                                  <b-img-lazy v-if=\"skill.slot\" :src=\"getImageURL(skill.slot)\" :title=\"'部位:'+skill.slot\" height=\"20\" />\n                                  {{ skill.name }}\n                                </h6>\n                              </div>\n                              <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </b-tab>\n        </b-tabs>\n\n\n        <div v-if=\"simulation && selectedUnit\" class=\"flex\" style=\"align-items: flex-start;\" :set=\"unit=selectedUnit\">\n          <div v-if=\"unit.main.cid\" class=\"character\">\n            <div class=\"flex\">\n              <div class=\"portrait\">\n                <b-img-lazy :src=\"getImageURL(unit.main.icon)\" :title=\"unit.main.name\" width=\"100\" height=\"100\" rounded />\n              </div>\n              <div class=\"detail\" v-show=\"displayType >= 1\">\n                <div class=\"info\">\n                  <h5 v-html=\"chrNameToHtml(unit.main.name)\"></h5>\n                  <div class=\"status\">\n                    <b-img-lazy :src=\"getImageURL(unit.main.class)\" :title=\"'クラス:'+unit.main.class\" height=\"25\" />\n                    <b-img-lazy v-if=\"unit.main?.symbol\" :src=\"getImageURL(unit.main.symbol)\" :title=\"'シンボル:'+unit.main.symbol\" height=\"25\" />\n                    <b-img-lazy v-if=\"unit.main?.rarity\" :src=\"getImageURL(unit.main.rarity)\" :title=\"'レアリティ:'+unit.main.rarity\" height=\"20\" />\n                    <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(unit.main.damageType)\" :title=\"'攻撃タイプ:'+unit.main.damageType\" width=\"20\" height=\"20\" /></div>\n                    <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{unit.main.range}}</span></div>\n                    <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('移動')\" title=\"移動\" width=\"18\" height=\"18\" /><span>{{unit.main.move}}</span></div>\n                  </div>\n                  <div class=\"status2\" v-html=\"statusToHtml(unit.main.status)\" />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div v-if=\"unit.support.cid\" class=\"character\">\n            <div class=\"flex\">\n              <div class=\"portrait\">\n                <b-img-lazy :src=\"getImageURL(unit.support.icon)\" :title=\"unit.support.name\" width=\"100\" height=\"100\" rounded />\n              </div>\n              <div class=\"detail\" v-show=\"displayType >= 1\">\n                <div class=\"info\">\n                  <h5 v-html=\"chrNameToHtml(unit.support.name)\"></h5>\n                  <div class=\"status\">\n                    <b-img-lazy :src=\"getImageURL(unit.support.class)\" :title=\"'クラス:'+unit.support.class\" height=\"25\" />\n                    <b-img-lazy v-if=\"unit.support?.supportType\" :src=\"getImageURL(unit.support.supportType)\" :title=\"'サポートタイプ:'+unit.support.supportType\" height=\"25\" />\n                    <b-img-lazy v-if=\"unit.support?.rarity\" :src=\"getImageURL(unit.support.rarity)\" :title=\"'レアリティ:'+unit.support.rarity\" height=\"20\" />\n                    <div class=\"param-box\"><b-img-lazy :src=\"getImageURL(unit.support.damageType)\" :title=\"'攻撃タイプ:'+unit.support.damageType\" width=\"20\" height=\"20\" /></div>\n                    <div class=\"param-box\"><b-img-lazy :src=\"getImageURL('射程')\" title=\"射程\" width=\"18\" height=\"18\" /><span>{{unit.support.range}}</span></div>\n                  </div>\n                  <div class=\"status2\" v-html=\"statusToHtml(unit.support.status, '', unit.support.damageType)\" />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div v-if=\"simulation && selectedUnit\" class=\"character\" style=\"align-items: flex-start; width: 1510px; max-width: 1510px;\">\n          <template :set=\"unit=selectedUnit.sim\">\n            <h5 style=\"margin: 5px;\">影響下にあるスキル</h5>\n            <div class=\"flex info\">\n              <div><h6>メイン合計: </h6></div>\n              <template v-for=\"(l, li) in effectValuesToHtml(unit.main.buf, unit.main.bufCv)\">\n                <div :key=\"li\" v-html=\"l\" />\n              </template>\n            </div>\n            <div v-if=\"unit.support.isAlive\" class=\"flex info\">\n              <div><h6>サポート合計: </h6></div>\n              <template v-for=\"(l, li) in effectValuesToHtml(unit.support.buf, unit.support.bufCv)\">\n                <div :key=\"li\" v-html=\"l\" />\n              </template>\n            </div>\n\n            <div class=\"skills\" style=\" display: flex; margin-top: 5px;\">\n              <template v-for=\"(skill, si) in selectedUnit.sim.affectedSkills\">\n                <div class=\"skill\" style=\"width: 745px; max-width: 745px;\" v-if=\"!skill.isNormalAttack\" :class=\"getSkillClass(skill)\" :key=\"`skill${si}`\">\n                  <div class=\"flex\">\n                    <div class=\"icon\">\n                      <b-img-lazy :src=\"getImageURL(skill.icon)\" with=\"50\" height=\"50\" />\n                    </div>\n                    <div class=\"desc\">\n                      <div class=\"flex\">\n                        <h6>{{ skill.name }}</h6>\n                        <div class=\"param-group\" v-html=\"skillParamsToHtml(skill)\"></div>\n                      </div>\n                      <p><span v-html=\"descToHtml(skill)\"></span><span v-if=\"skill.note\" class=\"note\" v-html=\"noteToHtml(skill)\"></span></p>\n                      <span class=\"note\">\n                        <div class=\"effect-group\">\n                          <template v-for=\"e in [...skill.effects, ...skill.randomEffects]\">\n                            <template v-for=\"(d, di) in (selectedUnit.sim.affectedEffects[e.uid] ?? [])\">\n                              <div class=\"effect-box\" :key=\"`${e.uid}${di}`\">\n                                <span :class=\"`effect ${d.effect.enabled ? 'caution' : ''}`\">\n                                  {{d.desc}}\n                                  <b-badge v-if=\"d.isTimed\" class=\"tag\" variant=\"secondary\" pill @click=\"d.remove()\">×</b-badge>\n                                </span>\n                              </div>\n                            </template>\n                          </template>\n                        </div>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </template>\n            </div>\n          </template>\n        </div>\n        <div v-if=\"simulation\" style=\"height: 300px;\"></div>\n      </div>\n    </div>\n\n    <ItemPopovers />\n  </div>\n</template>\n\n<script>\nimport Navigation from './Navigation.vue'\nimport jsonBattle from '../assets/battle.json'\nimport commonjs from \"./common.js\";\nimport lookupjs from \"./simulator/lookup.js\";\nimport StatusSimulator from './simulator/StatusSimulator.vue'\nimport MessageBoard from './parts/MessageBoard.vue'\nimport * as lbt from \"./simulator/battle.js\";\nimport * as lut from \"./utils.js\";\n\nimport ItemPopovers from './parts/ItemPopovers.vue'\nimport ItemPopoversJs from \"./parts/ItemPopovers.js\";\n\n\nexport default {\n  name: 'Battle',\n  components: {\n    Navigation,\n    StatusSimulator,\n    MessageBoard,\n    ItemPopovers,\n  },\n  mixins: [commonjs, lookupjs, ItemPopoversJs],\n\n  data() {\n    return {\n      displayTypes: [\n        \"アイコン\",\n        \"シンプル\",\n        \"詳細\",\n      ],\n      phaseList: [\n        { index: 0, id: \"0\", desc: \"初期配置\" },\n        { index: 1, id: \"1E\", desc: \"1T敵フェイズ\" },\n        { index: 2, id: \"2E\", desc: \"2T敵フェイズ\" },\n        { index: 3, id: \"3E\", desc: \"3T敵フェイズ\" },\n        { index: 4, id: \"4E\", desc: \"4T敵フェイズ\" },\n      ],\n\n      detailedDescription: false,\n      loading: false,\n      divX: 15,\n      divY: 15,\n\n      battleList: [],\n      battleId: \"\",\n      battleData: null,\n      cells: [],\n      phase: \"\",\n      path: null,\n      skillRange: null,\n      skillArea: null,\n      skillDirection: null,\n\n      selectedUnit: null,   // unit\n      actionsToSelect: [],  // skill\n      selectedSkill: null,  // skill\n      targetUnit: null, // unit\n      targetCell: null, // cell\n      targetDirection: lbt.Direction.None,\n      showConfirm: false,\n\n      tools: {},\n      toolStack: [],\n\n      phaseTabIndex: 0,\n      prevURL: \"\",\n\n      slotNames: [\"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\", \"\"],\n      slotName: \"\",\n      slotDesc: \"\",\n      commentReplay: \"\",\n      userName: \"\",\n\n      enemyUnits: [],\n      playerUnits: [\n        new lbt.BaseUnit(),\n        new lbt.BaseUnit(),\n        new lbt.BaseUnit(),\n        new lbt.BaseUnit(),\n        new lbt.BaseUnit(),\n      ],\n      unitTabIndex: 0,\n\n      simulation: null,\n\n      loadoutList: [],\n      loadoutFields: [\n        {\n          key: \"name\",\n          label: \"名前\",\n        },\n        {\n          key: \"author\",\n          label: \"投稿者\",\n        },\n        {\n          key: \"actions\",\n          label: \"操作\",\n        }\n      ],\n      loadoutHash: \"\",\n\n      replay: null,\n      replayList: [],\n      replayFields: [\n        {\n          key: \"battle\",\n          label: \"クエスト\",\n        },\n        {\n          key: \"score\",\n          label: \"スコア\",\n        },\n        {\n          key: \"units\",\n          label: \"ユニット\",\n        },\n        {\n          key: \"comment\",\n          label: \"コメント\",\n        },\n        {\n          key: \"author\",\n          label: \"投稿者\",\n        },\n        {\n          key: \"actions\",\n          label: \"操作\",\n        }\n      ],\n      showReplayList: false,\n      fetching: false,\n\n      simOptionFields: [\n        {\n          key: \"value\",\n          label: \"\",\n        },\n        {\n          key: \"label\",\n          label: \"\",\n        },\n      ],\n    };\n  },\n\n  beforeCreate() {\n    document.title = \"れじぇくろDB: バトルシミュレータ\";\n    window.$vue = this;\n  },\n\n  created() {\n    this.setupDB();\n\n    // 全クエストの全敵をここでセットアップ (大して重くもないのでとりあえず…)\n    this.battleList = structuredClone(jsonBattle);\n    for (let battle of this.battleList) {\n      battle.summon = [];\n      if (!battle.terrain) {\n        battle.terrain = Array(battle.mapSize[1]);\n        for (let y = 0; y < battle.mapSize[1]; ++y) {\n          battle.terrain[y] = Array(battle.mapSize[0]).fill(0);\n        }\n      }\n\n      for (let enemy of battle.enemies) {\n        let unit = new lbt.BaseUnit(false);\n        unit.fid = enemy.fid;\n        unit.phase = enemy.phase;\n        unit.coord = enemy.coord;\n        {\n          let chr = Object.create(this.npcMainChrs.find(c => c.uid == enemy.main.cid));\n          Object.assign(chr, enemy.main);\n          chr.skills = [\n            this.searchTableWithUid.get(chr.talent),\n            ...chr.skills.map(id => this.searchTableWithUid.get(id)),\n          ];\n          chr.status = this.getNPCChrStatus(chr, chr.level, chr.statusRate);\n          if (enemy.invulnerable) {\n            chr.status[0] = Infinity;\n          }\n          unit.base.main = chr;\n        }\n        if (enemy.support) {\n          let chr = Object.create(this.npcSupChrs.find(c => c.uid == enemy.support.cid));\n          Object.assign(chr, enemy.support);\n          chr.status = this.getNPCChrStatus(chr, chr.level, chr.statusRate);\n          unit.base.support = chr;\n        }\n        unit.setup();\n        enemy.unit = unit;\n        //console.log(unit);\n\n        if (unit.base?.summon) {\n          battle.summon = battle.summon.concat(unit.base.summon);\n        }\n      }\n    }\n\n    for (let i = 0; i <= 9; ++i) {\n      let data = lut.fromJson(localStorage.getItem(`battle.slot${i}`));\n      if (data?.name) {\n        this.setArrayElement(this.slotNames, i, data.name);\n      }\n    }\n  },\n\n  mounted() {\n    this.userName = localStorage.getItem(`userName`) ?? \"\";\n\n    // とりあえず碁盤目を出す\n    this.selectBattle(null);\n    this.selectPhase(\"0\");\n    this.setupTools();\n\n    window.onpopstate = () => {\n      this.decodeURL(true);\n    };\n    const initialize = () => {\n      this.loading = false;\n      if (!this.battleData) {\n        this.selectBattle(this.battleList.at(-1)?.uid);\n      }\n    };\n\n    this.loading = true;\n    let url = this.decodeURL();\n    if (url) {\n      if (url.replay) {\n        this.importReplayFromUrl(url.replay, (r) => {\n          if (url.playback) {\n            this.playbackReplay(r, { interval: url.interval, immediate: true });\n          }\n          initialize();\n        }, () => initialize());\n      }\n      else {\n        initialize();\n      }\n    }\n    else {\n      // URL による指定がないなら過去の状態を復元\n      lut.idbInitialize(\"ldb\", [\"loadout\", \"replay\"], 2);\n      lut.idbRead(\"ldb\", \"loadout\", \"last\", (data) => {\n        if (data) {\n          this.deserializeLoadout(data);\n        }\n      });\n      lut.idbRead(\"ldb\", \"replay\", \"last\", (data) => {\n        if (data) {\n          this.selectBattle(data.battle);\n          this.replay = data;\r\n        }\n        initialize();\n      }, () => initialize());\n    }\n  },\n\n  destroyed() {\n    // 編成とリプレイを記録\n    lut.idbWrite(\"ldb\", \"loadout\", \"last\", this.serializeLoadout());\n    let replay = this.serializeReplay() ?? this.replay;\n    if (replay) {\n      lut.idbWrite(\"ldb\", \"replay\", \"last\", replay);\n    }\n  },\n\n  computed: {\n    activePlayerUnits() {\n      if (this.simulation) {\n        return this.simulation.units.filter(a => a.isPlayer && !a.isSummon && a.isActive).map(a => a.base);\n      }\n      else {\n        return this.playerUnits;\n      }\n    },\n    allPlayerUnits() {\n      if (this.simulation) {\n        return Object.values(this.simulation.unitTable).filter(a => a.isPlayer && !a.isSummon).map(a => a.base);\n      }\n      else {\n        return this.playerUnits;\n      }\n    },\n    activeEnemyUnits() {\n      if (this.simulation) {\n        return this.simulation.units.filter(a => a.isEnemy && a.isActive).map(a => a.base);\n      }\n      else {\n        return [\n          ...this.enemyUnits.filter(a => a.phase == this.phase || a.fid == \"E01\"),\n          ...(this.battleData?.summon ?? []),\n        ];\n      }\n    },\n    allActiveUnits() {\n      // 死亡、未出現含まない現在場にいるユニット\n      if (this.simulation) {\n        return this.simulation.units.filter(a => a.isActive).map(a => a.base);\n      }\n      else {\n        return [...this.playerUnits, ...this.enemyUnits].filter(a => a.phase == this.phase || a.fid == \"E01\");\n      }\n    },\n    allUnits() {\n      // 死亡、未出現含む全ユニット\n      if (this.simulation) {\n        return Object.values(this.simulation.unitTable).map(a => a.base);\n      }\n      else {\n        return [...this.playerUnits, ...this.enemyUnits];\n      }\n    },\n\n    currentTool() {\n      return this.toolStack.at(-1);\n    },\n    prevTool() {\n      return this.toolStack.at(-2);\n    },\n\n    simOptions() {\n      if (this.simulation) {\r\n        const desc = {\r\n          autoBuffCancel: {\n            label: \"自動バフ・デバフ解除\",\r\n            desc: `バフ解除・デバフ解除効果を自動で適用します。<br />\r\n選ぶ効果はランダムではなく、バフ解除はダメージ耐性系を優先で解除、デバフ解除は与ダメージ系を優先で解除します。`,\r\n          },\n          autoRandomBuff: {\n            label: \"自動ランダムバフ・デバフ\",\r\n            desc: `ワイズエンハンスや天来弓などのランダムバフ・デバフを自動で適用します。<br />\r\n選ぶ効果はランダムではなく、ランダムバフは与ダメージ系を選択、ランダムデバフはダメージ耐性系を選択となります。`,\r\n          },\n          autoRandomSelection: {\n            label: \"自動ランダム対象選択\",\r\n            desc: `追跡の頭帯のような「範囲内のランダムな1ユニットにバフ」といった効果を自動で適用します。<br />\r\n選ぶ対象はランダムではなく、距離が最も近く、かつまだ効果がかかってない対象を選びます。(距離0の自身は最優先、同距離の場合0時方向から時計回り順に選択)<br />`,\r\n          },\n          selfDamage: {\n            label: \"自傷効果\",\r\n            desc: `人馬の天衣などの自傷効果の有効・無効です。<br />有効な場合、確率は考慮せず100%発動します。`,\r\n          },\n        };\r\n        let sim = this.simulation;\r\n        return Object.keys(sim.config).map(k => {\r\n          return {\r\n            name: k,\r\n            label: desc[k]?.label ?? k,\r\n            desc: desc[k]?.desc ?? \"\",\r\n            get value() { return sim.config[k]; },\r\n            set value(v) {\r\n              sim.config[k] = v;\r\n              if (sim.onPlayback) {\r\n                sim.config.override = true;\r\n              }\r\n            },\r\n          };\r\n        });\r\n      }\r\n      return [];\r\n    },\n  },\n\n  watch: {\n    userName: function (v) {\n      localStorage.setItem(`userName`, v);\n    },\n  },\n\n  methods: {\n\n    //#region ユニット操作\n    setupTools() {\n      // tool 変遷：\n      // nonSimulation (非シミュレーション時)\n      // selectUnit -> unitAction -> selectTarget -> (fireSkill)\n      //                                          -> previewArea -> (fireSkill)\n      //                          -> previewArea -> (fireSkill)\n      //                                         -> previewDirection -> (fireSkill)\n\n      let self = this;\n      const confirm = () => {\n        self.pushTool(self.tools.confirm);\n      };\n      const colorDelay = 15;\n\n      this.tools = {\n        // 非シミュレーション時\n        // ユニット選択処理\n        nonSimulation: {\n          onClickCell(cell) {\n            const unit = self.findUnitByCoord(cell.coord);\n            self.selectUnit(unit);\n            if (unit) {\n              self.pushTool(self.tools.showMoveRange);\n            }\n          },\n          onRenderCell(cell, classes, styles) {\n            self.tools.moveUnit.onRenderCell(cell, classes, styles);\n          },\n        },\n        // 移動範囲表示\n        showMoveRange: {\n          onEnable() {\n            self.tools.moveUnit.buildPath(self.selectedUnit);\n          },\n          onDisable() {\n            self.selectUnit(null);\n            self.path = null;\n          },\n          onClickCell(cell) {\n            const unit = self.findUnitByCoord(cell.coord);\n            if (!unit || self.selectedUnit === unit) {\n              // 空セル、もしくは自身が選択されたらキャンセル\n              self.cancelTools(self.tools.nonSimulation);\n            }\n            else if (unit) {\n              // 別のユニットが選択されたらそちらに切り替え\n              self.cancelTools(self.tools.nonSimulation);\n              self.selectUnit(unit);\n              self.pushTool(self.tools.showMoveRange);\n            }\n          },\n          onRenderCell(cell, classes, styles) {\n            self.tools.moveUnit.onRenderCell(cell, classes, styles);\n          },\n        },\n\n        // 以下は全てシミュレーション時\n        // ユニット選択処理\n        selectUnit: {\n          onClickCell(cell) {\n            const unit = self.findUnitByCoord(cell.coord);\n            self.selectUnit(unit);\n            if (unit) {\n              self.pushTool(self.tools.moveUnit);\n            }\n          },\n          onRenderCell(cell, classes, styles) {\n            self.tools.moveUnit.onRenderCell(cell, classes, styles);\n          },\n        },\n\n        // ユニット移動＆スキル選択処理\n        moveUnit: {\n          buildPath(unit) {\n            let pf = new lbt.PathFinder(self.divX, self.divY, self.battleData.terrain);\n            pf.setObstacles(self.allActiveUnits.filter(u => u.isPlayer != unit.isPlayer));\n            pf.setOccupied(self.allActiveUnits.filter(u => u.isPlayer == unit.isPlayer));\n            pf.setStartUnit(unit);\n            let sim = unit.sim ?? unit;\n            pf.buildPath(unit.move, sim?.isOnMultiMove ? null : {size: unit.range});\n            self.path = pf;\n            //console.log(self.path.toString());\n          },\n\n          onEnable() {\n            self.selectedUnit.prevCoord = self.selectedUnit.coord;\n            this.buildPath(self.selectedUnit);\n            if (self.simulation.isOwnTurn(self.selectedUnit)) {\n              self.actionsToSelect = self.selectedUnit.actions;\n            }\n          },\n          onDisable() {\n            self.selectUnit(null);\n            self.path = null;\n            self.actionsToSelect = [];\n          },\n          onClickCell(cell) {\n            const unit = self.findUnitByCoord(cell.coord);\n            let sim = self.simulation;\n            if (unit) {\n              if (self.selectedUnit === unit) {\n                // 再度そのユニットがクリックされたら待機\n                self.onClickWait();\n              }\n              else {\n                // 別のユニットが選択されたらそちらに切り替え\n                self.cancelTools(self.tools.selectUnit);\n                self.selectUnit(unit);\n                self.pushTool(self.tools.moveUnit);\n              }\n            }\n            else if (self.path.isPassable(cell.coord)) {\n              // ユニット移動処理\n              // プレイヤーターンならプレイヤー側、敵ターンなら敵側のユニットだけ移動を許可\n              // 移動力以上の距離の移動を許容するが、移動力 0 の敵ユニットはおかしなことになるので禁止\n              let u = self.selectedUnit;\n              if (sim.isOwnTurn(u) && !(u.isEnemy && u.move == 0)) {\n                u.coord = cell.coord;\n                let d = self.path.getMoveDistance(cell.coord);\n                u.moveDistance = d < 0 ? u.move : d;\n                sim.updateAreaEffects();\n                self.setUnitPath(u, self.path.getPath(cell.coord, u.prevCoord));\n              }\n            }\n          },\n          onClickAction(skill) {\n            self.cancelTools(self.tools.moveUnit);\n            self.selectAction(skill);\n\n            if (skill) {\n              if (skill.isSelfTarget) {\n                // 自己バフスキル\n                self.targetUnit = self.selectedUnit;\n                self.targetCell = self.findCellByCoord(self.selectedUnit.coord);\n                self.pushTools([self.tools.selectTarget, self.tools.confirm], this);\n              }\n              else if (skill.isRadialAreaTarget || skill.isSpecialAreaTarget) {\n                // 範囲スキル (自分中心 or 特殊範囲)\n                self.targetCell = self.findCellByCoord(self.selectedUnit.coord);\n                self.pushTools([self.tools.previewArea, self.tools.confirm], this);\n              }\n              else if (skill.isDirectionalAreaTarget) {\n                // 範囲スキル (直線)\n                self.targetCell = self.findCellByCoord(self.selectedUnit.coord);\n                self.pushTool(self.tools.previewArea);\n              }\n              else {\n                // 対象指定スキル\n                self.pushTool(self.tools.selectTarget);\n              }\n            }\n            else {\n              // 待機\n              self.pushTool(self.tools.confirm);\n            }\n          },\n          onCancel() {\n            let u = self.selectedUnit;\n            u.coord = u.prevCoord;\n            u.moveDistance = 0;\n            u.path = null;\n            self.resetUnitPosition(u);\n            self.simulation.updateAreaEffects();\n          },\n          onRenderCell(cell, classes, styles) {\n            let sim = self.simulation;\n            let unit = self.findUnitByCoord(cell.coord);\n            let selected = self.selectedUnit;\n            if (unit) {\n              if (unit.isEnemy)\n                classes.push(\"enemy-cell\");\n              if (unit.isPlayer)\n                classes.push(\"player-cell\");\n              if (unit === selected)\n                classes.push(\"selected\");\n            }\n            if (self.path) {\n              if (self.path.isInMoveRange(cell.coord)) {\n                if (!unit) {\n                  classes.push(\"move-range\");\n                  if (sim?.isOwnTurn(selected)) {\n                    classes.push(\"click-to-move\");\n                  }\n                  if (sim?.isOwnTurn(selected)) {\n                    classes.push(\"hovered\");\n                  }\n                }\n              }\n              else if (self.path.isInFireRange(cell.coord)) {\n                classes.push(\"attack-range\");\n              }\n\n              const d = self.path.getDistance(cell.coord);\n              styles.push(`transition-delay: ${colorDelay * d}ms`);\n            }\n          },\n        },\n\n        // スキル射程表示＆ターゲット選択処理\n        selectTarget: {\n          isInFireRange(unit) {\n            return self.skillRange.isInFireRange(unit?.coord);\n          },\n\n          onEnable() {\n            let skill = self.selectedSkill;\n            let pf = self.simulation.makePathFinder(self.selectedUnit);\n            pf.buildPath(0, skill.makeRangeParams());\n            self.skillRange = pf;\n          },\n          onDisable() {\n            self.selectedSkill = null;\n            self.skillRange = null;\n            self.targetUnit = null;\n            self.targetCell = null;\n          },\n          onClickCell(cell) {\n            let unit = self.findUnitByCoord(cell.coord);\n            if (self.skillRange.isInFireRange(cell.coord)) {\n              let skill = self.selectedSkill;\n\n              if (self.isValidTarget(self.selectedUnit, skill, unit)) {\n                if (skill.isAreaTarget) {\n                  // 範囲スキルの場合範囲確認モードに遷移\n                  self.targetCell = cell;\n                  self.pushTools([self.tools.previewArea, self.tools.confirm], this);\n                }\n                else {\n                  // 単体スキルならスキル発動\n                  // 召喚スキルはユニットのいないセルが対象になる\n                  if (skill.isTargetCell) {\n                    self.targetCell = cell;\n                  }\n                  else {\n                    self.targetUnit = unit;\n                    self.targetCell = cell;\n                  }\n                  confirm();\n                }\n              }\n            }\n          },\n          onClickAction(skill) {\n            self.tools.moveUnit.onClickAction(skill);\n          },\n          onRenderCell(cell, classes, styles) {\n            let unit = self.findUnitByCoord(cell.coord);\n            let selected = self.selectedUnit;\n            if (self.skillRange.isInFireRange(cell.coord)) {\n              classes.push(\"area-range\");\n              if (!self.showConfirm) {\n                if (self.isValidTarget(selected, self.selectedSkill, unit)) {\n                  classes.push(\"click-to-fire\");\n                }\n              }\n              else {\n                if (self.targetCell === cell) {\n                  classes.push(\"target-cell\");\n                }\n              }\n              const d = self.skillRange.getDistance(cell.coord);\n              styles.push(`transition-delay: ${colorDelay * d}ms`);\n            }\n          },\n        },\n\n        // 範囲スキルの範囲表示＆使用確認\n        previewArea: {\n          onEnable() {\n            let skill = self.selectedSkill;\n            let pf = self.simulation.makePathFinder();\n            if (skill.shapeData) {\n              pf.setShootRangeShape(skill.shapeData, self.selectedUnit?.coord);\n            }\n            else {\n              if (skill.isSelfTarget || skill.isRadialAreaTarget) {\n                pf.setStartUnit(self.selectedUnit);\n              }\n              else {\n                pf.setStart(self.targetCell.coord);\n              }\n              pf.buildPath(0, skill.makeAreaParams());\n            }\n            self.skillArea = pf;\n            this.pf = pf;\n          },\n          onDisable() {\n            if (self.prevTool !== self.tools.selectTarget) {\n              self.selectedSkill = null;\n              self.targetCell = null;\n            }\n            if (self.skillArea == this.pf) {\n              self.skillArea = null;\n            }\n            this.pf = null;\n          },\n          onClickCell(cell) {\n            let unit = self.findUnitByCoord(cell.coord);\n            if (self.skillArea.isInFireRange(cell.coord)) {\n              let skill = self.selectedSkill;\n\n              if (self.isValidTarget(self.selectedUnit, skill, unit)) {\n                // 方向指定スキルの場合ここに来る\n                self.targetDirection = lbt.calcDirection(self.targetCell.coord, cell.coord);\n                self.pushTools([self.tools.previewDirection, self.tools.confirm], this);\n              }\n            }\n          },\n          onClickAction(skill) {\n            self.tools.moveUnit.onClickAction(skill);\n          },\n          onRenderCell(cell, classes, styles) {\n            const unit = self.findUnitByCoord(cell.coord);\n            const selected = self.selectedUnit;\n            if (self.skillArea.isInFireRange(cell.coord)) {\n              classes.push(\"attack-range\");\n              if (self.isValidTarget(selected, self.selectedSkill, unit)) {\n                if (!self.showConfirm) {\n                  classes.push(\"click-to-fire\");\n                }\n                else {\n                  classes.push(\"target-cell\");\n                }\n              }\n              const d = self.skillArea.getDistance(cell.coord);\n              styles.push(`transition-delay: ${colorDelay * d}ms`);\n            }\n          },\n        },\n\n        previewDirection: {\n          onEnable() {\n            let skill = self.selectedSkill;\n            let pf = self.simulation.makePathFinder();\n            pf.setStart(self.targetCell.coord);\n            pf.buildPath(0, {direction: self.targetDirection, ...skill.makeAreaParams()});\n            self.skillArea = pf;\n            this.pf = pf;\n          },\n          onDisable() {\n            if (self.skillArea == this.pf) {\n              self.skillArea = self.tools.previewArea.pf;\n            }\n            this.pf = null;\n            self.targetDirection = lbt.Direction.None;\n          },\n          onClickCell(cell) {\n            let unit = self.findUnitByCoord(cell.coord);\n            if (self.skillArea.isInFireRange(cell.coord)) {\n              let skill = self.selectedSkill;\n\n              if (self.isValidTarget(self.selectedUnit, skill, unit)) {\n                confirm();\n              }\n            }\n          },\n          onClickAction(skill) {\n            self.tools.moveUnit.onClickAction(skill);\n          },\n          onRenderCell(cell, classes, styles) {\n            const unit = self.findUnitByCoord(cell.coord);\n            const selected = self.selectedUnit;\n            if (self.skillArea.isInFireRange(cell.coord)) {\n              classes.push(\"attack-range\");\n              if (self.isValidTarget(selected, self.selectedSkill, unit, false)) {\n                classes.push(\"target-cell\");\n              }\n              const d = self.skillArea.getDistance(cell.coord);\n              styles.push(`transition-delay: ${colorDelay * d}ms`);\n            }\n          },\n        },\n\n        confirm: {\n          onEnable() {\n            self.showConfirm = true;\n\n            let unit = self.selectedUnit?.sim;\n            if (unit) {\n              let ctx = lbt.makeActionContext(self.selectedUnit.sim, self.targetUnit?.sim, self.selectedSkill);\n              if (self.targetCell) {\n                ctx.range = lbt.calcDistace(unit.coord, self.targetCell.coord);\n              }\n              unit.evaluateBuffs(ctx);\n            }\n          },\n          onDisable() {\n            self.showConfirm = false;\n\n            let unit = self.selectedUnit?.sim;\n            if (unit) {\n              unit.evaluateBuffs();\n            }\n          },\n          onClickCell(cell) {\n            if (cell === self.targetCell) {\n              self.confirmAction();\n            }\n          },\n          onClickAction(skill) {\n            self.tools.moveUnit.onClickAction(skill);\n          },\n          onRenderCell(cell, classes, styles) {\n            self.prevTool.onRenderCell(cell, classes, styles);\n          },\n        },\n      };\n\n      this.resetTools(this.tools.nonSimulation);\n    },\n\n    isValidTarget(unit, skill, target, allowEmptyCell = true) {\n      if (!unit || !skill) {\n        return false;\n      }\n\n      const isTargetSide = () => {\n        return target && ((skill.isTargetEnemy && unit.isPlayer != target.isPlayer) || (skill.isTargetAlly && unit.isPlayer == target.isPlayer));\n      };\n\n      if (skill.isSelfTarget) {\n        // 自身が対象のスキル\n        return unit === target;\n      }\n      else if (skill.isTargetCell) {\n        // 空のセルが対象のスキル (召喚など)\n        return !target;\n      }\n      else if (skill.isDirectionalAreaTarget) {\n        // 方向指定スキル\n        // ユニットでも空のセルでも対象に取れる、ただし使用者自身はダメ\n        if (allowEmptyCell) {\n          return unit !== target;\n        }\n        else {\n          return isTargetSide();\n        }\n      }\n      else if (skill.isRadialAreaTarget) {\n        // 自分中心の範囲スキル\n        return isTargetSide();\n      }\n      else {\n        // その他ユニットが対象のスキル\n        return isTargetSide();\n      }\n    },\n\n    resetTools(tool = null) {\n      if (tool) {\n        while (this.popTool()) { }\n        this.pushTool(tool);\n      }\n      else {\n        while (this.toolStack.length > 1) {\n          this.popTool();\n        }\n      }\n    },\n    cancelTools(cancelPoint = null) {\n      let pos = this.toolStack.findIndex(a => a === cancelPoint);\n      while (this.toolStack.length > 1) {\n        if (this.toolStack.length - 1 == pos) {\n          break;\n        }\n        let t = this.currentTool;\n        let tpos = this.toolStack.findIndex(a => a === t.cancelPoint);\n        if (tpos >= 1 && tpos < pos) {\n          pos = tpos;\n        }\n        this.popTool(true);\n      }\n    },\n    pushTool(tool) {\n      if (tool.onEnable) {\n        tool.onEnable();\n      }\n      this.pushArray(this.toolStack, tool);\n    },\n    pushTools(tools, cancelPoint = null) {\n      if (cancelPoint) {\n        tools.at(-1).cancelPoint = cancelPoint;\n      }\n      for (let t of tools) {\n        this.pushTool(t);\n      }\n    },\n    popTool(callCancel = false) {\n      if (this.toolStack.length > 0) {\n        let tool = this.currentTool;\n        if (callCancel && tool.onCancel) {\n          tool.onCancel();\n        }\n        if (tool.onDisable) {\n          tool.onDisable();\n        }\n        this.popArray(this.toolStack);\n        return true;\n      }\n      return false;\n    },\n    getPrevTool(tool) {\n      const i = this.toolStack.findIndex(a => a === tool);\n      console.log(i);\n      return this.toolStack.at(i - 1);\n    },\n    //#endregion ユニット操作\n\n\n    //#region シミュレーション\n    zeroPad(num, pad = 2) {\n      return String(num).padStart(pad, '0');\n    },\n\n    selectBattle(bid, clear = false) {\n      const battle = this.battleList.find(a => a.uid == bid);\n      this.resetTools();\n      this.battleId = bid;\n      this.battleData = battle;\n\n      // battle == null の場合でもとりあえず 15x15 の碁盤目が出るようにしておく\n      const divX = this.divX = battle?.mapSize[0] ?? 15;\n      const divY = this.divY = battle?.mapSize[1] ?? 15;\n      const terrain = battle?.terrain;\n      let cells = new Array(divX * divY);\n      for (let y = 0; y < divY; ++y) {\n        for (let x = 0; x < divX; ++x) {\n          let i = y * divX + x;\n          cells[i] = {\n            id: `c${this.zeroPad(x)}${this.zeroPad(y)}`,\n            coord: [x, y],\n            obstacle: terrain ? terrain[y][x] != 0 : false,\n          };\n        }\n      }\n      this.cells = cells;\n\n      let cellStyle = this.$refs.cells.style;\n      cellStyle.gridTemplateColumns = `repeat(${divX}, 50px)`;\n      cellStyle.gridTemplateRows = `repeat(${divY}, 50px)`;\n\n      // enemyList の高さをグリッドに合わせる\n      this.$refs.enemyList.style.maxHeight = \"0px\";\n      this.$nextTick(() => {\n        this.$refs.enemyList.style.maxHeight = `${this.$refs.cells.clientHeight}px`;\n      });\n\n      this.enemyUnits = battle?.enemies?.map(a => a.unit) ?? [];\n      for (let e of this.enemyUnits) {\n        if (e.main.shape) {\n          const shape = e.main.shape;\n          for (let c of cells) {\n            if (shape[c.coord[1]][c.coord[0]]) {\n              c.boss = e;\n            }\n          }\n        }\n      }\n\n      if (battle?.allies) {\n        for (let i = 0; i < battle.allies.length; ++i) {\n          let ally = battle.allies[i];\n          ally.unit = this.playerUnits[i];\n          ally.unit.fid = ally.fid;\n          ally.unit.phase = ally.phase;\n          ally.unit.coord = ally.coord;\n        }\n      }\n\n      this.resetUnitPositionAll(true);\n      if (clear) {\n        this.selectPhase(\"0\", clear);\n      }\n    },\n\n    selectPhase(pid, clear = false) {\n      let phase = this.phaseList.find(p => p.id == pid);\n      if (!phase)\n        return;\n\n      this.phaseTabIndex = phase.index;\n      this.phase = pid;\n\n      this.resetUnitPositionAll(true);\n      if (clear) {\n        this.selectUnit(null);\n      }\n    },\n\n    findCellByCoord(coord) {\n      if (coord[0] < this.divX && coord[1] < this.divY) {\n        return this.cells[coord[1] * this.divX + coord[0]];\n      }\n      return null;\n    },\n    findUnitByCoord(coord) {\n      let c = this.findCellByCoord(coord); {\n        if (c?.boss) {\n          return c.boss;\n        }\n      }\n      for (const u of this.allActiveUnits) {\n        if (u.coord[0] == coord[0] && u.coord[1] == coord[1]) {\n          return (!this.simulation || u.isActive) ? u : null;\n        }\n      }\n      return null;\n    },\n\n    selectUnit(unit) {\n      this.selectedUnit = unit;\n      if (unit && !this.simulation) {\n        if (unit.isEnemy) {\n          this.scrollTo(`unit_${unit.fid}`);\n        }\n        if (unit.isPlayer) {\n          const idx = this.playerUnits.findIndex(a => a.fid == unit.fid);\n          this.unitTabIndex = idx;\n        }\n      }\n    },\n\n    selectAction(skill) {\n      this.selectedSkill = skill;\n    },\n\n    getTargetUnits() {\n      let pf = this.skillDirection ?? this.skillArea;\n      if (pf) {\n        let targets = [];\n        // NxN ボスがいる都合上、ユニット毎ではなくセル毎に探索する必要がある\n        for (let c of this.cells) {\n          if (pf.isInFireRange(c.coord)) {\n            let u = this.findUnitByCoord(c.coord);\n            if (this.isValidTarget(this.selectedUnit, this.selectedSkill, u, false)) {\n              targets.push(u);\n            }\n          }\n        }\n        return targets;\n      }\n      else {\n        return this.targetUnit;\n      }\n    },\n\n    confirmAction() {\n      let unit = this.selectedUnit;\n      let skill = this.selectedSkill;\n      let skillArgs = null;\n      if (skill) {\n        // スキルパラメータ設定\n        skillArgs = {};\n        if (skill.isSelfTarget || skill.isRadialAreaTarget || skill.isSpecialAreaTarget) {\n          // これらは追加パラメータ不要\n        }\n        else if (skill.isDirectionalAreaTarget) {\n          // 方向指定スキルは方向情報が必要\n          skillArgs.direction = this.targetDirection;\n        }\n        else {\n          // 他は対象セルを指定\n          // (NxN ボスがあるため、ユニット指定スキルでも位置情報が必要になる)\n          skillArgs.coord = this.targetCell.coord;\n        }\n      }\n      this.simulation.fireSkill(this.selectedUnit, this.selectedSkill, skillArgs);\n      this.resetTools();\n      if (unit.isAlive && !unit?.sim.isEnded) {\n        this.currentTool.onClickCell(this.findCellByCoord(unit.coord));\n      }\n    },\n\n    cancelAction() {\n      let tool = this.currentTool;\n      if (tool?.onCancel) {\n        tool.onCancel();\n      }\n      if (this.toolStack.length > 1) {\n        this.cancelTools(this.prevTool);\n      }\n    },\n\n    getSkillClass(skill) {\n      return {\n        active: skill.isActive,\n        passive: skill.isPassive,\n      }\n    },\n\n    isUnitHighlighted(unit) {\n      return unit && (unit === this.selectedUnit);\n    },\n\n    getCellClass(cell) {\n      let classes = [\"grid-cell\"];\n      let styles = [];\n      if (cell.obstacle && !cell.boss) {\n        classes.push(\"obstacle\");\n      }\n\n      let tool = this.currentTool;\n      if (tool?.onRenderCell) {\n        tool.onRenderCell(cell, classes, styles);\n      }\n      cell.classes = classes;\n      cell.style = styles.join(\";\");\n      return classes;\n    },\n    getActionClass(skill, unit) {\n      let r = [\"action-button\"];\n      if (skill === this.selectedSkill) {\n        r.push(\"selected\");\n      }\n      if (!skill.available || unit?.sim.isOnMultiMove) {\n        r.push(\"grayscale\");\n      }\n      return r;\n    },\n    resetUnitPosition(u, delay = false) {\n      const body = () => {\n        if (u.isNxN) {\n          // ここでは処置不要\n        }\n        else {\n          let el = document.getElementById(`unit-${u.fid}`);\n          if (el) {\n            const pos = u.coord;\n            el.style.transition = el.style.offsetPath ? '100ms ease' : 'none';\n            el.style.offsetPath = `path('M${pos[0] * 50},${pos[1] * 50}')`;\n            el.style.offsetDistance = `0%`;\n          }\n        }\n      };\n      if (delay) {\n        this.$nextTick(body);\n      }\n      else {\n        body();\n      }\n    },\n    resetUnitPositionAll(delay = false) {\n      const body = () => {\n        for (let u of this.allUnits) {\n          this.resetUnitPosition(u);\n        }\n      };\n      if (delay) {\n        this.$nextTick(body);\n      }\n      else {\n        body();\n      }\n    },\n    // opt: {\n    //   interval: Number,\n    //   onfinish: Function,\n    //}\n    setUnitPath(unit, path, opt) {\n      const makeSVGPath = (path) => {\n        // thanks: https://www.webdesignleaves.com/pr/html/svg_basic.html#path\n        const cellSize = 50;\n        let commands = path.map((c, i) => {\n          return `${i === 0 ? 'M' : 'L'}${c[0] * cellSize},${c[1] * cellSize}`;\n        });\n        return `path('${commands.join(' ')}')`;\n      }\n      let el = document.getElementById(`unit-${unit.fid}`);\n      let anim = null;\n      if (el) {\n        if (path) {\n          el.style.transition = 'none';\n          el.style.offsetPath = makeSVGPath(path);\n          anim = el.animate(\n            { offsetDistance: ['0%', '100%'] },\n            {\n              duration: unit.moveDistance * (opt?.interval ?? 30),\n              easing: 'linear',\n              fill: 'forwards',\n            }\n          );\n        }\n        else {\n          this.resetUnitPosition(unit);\n        }\n      }\n      if (opt?.onfinish) {\n        if (anim) {\n          anim.onfinish = opt.onfinish;\r\n        }\n        else {\n          opt.onfinish();\r\n        }\n      }\n    },\n    getUnitIconClass(unit) {\n      let r = [];\n      let sim = unit.sim;\n      if (sim && sim.isEnded) {\n        r.push(\"grayscale\");\n      }\n      return r;\n    },\n    blinkCell(pos) {\n      let el = document.createElement('div');\n      el.style.position = \"absolute\";\n      el.style.left = `${pos[0] * 50 }px`;\n      el.style.top = `${pos[1] * 50}px`;\n      el.style.width = `50px`;\n      el.style.height = `50px`;\n      el.style.borderRadius = \"0.3rem\";\n      el.style.zIndex = 10;\n      this.$refs.cells.appendChild(el);\n      el.animate(\n        { backgroundColor: ['rgba(255, 0, 0, 0.9)', 'rgba(255, 0, 0, 0)'] },\n        {\n          duration: 500,\n          easing: 'ease-out',\n          fill: 'forwards',\n        }\n      ).onfinish = () => {\n        el.remove();\n      };\n    },\n\n    onEnterCell(cell) {\n      this.hoveredCell = cell;\n      const unit = this.findUnitByCoord(cell.coord);\n      if (unit?.isEnemy) {\n        //this.scrollTo(`enemy_${unit.fid}`);\n      }\n    },\n    onLeaveCell(cell) {\n      if (this.hoveredCell === cell) {\n        this.hoveredCell = null;\n      }\n    },\n    onClickCell(cell) {\n      let tool = this.currentTool;\n      if (tool && tool.onClickCell) {\n        tool.onClickCell(cell);\n      }\n    },\n    onCellRClick() {\n      this.cancelAction();\n    },\n    onClickWait() {\n      let tool = this.currentTool;\n      if (tool && tool.onClickAction) {\n        tool.onClickAction(null);\n        this.confirmAction();\n      }\n    },\n    onClickAction(skill) {\n      let tool = this.currentTool;\n      if (tool && tool.onClickAction) {\n        tool.onClickAction(skill);\n      }\n    },\n\n\n    beginSimulation(replay = false) {\n      this.resetTools();\n      this.selectPhase(\"0\");\n      if (!this.simulation) {\n        this.simulation = new lbt.SimContext(this.battleData, [...this.playerUnits, ...this.enemyUnits]);\n        this.simulation.start(replay);\n        this.resetTools(this.tools.selectUnit);\n      }\n    },\n    endSimulation() {\n      this.resetTools();\n      if (this.simulation) {\n        let rep = this.serializeReplay();\n        this.replay = rep.states.length > 1 ? rep : null;\n        this.simulation.finish();\n        this.simulation = null;\n        this.resetTools(this.tools.nonSimulation);\n        this.resetUnitPositionAll(true);\n      }\n    },\n\n    eraseWeakEnemies() {\n      this.simulation?.eraseWeakEnemies();\n      this.resetTools();\n      this.$forceUpdate();\n    },\n    eraseSelectedUnit() {\n      this.simulation?.eraseUnit(this.selectedUnit);\n      this.resetTools();\n      this.$forceUpdate();\n    },\n\n    endTurn() {\n      this.resetTools();\n      this.simulation?.passTurn();\n    },\n\n    onDragUnit(unit) {\n      this.draggingUnit = unit;\n    },\n    onDropUnit(unit) {\n      if (this.draggingUnit && !this.simulation) {\n        if (this.draggingUnit && unit) {\n          this.draggingUnit.swap(unit);\n        }\n      }\n      this.draggingUnit = null;\n      this.resetTools();\n    },\n    onDragCell(cell) {\n      this.onDragUnit(this.findUnitByCoord(cell.coord));\n    },\n    onDropCell(cell) {\n      this.onDropUnit(this.findUnitByCoord(cell.coord));\n    },\n    isCellDraggable(cell) {\n      if (!this.simulation) {\n        const u = this.findUnitByCoord(cell.coord);\n        return u?.isPlayer;\n      }\n      return false;\n    },\n\n    effectValuesToHtml(rate, fixed) {\n      let list = [];\n      for (const [name, value] of Object.entries(rate)) {\n        let unit = '';\n        if (![\"移動\", \"射程(通常攻撃)\", \"射程(スキル)\", \"範囲\"].includes(name)) {\n          unit = \"%\";\n        }\n        list.push(`${name}${value >= 0 ? '+' : ''}${value}${unit}`);\n      }\n      for (const [name, value] of Object.entries(fixed)) {\n        list.push(`${name}${value >= 0 ? '+' : ''}${value}`);\n      }\n      return list.map(a => `\n<div class=\"effect-box\">\n<span class=\"effect caution\">${a}</span>\n</div>\n`);\n    },\n    //#endregion シミュレーション\n\n\n    //#region 編成\n    serializeLoadout() {\n      let r = {\n        name: this.slotName,\n        desc: this.slotDesc,\n        units: this.playerUnits.map(a => a.serialize()),\n      };\n      return r;\n    },\n    deserializeLoadout(obj) {\n      this.loadoutHash = null;\n      this.slotName = obj.name ?? \"\";\n      this.slotDesc = obj.desc ?? \"\";\n      for (let i = 0; i < this.playerUnits.length; ++i) {\n        this.playerUnits[i].deserialize(obj.units[i]);\n      }\n    },\n    saveLoadout(slot = 0) {\n      let old = lut.fromJson(localStorage.getItem(`battle.slot${slot}`));\n      if (old?.units?.find(a => a.main.cid)) {\n        localStorage.setItem(`battle.slot99`, lut.toJson(old));\n        this.toast(\"上書き前の編成をバックアップスロットに保存しました。\");\n      }\n\n      this.setArrayElement(this.slotNames, slot, this.slotName);\n      let data = this.serializeLoadout();\n      localStorage.setItem(`battle.slot${slot}`, lut.toJson(data));\n    },\n    loadLoadout(slot = 0) {\n      let data = lut.fromJson(localStorage.getItem(`battle.slot${slot}`));\n      if (data) {\n        this.deserializeLoadout(data);\n      }\n      else {\n        for (let unit of this.playerUnits) {\n          unit.initialize();\n        }\n      }\n      this.resetTools();\n    },\n    exportLoadoutAsFile() {\n      const data = this.serializeLoadout();\n      const name = data.name ? data.name : \"編成名\";\n      lut.download(`${name}.loadout`, data);\n    },\n    importLoadoutFromFile() {\n      lut.openFileDialog(\".loadout\", (file) => {\n        file.text().then((text) => {\n          this.deserializeLoadout(lut.fromJson(text));\n        });\n      });\n    },\n    onDropLoadout(event) {\n      if (event?.dataTransfer?.files?.length) {\n        let file = event.dataTransfer.files[0];\n        file.text().then((text) => {\n          this.deserializeLoadout(lut.fromJson(text));\n        });\n      }\n    },\n    clearLoadout() {\n      if (this.playerUnits.find(a => a.main.cid)) {\n        let old = this.serializeLoadout();\n        localStorage.setItem(`battle.slot99`, lut.toJson(old));\n        this.toast(\"クリア前の編成をバックアップスロットに保存しました。\");\n      }\n\n      this.slotName = \"\";\n      this.slotDesc = \"\";\n      this.loadoutHash = null;\n      for (let unit of this.playerUnits) {\n        unit.initialize();\n      }\n    },\n\n    onMessageChange(mb) {\n      this.addPo(mb.anchors);\n      this.dispatchScrollEvent();\n    },\n    onMessageDiscard(mb) {\n      this.removePo(mb.anchors);\n    },\n    //#endregion 編成\n\n\n    //#region リプレイ\n    serializeReplay() {\n      if (!this.simulation) {\n        return null;\r\n      }\n      let r = {};\n      r.version = lbt.replayVersion;\n      r.battle = this.battleId;\n      r.score = Math.round(this.simulation.score);\n      r.loadout = this.serializeLoadout();\n      r.states = this.simulation.serialize();\n      r.name = `${this.battleData.name} ${r.states.at(-1).desc.score}`;\n      return r;\n    },\n    deserializeReplay(data) {\n      const body = (r) => {\n        this.endSimulation(false);\n        this.selectBattle(r.battle);\n        this.deserializeLoadout(r.loadout);\n        this.beginSimulation(true);\n        this.simulation.deserialize(r.states);\n        this.$forceUpdate();\n        return r;\n      };\n\n      if (typeof (data) === 'string') {\n        return body(lut.fromJson(data));\n      }\n      else if (data instanceof ArrayBuffer || data instanceof Uint8Array) {\n        return body(lut.fromJson(lut.bytesToString(data)));\n      }\n      else if (typeof (data) === 'object') {\n        return body(lut.sanitizeJsonObject(data));\n      }\n    },\n    // opt: {\n    //   loadLoadout: Boolean,\n    //   interval: Number, // millisec\n    // }\n    playbackReplay(r, opt = {}) {\n      this.scrollTo(\"root\", true);\n      this.endSimulation(false);\n      this.selectBattle(r.battle);\n      if (opt?.loadLoadout) {\n        // loadLoadout が無効な場合構成を変えてリプレイをなぞる挙動になる\n        this.deserializeLoadout(r.loadout);\n      }\n      this.beginSimulation();\n\n      this.simulation.onPlayback = true;\n      let interval = Math.max(opt?.interval ?? 30, 1);\n      this.playbackBody = () => {\n        this.resetTools();\n        this.simulation.isPlaying = true;\n\n        let si = 0;\n        const next = () => {\n          this.$nextTick(() => {\n            if (this.simulation && si < r.states.length) {\n              try {\n                this.simulation.playback(r.states[si++], {\n                  interval: interval,\n                  next: next,\r\n                });\n              }\n              catch (e) { }\n            }\n            else if (this.simulation) {\n              // 再生完了\r\n              this.simulation.onPlayback = this.simulation.isPlaying = false;\r\n              this.$forceUpdate();\r\n            }\n          });\n        };\n        next();\n      };\n      if (opt?.immediate) {\n        this.beginPlayback();\r\n      }\n    },\n    beginPlayback() {\n      if (this.playbackBody) {\r\n        this.playbackBody();\r\n        this.playbackBody = null;\r\n      }\r\n    },\n\n    exportReplayAsFile() {\n      if (this.simulation) {\n        this.replay = this.serializeReplay();\n      }\n      if (this.replay) {\n        let r = this.replay;\n        lut.gzCompress(lut.toJson(r)).then(data => {\n          lut.download(`${r.loadout.name}${r.states.at(-1).desc.score}.replay`, data);\n        });\n      }\n    },\n    importReplayFromFile() {\n      lut.openFileDialog(\".replay\", (file) => {\n        file.arrayBuffer().then(bin => {\n          if (lut.gzIsCompressedData(bin)) {\n            lut.gzDecompress(bin).then(data => {\n              this.deserializeReplay(data);\n            })\n          }\n          else {\n            this.deserializeReplay(bin);\n          }\n        });\n      });\n    },\n    importReplayFromUrl(url, onsuccess = null, onerror = null) {\n      if (url.match(/^https?:\\/\\//)) {\n      }\n      else {\n        // http で始まらない場合は hash とみなす\n        url = `${lut.ReplayServer}?mode=get&hash=${url}`;\n      }\n\n      this.loading = true;\n      const handleError = (e) => {\n        this.toast(e.toString());\n        lut.call(onerror, e);\n      };\n      fetch(url)\n        .then(res => {\n          if (!res.ok) {\n            throw new Error(res.statusText);\n          }\n          return res.json();\n        })\n        .then(json => {\n          if (json.succeeded === false) {\n            throw new Error(json.message);\n          }\n          else {\n            let r = this.deserializeReplay(json);\n            lut.call(onsuccess, r);\n          }\n        })\n        .catch(handleError)\n        .finally(() => { this.loading = false; });\n    },\n    onDropReplay(event) {\n      if (event?.dataTransfer?.files?.length) {\n        let file = event.dataTransfer.files[0];\n        file.text().then(text => {\n          this.deserializeReplay(lut.fromJson(text));\n        });\n      }\n    },\n    onKeyReplay(evt) {\n      evt.preventDefault();\n      if (evt.key == 'ArrowDown') {\n        if (this.simulation.statePos > -this.simulation.states.length) {\n          this.simulation.statePos--;\n        }\n      }\n      else if (evt.key == 'ArrowUp') {\n        if (this.simulation.statePos < -1) {\n          this.simulation.statePos++;\n        }\n      }\n      this.scrollTo(`sim-state-${this.simulation.statePos}`);\n    },\n    setReplayState(idx) {\n      this.resetTools();\n      if (!this.simulation && this.replay) {\n        this.deserializeReplay(this.replay);\n      }\n      this.simulation.statePos = idx;\n    },\n\n    fetchReplayList() {\n      this.fetching = true;\n      fetch(lut.ReplayServer)\n        .then(res => res.json())\n        .then(obj => {\n          this.fetching = false;\n          this.replayList = obj.sort((a, b) => b.date.localeCompare(a.date)).map(a => {\n            return {\n              hash: a.hash,\n              version: a.summary?.version ?? \"\",\n              battle: a.summary?.battle ?? \"\",\n              score: a.summary?.score ?? \"\",\n              units: a.summary?.units ? a.summary.units.flatMap(c => c ? [c] : []) : [],\n              author: a.summary?.author ?? \"\",\n              comment: a.summary?.comment ?? \"\",\n            };\n          });\n          for (let e of this.replayList) {\n            const delkey = localStorage.getItem(`delkey.${e.hash}`);\n            if (delkey) {\n              e.delkey = delkey;\n            }\n          }\n        });\n    },\n    async uploadReplay() {\n      const replay = this.simulation ? this.serializeReplay() : this.replay;\n      const data = await lut.gzCompress(lut.toJson(replay));\n      var form = new FormData()\n      form.append('mode', 'put');\n      form.append('data', new Blob([data]));\n      form.append('author', this.userName.trim());\n      form.append('comment', this.commentReplay.trim());\n      fetch(lut.ReplayServer, { method: \"POST\", body: form })\n        .then(res => res.json())\n        .then(obj => {\n          if (obj.succeeded === false) {\n            this.toast(obj.message);\n          }\n          else {\n            localStorage.setItem(`delkey.${obj.hash}`, obj.delkey);\n            localStorage.setItem(`subscribe.${obj.hash}`, 'true');\n            this.commentReplay = \"\";\n            this.fetchReplayList();\n          }\n        });\n    },\n    downloadReplay(rec) {\n      this.importReplayFromUrl(`${lut.ReplayServer}?mode=get&hash=${rec.hash}`, () => {\n        this.replayHash = rec.hash;\n      });\n    },\n    deleteReplay(rec) {\n      if (window.confirm(`\"${this.getItemName(rec.battle)} (スコア ${rec.score})\" をサーバーから削除します。よろしいですか？`)) {\n        fetch(`${lut.ReplayServer}?mode=del&hash=${rec.hash}&delkey=${rec.delkey}`)\n          .then(res => res.json())\n          .then(obj => {\n            if (obj.succeeded === false) {\n              this.toast(obj.message);\n            }\n            else {\n              localStorage.removeItem(`delkey.${rec.hash}`);\n              if (rec.hash == this.replayHash) {\n                this.replayHash = null;\n              }\n              this.fetchReplayList();\n            }\n          });\n      }\n    },\n    copyReplayUrl(rec) {\n      let url = window.location.href.replace(/\\?.+/, '').replace(/#.+/, '');\n      url += `?replay=${rec.hash}`;\n      this.copyToClipboard(url);\n      this.toast(`コピーしました：${url}`);\n    },\n    toggleReplayList(v) {\n      if (v === undefined) {\n        v = !this.showReplayList;\r\n      }\n      this.showReplayList = v;\r\n      if (v) {\r\n        this.fetchReplayList();\r\n      }\r\n    },\n    //#endregion リプレイ\n\n\n    //#region Balloon\n    addBaloon(unit, content, z = -1) {\n      let el = document.createElement('div');\n      el.innerHTML = content;\n      el.classList.add('balloon');\n      el.style.left = `${unit.coord[0] * 50 + 25}px`;\n      el.style.top = `${unit.coord[1] * 50}px`;\n      if (z != -1) {\n        el.style.zIndex = `${z}`;\n      }\n      this.$refs.cells.appendChild(el);\n\n      // 位置\n      el.animate(\n        { transform: ['translate(-50%, -110%)', 'translate(-50%, -160%)'] },\n        {\n          duration: 600,\n          easing: 'ease-out',\n          fill: 'forwards',\n        }\n      );\n      // 透明度\n      el.animate(\n        { opacity: ['1', '0'] },\n        {\n          duration: 500,\n          delay: 500,\n          easing: 'ease-out',\n          fill: 'forwards',\n        }\n      ).onfinish = () => {\n        el.remove();\n      };\n    },\n    addDamageBalloon(unit, damage) {\n      let str = `${Math.round(damage)}`;\n      let minor = `<span style='color: rgb(200,200,200); font-size: 21pt;'>${str.slice(-4)}</span>`;\n      let major = `<span style='color: rgb(0,0,0); font-size: 24pt;'>${str.slice(0, -4)}</span>`;\n      let content = `<h1>${major}${minor}</h1>`;\n      this.addBaloon(unit, content, 99);\n    },\n    addHealBalloon(unit, heal) {\n      let str = `${Math.round(heal)}`;\n      let minor = `<span style='color: rgb(120,240,120); font-size: 21pt;'>${str.slice(-4)}</span>`;\n      let major = `<span style='color: rgb(0,160,0); font-size: 24pt;'>${str.slice(0, -4)}</span>`;\n      let content = `<h1>${major}${minor}</h1>`;\n      this.addBaloon(unit, content, 98);\n    },\n    addBalloons(ctx) {\n      if (ctx) {\n        for (let [fid, damage] of Object.entries(ctx.damageTaken)) {\n          if (damage.total) {\n            let u = this.simulation.findUnit(fid);\n            this.addDamageBalloon(u, damage.total);\n          }\n        }\n        for (let [fid, heal] of Object.entries(ctx.healTaken)) {\n          if (heal.total) {\n            let u = this.simulation.findUnit(fid);\n            this.addHealBalloon(u, heal.total);\n          }\n        }\n      }\n    },\n    scoreToHtml(num) {\n      let str = `${Math.round(num)}`;\n      let r = [];\n      r.push(`<span style='color: rgb(200,200,200); font-size: 15pt;'>${str.slice(-4)}</span>`);\n      if (str.length > 4) {\n        r.push(`<span style='color: rgb(100,100,100); font-size: 18pt;'>${str.slice(-8, -4)}</span>`);\n      }\n      if (str.length > 8) {\n        r.push(`<span style='color: rgb(0,0,0); font-size: 21pt;'>${str.slice(-12, -8)}</span>`);\n      }\n      return r.toReversed().join(\"\");\n    },\n    //#endregion Balloon\n\n\n    //#region Misc\n    getItemName(uid) {\n      return (this.battleList.find(a => a.uid == uid)?.name ?? \"\").replace(/\\(.+\\)/, \"\");\r\n    },\n\n    // in-place array copy\n    copyArray(dst, src) {\n      dst.length = src.length;\n      for (let i = 0; i < src.length; ++i)\n        dst[i] = src[i];\n    },\n    appendArray(dst, src) {\n      let pos = dst.length;\n      dst.length = dst.length + src.length;\n      for (let i = 0; i < src.length; ++i)\n        dst[pos++] = src[i];\n    },\n\n    scrollTo(id, opt) {\n      this.$nextTick(() => {\n        let e = document.getElementById(id);\n        if (e) {\n          e.scrollIntoView(opt ?? { block: \"nearest\" });\n        }\n      });\n    },\n\n    updateURL() {\n      let seri = new lut.URLSerializer();\n      seri.b = this.battleId;\n      if (this.phase != \"0\")\n        seri.p = this.phase;\n      if (this.selectedUnit)\n        seri.u = this.selectedUnit.fid;\n\n      let url = seri.serialize();\n      if (url != this.prevURL) {\n        window.history.pushState(null, null, url);\n        this.prevURL = url;\n        return true;\n      }\n      return false;\n    },\n    decodeURL(initState = false) {\n      let data = new lut.URLSerializer();\n      if (data.deserialize(window.location.href) || initState) {\n        if (data.b)\n          this.selectBattle(data.b);\n        if (data.p)\n          this.selectPhase(data.p);\n        else if (data.b)\n          this.selectPhase(\"0\");\n        if (data.u)\n          this.selectUnit(data.u);\n\n        if (data.loadout) {\n          this.importLoadoutFromUrl(data.loadout);\n        }\n        if (data.replay) {\n          // 呼び出し側に委ねる\n        }\n        return data;\n      }\n      return null;\n    },\n    dbgTest() {\n    },\n    //#endregion Misc\n  },\n}\n</script>\n\n<style scoped>\n  .main-panel {\n    padding-top: 10px;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 0.3rem;\n    display: inline-block;\n    background: rgb(245, 245, 245);\n    box-shadow: 0 3px 6px rgba(140,149,159,0.5);\n  }\n\n  .grid {\n    display: grid !important;\n  }\n  .grid-container {\n    user-select: none;\n    display: grid;\n    margin-right: 20px;\n    position: relative;\n  }\n  .grid-cell {\n    justify-content: center;\n    background: white;\n    outline: 1px solid rgb(180,185,195);\n    transition-property: background;\n    transition: 10ms ease;\n  }\n  .unit-cell {\n    position: absolute;\n    width: 50px;\n    height: 50px;\n    pointer-events: none;\n    transition-property: offset-distance;\n    transition: 100ms linear;\n    offset-anchor: left top;\n    offset-rotate: 0deg;\n  }\n  .grid-cell.obstacle {\n    background: rgb(180,185,195);\n  }\n\n  .enemy-cell {\n    background: rgb(255, 160, 160);\n    cursor: pointer;\n  }\n  .enemy-cell.selected {\n    background: rgb(255, 80, 80);\n  }\n\n  .player-cell {\n    background: rgb(140, 160, 255);\n    cursor: pointer;\n  }\n  .player-cell.selected {\n    background: rgb(80, 80, 255);\n  }\n\n  .target-cell {\n    background: rgb(255, 90, 80) !important;\n    cursor: pointer;\n  }\n\n  .move-range {\n    background: rgb(200, 220, 255);\n  }\n  .attack-range {\n    background: rgb(255, 200, 190);\n  }\n  .area-range {\n    background: rgb(255, 235, 190);\n  }\n  .click-to-move:hover {\n    background: rgb(140, 160, 255);\n    cursor: move;\n  }\n  .click-to-fire:hover {\n    background: rgb(255, 90, 80);\n    cursor: pointer;\n  }\n\n  .enemy-list {\n    overflow-y: scroll;\n    overscroll-behavior: none;\n  }\n  .enemy-panel {\n  }\n\n  .center {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n\n  .unit-panel {\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 0.3rem;\n    display: inline-block;\n    background: rgb(245, 245, 245);\n    box-shadow: 0 3px 6px rgba(140,149,159,0.5);\n    padding: 10px;\n    margin: 5px;\n  }\n\n  .content ul {\n    list-style-type: disc;\n    margin: 0;\n  }\n  .content li {\n    display: list-item;\n    margin: 0 15px;\n  }\n\n  .action-button {\n    display: inline-block;\n    width: 55px;\n    height: 55px;\n    cursor: pointer;\n\n    border: 1px solid rgba(255, 255, 255, 0);\n    border-radius: 0.3rem;\n    background-color: rgba(255, 255, 255, 0);\n  }\n  .action-button.selected {\n    border: 1px solid rgba(255, 0, 0, 255);\n    background-color: rgba(255, 0, 0, 255);\n  }\n  .grayscale {\n    filter: grayscale(100%) brightness(90%);\n  }\n  .text-overlay {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: white;\n    font-weight: bold;\n    text-align: center;\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n\n  .sim-commands {\n    position: fixed;\n    bottom: 10px;\n    border-radius: 0.3rem;\n    padding: 5px;\n    transition: all 250ms ease;\n  }\n  .sim-commands.player-turn {\n    background: rgba(128, 128, 250, 0.7);\n  }\n  .sim-commands.enemy-turn {\n    background: rgba(250, 128, 128, 0.7);\n  }\n\n  .sim-replay {\n    position: fixed;\n    bottom: 5px;\n    right: 10px;\n    border-radius: 0.3rem;\n    padding: 5px;\n    transition: all 250ms ease;\n  }\n  .sim-replay:focus {\n    outline: none;\n  }\n</style>\n<style>\n  .table {\n    margin-bottom: 1px;\n  }\n\n  .desc .table {\n    width: auto;\n    margin: 3px;\n  }\n\n  .input-dropdown button {\n    padding: 0.1em;\n  }\n\n  .table-sm td {\n    padding-top: 1px;\n    padding-bottom: 1px;\n    vertical-align: middle;\n  }\n\n  input::placeholder {\n    color: rgb(190, 190, 190) !important;\n    font-size: small !important;\n  }\n\n  .status-simulator-popover {\n    max-width: 1000px !important;\n  }\n  .status-simulator-popover .popover-body {\n    padding: 0px !important;\n  }\n  .loadout-popover {\n    max-width: 1000px !important;\n    min-width: 800px !important;\n  }\n  .replay-popover {\n    max-width: 1100px !important;\n    min-width: 1100px !important;\n  }\n  .comment-popover {\n    max-width: 800px !important;\n    min-width: 600px !important;\n  }\n\n  .balloon {\n    position: absolute;\n    display: inline-block;\n    padding: 5px;\n    z-index: 99;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 0.3rem;\n    background: white;\n    box-shadow: 0 3px 6px rgba(140,149,159,0.5);\n  }\n\n  @keyframes move {\n    0% {\n      offset-distance: 0%;\n    }\n    100% {\n      offset-distance: 100%;\n    }\n  }\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Battle.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Battle.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Battle.vue?vue&type=template&id=0a531239&scoped=true\"\nimport script from \"./Battle.vue?vue&type=script&lang=js\"\nexport * from \"./Battle.vue?vue&type=script&lang=js\"\nimport style0 from \"./Battle.vue?vue&type=style&index=0&id=0a531239&prod&scoped=true&lang=css\"\nimport style1 from \"./Battle.vue?vue&type=style&index=1&id=0a531239&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a531239\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Info from './components/Info.vue'\nimport MainCharacters from './components/MainCharacters.vue'\nimport SupportCharacters from './components/SupportCharacters.vue'\nimport Items from './components/Items.vue'\nimport Lookup from './components/Lookup.vue'\nimport About from './components/About.vue'\nimport Misc from './components/Misc.vue'\nimport Battle from './components/Battle.vue'\n\nVue.use(Router)\n\nexport default new Router({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes: [\n    {\n      path: '/',\n      name: 'index',\n      component: Info\n    },\n    {\n      path: '/main.html',\n      name: 'main',\n      component: MainCharacters\n    },\n    {\n      path: '/support.html',\n      name: 'support',\n      component: SupportCharacters\n    },\n    {\n      path: '/item.html',\n      name: 'item',\n      component: Items\n    },\n    {\n      path: '/lookup.html',\n      name: 'lookup',\n      component: Lookup\n    },\n    {\n      path: '/about.html',\n      name: 'about',\n      component: About\n    },\n    {\n      path: '/misc.html',\n      name: 'misc',\n      component: Misc\n    },\n    {\n      path: '/battle.html',\n      name: 'battle',\n      component: Battle\n    }\n  ]\n})","import Vue from 'vue'\nimport App from './App.vue'\nimport { BootstrapVue, BootstrapVueIcons } from 'bootstrap-vue'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\nimport \"./components/style.css\";\nimport router from './router'\n\nVue.use(BootstrapVue)\nVue.use(BootstrapVueIcons)\nVue.config.productionTip = false\n\nVue.prototype.$idSeed = 0;\nVue.prototype.$genUniqueId = function () {\n  return ++Vue.prototype.$idSeed;\n};\n\nnew Vue({\n  router,\n  render: h => h(App),\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunklegeclodb\"] = self[\"webpackChunklegeclodb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(2248); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","staticRenderFns","name","components","component","staticClass","on","onMouseMove","class","showHeader","staticStyle","style","_m","_v","MessageServer","ReplayServer","BitFlags","constructor","arg","size","n","data_","Uint32Array","parent","get","i","byte","bit","set","v","URLSerializer","data","k","serialize","params","push","toString","length","join","deserialize","url","numHandled","q","match","split","param","kvp","parseInt","decodeURIComponent","getSubscribedThreads","r","localStorage","key","startsWith","replace","getSubscribeLastCheckTime","getItem","Date","updateSubscribeLastCheck","setItem","getTime","unique","array","compare","a","b","filter","findIndex","call","func","args","maxElement","iterable","comparator","undefined","minElement","enumerate","arrays","toSQLDateTime","date","time","a9h","toISOString","slice","toJson","conv","Number","POSITIVE_INFINITY","JSON","stringify","fromJson","str","parse","sanitizeJsonObject","obj","Array","isArray","openFileDialog","fileType","callback","input","window","document","createElement","type","accept","onchange","files","remove","click","download","filename","Uint8Array","Blob","u","URL","createObjectURL","href","body","appendChild","revokeObjectURL","stringToBytes","TextEncoder","encode","bytesToString","bin","TextDecoder","decode","concatBytes","len","reduce","acc","arr","result","offset","async","gzCompress","inputStream","ReadableStream","start","controller","enqueue","close","outputStream","pipeThrough","CompressionStream","reader","getReader","chunks","done","value","read","releaseLock","gzDecompress","stream","Response","DecompressionStream","gzIsCompressedData","check","bytes","idbInitialize","dbName","storeNames","version","req","indexedDB","open","onupgradeneeded","event","db","target","objectStoreNames","contains","createObjectStore","keyPath","onsuccess","idbWrite","storeName","id","onerror","tx","transaction","store","objectStore","put","idbRead","e","props","devmode","mounted","methods","checkNewMessage","toaster","noAutoHide","appendToast","variant","fetch","then","toast","lut","imageTable","jsonImageTable","preventShowHideHeaderOnScroll","lastScrollPosition","displayType","displayCount","sortType","sortOrder","sortBySlot","page","tagTable","mainTagTable","subTagTable","tagIDSeed","mainTagIDSeed","predefinedMainTags","tagSearchPattern","tagSearchPatternPrev","tagSearchFn","freeSearchPattern","freeSearchPatternPrev","freeSearchFn","searchTabIndex","settingsTabIndex","displayCounts","skillTable","Map","created","route","getRouteName","tmp","addEventListener","onScroll","beforeDestroy","removeEventListener","watch","computed","displayCountNum","NaN","isNaN","pos","scrollY","documentElement","scrollTop","Math","abs","onPage","updateURL","p","ret","$route","hideHeader","scrollToTop","scroll","scrollToBottom","scrollTo","scrollHeight","clientY","escapeRE","getImageURL","console","log","compareDate","appendSet","dst","iteratable","add","sortSet","sorted","from","sort","clear","partitionSet","condition","delete","reorderSet","patterns","has","applyPage","end","min","getPageCount","ceil","getPageOf","finder","floor","partitionSubtags","subtagSet","tag","reorderSubtag","getMainTagIfSubTag","m","indexOf","addMainTag","t","count","note","constants","tagNotes","addSubTag","main","sub","subtags","Set","registerTag","mainTag","registerTags","tags","countTags","resetTagCounts","Object","values","genTagID","getMainTags","keys","getFilteredMainTags","getFilteredSubTags","subTags","isFilterEnabled","state","fillFilter","items","filterMatch","index","setTagSearchPattern","txt","wholeWord","escape","trim","hidePopover","$nextTick","setFreeSearchPattern","matchTags","re","matchContent","item","desc","getSearchMask","isSearchPatternSet","chrNameToHtml","descToHtml","removeMarkup","text","replaceAll","replaced","descToTitle","isMain","symbol","damageType","isSupport","isItem","statusToText","status","isActive","isPassive","ctToText","areaToText","rangeToText","cost","map","ct","areaShape","area","range","noteToHtml","funcTable","randomTableToString","jsonRandomEffectTable","table","getVal","duration","skillNameToHtml","skill","skillParamsToHtml","statusToHtml","prefix","s","isFinite","round","list","flatMap","splice","updateQuery","modified","RegExp","includes","updateTagCounts","onTagDropdownShow","keepDropdown","readyToHide","onTagDropdownHide","preventDefault","onSubtagPopoverShow","popoverTarget","prevPopover","onSubtagPopoverHide","$refs","hide","hideTagDropdown","$root","$emit","serializeFilter","deserializeFilter","copyToClipboard","navigator","clipboard","writeText","getMainChrStatus","chr","level","star","master","loveBonus","boost","statusInit","statusLv","statusStar","getSupportChrStatus","amulet","additional","getItemStatus","getNPCChrStatus","rate","prevLv","lvStr","statusTable","lv","ps","cs","getEngateDate","engage","compareEngageDate","l","ld","rd","localeCompare","lowerBound","seq","first","last","middle","toNumber","parseFloat","toInt","parseValue","getBattlePower","max","getMainBattlePower","skillCost","itemStar","enchantComplete","engageSkillCount","getSupportBattlePower","skillCount","getEstimatedItemBattlePower","api","baseAP","baseTec","ap","getEffectIndex","effectType","effectTypes","jsonConstants","isPublicTarget","effect","checkTarget","trigger","isSelfTarget","isSingleTarget","isSkillTarget","tri","unitCount","effectParamsToTags","miscTags","addTag","isAttackSkill","isMainSkill","opt","positionManipulate","find","isAreaTarget","isRangedTarget","isRadialAreaTarget","isDirectionalAreaTarget","damageRateSp","targetClass","onTargetClass","areaDamage","multiAction","postfix","ma","cond","onKill","probability","damageRate","multiMove","mm","doubleAttack","da","onEnemyTurn","supportAttack","ignoreGuard","fixedDamage","shield","reflection","heal","revive","summon","isSymbolSkill","buffSteal","buffCancel","debuffCancel","ctReduction","targetSkill","buffToS","effectCategory","tagFilter","isDebuff","ephemeral","isBuff","includeDemeritTags","ephemeralOnBattle","includeAreaTags","includeSelfTags","buff","f","debuff","statusEffects","immune","drawback","setupSkill","uid","isGlobalTarget","isSpecialAreaTarget","areaShapeId","jsonShape","shapeData","isSupportSkill","isAreaAttackSkill","isBattleSkill","hasAreaEffect","effects","isTargetEnemy","isTargetAlly","isTargetCell","npc","c","defineProperty","randomTable","descs","current","$set","arrayToScalar","prop","addOwner","owner","owners","onSymbol","setupSlot","typeId","slot","tokenName","hasSpecialSlot","setParent","configurable","assignId","setupRandomTable","tableName","assign","randomBuff","isActiveBuff","negativeEffects","randomDebuff","isActiveDebuff","timing","ephemeralOnAttack","isCancelable","isStatusEffect","isImmune","includeSkillEffectTags","icon","setupItems","consts","allClasses","classes","classIds","cls","classFlags","rarity","rarityId","rarities","slotId","itemTypes","setupCharacters","characters","activeSkills","passiveSkills","talents","isTalent","isNpc","grabSkill","error","shape","isNxN","talent","classId","symbolId","symbols","damageTypeId","damageTypes","supportType","supportTypeId","supportTypes","skills","skillsAll","toSummonChrs","isEngageSkill","_skills","enabled","sum","summonAll","multiAttack","mes","$bvToast","autoHideDelay","dispatchScrollEvent","dispatchEvent","CustomEvent","setArrayElement","ary","idx","pushArray","popArray","moveProperty","src","swapProperty","field","objectEqual","obj1","obj2","keys1","keys2","hasOwn","Navigation","mixins","stat","model","$$v","expression","_l","skillTypeFilter","$event","_s","skillTypes","tagCategory","tc","tci","ref","refInFor","display","domProps","_e","show","st","classFilter","engageFilter","symbolFilter","rarityFilter","damageTypeFilter","displayTypes","switchEngageAll","sortTypes","sortOrders","base","label","_n","updateStatus","boosts","resetStatus","pagedItems","directives","rawName","isInfoHighlighted","move","isTalentHighlighted","ds","di","switchEngage","si","getSkillClass","setSkillFilter","oi","moveToChr","smi","active","passive","resist","action","other","hp","atk","def","mag","res","tec","enableUpdateURL","prevURL","rawItems","setupDB","dstTags","handledTags","handlePredefinedTags","resetAllFilters","resetFilter","isSkillHighlighted","applyTalentFilter","applySkillTypeFilter","applyClassFilter","applySearchPatterns","filterItem","ok","doCount","highlighted","seri","decodeURL","skillType","free","supportTypeFilter","itemTypeFilter","itemClassesToHtml","isDescHighlighted","equipments","itemType","tabIndex","scopedSlots","_u","fn","proxy","options","optionFields","presetPAtk","presetMAtk","presetPDef","presetMDef","onCopyUrl","buffs","forEach","reset","buffFields","limit","weight","debuffs","prioritized","mainChrs","addPrioritized","excluded","addExcluded","progress","completed","allEffectsToHtml","ei","highlight","po","ri","chrEffectsToHtml","character","effectsToHtml","support","classfilter","symbolfilter","nullable","onClick","filteredChrs","required","chrs","default","rarityfilter","closeonclick","filterChr","pending","isGetSet","getOwnPropertyDescriptor","g","mainActive","structuredClone","jsonMainActive","mainPassive","jsonMainPassive","mainTalents","jsonMainTalents","supActive","jsonSupportActive","supPassive","jsonSupportPassive","jsonMainChrs","hidden","npcMainChrs","jsonNpcMainChrs","supChrs","jsonSupportChrs","npcSupChrs","jsonNpcSupportChrs","jsonItems","weapons","armors","helmets","accessories","amulets1","amulets2","searchTableWithUid","searchTableWithName","itemCount","effectTypeIndex","effectTypeNames","effectTypeTable","slotIndex","slotTable","et","setupFilter","getClassPassiveMain","className","getClassPassiveSummonMain","getClassPassiveNpcMain","getClassPassiveSupport","getClassPassiveSummonSupport","getClassPassiveNpcSupport","getEnchantPassiveList","getEnchantPassive","enchantName","getAmuletSkillList","filterMatchMainChr","filterMatchSupChr","removeEffectsOfSameType","doRemove","countEffect","sign","getParamClass","disabled","ctx","lines","getEffectValue","additionalClass","onBattle","unit","title","usedEffects","conflictedEffects","element","getElementById","classList","getEffectValues","effectList","Int32Array","fill","effectParamsToHtml","recs","_addPriorityItem","cb","_isInPrioritizeList","removePrioritized","isPrioritized","removeExcluded","isExcluded","multiply","stack","variable","findItemByUid","findItemByName","findItem","matchClass","mainCanEquip","supportCanEquip","aux","amuletType","validateItems","mainItems","supItems","supportItems","weapon","armor","helmet","accessory","amulet1","amulet2","serializeParams","handleOptions","handleFilter","handleBuffs","handleExcludes","deserializeParams","d","shift","getParamsUrl","location","encodeURIComponent","parseParamsUrl","optionValues","handler","deep","updated","beginSearch","popoverElements","$el","innerText","addPo","elements","removePo","ChrSelector","ItemPopovers","initialState","history","historyIndex","limit_","createUsedFlags","pickMax","highest","doSearch","targets","totalAmount","usedSlots","usedSkills","isAvailable","markAsUsed","hitLimit","acceptEffectValue","acceptEffects","prepassSkill","score","prepassChr","pickCandidates","sctx","scoreList","cctx","equipmentsScore","updateState","skillsScore","tmpSkills","summonScore","update","bestScore","bestSkillCount","bestResult","supScores","supportScore","mainScores","children","results","mctx","searchRecursive","updateBest","setTimeout","enableBuf","enableDebuf","presetAll","enabledEffects","sortModes","sortMode","skillScore","addSkill","scoreTableChr","CombinationBufSimulator","SelfBufSimulator","handleURLUpdate","specialBuffSkillsSingle","specialBuffSkillsMulti","classBonusBase","null","n2percent","classBonusMax","masterBonus","bookBonus","enchantBonus","amuletBonus","supportEnabled","attacked","dmgResult","mainEnabled","atkBuf","skillDamageRate","damageBuf","critical","criticalDamageRate","rangedPenalty","defBuf","calcDamage","damage","bpResult","stars","eqStars","enchant","calcBattlePower","embed","getSkillIcon","setMainChr","mainBoosts","mainSkills","onSkillDrag","onSkillDrop","dummyHandler","mainSkillList","mainItemSlots","mainClass","mainEnchantPassive","mainEnchants","valueP","valueF","statMainResult","setSupChr","supportBoosts","supItemSlots","supportAmuletSkills","supportEnchants","statSupportResult","autoEquipTypes","autoEquip","highscoreSearch","hssCharOnce","highscoreData","highscoreFields","row","highscoreReplay","slotfilter","slots","filteredItems","excludes","chrSelector","currentChr","ItemSelector","SkillSelector","AutoEquipType","BattlePower","Damage","Debuf","AttackPower","HP","Def","Res","Reset","prevMainEngage","draggingSkillIdx","updateItemScore","dmgTypes","debufTypes","buf","debuf","isAttackSkillSet","dmgEffects","debufEffects","autoMainSkill","autoMainSkillImpl","getSkillBPRate","autoEquipImpl","enchants","enchantPassive","amuletSkills","sortf","cmdlists","exec","hpP","hpF","atkP","atkF","defP","defF","magP","magF","resP","resF","cl","pickItemsMain","pickOptimalEnchants","pickItemsSupport","pickOptialAmuletSkills","msa","ssa","bp","filtered","used","usedChr","getStatMainArgs","enchantsP","enchantsF","getStatSupportArgs","calcStatMainImpl","bpr","calcStatMain","calcStatSupportImpl","calcStatSupport","onChange","fetching","messageClass","messages","message","userName","sendMessage","subscribed","thread","fetchCallback","anchors","destroyed","reload","ul","discard","sanitizeText","DamageSimulator","BattlePointSimulator","StatusSimulator","MessageBoard","simulation","toggleReplayList","importReplayFromUrl","playbackReplay","immediate","detailedDescription","battleData","battleList","battle","selectBattle","phaseTabIndex","phaseList","phase","selectPhase","button","stopPropagation","onCellRClick","cells","cell","getCellClass","isCellDraggable","onClickCell","onEnterCell","onLeaveCell","onDragCell","onDropCell","allActiveUnits","occupiedCells","fid","getUnitIconClass","isEnemy","hasSupport","isPlayer","loading","allPlayerUnits","isAlive","scoreToHtml","sim","activeEnemyUnits","isUnitHighlighted","isSummon","isNormalAttack","isPlayerTurn","selectedUnit","actionsToSelect","isOnMultiMove","isOnMultiAction","onClickWait","getActionClass","onClickAction","available","coolTime","turn","onPlayback","maxTurn","isEnemyTurn","endTurn","isPlaying","beginPlayback","eraseSelectedUnit","endSimulation","showConfirm","confirmAction","simOptions","simOptionFields","showReplayList","replayList","replayFields","getItemName","units","downloadReplay","hash","copyReplayUrl","delkey","deleteReplay","replay","uploadReplay","commentReplay","exportReplayAsFile","importReplayFromFile","_k","keyCode","onKeyReplay","states","toReversed","statePos","setReplayState","isAction","unitIcon","skillIcon","targetIcon","slotNames","saveLoadout","loadLoadout","clearLoadout","beginSimulation","slotName","slotDesc","unitTabIndex","playerUnits","ui","onDragUnit","onDropUnit","onDropLoadout","showEditor","editorData","edit","cid","effectValuesToHtml","bufCv","li","affectedSkills","randomEffects","affectedEffects","isTimed","$g","config","scalar","at","Shape","Diamond","Square","Directional","Special","HollowDiamond","HollowSquare","Direction","None","Up","Right","Down","Left","calcDistace","pos1","pos2","calcDirection","dir","areaStringToEnum","parseArea","genDiamondCoords","radius","seqX","seqY","sx","sy","x","isInside","distance","center","dx","dy","direction","line","callHandler","funcName","callees","evaluateCondition","condExp","val1","cmp","val2","==",">","<",">=","<=","!=","boolProps","Boolean","includesProps","cname","pname","queryFuncPros","fname","binaryExpressionProps","getExpressionProps","getTargetUnits","json","getAllyWithLowestHpRate","allies","activeUnits","lowest","hpRate","targetTable","自身","攻撃対象","スキル対象","範囲","getUnitsInArea","乱択","味方(低HP)","味方全体","敵全体","召喚先","召喚元","summoner","makeActionContext","damageRecordBase","total","onCloseCombat","onRangedCombat","terrain","onNormalAttack","onActiveSkill","onAreaSkill","onSingleSkill","activeBuffCount","activeDebuffCount","onOwnTurn","isOwnTurn","isOnEffect","getTokenCount","getNearAllyCount","getAlliesInArea","getNearEnemyCount","getEnemiesInArea","targetHp","targetActiveBuffCount","targetActiveDebuffCount","getTargetTokenCount","damageDealt","create","damageTaken","healDealt","healTaken","addDamage","fromChr","toChr","to","dealt","attackInProgress","taken","addHeal","makeChild","inheritDamage","_inheritProps","inheritBattleParams","inheritAttackerParams","isTargetGuardian","onGuard","onAttack","moveDistance","prevMoveDistance","getEffectMultiply","self","mul","token","targetToken","nearAllyCount","nearEnemyCount","by","source","最大HP","baseHp","アタック","baseAtk","ディフェンス","baseDef","マジック","baseMag","レジスト","baseRes","makeSimEffect","stop","isStopped","Infinity","activate","bySelf","getValue","_getValue","baseStat","makeSimSkill","ownerUnit","subactionTable","invoke","invokeShield","invokeRevive","invokeHeal","invokeAreaDamage","invokeFixedDamage","triggerOnMultiMove","invokeCtReduction","invokeBuffCanel","invokeDebuffCanel","invokeDoubleAttack","invokeMultiAction","invokeMultiMove","getBuffValue","makeRangeParams","rangeShape","makeAreaParams","wrapEffect","baseEffect","setupSubaction","info","entries","invokeSummon","SimUnit","makeUnit","coord","targetCell","setSummoner","addUnit","invokePositionManipulate","act","hasResist","getDir","directionalMove","maxMove","next","canMoveInto","teleport","引き寄せ","後退","テレポート","固定値","remain","receiveHeal","maxHp","apply","dmg","invokeBuffSteal","autoBuffCancel","removeEffectsByCondition","applyEffect","__proto__","invokeBuffCancel","conditions","invokeDebuffCancel","receiveDamage","selfDamage","succeeded","reduceSkillCT","invokeSupportAttack","hasBadStatus","UnitState","Ready","onMultiAction","onWait","onMultiMove","multiMoveValue","getDamageRate","startCoolTime","onFire","prevTarget","applyRandomSelection","eid","timedEffects","autoRandomSelection","onSimulationBegin","onSimulationEnd","onOwnTurnBegin","onOwnTurnEnd","onOpponentTurnBegin","onOpponentTurnEnd","onActionBegin","onActionEnd","onAttackBegin","onAttackEnd","onBattleBegin","onBattleEnd","onDeath","onRevive","$vue","mergeChrData","BaseUnit","emptyUnit","prevCoord","isValid","actions","enumerateOccupiedCells","_defineProperty","initialize","emp","setup","setupProperties","getterTable","makeSummonUnit","concat","swap","saveState","loadState","serializeChr","deserializeChr","ss","copyArray","mainChr","supChr","y","End","MultiAction","MultiMove","isDormant","isReady","isEnded","passives","selfEffects","areaEffects","baseStatus","baseRange","getConvertedBuffValue","baseMove","baseAttackPower","vue","classPassiveMain","classPassiveSup","summonUid","so","findUnit","found","autoRandomBuff","append","applyEffect_","evaluateBuffs","addUserEvent","removeEffect","removeEffect_","_addAreaEffect","beforeUpdateAreaEffects","guardians","updateAreaEffects","applyArea","enumerateUnitsInArea","applyGuard","afterUpdateAreaEffects","bufMain","bufMainCv","bufSup","bufSupCv","epDebuf","addValue","processEffect","specialDebuffTypes","dstRate","dstConverted","isAdditive","notForSupport","makeDesc","cnt","isRandom","reorder","ephemeralDebuf","getEphemeralDebuffValue","getRange","onSupportAttack","getAttackPower","onPhysicalDamage","getDefensePower","onSupportDefense","getDamageDealBuff","getDamageTakenBuff","getCriticalRate","getCriticalDamageRate","skillIds","_invokeSkillAction","wait","fireSkill","onIdle","invokeRegeneration","caster","reduceEffectDuration","eraseExpiredEffects","resumeEffectDuration","isExpired","condFunc","_dbgLog","_callHandler","addBalloons","setupHp","copyProps","replayVersion","Phase","Player","Enemy","SimContext","activePlayerUnits","phaseId","unitTable","statePos_","skillArgs","blinkCell","resetUnitPositionAll","baseUnits","comment","battleId","divX","divY","mapSize","findUnitByCoord","unitIdSeed","userEvents","constructUnit","findBaseUnit","o","pushState","playback","callNext","handlers","eraseUnit","evt","override","uop","Error","pf","makePathFinder","dist","getMoveDistance","prev","setUnitPath","getPath","interval","onfinish","passTurn","resetUnitPosition","notifyDead","enemyUnits","once","md","ed","sqrt","atan2","cd","PI","build","PathFinder","setObstacles","setOccupied","setStart","buildPath","getTerrain","isTerrainPassable","placeUnit","maxRadius","doAttack","attacker","targetStack","actx","aunit","onMainAttack","onMagicDamage","onRangedPenarty","forceJoinSupport","attackCount","dmgDealBuff","critDmgRate","rangedPenarty","breakOnKill","defender","dunit","dctx","onMainDefense","baseDmg","dmgTakenBuff","totalDamage","pop","getBattleResult","onCriticalHit","onDamage","getAreaAttackResult","doActionBegin","doActionEnd","doBattle","doSupportAttackSkill","guard","onAction","enemies","handleDeath","deadUnits","checkKill","onPlayerTurnBegin","finish","onPlayerTurnEnd","onEnemyTurnBegin","onEnemyTurnEnd","pid","xdiv","ydiv","shootDistance","isObstacle","isOccupied","getCell","getDistance","isPassable","isInMoveRange","isInFireRange","setShootRangeShape","setStartUnit","rangeParams","_chartCell","_shootCell","path","cur","nd","neighbors","ry","rx","cellToChr","skillRange","skillArea","skillDirection","selectedSkill","targetUnit","targetDirection","tools","toolStack","loadoutList","loadoutFields","loadoutHash","beforeCreate","enemy","allUnits","currentTool","prevTool","setupTools","nonSimulation","onRenderCell","showMoveRange","onEnable","onDisable","selectUnit","moveUnit","onCancel","styles","selectTarget","confirm","previewArea","previewDirection","isValidTarget","resetTools","cancelTools","pushTool","tool","pushTools","popTool","getPrevTool","zeroPad","obstacle","cellStyle","ally","findCellByCoord","selectAction","cancelAction","el","anim","offsetDistance","easing","backgroundColor","eraseWeakEnemies","serializeLoadout","deserializeLoadout","exportLoadoutAsFile","importLoadoutFromFile","file","onMessageChange","onMessageDiscard","serializeReplay","deserializeReplay","catch","finally","onDropReplay","fetchReplayList","author","form","method","addBaloon","transform","opacity","delay","addDamageBalloon","addHealBalloon","appendArray","block","dbgTest","Vue","use","Router","mode","process","routes","Info","MainCharacters","SupportCharacters","Items","Lookup","About","Misc","Battle","BootstrapVue","BootstrapVueIcons","productionTip","prototype","$idSeed","$genUniqueId","router","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","priority","notFulfilled","fulfilled","j","every","getter","__esModule","definition","enumerable","globalThis","Function","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}